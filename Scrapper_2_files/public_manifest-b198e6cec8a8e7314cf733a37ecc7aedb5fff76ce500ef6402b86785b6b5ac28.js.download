/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */

!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.3",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b="length"in a&&a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;

return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function aa(){return!0}function ba(){return!1}function ca(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ca()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ca()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?aa:ba):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=aa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=aa,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=aa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=ba;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ba),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function da(a){var b=ea.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var ea="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fa=/ jQuery\d+="(?:null|\d+)"/g,ga=new RegExp("<(?:"+ea+")[\\s/>]","i"),ha=/^\s+/,ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ja=/<([\w:]+)/,ka=/<tbody/i,la=/<|&#?\w+;/,ma=/<(?:script|style|link)/i,na=/checked\s*(?:[^=]|=\s*.checked.)/i,oa=/^$|\/(?:java|ecma)script/i,pa=/^true\/(.*)/,qa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sa=da(y),ta=sa.appendChild(y.createElement("div"));ra.optgroup=ra.option,ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead,ra.th=ra.td;function ua(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ua(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function va(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wa(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xa(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function ya(a){var b=pa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function za(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Aa(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Ba(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xa(b).text=a.text,ya(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!ga.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ta.innerHTML=a.outerHTML,ta.removeChild(f=ta.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ua(f),h=ua(a),g=0;null!=(e=h[g]);++g)d[g]&&Ba(e,d[g]);if(b)if(c)for(h=h||ua(a),d=d||ua(f),g=0;null!=(e=h[g]);g++)Aa(e,d[g]);else Aa(a,f);return d=ua(f,"script"),d.length>0&&za(d,!i&&ua(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=da(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(la.test(f)){h=h||o.appendChild(b.createElement("div")),i=(ja.exec(f)||["",""])[1].toLowerCase(),l=ra[i]||ra._default,h.innerHTML=l[1]+f.replace(ia,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&ha.test(f)&&p.push(b.createTextNode(ha.exec(f)[0])),!k.tbody){f="table"!==i||ka.test(f)?"<table>"!==l[1]||ka.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ua(p,"input"),va),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ua(o.appendChild(f),"script"),g&&za(h),c)){e=0;while(f=h[e++])oa.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ua(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&za(ua(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ua(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fa,""):void 0;if(!("string"!=typeof a||ma.test(a)||!k.htmlSerialize&&ga.test(a)||!k.leadingWhitespace&&ha.test(a)||ra[(ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ia,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ua(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ua(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&na.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ua(i,"script"),xa),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ua(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,ya),j=0;f>j;j++)d=g[j],oa.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qa,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Ca,Da={};function Ea(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fa(a){var b=y,c=Da[a];return c||(c=Ea(a,b),"none"!==c&&c||(Ca=(Ca||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ca[0].contentWindow||Ca[0].contentDocument).document,b.write(),b.close(),c=Ea(a,b),Ca.detach()),Da[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Ga=/^margin/,Ha=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ia,Ja,Ka=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ia=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Ha.test(g)&&Ga.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ia=function(a){return a.currentStyle},Ja=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ia(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ha.test(g)&&!Ka.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function La(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight),b.removeChild(i)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ma=/alpha\([^)]*\)/i,Na=/opacity\s*=\s*([^)]*)/,Oa=/^(none|table(?!-c[ea]).+)/,Pa=new RegExp("^("+S+")(.*)$","i"),Qa=new RegExp("^([+-])=("+S+")","i"),Ra={position:"absolute",visibility:"hidden",display:"block"},Sa={letterSpacing:"0",fontWeight:"400"},Ta=["Webkit","O","Moz","ms"];function Ua(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ta.length;while(e--)if(b=Ta[e]+c,b in a)return b;return d}function Va(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fa(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wa(a,b,c){var d=Pa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Ya(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ia(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Ja(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ha.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xa(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ja(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ua(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qa.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ua(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Ja(a,b,d)),"normal"===f&&b in Sa&&(f=Sa[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Oa.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Ra,function(){return Ya(a,b,d)}):Ya(a,b,d):void 0},set:function(a,c,d){var e=d&&Ia(a);return Wa(a,c,d?Xa(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Na.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Ma,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ma.test(f)?f.replace(Ma,e):f+" "+e)}}),m.cssHooks.marginRight=La(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Ja,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Ga.test(a)||(m.cssHooks[a+b].set=Wa)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ia(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Va(this,!0)},hide:function(){return Va(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Za(a,b,c,d,e){
return new Za.prototype.init(a,b,c,d,e)}m.Tween=Za,Za.prototype={constructor:Za,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Za.propHooks[this.prop];return a&&a.get?a.get(this):Za.propHooks._default.get(this)},run:function(a){var b,c=Za.propHooks[this.prop];return this.options.duration?this.pos=b=m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Za.propHooks._default.set(this),this}},Za.prototype.init.prototype=Za.prototype,Za.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Za.propHooks.scrollTop=Za.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Za.prototype.init,m.fx.step={};var $a,_a,ab=/^(?:toggle|show|hide)$/,bb=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cb=/queueHooks$/,db=[ib],eb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bb.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bb.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fb(){return setTimeout(function(){$a=void 0}),$a=m.now()}function gb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hb(a,b,c){for(var d,e=(eb[b]||[]).concat(eb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fa(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fa(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ab.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fa(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hb(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=db.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$a||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$a||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);g>f;f++)if(d=db[f].call(j,a,k,j.opts))return d;return m.map(k,hb,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kb,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],eb[c]=eb[c]||[],eb[c].unshift(b)},prefilter:function(a,b){b?db.unshift(a):db.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kb(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),m.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($a=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$a=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_a||(_a=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_a),_a=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lb=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lb,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mb,nb,ob=m.expr.attrHandle,pb=/^(?:checked|selected)$/i,qb=k.getSetAttribute,rb=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nb:mb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rb&&qb||!pb.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qb?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nb={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rb&&qb||!pb.test(c)?a.setAttribute(!qb&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ob[b]||m.find.attr;ob[b]=rb&&qb||!pb.test(b)?function(a,b,d){var e,f;return d||(f=ob[b],ob[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ob[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rb&&qb||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mb&&mb.set(a,b,c)}}),qb||(mb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ob.id=ob.name=ob.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mb.set},m.attrHooks.contenteditable={set:function(a,b,c){mb.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sb=/^(?:input|select|textarea|button|object)$/i,tb=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sb.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var ub=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ub," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vb=m.now(),wb=/\?/,xb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yb,zb,Ab=/#.*$/,Bb=/([?&])_=[^&]*/,Cb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Db=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Eb=/^(?:GET|HEAD)$/,Fb=/^\/\//,Gb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hb={},Ib={},Jb="*/".concat("*");try{zb=location.href}catch(Kb){zb=y.createElement("a"),zb.href="",zb=zb.href}yb=Gb.exec(zb.toLowerCase())||[];function Lb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mb(a,b,c,d){var e={},f=a===Ib;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nb(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Ob(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zb,type:"GET",isLocal:Db.test(yb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nb(Nb(a,m.ajaxSettings),b):Nb(m.ajaxSettings,a)},ajaxPrefilter:Lb(Hb),ajaxTransport:Lb(Ib),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cb.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zb)+"").replace(Ab,"").replace(Fb,yb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gb.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yb[1]&&c[2]===yb[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yb[3]||("http:"===yb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mb(Hb,k,b,v),2===t)return v;h=m.event&&k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Eb.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wb.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bb.test(e)?e.replace(Bb,"$1_="+vb++):e+(wb.test(e)?"&":"?")+"_="+vb++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jb+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mb(Ib,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Ob(k,v,c)),u=Pb(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qb=/%20/g,Rb=/\[\]$/,Sb=/\r?\n/g,Tb=/^(?:submit|button|image|reset|file)$/i,Ub=/^(?:input|select|textarea|keygen)/i;function Vb(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rb.test(a)?d(a,e):Vb(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vb(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vb(c,a[c],b,e);return d.join("&").replace(Qb,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Ub.test(this.nodeName)&&!Tb.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sb,"\r\n")}}):{name:b.name,value:c.replace(Sb,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zb()||$b()}:Zb;var Wb=0,Xb={},Yb=m.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Xb)Xb[a](void 0,!0)}),k.cors=!!Yb&&"withCredentials"in Yb,Yb=k.ajax=!!Yb,Yb&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xb[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xb[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zb(){try{return new a.XMLHttpRequest}catch(b){}}function $b(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _b=[],ac=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_b.pop()||m.expando+"_"+vb++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ac.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ac,"$1"+e):b.jsonp!==!1&&(b.url+=(wb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_b.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bc=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bc)return bc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cc=a.document.documentElement;function dc(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cc;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cc})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=La(k.pixelPosition,function(a,c){return c?(c=Ja(a,b),Ha.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ec=a.jQuery,fc=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fc),b&&a.jQuery===m&&(a.jQuery=ec),m},typeof b===K&&(a.jQuery=a.$=m),m});
/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright  2001 Robert Penner
 * All rights reserved.
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright  2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e},easeOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k)==1){return e+l}if(!j){j=k*0.3}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}return g*Math.pow(2,-10*h)*Math.sin((h*k-i)*(2*Math.PI)/j)+l+e},easeInOutElastic:function(f,h,e,l,k){var i=1.70158;var j=0;var g=l;if(h==0){return e}if((h/=k/2)==2){return e+l}if(!j){j=k*(0.3*1.5)}if(g<Math.abs(l)){g=l;var i=j/4}else{var i=j/(2*Math.PI)*Math.asin(l/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*k-i)*(2*Math.PI)/j)*0.5+l+e},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});
// Avoid `console` errors in browsers that lack a console.
if (!(window.console && console.log)) {
    (function() {
        var noop = function() {};
        var methods = ['assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error', 'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log', 'markTimeline', 'profile', 'profileEnd', 'markTimeline', 'table', 'time', 'timeEnd', 'timeStamp', 'trace', 'warn'];
        var length = methods.length;
        var console = window.console = {};
        while (length--) {
            console[methods[length]] = noop;
        }
    }());
};

// Place any jQuery/helper plugins in here.
;
/*! modernizr 3.0.0 (Custom Build) | MIT *
 * http://modernizr.com/download/?-canvas-cookies-cssanimations-csstransforms-csstransforms3d-csstransitions-flash-flexbox-flexboxlegacy-flexboxtweener-fullscreen-geolocation-hiddenscroll-picture-preserve3d-srcdoc-svg-touchevents-video-webgl !*/

!function(e,n,t){function o(e){var n=T.className,t=Modernizr._config.classPrefix||"";if(C&&(n=n.baseVal),Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),C?T.className.baseVal=n:T.className=n)}function r(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):C?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function i(e,n){return typeof e===n}function s(){var e,n,t,o,r,s,a;for(var l in w){if(e=[],n=w[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=i(n.fn,"function")?n.fn():n.fn,r=0;r<e.length;r++)s=e[r],a=s.split("."),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),x.push((o?"":"no-")+a.join("-"))}}function a(){var e=n.body;return e||(e=r(C?"svg":"body"),e.fake=!0),e}function l(e,n){if("object"==typeof e)for(var t in e)P(e,t)&&l(t,e[t]);else{e=e.toLowerCase();var r=e.split("."),i=Modernizr[r[0]];if(2==r.length&&(i=i[r[1]]),"undefined"!=typeof i)return Modernizr;n="function"==typeof n?n():n,1==r.length?Modernizr[r[0]]=n:(!Modernizr[r[0]]||Modernizr[r[0]]instanceof Boolean||(Modernizr[r[0]]=new Boolean(Modernizr[r[0]])),Modernizr[r[0]][r[1]]=n),o([(n&&0!=n?"":"no-")+r.join("-")]),Modernizr._trigger(e,n)}return Modernizr}function c(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,"")}function f(e,t,o,i){var s,l,c,f,d="modernizr",u=r("div"),p=a();if(parseInt(o,10))for(;o--;)c=r("div"),c.id=i?i[o]:d+(o+1),u.appendChild(c);return s=r("style"),s.type="text/css",s.id="s"+d,(p.fake?p:u).appendChild(s),p.appendChild(u),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),u.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",f=T.style.overflow,T.style.overflow="hidden",T.appendChild(p)),l=t(u,e),p.fake?(p.parentNode.removeChild(p),T.style.overflow=f,T.offsetHeight):u.parentNode.removeChild(u),!!l}function d(e,n){return!!~(""+e).indexOf(n)}function u(e,n){return function(){return e.apply(n,arguments)}}function p(e,n,t){var o;for(var r in e)if(e[r]in n)return t===!1?e[r]:(o=n[e[r]],i(o,"function")?u(o,t||n):o);return!1}function v(e){return e.replace(/([A-Z])/g,function(e,n){return"-"+n.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(n,o){var r=n.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(v(n[r]),o))return!0;return!1}if("CSSSupportsRule"in e){for(var i=[];r--;)i.push("("+v(n[r])+":"+o+")");return i=i.join(" or "),f("@supports ("+i+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return t}function m(e,n,o,s){function a(){f&&(delete O.style,delete O.modElem)}if(s=i(s,"undefined")?!1:s,!i(o,"undefined")){var l=h(e,o);if(!i(l,"undefined"))return l}for(var f,u,p,v,m,g=["modernizr","tspan"];!O.style;)f=!0,O.modElem=r(g.shift()),O.style=O.modElem.style;for(p=e.length,u=0;p>u;u++)if(v=e[u],m=O.style[v],d(v,"-")&&(v=c(v)),O.style[v]!==t){if(s||i(o,"undefined"))return a(),"pfx"==n?v:!0;try{O.style[v]=o}catch(y){}if(O.style[v]!=m)return a(),"pfx"==n?v:!0}return a(),!1}function g(e,n,t,o,r){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+z.join(s+" ")+s).split(" ");return i(n,"string")||i(n,"undefined")?m(a,n,o,r):(a=(e+" "+A.join(s+" ")+s).split(" "),p(a,n,t))}function y(e,n,o){return g(e,t,t,n,o)}var x=[],w=[],b={_version:"3.0.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){w.push({name:e,fn:n,options:t})},addAsyncTest:function(e){w.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=b,Modernizr=new Modernizr,Modernizr.addTest("cookies",function(){try{n.cookie="cookietest=1";var e=-1!=n.cookie.indexOf("cookietest=");return n.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}}),Modernizr.addTest("geolocation","geolocation"in navigator),Modernizr.addTest("svg",!!n.createElementNS&&!!n.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),Modernizr.addTest("picture","HTMLPictureElement"in e);var T=n.documentElement,C="svg"===T.nodeName.toLowerCase();Modernizr.addTest("canvas",function(){var e=r("canvas");return!(!e.getContext||!e.getContext("2d"))}),Modernizr.addTest("video",function(){var e=r("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),n.vp9=e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),n.hls=e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(t){}return n}),Modernizr.addTest("webgl",function(){var n=r("canvas"),t="probablySupportsContext"in n?"probablySupportsContext":"supportsContext";return t in n?n[t]("webgl")||n[t]("experimental-webgl"):"WebGLRenderingContext"in e}),Modernizr.addTest("srcdoc","srcdoc"in r("iframe"));var S=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];b._prefixes=S;var _="CSS"in e&&"supports"in e.CSS,k="supportsCSS"in e;Modernizr.addTest("supports",_||k);var P;!function(){var e={}.hasOwnProperty;P=i(e,"undefined")||i(e.call,"undefined")?function(e,n){return n in e&&i(e.constructor.prototype[n],"undefined")}:function(n,t){return e.call(n,t)}}(),b._l={},b.on=function(e,n){this._l[e]||(this._l[e]=[]),this._l[e].push(n),Modernizr.hasOwnProperty(e)&&setTimeout(function(){Modernizr._trigger(e,Modernizr[e])},0)},b._trigger=function(e,n){if(this._l[e]){var t=this._l[e];setTimeout(function(){var e,o;for(e=0;e<t.length;e++)(o=t[e])(n)},0),delete this._l[e]}},Modernizr._q.push(function(){b.addTest=l}),Modernizr.addAsyncTest(function(){var t,o,i=function(e){e.fake&&e.parentNode&&e.parentNode.removeChild(e)},s=function(e,n){var t=!!e;if(t&&(t=new Boolean(t),t.blocked="blocked"===e),l("flash",function(){return t}),n&&p.contains(n)){for(;n.parentNode!==p;)n=n.parentNode;p.removeChild(n)}};try{o="ActiveXObject"in e&&"Pan"in new e.ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(c){}if(t=!("plugins"in navigator&&"Shockwave Flash"in navigator.plugins||o),t||C)s(!1);else{var f,d,u=r("embed"),p=a();if(u.type="application/x-shockwave-flash",p.appendChild(u),T.appendChild(p),!("Pan"in u||o))return s("blocked",u),void i(p);f=function(){return T.contains(p)?(T.contains(u)?(d=u.style.cssText,""!==d?s("blocked",u):s(!0,u)):s("blocked"),void i(p)):(p=n.body||p,u=r("embed"),u.type="application/x-shockwave-flash",p.appendChild(u),setTimeout(f,1e3))},setTimeout(f,10)}});var E=b.testStyles=f;Modernizr.addTest("hiddenscroll",function(){return E("#modernizr {width:100px;height:100px;overflow:scroll}",function(e){return e.offsetWidth===e.clientWidth})}),Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",S.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");E(o,function(e){t=9===e.offsetTop})}return t});var N="Moz O ms Webkit",z=b._config.usePrefixes?N.split(" "):[];b._cssomPrefixes=z;var j=function(n){var o,r=S.length,i=e.CSSRule;if("undefined"==typeof i)return t;if(!n)return!1;if(n=n.replace(/^@/,""),o=n.replace(/-/g,"_").toUpperCase()+"_RULE",o in i)return"@"+n;for(var s=0;r>s;s++){var a=S[s],l=a.toUpperCase()+"_"+o;if(l in i)return"@-"+a.toLowerCase()+"-"+n}return!1};b.atRule=j;var A=b._config.usePrefixes?N.toLowerCase().split(" "):[];b._domPrefixes=A;var L={elem:r("modernizr")};Modernizr._q.push(function(){delete L.elem});var O={style:L.elem.style};Modernizr._q.unshift(function(){delete O.style}),b.testAllProps=g;var R=b.prefixed=function(e,n,t){return 0===e.indexOf("@")?j(e):(-1!=e.indexOf("-")&&(e=c(e)),n?g(e,n,t):g(e,"pfx"))};Modernizr.addTest("fullscreen",!(!R("exitFullscreen",n,!1)&&!R("cancelFullScreen",n,!1))),b.testAllProps=y,Modernizr.addTest("flexbox",y("flexBasis","1px",!0)),Modernizr.addTest("cssanimations",y("animationName","a",!0)),Modernizr.addTest("flexboxlegacy",y("boxDirection","reverse",!0)),Modernizr.addTest("flexboxtweener",y("flexAlign","end",!0)),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&y("transform","scale(1)",!0)}),Modernizr.addTest("csstransforms3d",function(){var e=!!y("perspective","1px",!0),n=Modernizr._config.usePrefixes;if(e&&(!n||"webkitPerspective"in T.style)){var t;Modernizr.supports?t="@supports (perspective: 1px)":(t="@media (transform-3d)",n&&(t+=",(-webkit-transform-3d)")),t+="{#modernizr{left:9px;position:absolute;height:5px;margin:0;padding:0;border:0}}",E(t,function(n){e=9===n.offsetLeft&&5===n.offsetHeight})}return e}),Modernizr.addTest("csstransitions",y("transition","all",!0)),Modernizr.addTest("preserve3d",y("transformStyle","preserve-3d")),s(),o(x),delete b.addTest,delete b.addAsyncTest;for(var $=0;$<Modernizr._q.length;$++)Modernizr._q[$]();e.Modernizr=Modernizr}(window,document);
/* http://keith-wood.name/backgroundPos.html
   Background position animation for jQuery v1.1.1.
   Written by Keith Wood (kbwood{at}iinet.com.au) November 2010.
   Available under the MIT (https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt) license. 
   Please attribute the author if you use it. */

(function($){var g=!!$.Tween;if(g){$.Tween.propHooks['backgroundPosition']={get:function(a){return parseBackgroundPosition($(a.elem).css(a.prop))},set:setBackgroundPosition}}else{$.fx.step['backgroundPosition']=setBackgroundPosition};function parseBackgroundPosition(c){var d=(c||'').split(/ /);var e={center:'50%',left:'0%',right:'100%',top:'0%',bottom:'100%'};var f=function(a){var b=(e[d[a]]||d[a]||'50%').match(/^([+-]=)?([+-]?\d+(\.\d*)?)(.*)$/);d[a]=[b[1],parseFloat(b[2]),b[4]||'px']};if(d.length==1&&$.inArray(d[0],['top','bottom'])>-1){d[1]=d[0];d[0]='50%'}f(0);f(1);return d}function setBackgroundPosition(a){if(!a.set){initBackgroundPosition(a)}$(a.elem).css('background-position',((a.pos*(a.end[0][1]-a.start[0][1])+a.start[0][1])+a.end[0][2])+' '+((a.pos*(a.end[1][1]-a.start[1][1])+a.start[1][1])+a.end[1][2]))}function initBackgroundPosition(a){a.start=parseBackgroundPosition($(a.elem).css('backgroundPosition'));a.end=parseBackgroundPosition(a.end);for(var i=0;i<a.end.length;i++){if(a.end[i][0]){a.end[i][1]=a.start[i][1]+(a.end[i][0]=='-='?-1:+1)*a.end[i][1]}}a.set=true}})(jQuery);
/*
 * SimpleModal 1.4.4 - jQuery Plugin
 * http://simplemodal.com/
 * Copyright (c) 2013 Eric Martin
 * Licensed under MIT and GPL
 * Date: Sun, Jan 20 2013 15:58:56 -0800
 */

(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){var j=[],n=b(document),k=navigator.userAgent.toLowerCase(),l=b(window),g=[],o=null,p=/msie/.test(k)&&!/opera/.test(k),q=/opera/.test(k),m,r;m=p&&/msie 6./.test(k)&&"object"!==typeof window.XMLHttpRequest;r=p&&/msie 7.0/.test(k);b.modal=function(a,h){return b.modal.impl.init(a,h)};b.modal.close=function(){b.modal.impl.close()};b.modal.focus=function(a){b.modal.impl.focus(a)};b.modal.setContainerDimensions=
function(){b.modal.impl.setContainerDimensions()};b.modal.setPosition=function(){b.modal.impl.setPosition()};b.modal.update=function(a,h){b.modal.impl.update(a,h)};b.fn.modal=function(a){return b.modal.impl.init(this,a)};b.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1E3,
close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null};b.modal.impl={d:{},init:function(a,h){if(this.d.data)return!1;o=p&&!b.support.boxModel;this.o=b.extend({},b.modal.defaults,h);this.zIndex=this.o.zIndex;this.occb=!1;if("object"===typeof a){if(a=a instanceof b?a:b(a),this.d.placeholder=!1,0<a.parent().parent().size()&&(a.before(b("<span></span>").attr("id",
"simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=a.css("display"),!this.o.persist))this.d.orig=a.clone(!0)}else if("string"===typeof a||"number"===typeof a)a=b("<div></div>").html(a);else return alert("SimpleModal Error: Unsupported data type: "+typeof a),this;this.create(a);this.open();b.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]);return this},create:function(a){this.getDimensions();if(this.o.modal&&m)this.d.iframe=b('<iframe src="javascript:false;"></iframe>').css(b.extend(this.o.iframeCss,
{display:"none",opacity:0,position:"fixed",height:g[0],width:g[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo);this.d.overlay=b("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(b.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?j[0]:0,width:this.o.modal?j[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo);this.d.container=b("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(b.extend({position:this.o.fixed?
"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?b(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo);this.d.wrap=b("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container);this.d.data=a.attr("id",a.attr("id")||this.o.dataId).addClass("simplemodal-data").css(b.extend(this.o.dataCss,{display:"none"})).appendTo("body");this.setContainerDimensions();
this.d.data.appendTo(this.d.wrap);(m||o)&&this.fixIE()},bindEvents:function(){var a=this;b("."+a.o.closeClass).bind("click.simplemodal",function(b){b.preventDefault();a.close()});a.o.modal&&a.o.close&&a.o.overlayClose&&a.d.overlay.bind("click.simplemodal",function(b){b.preventDefault();a.close()});n.bind("keydown.simplemodal",function(b){a.o.modal&&9===b.keyCode?a.watchTab(b):a.o.close&&a.o.escClose&&27===b.keyCode&&(b.preventDefault(),a.close())});l.bind("resize.simplemodal orientationchange.simplemodal",
function(){a.getDimensions();a.o.autoResize?a.setContainerDimensions():a.o.autoPosition&&a.setPosition();m||o?a.fixIE():a.o.modal&&(a.d.iframe&&a.d.iframe.css({height:g[0],width:g[1]}),a.d.overlay.css({height:j[0],width:j[1]}))})},unbindEvents:function(){b("."+this.o.closeClass).unbind("click.simplemodal");n.unbind("keydown.simplemodal");l.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var a=this.o.position;b.each([this.d.iframe||null,!this.o.modal?null:this.d.overlay,
"fixed"===this.d.container.css("position")?this.d.container:null],function(b,e){if(e){var f=e[0].style;f.position="absolute";if(2>b)f.removeExpression("height"),f.removeExpression("width"),f.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),f.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var c,d;a&&a.constructor===
Array?(c=a[0]?"number"===typeof a[0]?a[0].toString():a[0].replace(/px/,""):e.css("top").replace(/px/,""),c=-1===c.indexOf("%")?c+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(c.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',a[1]&&(d="number"===typeof a[1]?
a[1].toString():a[1].replace(/px/,""),d=-1===d.indexOf("%")?d+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(d.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(c='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',
d='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"');f.removeExpression("top");f.removeExpression("left");f.setExpression("top",c);f.setExpression("left",d)}}})},focus:function(a){var h=this,a=a&&-1!==b.inArray(a,["first","last"])?a:"first",e=b(":input:enabled:visible:"+a,h.d.wrap);setTimeout(function(){0<e.length?e.focus():h.d.wrap.focus()},
10)},getDimensions:function(){var a="undefined"===typeof window.innerHeight?l.height():window.innerHeight;j=[n.height(),n.width()];g=[a,l.width()]},getVal:function(a,b){return a?"number"===typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?g[0]:g[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){if(!this.d.data)return!1;this.d.origHeight=this.getVal(a,"h");this.d.origWidth=this.getVal(b,"w");this.d.data.hide();a&&this.d.container.css("height",a);b&&this.d.container.css("width",
b);this.setContainerDimensions();this.d.data.show();this.o.focus&&this.focus();this.unbindEvents();this.bindEvents()},setContainerDimensions:function(){var a=m||r,b=this.d.origHeight?this.d.origHeight:q?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),a=this.d.origWidth?this.d.origWidth:q?this.d.container.width():this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),e=this.d.data.outerHeight(!0),f=
this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||b;this.d.origWidth=this.d.origWidth||a;var c=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,d=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,c=c&&c<g[0]?c:g[0],d=d&&d<g[1]?d:g[1],i=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",b=b?this.o.autoResize&&b>c?c:b<i?i:b:e?e>c?c:this.o.minHeight&&"auto"!==i&&e<i?i:e:i,c=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>d?d:a<c?c:a:f?
f>d?d:this.o.minWidth&&"auto"!==c&&f<c?c:f:c;this.d.container.css({height:b,width:a});this.d.wrap.css({overflow:e>b||f>a?"auto":"visible"});this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=g[0]/2-this.d.container.outerHeight(!0)/2;b=g[1]/2-this.d.container.outerWidth(!0)/2;var e="fixed"!==this.d.container.css("position")?l.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(a=e+(this.o.position[0]||a),b=this.o.position[1]||b):
a=e+a;this.d.container.css({left:b,top:a})},watchTab:function(a){if(0<b(a.target).parents(".simplemodal-container").length){if(this.inputs=b(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),!a.shiftKey&&a.target===this.inputs[this.inputs.length-1]||a.shiftKey&&a.target===this.inputs[0]||0===this.inputs.length)a.preventDefault(),this.focus(a.shiftKey?"last":"first")}else a.preventDefault(),this.focus()},open:function(){this.d.iframe&&this.d.iframe.show();b.isFunction(this.o.onOpen)?
this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show());this.o.focus&&this.focus();this.bindEvents()},close:function(){if(!this.d.data)return!1;this.unbindEvents();if(b.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var a=b("#simplemodal-placeholder");this.o.persist?a.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),a.replaceWith(this.d.orig))}else this.d.data.hide().remove();
this.d.container.hide().remove();this.d.overlay.hide();this.d.iframe&&this.d.iframe.hide().remove();this.d.overlay.remove();this.d={}}}}});
//Parallax ImageScroll Version: 0.2.3
!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&"object"==typeof module.exports?module.exports=i(require("jquery")):i(t.jQuery)}(this,function(t){"use strict";function i(t,i){return typeof t===i}function e(t,i){return!!~(""+t).indexOf(i)}function s(t,i){for(var s in t){var o=t[s];if(!e(o,"-")&&void 0!==p[o])return"pfx"==i?o:!0}return!1}function o(t,e,s){for(var o in t){var n=e[t[o]];if(void 0!==n)return s===!1?t[o]:i(n,"function")?n.bind(s||e):n}return!1}function n(t,e,n){var r=t.charAt(0).toUpperCase()+t.slice(1),h=(t+" "+H.join(r+" ")+r).split(" ");return i(e,"string")||i(e,"undefined")?s(h,e):(h=(t+" "+w.join(r+" ")+r).split(" "),o(h,e,n))}var r,h,l={image:null,imageAttribute:"image",holderClass:"imageHolder",imgClass:"img-holder-img",container:t("body"),windowObject:t(window),speed:.2,coverRatio:.75,holderMinHeight:200,holderMaxHeight:null,extraHeight:0,mediaWidth:1600,mediaHeight:900,parallax:!0,touch:!1},a="imageScroll",d="plugin_"+a,c=function(t,i){return function(){return t.apply(i,arguments)}},g={},m=document.documentElement,f="imageScrollModernizr",u=document.createElement(f),p=u.style,v="Webkit Moz O ms",H=v.split(" "),w=v.toLowerCase().split(" "),b={},y=0,x="",$=function(t,i,e,s){var o,n,r,h,l=document.createElement("div"),a=document.body,d=a||document.createElement("body");if(parseInt(e,10))for(;e--;)r=document.createElement("div"),r.id=s?s[e]:f+(e+1),l.appendChild(r);return o=["&#173;",'<style id="s',f,'">',t,"</style>"].join(""),l.id=f,(a?l:d).innerHTML+=o,d.appendChild(l),a||(d.style.background="",d.style.overflow="hidden",h=m.style.overflow,m.style.overflow="hidden",m.appendChild(d)),n=i(l,t),a?l.parentNode.removeChild(l):(d.parentNode.removeChild(d),m.style.overflow=h),!!n};return b.csstransforms=function(){return!!n("transform")},b.csstransforms3d=function(){var t=!!n("perspective");return t&&"webkitPerspective"in m.style&&$("@media (transform-3d),(-webkit-transform-3d){#imageScrollModernizr{left:9px;position:absolute;height:3px;}}",function(i){t=9===i.offsetLeft&&3===i.offsetHeight}),t},g.prefixed=function(t,i,e){return i?n(t,i,e):n(t,"pfx")},window.requestAnimationFrame=g.prefixed("requestAnimationFrame",window)||function(t){var i=(new Date).getTime(),e=Math.max(0,16-(i-y)),s=window.setTimeout(function(){t(i+e)},e);return y=i+e,s},b.csstransforms3d()?x="csstransforms3d":b.csstransforms()&&(x="csstransforms"),""!==x&&(h=g.prefixed("transform")),r=function(i,e){this.$imageHolder=t(i),this.settings=t.extend({},l,e),this.image=this.$imageHolder.data(this.settings.imageAttribute)||this.settings.image,this.mediaWidth=this.$imageHolder.data("width")||this.settings.mediaWidth,this.mediaHeight=this.$imageHolder.data("height")||this.settings.mediaHeight,this.coverRatio=this.$imageHolder.data("cover-ratio")||this.settings.coverRatio,this.holderMinHeight=this.$imageHolder.data("min-height")||this.settings.holderMinHeight,this.holderMaxHeight=this.$imageHolder.data("max-height")||this.settings.holderMaxHeight,this.extraHeight=this.$imageHolder.data("extra-height")||this.settings.extraHeight,this.ticking=!1,this.refresh=c(this.refresh,this),this._onScroll=c(this._onScroll,this),this._defaults=l,this._name=a,this.init()},t.extend(r.prototype,{constructor:r,init:function(){if(!this.image)throw new Error("You need to provide either a data-img attr or an image option");this.$scrollingElement=t("<img/>",{src:this.image}).addClass(this.settings.imgClass),this.settings.touch===!0?this.$scrollingElement.css({maxWidth:"100%"}).prependTo(this.$imageHolder):this.settings.parallax===!0?(this.$scrollerHolder=t("<div/>",{html:this.$imageHolder.html()}).css({top:0,visibility:"hidden",position:"fixed",overflow:"hidden"}).addClass(this.settings.holderClass).prependTo(this.settings.container),this.$imageHolder.css("visibility","hidden").empty(),this.$scrollingElement.css({position:"absolute",top:0,left:0,visibility:"hidden",maxWidth:"none"}).prependTo(this.$scrollerHolder)):(this.$scrollerHolder=this.$imageHolder.css({overflow:"hidden"}),this.$scrollingElement.css({position:"relative",overflow:"hidden"}).prependTo(this.$imageHolder)),this.settings.touch===!1&&(this._bindEvents(),this.refresh())},_adjustImgHolderHeights:function(){var t,i,e,s,o,n,r,h,l,a=this.settings.windowObject.height(),d=this.settings.windowObject.width()-this.settings.container.offset().left,c=this.coverRatio*a;c=null===this.holderMaxHeight||this.holderMaxHeight>c?Math.floor(c):this.holderMaxHeight,c=this.holderMinHeight<c?Math.floor(c):this.holderMinHeight,c+=this.extraHeight,h=Math.floor(a-(a-c)*this.settings.speed),n=Math.round(this.mediaWidth*(h/this.mediaHeight)),n>=d?r=h:(n=d,r=Math.round(this.mediaHeight*(n/this.mediaWidth))),l=h-c,o=a+c,s=2*a*(1-this.settings.speed)-l,t=-(l/2+(r-h)/2),i=Math.round((n-d)*-.5),e=t-s/2,this.$scrollingElement.css({height:r,width:n}),this.$imageHolder.height(c),this.$scrollerHolder.css({height:c,width:n}),this.scrollingState={winHeight:a,fromY:e,imgTopPos:t,imgLeftPos:i,imgHolderHeight:c,imgScrollingDistance:s,travelDistance:o,holderDistanceFromTop:this.$imageHolder.offset().top-this.settings.windowObject.scrollTop()}},_bindEvents:function(){this.settings.windowObject.on("resize",this.refresh),this.settings.parallax===!0&&this.settings.windowObject.on("scroll",this._onScroll)},_unBindEvents:function(){this.settings.windowObject.off("resize",this.refresh),this.settings.parallax===!0&&this.settings.windowObject.off("scroll",this._onScroll)},_onScroll:function(){this.scrollingState.holderDistanceFromTop=this.$imageHolder.offset().top-this.settings.windowObject.scrollTop(),this._requestTick()},_requestTick:function(){var t=this;this.ticking||(this.ticking=!0,requestAnimationFrame(function(){t._updatePositions()}))},_updatePositions:function(){if(this.scrollingState.holderDistanceFromTop<=this.scrollingState.winHeight&&this.scrollingState.holderDistanceFromTop>=-this.scrollingState.imgHolderHeight){var t=this.scrollingState.holderDistanceFromTop+this.scrollingState.imgHolderHeight,i=t/this.scrollingState.travelDistance,e=Math.round(this.scrollingState.fromY+this.scrollingState.imgScrollingDistance*(1-i)),s=this.settings.container.offset().left;this.$scrollerHolder.css(this._getCSSObject({transform:h,left:s,x:Math.ceil(this.scrollingState.imgLeftPos)+(""===x&&s>0?s:0),y:Math.round(this.scrollingState.holderDistanceFromTop),visibility:"visible"})),this.$scrollingElement.css(this._getCSSObject({transform:h,x:0,y:e,visibility:"visible"}))}else this.$scrollerHolder.css({visibility:"hidden"}),this.$scrollingElement.css({visibility:"hidden"});this.ticking=!1},_updateFallbackPositions:function(){this.$scrollerHolder.css({width:"100%"}),this.$scrollingElement.css({top:this.scrollingState.imgTopPos,left:this.scrollingState.imgLeftPos})},_getCSSObject:function(t){return"csstransforms3d"===x?t.transform="translate3d("+t.x+"px, "+t.y+"px, 0)":"csstransforms"===x?t.transform="translate("+t.x+"px, "+t.y+"px)":(t.top=t.y,t.left=t.x),delete t.x,delete t.y,t},enable:function(){this.settings.touch===!1&&(this._bindEvents(),this.refresh())},disable:function(){this.settings.touch===!1&&this._unBindEvents()},refresh:function(){this.settings.touch===!1&&(this._adjustImgHolderHeights(),this.settings.parallax===!0?this._requestTick():this._updateFallbackPositions())},destroy:function(){this.settings.touch===!1&&this._unBindEvents(),this.settings.touch===!0?(this.$imageHolder.removeAttr("style"),this.$scrollingElement.remove()):this.settings.parallax===!0?(this.$scrollerHolder.find("."+this.settings.imgClass).remove(),this.$imageHolder.css({visibility:"visible",height:"auto"}).html(this.$scrollerHolder.html()),this.$scrollerHolder.remove()):(this.$imageHolder.css({overflow:"auto"}).removeAttr("style"),this.$scrollingElement.remove()),this.$imageHolder.removeData()}}),t.fn[a]=function(i){return void 0===i||"object"==typeof i?this.each(function(){t.data(this,d)||t.data(this,d,new r(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?this.each(function(){var e=t.data(this,d);e instanceof r&&"function"==typeof e[i]&&e[i].apply(e,Array.prototype.slice.call(arguments,1))}):void 0},t.fn[a].defaults=r.defaults=l,t.fn[a].Plugin=r,r});
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.6.0
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */

!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function c(c,d){var f,e=this;e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(b,c){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.focussed=!1,e.interrupted=!1,e.hidden="hidden",e.paused=!0,e.positionProp=null,e.respondTo=null,e.rowCount=1,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,d,f),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,"undefined"!=typeof document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.registerBreakpoints(),e.init(!0)}var b=0;return c}(),b.prototype.activateADA=function(){var a=this;a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),e.options.vertical===!1?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.getNavTarget=function(){var b=this,c=b.options.asNavFor;return c&&null!==c&&(c=a(c).not(b.$slider)),c},b.prototype.asNavFor=function(b){var c=this,d=c.getNavTarget();null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};b.options.fade===!1?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayClear(),a.slideCount>a.options.slidesToShow&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this,b=a.currentSlide+a.options.slidesToScroll;a.paused||a.interrupted||a.focussed||(a.options.infinite===!1&&(1===a.direction&&a.currentSlide+1===a.slideCount-1?a.direction=0:0===a.direction&&(b=a.currentSlide-a.options.slidesToScroll,a.currentSlide-1===0&&(a.direction=1))),a.slideHandler(b))},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var c,d,b=this;if(b.options.dots===!0&&b.slideCount>b.options.slidesToShow){for(b.$slider.addClass("slick-dotted"),d=a("<ul />").addClass(b.options.dotsClass),c=0;c<=b.getDotCount();c+=1)d.append(a("<li />").append(b.options.customPaging.call(this,b,c)));b.$dots=d.appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var b,c,d,e,f,g,h,a=this;if(e=document.createDocumentFragment(),g=a.$slider.children(),a.options.rows>1){for(h=a.options.slidesPerRow*a.options.rows,f=Math.ceil(g.length/h),b=0;f>b;b++){var i=document.createElement("div");for(c=0;c<a.options.rows;c++){var j=document.createElement("div");for(d=0;d<a.options.slidesPerRow;d++){var k=b*h+(c*a.options.slidesPerRow+d);g.get(k)&&j.appendChild(g.get(k))}i.appendChild(j)}e.appendChild(i)}a.$slider.empty().append(e),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var e,f,g,d=this,h=!1,i=d.$slider.width(),j=window.innerWidth||a(window).width();if("window"===d.respondTo?g=j:"slider"===d.respondTo?g=i:"min"===d.respondTo&&(g=Math.min(j,i)),d.options.responsive&&d.options.responsive.length&&null!==d.options.responsive){f=null;for(e in d.breakpoints)d.breakpoints.hasOwnProperty(e)&&(d.originalSettings.mobileFirst===!1?g<d.breakpoints[e]&&(f=d.breakpoints[e]):g>d.breakpoints[e]&&(f=d.breakpoints[e]));null!==f?null!==d.activeBreakpoint?(f!==d.activeBreakpoint||c)&&(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=d.originalSettings,b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b),h=f),b||h===!1||d.$slider.trigger("breakpoint",[d,h])}},b.prototype.changeSlide=function(b,c){var f,g,h,d=this,e=a(b.currentTarget);switch(e.is("a")&&b.preventDefault(),e.is("li")||(e=e.closest("li")),h=d.slideCount%d.options.slidesToScroll!==0,f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c),e.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var c,d,b=this;if(c=b.getNavigableIndexes(),d=0,a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&a("li",b.$dots).off("click.slick",b.changeSlide).off("mouseenter.slick",a.proxy(b.interrupt,b,!0)).off("mouseleave.slick",a.proxy(b.interrupt,b,!1)),b.$slider.off("focus.slick blur.slick"),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.cleanUpSlideEvents(),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpSlideEvents=function(){var b=this;b.$list.off("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.cleanUpRows=function(){var b,a=this;a.options.rows>1&&(b=a.$slides.children().children(),b.removeAttr("style"),a.$slider.empty().append(b))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.$slider.removeClass("slick-dotted"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.focusHandler=function(){var b=this;b.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.options.pauseOnFocus&&(b.focussed=d.is(":focus"),b.autoPlay())},0)})},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else if(a.options.asNavFor)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else d=1+Math.ceil((a.slideCount-a.options.slidesToShow)/a.options.slidesToScroll);return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(!0),b.options.infinite===!0?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=b.slideWidth*b.options.slidesToShow*-1,e=d*b.options.slidesToShow*-1),b.slideCount%b.options.slidesToScroll!==0&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth*-1,e=(b.options.slidesToShow-(a-b.slideCount))*d*-1):(b.slideOffset=b.slideCount%b.options.slidesToScroll*b.slideWidth*-1,e=b.slideCount%b.options.slidesToScroll*d*-1))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),b.options.centerMode===!0&&b.options.infinite===!0?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:b.options.centerMode===!0&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=b.options.vertical===!1?a*b.slideWidth*-1+b.slideOffset:a*d*-1+e,b.options.variableWidth===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,b.options.centerMode===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=b.options.rtl===!0?f[0]?-1*(b.$slideTrack.width()-f[0].offsetLeft-f.width()):0:f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(a.options.infinite===!1?e=a.slideCount:(b=-1*a.options.slidesToScroll,c=-1*a.options.slidesToScroll,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var c,d,e,b=this;return e=b.options.centerMode===!0?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,b.options.swipeToSlide===!0?(b.$slideTrack.find(".slick-slide").each(function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0}),c=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots(),c.checkResponsive(!0),c.focusHandler()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA(),c.options.autoplay&&(c.paused=!1,c.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.off("click.slick").on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.interrupt,b,!0)).on("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.initSlideEvents=function(){var b=this;b.options.pauseOnHover&&(b.$list.on("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.interrupt,b,!1)))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.initSlideEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:b.options.rtl===!0?"next":"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:b.options.rtl===!0?"previous":"next"}}))},b.prototype.lazyLoad=function(){function g(c){a("img[data-lazy]",c).each(function(){var c=a(this),d=a(this).attr("data-lazy"),e=document.createElement("img");e.onload=function(){c.animate({opacity:0},100,function(){c.attr("src",d).animate({opacity:1},200,function(){c.removeAttr("data-lazy").removeClass("slick-loading")}),b.$slider.trigger("lazyLoaded",[b,c,d])})},e.onerror=function(){c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),b.$slider.trigger("lazyLoadError",[b,c,d])},e.src=d})}var c,d,e,f,b=this;b.options.centerMode===!0?b.options.infinite===!0?(e=b.currentSlide+(b.options.slidesToShow/2+1),f=e+b.options.slidesToShow+2):(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=2+(b.options.slidesToShow/2+1)+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=Math.ceil(e+b.options.slidesToShow),b.options.fade===!0&&(e>0&&e--,f<=b.slideCount&&f++)),c=b.$slider.find(".slick-slide").slice(e,f),g(c),b.slideCount<=b.options.slidesToShow?(d=b.$slider.find(".slick-slide"),g(d)):b.currentSlide>=b.slideCount-b.options.slidesToShow?(d=b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow),g(d)):0===b.currentSlide&&(d=b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow),g(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.autoPlay(),a.options.autoplay=!0,a.paused=!1,a.focussed=!1,a.interrupted=!1},b.prototype.postSlide=function(a){var b=this;b.unslicked||(b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay&&b.autoPlay(),b.options.accessibility===!0&&b.initADA())},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(b){b=b||1;var e,f,g,c=this,d=a("img[data-lazy]",c.$slider);d.length?(e=d.first(),f=e.attr("data-lazy"),g=document.createElement("img"),g.onload=function(){e.attr("src",f).removeAttr("data-lazy").removeClass("slick-loading"),c.options.adaptiveHeight===!0&&c.setPosition(),c.$slider.trigger("lazyLoaded",[c,e,f]),c.progressiveLazyLoad()},g.onerror=function(){3>b?setTimeout(function(){c.progressiveLazyLoad(b+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),c.$slider.trigger("lazyLoadError",[c,e,f]),c.progressiveLazyLoad())},g.src=f):c.$slider.trigger("allImagesLoaded",[c])},b.prototype.refresh=function(b){var d,e,c=this;e=c.slideCount-c.options.slidesToShow,!c.options.infinite&&c.currentSlide>e&&(c.currentSlide=e),c.slideCount<=c.options.slidesToShow&&(c.currentSlide=0),d=c.currentSlide,c.destroy(!0),a.extend(c,c.initials,{currentSlide:d}),c.init(),b||c.changeSlide({data:{message:"index",index:d}},!1)},b.prototype.registerBreakpoints=function(){var c,d,e,b=this,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){b.respondTo=b.options.respondTo||"window";for(c in f)if(e=b.breakpoints.length-1,d=f[c].breakpoint,f.hasOwnProperty(c)){for(;e>=0;)b.breakpoints[e]&&b.breakpoints[e]===d&&b.breakpoints.splice(e,1),e--;b.breakpoints.push(d),b.breakpointSettings[d]=f[c].settings}b.breakpoints.sort(function(a,c){return b.options.mobileFirst?a-c:c-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.cleanUpSlideEvents(),b.initSlideEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.setPosition(),b.focusHandler(),b.paused=!b.options.autoplay,b.autoPlay(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var d,e,b=this,c={};b.options.rtl===!0&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,b.transformsEnabled===!1?b.$slideTrack.css(c):(c={},b.cssTransitions===!1?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var c,b=this;b.$slides.each(function(d,e){c=b.slideWidth*d*-1,b.options.rtl===!0?a(e).css({position:"relative",right:c,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:b.options.zIndex-2,opacity:0})}),b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(){var c,d,e,f,h,b=this,g=!1;if("object"===a.type(arguments[0])?(e=arguments[0],g=arguments[1],h="multiple"):"string"===a.type(arguments[0])&&(e=arguments[0],f=arguments[1],g=arguments[2],"responsive"===arguments[0]&&"array"===a.type(arguments[1])?h="responsive":"undefined"!=typeof arguments[1]&&(h="single")),"single"===h)b.options[e]=f;else if("multiple"===h)a.each(e,function(a,c){b.options[a]=c});else if("responsive"===h)for(d in f)if("array"!==a.type(b.options.responsive))b.options.responsive=[f[d]];else{for(c=b.options.responsive.length-1;c>=0;)b.options.responsive[c].breakpoint===f[d].breakpoint&&b.options.responsive.splice(c,1),c--;b.options.responsive.push(f[d])}g&&(b.unload(),b.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;d=b.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),b.$slides.eq(a).addClass("slick-current"),b.options.centerMode===!0?(c=Math.floor(b.options.slidesToShow/2),b.options.infinite===!0&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active").attr("aria-hidden","false"):(e=b.options.slidesToShow+a,
d.slice(e-c+1,e+c+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=b.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden","false"):(f=b.slideCount%b.options.slidesToShow,e=b.options.infinite===!0?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active").attr("aria-hidden","false"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(b.options.fade===!0&&(b.options.centerMode=!1),b.options.infinite===!0&&b.options.fade===!1&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=b.options.centerMode===!0?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.interrupt=function(a){var b=this;a||b.autoPlay(),b.interrupted=a},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,j,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?void(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d))):(i.options.autoplay&&clearInterval(i.autoPlayTimer),e=0>d?i.slideCount%i.options.slidesToScroll!==0?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?i.slideCount%i.options.slidesToScroll!==0?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.options.asNavFor&&(j=i.getNavTarget(),j=j.slick("getSlick"),j.slideCount<=j.options.slidesToShow&&j.setSlideClasses(i.currentSlide)),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?(i.fadeSlideOut(f),i.fadeSlide(e,function(){i.postSlide(e)})):i.postSlide(e),void i.animateHeight()):void(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e))))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"down":"up":"vertical"},b.prototype.swipeEnd=function(a){var c,d,b=this;if(b.dragging=!1,b.interrupted=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe){switch(d=b.swipeDirection()){case"left":case"down":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.currentDirection=0;break;case"right":case"up":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.currentDirection=1}"vertical"!=d&&(b.slideHandler(c),b.touchObject={},b.$slider.trigger("swipe",[b,d]))}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!b.dragging||h&&1!==h.length?!1:(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),b.options.verticalSwiping===!0&&(b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)))),e=b.swipeDirection(),"vertical"!==e?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(b.options.rtl===!1?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),b.options.verticalSwiping===!0&&(g=b.touchObject.curY>b.touchObject.startY?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,b.options.infinite===!1&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),b.options.vertical===!1?b.swipeLeft=d+f*g:b.swipeLeft=d+f*(b.$list.height()/b.listWidth)*g,b.options.verticalSwiping===!0&&(b.swipeLeft=d+f*g),b.options.fade===!0||b.options.touchMove===!1?!1:b.animating===!0?(b.swipeLeft=null,!1):void b.setCSS(b.swipeLeft)):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return b.interrupted=!0,1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,void(b.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var b,a=this;b=Math.floor(a.options.slidesToShow/2),a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&!a.options.infinite&&(a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===!1?(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-1&&a.options.centerMode===!0&&(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;a.options.autoplay&&(document[a.hidden]?a.interrupted=!0:a.interrupted=!1)},a.fn.slick=function(){var f,g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length;for(f=0;e>f;f++)if("object"==typeof c||"undefined"==typeof c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),"undefined"!=typeof g)return g;return a}});
//dev\slider\header.js 
 
/*!
 * Master Slider  Responsive Touch Swipe Slider
 * @author Averta (www.averta.net)
 * Copyright  All Rights Reserved, Averta Ltd.
 *
 * @version 1.5.7
 * @date 3/31/2014
 */
//dev\slider\tools\base.js 
 
window.averta = {};

;(function($){
	
	//"use strict";
	
	window.package = function(name){
		if(!window[name]) window[name] = {};
	};
	
	var extend = function(target , object){
		for(var key in object)	target[key] = object[key];
	};
	
	Function.prototype.extend = function(superclass){
		if(typeof superclass.prototype.constructor === "function"){
			extend(this.prototype , superclass.prototype);
			this.prototype.constructor = this;
		}else{
			this.prototype.extend(superclass);
			this.prototype.constructor = this;
		}	
	};
	
	// Converts JS prefix to CSS prefix
	var trans = {
		'Moz'    : '-moz-',
		'Webkit' : '-webkit-',
		'Khtml'  : '-khtml-' ,
		'O'		 : '-o-',
		'ms'	 : '-ms-',
		'Icab'   : '-icab-'
	};
	
	$(document).ready(function(){
		window._jcsspfx 		= getVendorPrefix();	   // JS CSS VendorPrefix
		window._csspfx 			= trans[window._jcsspfx];  // CSS VendorPrefix
		window._cssanim 		= supportsTransitions();
		window._css3d   		= supports3DTransforms();
		window._css2d   		= supportsTransforms();
		window._mobile			= /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) 
		window._touch			= 'ontouchstart' in document;
	});
	
	
	// Thanks to LEA VEROU
	// http://lea.verou.me/2009/02/find-the-vendor-prefix-of-the-current-browser/
	function getVendorPrefix() {
	
		if('result' in arguments.callee) return arguments.callee.result;
	
		var regex = /^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/;
	
		var someScript = document.getElementsByTagName('script')[0];
	
		for(var prop in someScript.style)
			if(regex.test(prop))
				return arguments.callee.result = prop.match(regex)[0];
	
		if('WebkitOpacity' in someScript.style) return arguments.callee.result = 'Webkit';
		if('KhtmlOpacity' in someScript.style) return arguments.callee.result = 'Khtml';
	
		return arguments.callee.result = '';
	}
	
	
	// Thanks to Steven Benner.
	// http://stevenbenner.com/2010/03/javascript-regex-trick-parse-a-query-string-into-an-object/
	window.parseQueryString = function(url){
		var queryString = {};
		url.replace(
		    new RegExp("([^?=&]+)(=([^&]*))?", "g"),
		    function($0, $1, $2, $3) { queryString[$1] = $3; }
		);
		
		return queryString;
	};
	
	function checkStyleValue(prop){
		 var b = document.body || document.documentElement;
	    var s = b.style;
	    var p = prop;
	    if(typeof s[p] == 'string') {return true; }
	
	    // Tests for vendor specific prop
	    v = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'],
	    p = p.charAt(0).toUpperCase() + p.substr(1);
	    for(var i=0; i<v.length; i++) {
	      if(typeof s[v[i] + p] == 'string') { return true; }
	    }
	    return false;
	}
	
	function supportsTransitions() {
	   return checkStyleValue('transition');
	}
	
	function supportsTransforms(){
	   return checkStyleValue('transform');
	}
	
	function supports3DTransforms(){
		if(!supportsTransforms()) return false;
	    var el = document.createElement('p'),
	    has3d,
	    transforms = {
	        'WebkitTransform':'-webkit-transform',
	        'OTransform':'-o-transform',
	        'MSTransform':'-ms-transform',
	        'msTransform':'-ms-transform',
	        'MozTransform':'-moz-transform',
	        'Transform':'transform',
	        'transform':'transform'
	    };
	
	    // Add it to the body to get the computed style
	    document.body.insertBefore(el, null);
	
	    for(var t in transforms){
	        if( el.style[t] !== undefined ){
	            el.style[t] = 'translate3d(1px,1px,1px)';
	            has3d = window.getComputedStyle(el).getPropertyValue(transforms[t]);
	        }
	    }
	
	    document.body.removeChild(el);
	
	    return (has3d != null && has3d.length > 0 && has3d !== "none");
	}
	
	/**
	 * Provides requestAnimationFrame in a cross browser way.
	 * @author paulirish / http://paulirish.com/
	 */
	var fps60 = 50/3;
	
	if ( !window.requestAnimationFrame ) {
	 
		window.requestAnimationFrame = ( function() {
	 
			return window.webkitRequestAnimationFrame ||
			window.mozRequestAnimationFrame ||
			window.oRequestAnimationFrame ||
			window.msRequestAnimationFrame ||
			function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {
	 
				window.setTimeout( callback, fps60 );
	 
			};
	 
		} )();
	 
	}
	
	if (!window.getComputedStyle) {
	    window.getComputedStyle = function(el, pseudo) {
	        this.el = el;
	        this.getPropertyValue = function(prop) {
	            var re = /(\-([a-z]){1})/g;
	            if (prop == 'float') prop = 'styleFloat';
	            if (re.test(prop)) {
	                prop = prop.replace(re, function () {
	                    return arguments[2].toUpperCase();
	                });
	            }
	            return el.currentStyle[prop] ? el.currentStyle[prop] : null;
	        };
	        return el.currentStyle;
	    };
	}

	// IE8 Array indexOf fix
	if (!Array.prototype.indexOf) {
	  Array.prototype.indexOf = function(elt /*, from*/) {
	    var len = this.length >>> 0;

	    var from = Number(arguments[1]) || 0;
	    from = (from < 0)
	         ? Math.ceil(from)
	         : Math.floor(from);
	    if (from < 0)
	      from += len;

	    for (; from < len; from++)
	    {
	      if (from in this &&
	          this[from] === elt)
	        return from;
	    }
	    return -1;
	  };
	}
	
	if(jQuery){
		$.jqLoadFix = function(){
			if(this.complete){
				var that = this;
				setTimeout(function(){$(that).load();} , 1);
			}	
		};
		
		jQuery.uaMatch = jQuery.uaMatch || function( ua ) {
			ua = ua.toLowerCase();
		
			var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
				/(webkit)[ \/]([\w.]+)/.exec( ua ) ||
				/(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
				/(msie) ([\w.]+)/.exec( ua ) ||
				ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
				[];
		
			return {
				browser: match[ 1 ] || "",
				version: match[ 2 ] || "0"
			};
		};
		
		// Don't clobber any existing jQuery.browser in case it's different
		//if ( !jQuery.browser ) {
			matched = jQuery.uaMatch( navigator.userAgent );
			browser = {};
		
			if ( matched.browser ) {
				browser[ matched.browser ] = true;
				browser.version = matched.version;
			}
		
			// Chrome is Webkit, but Webkit is also Safari.
			if ( browser.chrome ) {
				browser.webkit = true;
			} else if ( browser.webkit ) {
				browser.safari = true;
			}

			// hofix for IE11 detection 
			var isIE11 = !!navigator.userAgent.match(/Trident\/7\./);
			if (isIE11) {
				browser.msie = "true";
				delete browser.mozilla;
			}

			jQuery.browser = browser;
			
		//}
		
		$.fn.preloadImg = function(src , _event){
			this.each(function(){
				var $this = $(this);
				var self  = this;
				var img = new Image();
				img.onload = function(event){
					if(event == null) event = {}; // IE8
					$this.attr('src' , src);
					event.width = img.width;
					event.height = img.height;
					setTimeout(function(){_event.call(self , event);},50);
					img = null;
				};
				img.src = src;
			});
			return this;
		};
	}
})(jQuery);
//dev\slider\tools\EventDispatcher.js 
 
;(function(){
	
	"use strict";
	
	averta.EventDispatcher = function(){
		this.listeners = {};
	};
	
	averta.EventDispatcher.extend = function(_proto){
		var instance = new averta.EventDispatcher();
		for(var key in instance)
			if(key != 'constructor') _proto[key] =  averta.EventDispatcher.prototype[key];
	};
	
	averta.EventDispatcher.prototype = {
		
		constructor : averta.EventDispatcher,
		
		addEventListener : function(event , listener , ref){
			if(!this.listeners[event]) this.listeners[event] = [];
			this.listeners[event].push({listener:listener , ref:ref});
			
		},
		
		removeEventListener : function(event , listener , ref){
			if(this.listeners[event]){
				for(var i = 0 , l = this.listeners[event].length; i < l ; ++i)
					if(listener == this.listeners[event][i].listener && ref == this.listeners[event][i].ref){	
						this.listeners[event].splice(i);
					}
				
				if (this.listeners[event].length == 0)
					delete this.listeners[event];
			}
		},
		
		dispatchEvent : function (event) {
			event.target = this;
			if(this.listeners[event.type])
				for(var i = 0 , l = this.listeners[event.type].length; i < l ; ++i){
					this.listeners[event.type][i].listener.call(this.listeners[event.type][i].ref , event);	
				}
		}
	};

})();
//dev\slider\tools\TouchSwipe.js 
 
;(function($){
	
	"use strict";
	
	var isTouch = 'ontouchstart' in document;
	var msPoiner = false;//window.navigator.msPointerEnabled;
	
	// Events	
	var ev_start  = msPoiner ? 'MSPointerDown' 	: isTouch ? 'touchstart' : 'mousedown';
	var ev_move   = msPoiner ? 'MSPointerMove'	: isTouch ? 'touchmove'  : 'mousemove';
	var ev_end    = msPoiner ? 'MSPointerUp' 	: isTouch ? 'touchend'   : 'mouseup'  ; 
	var ev_cancel = msPoiner ? 'MSPointerUp' 	: 'touchcancel';
	
	averta.TouchSwipe = function($element , touchFallback){
		this.$element = $element;
		this.enabled = true;
		
		$element.bind(ev_start  , {target: this} , this.__touchStart);
				 		 
		$element[0].swipe = this;
		
		this.onSwipe    = null;
		this.swipeType  = 'horizontal';
		
		this.lastStatus = {};
	
	};
	
	var p = averta.TouchSwipe.prototype;
	
 	/*-------------- METHODS --------------*/
	
	p.getDirection = function(new_x , new_y){
		switch(this.swipeType){
			case 'horizontal':
				return new_x <= this.start_x ? 'left' : 'right';
			break;
			case 'vertical':
				return new_y <= this.start_y ? 'up' : 'down';
			break;
			case 'all':
				if(Math.abs(new_x - this.start_x) > Math.abs(new_y - this.start_y))
					return new_x <= this.start_x ? 'left' : 'right';
				else
					return new_y <= this.start_y ? 'up' : 'down';
			break;
		}
	};
	
	p.priventDefultEvent = function(new_x , new_y){
		//if(this.priventEvt != null) return this.priventEvt;
		var dx = Math.abs(new_x - this.start_x);
		var dy = Math.abs(new_y - this.start_y);
		
		var horiz =  dx > dy;
		
		return (this.swipeType === 'horizontal' && horiz) ||
			   (this.swipeType === 'vertical' && !horiz);

		//return this.priventEvt;
	};
	
	p.createStatusObject = function(evt){
		var status_data = {} , temp_x , temp_y;
		
		temp_x = this.lastStatus.distanceX || 0;
		temp_y = this.lastStatus.distanceY || 0;
		
		status_data.distanceX = evt.pageX - this.start_x;
		status_data.distanceY = evt.pageY - this.start_y;
		//console.log(evt, evt.pageX , this.start_x , temp_x)
		status_data.moveX = status_data.distanceX - temp_x;
		status_data.moveY = status_data.distanceY - temp_y;
		
		status_data.distance  = parseInt( Math.sqrt(Math.pow(status_data.distanceX , 2) + Math.pow(status_data.distanceY , 2)) );
		
		status_data.duration  = new Date().getTime() - this.start_time;
		status_data.direction = this.getDirection(evt.pageX , evt.pageY);
		
		return status_data;
	};
	
	
	p.__reset = function(event , jqevt){
		this.reset = false;
		this.lastStatus = {};
		this.start_time = new Date().getTime();
		this.start_x = isTouch ? event.touches[0].pageX : jqevt.pageX;
		this.start_y = isTouch ? event.touches[0].pageY : jqevt.pageY;
	};
	
	p.__touchStart = function(event){
		
		var swipe = event.data.target;
		var jqevt = event;
		if(!swipe.enabled) return;
		event = event.originalEvent;
		
		if(!swipe.onSwipe) {
			$.error('Swipe listener is undefined');
			return;
		}
		
		if(swipe.touchStarted) return;
		
		swipe.start_x = isTouch ? event.touches[0].pageX : jqevt.pageX;
		swipe.start_y = isTouch ? event.touches[0].pageY : jqevt.pageY;
		swipe.start_time = new Date().getTime(); 
		
		$(document).bind(ev_end    , {target: swipe} , swipe.__touchEnd).
		 		    bind(ev_move   , {target: swipe} , swipe.__touchMove).
					bind(ev_cancel , {target: swipe} , swipe.__touchCancel);
					
		
		var evt = isTouch ? event.touches[0] : jqevt;
		var status = swipe.createStatusObject(evt);
		status.phase = 'start';
		
		swipe.onSwipe.call(null , status);
		
		if(!isTouch)
			jqevt.preventDefault();
		
		swipe.lastStatus = status;
		swipe.touchStarted = true;
	};
	
	p.__touchMove = function(event){
		var swipe = event.data.target;
		var jqevt = event;
		event = event.originalEvent;
		
		if(!swipe.touchStarted) return;
		
		clearTimeout(swipe.timo);
		swipe.timo = setTimeout(function(){swipe.__reset(event , jqevt);} , 60);
				
		var evt = isTouch ? event.touches[0] : jqevt;

		var status = swipe.createStatusObject(evt);
		
		if(swipe.priventDefultEvent(evt.pageX , evt.pageY))
			jqevt.preventDefault();
		
		status.phase = 'move';
		
		//if(swipe.lastStatus.direction !== status.direction) swipe.__reset(event , jqevt);
		
		swipe.lastStatus = status;
		
		swipe.onSwipe.call(null , status);
	};
	
	p.__touchEnd = function(event){
		
		var swipe = event.data.target;
		var jqevt = event;
		event = event.originalEvent;
		
		clearTimeout(swipe.timo);
		
		var evt = isTouch ? event.touches[0] : jqevt;
		
		var status = swipe.lastStatus;
		
		if(!isTouch)
			jqevt.preventDefault();
		
		status.phase = 'end';
		
		swipe.touchStarted = false;
		swipe.priventEvt   = null;
		
		$(document).unbind(ev_end     , swipe.__touchEnd).
		 		    unbind(ev_move    , swipe.__touchMove).
					unbind(ev_cancel  , swipe.__touchCancel);
		
		status.speed = status.distance / status.duration;
				
		swipe.onSwipe.call(null , status);
		
	};
	
	p.__touchCancel = function(event){
		var swipe = event.data.target;
		swipe.__touchEnd(event);
	};
	
	p.enable = function(){
		if(this.enabled) return;
		this.enabled = true;
	};
	
	p.disable = function(){
		if(!this.enabled) return;
		this.enabled = false;
	};
	
})(jQuery);
//dev\slider\tools\Timer.js 
 
/**
 * 	Ticker Class
 * 	Author: Averta Ltd
 */

;(function(){
	"use strict";
	
	averta.Ticker = function(){};
	
	var st = averta.Ticker,
		list = [],
		__stopped = true;
	
	st.add = function (listener , ref){
		list.push([listener , ref]);
		
		if(list.length === 1) st.start();
		
		return list.length;
	};
	
	st.remove = function (listener , ref) {
		for(var i = 0 , l = list.length ; i<l ; ++i){
			if(list[i] && list[i][0] === listener && list[i][1] === ref){
				list.splice(i , 1);
			}
		}
	};
	
	st.start = function (){
		if(!__stopped) return;
		__stopped = false;
		__tick();
	};
	
	st.stop = function (){
		__stopped = true;
	};
	
	var __tick = function () {
		if(st.__stopped) return;
		
		for(var i = 0 ;i<list.length ; ++i){
			list[i][0].call(list[i][1]);
		}

		requestAnimationFrame(__tick);
	};
	
})();

/**
 * 	Timer Class
 * 	Author: Averta Ltd
 */
;(function(){
	"use strict";
	
	if(!Date.now){
		Date.now = function(){
			return new Date().getTime();
		};
	}
	
	averta.Timer = function(delay , autoStart) {
		this.delay = delay;
		this.currentCount = 0;
		this.paused = false;
		this.onTimer = null;
		this.refrence = null;
		
		if(autoStart) this.start();
		
	};
	
	averta.Timer.prototype = {
		
		constructor : averta.Timer,
		
		start : function(){
			this.paused = false;
			this.lastTime = Date.now();
			averta.Ticker.add(this.update , this);
		},
		
		stop : function(){
			this.paused = true;
			averta.Ticker.remove(this.update , this);
		},
		
		reset : function(){
			this.currentCount = 0;
			this.paused = true;
			this.lastTime = Date.now();
		},
		
		update : function(){
			if(this.paused || Date.now() - this.lastTime < this.delay) return;
			this.currentCount ++;
			this.lastTime = Date.now();
			if(this.onTimer)
				this.onTimer.call(this.refrence , this.getTime());

		} ,
		
		getTime : function(){
			return this.delay * this.currentCount;
		}
		
	};
})();
//dev\slider\tools\CSSTweener.js 
 
;(function(){
	
	"use strict";
	
	var evt = null;
	
	window.CSSTween = function(element , duration , delay , ease){
		
		this.$element 	= element;
		this.duration 	= duration  || 1000;
		this.delay 		= delay 	|| 0;
		this.ease 		= ease 		|| 'linear';
		
		if(!evt){
			if(window._jcsspfx === 'O')
				evt = 'otransitionend';
			else if(window._jcsspfx == 'Webkit')
				evt = 'webkitTransitionEnd';
			else 
				evt = 'transitionend' ;
		}
		
	};
	
	var p = CSSTween.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.to = function(callback , target){
		this.to_cb 			= callback;
		this.to_cb_target 	= target;
		
		return this;
	};

	p.from = function(callback , target ){
		this.fr_cb 			= callback;
		this.fr_cb_target 	= target;
		
		return this;
	};
	
	p.onComplete = function(callback ,target){
		this.oc_fb 			= callback;
		this.oc_fb_target 	= target;
		
		return this;
	};
	
	p.chain = function(csstween){
		this.chained_tween = csstween;
		return this;
	};
	
	p.reset = function(){
		//this.$element[0].removeEventListener(evt , this.onTransComplete , true);
		clearTimeout(this.start_to);
		clearTimeout(this.end_to);
		
	
	};
	
	p.start = function(){
	
		clearTimeout(this.start_to);
		clearTimeout(this.end_to);
		
		this.fresh = true;
		
		if(this.fr_cb){
			this.$element.css(window._jcsspfx + 'TransitionDuration' , '0ms');
			this.fr_cb.call(this.fr_cb_target);
		}
		
		var that = this;
		
		this.onTransComplete = function(event){
			
			if(!that.fresh) return;
			
			//that.$element[0].removeEventListener(evt , this.onTransComplete, true);
			//event.stopPropagation();
			
			that.reset();
			
				this.$element.css(window._jcsspfx + 'TransitionDuration' , '').
						  css(window._jcsspfx + 'TransitionProperty' , '').
						  css(window._jcsspfx + 'TransitionTimingFunction' , '').
						  css(window._jcsspfx + 'TransitionDelay' , '');
			
			
			that.fresh = false;
			if(that.chained_tween) that.chained_tween.start();
			if(that.oc_fb)	that.oc_fb.call(that.oc_fb_target);
			
		};
			
		this.start_to = setTimeout(function(){
			
			that.$element.css(window._jcsspfx + 'TransitionDuration' , that.duration + 'ms').
						  css(window._jcsspfx + 'TransitionProperty' , 'all');
						  
			if(that.delay > 0)	that.$element.css(window._jcsspfx + 'TransitionDelay' , that.delay + 'ms');
			else				that.$element.css(window._jcsspfx + 'TransitionDelay' , '');
					
			if(that.ease != 'linear')	that.$element.css(window._jcsspfx + 'TransitionTimingFunction' , that.ease);

			if(that.to_cb)	that.to_cb.call(that.to_cb_target);
			
			//that.$element[0].addEventListener(evt , that.onTransComplete , true );
			
			that.end_to = setTimeout(function(){that.onTransComplete();} , that.duration + (that.delay || 0));
		} , 100);
		
	
		
		return this;
	};
		
})();

/**
 *	Cross Tween Class
 */
;(function(){
	
	"use strict";
	
	var _cssanim = null;
	window.CTween = {};
	
	function transPos(element, properties){
		if(properties.x !== undefined || properties.y !== undefined){
			if(_cssanim){
				var trans = window._jcsspfx+"Transform";
				if(properties.x !== undefined){
					properties[trans] = (properties[trans] || '') + ' translateX('+properties.x+'px)';
					delete properties.x;
				}
				
				if(properties.y !== undefined){
					properties[trans] = (properties[trans] || '') + ' translateY('+properties.y+'px)';
					delete properties.y;
				}
			}else{
				if(properties.x !== undefined){
					var posx = element.css('right') !== 'auto' ? 'right' : 'left';
					//if(!element[0].bx) element[0].bx = parseInt(element.css(posx));
					properties[posx] = /*element[0].bx + */properties.x + 'px';
					delete properties.x;
				}
				
				if(properties.y !== undefined){
					var posy = element.css('bottom') !== 'auto' ? 'bottom' : 'top';
					//if(!element[0].by) element[0].by = parseInt(element.css(posy));
					properties[posy] = /*element[0].by + */properties.y + 'px';
					delete properties.y;
				}
			}
		}
		return properties;
	}
	
	CTween.setPos = function(element , pos){
		element.css(transPos(element , pos));
	};
	
	CTween.animate = function(element , duration , properties , options){
		if(_cssanim == null) _cssanim = window._cssanim;
		
		options = options || {};
		
		transPos(element , properties);
		
		if(_cssanim){
			var tween = new CSSTween(element , duration , options.delay , EaseDic[options.ease]);
			tween.to(function(){ element.css(properties);});	
			if(options.complete) tween.onComplete(options.complete , options.target);
			tween.start();
			tween.stop = tween.reset;
			return tween;
		}
		
		var onCl;
		
		if(options.delay) element.delay(options.delay);
		if(options.complete) 
			onCl = function(){
				options.complete.call(options.target);
			};

		element.stop(true).animate(properties , duration , options.ease || 'linear' , onCl);
				
		return element;
	};	
	
	CTween.fadeOut = function(target , duration , remove) {
		var options = {};
		if(remove) options.complete = function(){target.remove();};		
		
		CTween.animate(target , duration || 1000 , {opacity : 0} , options);
	};
	
	CTween.fadeIn = function(target , duration){
		target.css('opacity' , 0);
		CTween.animate(target , duration || 1000 , {opacity : 1});
	};
	
})();

;(function(){
	
	// Thanks to matthewlein
	// https://github.com/matthewlein/Ceaser
	
	window.EaseDic = {
		'linear'            : 'linear',
	    'ease'              : 'ease',
	    'easeIn'            : 'ease-in',
	    'easeOut'           : 'ease-out',
	    'easeInOut'         : 'ease-in-out',
	    
	    'easeInCubic'       : 'cubic-bezier(.55,.055,.675,.19)',
	    'easeOutCubic'      : 'cubic-bezier(.215,.61,.355,1)',
	    'easeInOutCubic'    : 'cubic-bezier(.645,.045,.355,1)',
	    'easeInCirc'        : 'cubic-bezier(.6,.04,.98,.335)',
	    'easeOutCirc'       : 'cubic-bezier(.075,.82,.165,1)',
	    'easeInOutCirc'     : 'cubic-bezier(.785,.135,.15,.86)',
	    'easeInExpo'        : 'cubic-bezier(.95,.05,.795,.035)',
	    'easeOutExpo'       : 'cubic-bezier(.19,1,.22,1)',
	    'easeInOutExpo'     : 'cubic-bezier(1,0,0,1)',
	    'easeInQuad'        : 'cubic-bezier(.55,.085,.68,.53)',
	    'easeOutQuad'       : 'cubic-bezier(.25,.46,.45,.94)',
	    'easeInOutQuad'     : 'cubic-bezier(.455,.03,.515,.955)',
	    'easeInQuart'       : 'cubic-bezier(.895,.03,.685,.22)',
	    'easeOutQuart'      : 'cubic-bezier(.165,.84,.44,1)',
	    'easeInOutQuart'    : 'cubic-bezier(.77,0,.175,1)',
	    'easeInQuint'       : 'cubic-bezier(.755,.05,.855,.06)',
	    'easeOutQuint'      : 'cubic-bezier(.23,1,.32,1)',
	    'easeInOutQuint'    : 'cubic-bezier(.86,0,.07,1)',
	    'easeInSine'        : 'cubic-bezier(.47,0,.745,.715)',
	    'easeOutSine'       : 'cubic-bezier(.39,.575,.565,1)',
	    'easeInOutSine'     : 'cubic-bezier(.445,.05,.55,.95)',
	    'easeInBack'        : 'cubic-bezier(.6,-.28,.735,.045)',
	    'easeOutBack'       : 'cubic-bezier(.175, .885,.32,1.275)',
	    'easeInOutBack'     : 'cubic-bezier(.68,-.55,.265,1.55)'
	};
})();

//dev\slider\tools\Aligner.js 
 
;(function(){
	
	"use strict";
	
	window.MSAligner = function(type , $container , $img ){
		
		this.$container = $container;
		this.$img	    = $img;	
	
		this.type 		= type || 'stretch'; // fill , fit , stretch , tile , center
		
		this.widthOnly = false;
		this.heightOnly = false;
	};
	
	var p = MSAligner.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.init = function(w , h){
		
		this.baseWidth = w;
		this.baseHeight = h;
		this.imgRatio = w / h;
		this.imgRatio2 = h / w;

		switch(this.type){
			case 'tile':
				this.$container.css('background-image' , 'url('+ this.$img.attr('src') +')');
				this.$img.remove();
			break;
			case 'center':
				this.$container.css('background-image' , 'url('+ this.$img.attr('src') +')');
				this.$container.css({
					backgroundPosition 	: 'center center',
					backgroundRepeat	: 'no-repeat'
				});
				this.$img.remove();
			break;
			case 'stretch':
				this.$img.css({
					width	: 	'100%',
					height	: 	'100%'
				});
			break;
			case 'fill':
			case 'fit' :				
				this.needAlign = true;
				this.align();
			break;
		}
		
	};
	
	p.align = function(){
		if(!this.needAlign) return;

		var cont_w = this.$container.width();
		var cont_h = this.$container.height();

		var contRatio = cont_w / cont_h;
		
		if(this.type == 'fill'){
			if(this.imgRatio < contRatio ){
				this.$img.width(cont_w);
				this.$img.height(cont_w * this.imgRatio2);				
			}else{
				this.$img.height(cont_h);
				this.$img.width(cont_h * this.imgRatio);
			}
				
		}else if(this.type == 'fit'){
			
			if(this.imgRatio < contRatio){
				this.$img.height(cont_h);
				this.$img.width(cont_h * this.imgRatio);				
			}else{
				this.$img.width(cont_w);
				this.$img.height(cont_w * this.imgRatio2);	
			}
		}
		
		this.setMargin();
		
	};

	p.setMargin = function(){

		var cont_w = this.$container.width();
		var cont_h = this.$container.height();
		
		this.$img.css('margin-top' , (cont_h - this.$img[0].offsetHeight) / 2 + 'px');
		this.$img.css('margin-left', (cont_w - this.$img[0].offsetWidth ) / 2 + 'px');
	}
	
})();
//dev\slider\controls\controller.js 
 
/**
 *  Touch List Control
 * 	version 1.1
 * 	
 * 	Copyright (C) 2014, Averta Ltd. All rights reserved. 	 	
 */

;(function(){	
	
	"use strict";
		
	var _options = {
		bouncing 			: true,
		snapping			: false,
		snapsize			: null,
		friction			: 0.05,
		outFriction			: 0.05,
		outAcceleration		: 0.09,	
		minValidDist		: 0.3,
		snappingMinSpeed	: 2,
		paging				: false,
		endless				: false,
		maxSpeed			: 160
	};
	

	var Controller = function(min , max , options){
		
		if(max === null || min === null) {
			throw new Error('Max and Min values are required.');
		}
		
		this.options = options || {};
		
		for(var key in _options){
			if(!(key in this.options))
				this.options[key] = _options[key];
		}
		
		this._max_value 	= max;
		this._min_value 	= min;
				
		this.value 				= min;
		this.end_loc 			= min;
		
		this.current_snap		= this.getSnapNum(min);
		
		this.__extrStep 	= 0;
		this.__extraMove 	= 0;
		
		this.__animID	 	= -1;
	
	};
	
	var p = Controller.prototype;
	
	/*
	---------------------------------------------------
		PUBLIC METHODS
	----------------------------------------------------
	*/


	p.changeTo = function(value , animate , speed , snap_num , dispatch) {
		this.stopped = false;
		this._internalStop();
		value = this._checkLimits(value);
		speed = Math.abs(speed || 0);
		
		if(this.options.snapping){
			snap_num = snap_num || this.getSnapNum(value);
			if( dispatch !== false )this._callsnapChange(snap_num);
			this.current_snap = snap_num;
		}
		
		if(animate){
			this.animating = true;

			var self = this;		
			var active_id = ++self.__animID;	

			var amplitude = value - self.value;
			var timeStep = 0;
			var targetPosition = value;
			var timeconst;
			var animFrict = 1 - self.options.friction;

			var tick = function(){
				
				if(active_id !== self.__animID) return;
				
				var dis =  value - self.value;
				
				if(Math.abs(dis) > self.options.minValidDist && self.animating)
					window.requestAnimationFrame(tick);
				else{
					if(self.animating){
						self.value = value;
						self._callrenderer();
					}
					self.animating = false;
					
					if(active_id !== self.__animID){
						self.__animID = -1;
					}
					
					self._callonComplete('anim');
					
					return;
				}
				
				timeconst = animFrict + (speed - 20)  * animFrict * 1.3 / self.options.maxSpeed;
				
				//self.value += dis * timeconst
				self.value = targetPosition - amplitude * Math.exp(-++timeStep * timeconst);

				self._callrenderer();
			};
		
			tick();
			
			return;
		}
				
		this.value = value;
		this._callrenderer();
	};
	
	p.drag = function(move){
		
		if(this.start_drag){
			this.drag_start_loc  = this.value;
			this.start_drag = false;
		}
		
		this.animating 		= false;
		this._deceleration 	= false;
		
		this.value -= move;
				
		if ( !this.options.endless && (this.value > this._max_value || this.value < 0)) {
			if (this.options.bouncing) {
				this.__isout = true;
				this.value += move * 0.6;
			} else if (this.value > this._max_value) {
				this.value = this._max_value;
			} else {
				this.value = 0;
			}
		}else if(!this.options.endless && this.options.bouncing){
				this.__isout = false;
		}
		
		this._callrenderer();
		
	};
	
	p.push = function(speed){
		this.stopped = false;
		if(this.options.snapping && Math.abs(speed) <= this.options.snappingMinSpeed){
			this.cancel();
			return;
		}
		
		this.__speed = speed;
		this.__startSpeed = speed;

		this.end_loc = this._calculateEnd();
		
		if(this.options.snapping){
			
			var snap_loc = this.getSnapNum(this.value),
				end_snap = this.getSnapNum(this.end_loc);

			if(this.options.paging){
				snap_loc = this.getSnapNum(this.drag_start_loc);
				
				this.__isout = false;
				if(speed > 0){
					this.gotoSnap(snap_loc + 1 , true , speed);
				}else{
					this.gotoSnap(snap_loc - 1 , true , speed);
				}
				return;	
			}else if(snap_loc === end_snap){
				this.cancel();
				return;
			}
			
			this._callsnapChange(end_snap);
			this.current_snap = end_snap;
			
		}
		
		this.animating = false;

		this.__needsSnap = this.options.endless || (this.end_loc > this._min_value && this.end_loc < this._max_value) ;
	
		if(this.options.snapping && this.__needsSnap)
			this.__extraMove = this._calculateExtraMove(this.end_loc);
		
		
		this._startDecelaration();
	};
	
	p.bounce = function(speed){
		if(this.animating) return;
		this.stopped = false;
		this.animating = false;
		
		this.__speed = speed;
		this.__startSpeed = speed;
		
		this.end_loc = this._calculateEnd();
		
		//if(this.options.paging){}
		
		this._startDecelaration();
	};
	
	p.stop = function(){
		this.stopped = true;
		this._internalStop();
	};
		
	p.cancel = function(){
		this.start_drag = true; // reset flag for next drag
		if(this.__isout){
			this.__speed = 0.0004;
			this._startDecelaration();
		}else if(this.options.snapping){
			this.gotoSnap(this.getSnapNum(this.value) , true);
		}
		
	};
		
	p.renderCallback = function(listener , ref){
		this.__renderHook = {fun:listener , ref:ref};
	};
	
	p.snappingCallback = function(listener , ref){
		this.__snapHook = {fun:listener , ref:ref};
	};
	
	p.snapCompleteCallback = function(listener , ref){
		this.__compHook = {fun:listener , ref:ref};
	};
	
	p.getSnapNum = function(value){
		return Math.floor(( value + this.options.snapsize / 2 ) / this.options.snapsize);
	};
		
	p.nextSnap = function(){
		this._internalStop();
		
		var curr_snap = this.getSnapNum(this.value);
		
		if(!this.options.endless && (curr_snap + 1) * this.options.snapsize > this._max_value){
			this.__speed = 8;
			this.__needsSnap = false;
			this._startDecelaration();
		}else{
			this.gotoSnap(curr_snap + 1 , true);
		}
	
	};
	
	p.prevSnap = function(){
		this._internalStop();
		
		var curr_snap = this.getSnapNum(this.value);
				
		if(!this.options.endless && (curr_snap - 1) * this.options.snapsize < this._min_value){
			this.__speed = -8;
			this.__needsSnap = false;
			this._startDecelaration();
		}else{
			this.gotoSnap(curr_snap - 1 , true);
		}
	
	};
	
	p.gotoSnap = function(snap_num , animate , speed){
		this.changeTo(snap_num * this.options.snapsize , animate , speed , snap_num);
	};
	
	p.destroy = function(){
		this._internalStop();
		this.__renderHook = null;
		this.__snapHook = null;
		this.__compHook = null;
	};
	
	/*
	---------------------------------------------------
		PRIVATE METHODS
	----------------------------------------------------
	*/
	
	p._internalStop = function(){
		this.start_drag = true; // reset flag for next drag
		this.animating = false;
		this._deceleration = false;
		this.__extrStep = 0;
	};
	
	p._calculateExtraMove = function(value){
		var m = value % this.options.snapsize;
		return m < this.options.snapsize / 2  ? -m : this.options.snapsize - m;
	};
	
	p._calculateEnd = function(step){
		var temp_speed = this.__speed;
		var temp_value = this.value;
		var i = 0;
		while(Math.abs(temp_speed) > this.options.minValidDist){
			temp_value += temp_speed;
			temp_speed *= this.options.friction;
			i++;
		}
		if(step) return i;
		return temp_value;
	};
	
	p._checkLimits = function(value){
		if(this.options.endless) 	return value;
		if(value < this._min_value) return this._min_value;
		if(value > this._max_value) return this._max_value;
		return value;
	};
	
	p._callrenderer = function(){
		if(this.__renderHook) this.__renderHook.fun.call(this.__renderHook.ref , this , this.value);
	};
	
	p._callsnapChange = function(targetSnap){
		if(!this.__snapHook || targetSnap === this.current_snap) return;
		this.__snapHook.fun.call(this.__snapHook.ref , this , targetSnap , targetSnap - this.current_snap);
	};

	p._callonComplete = function(type){
		if(this.__compHook && !this.stopped){
			this.__compHook.fun.call(this.__compHook.ref , this , this.current_snap , type);
		}
			
	};

	p._computeDeceleration = function(){
		
		if(this.options.snapping && this.__needsSnap){
			var xtr_move = (this.__startSpeed - this.__speed) / this.__startSpeed * this.__extraMove;
			this.value += this.__speed + xtr_move - this.__extrStep;
			this.__extrStep = xtr_move;
		}else{
			this.value += this.__speed;
		}
		
		this.__speed *= this.options.friction; //* 10;
		
		if(!this.options.endless && !this.options.bouncing){
			if(this.value <= this._min_value){
				this.value = this._min_value;
				this.__speed = 0;
			}else if(this.value >= this._max_value){
				this.value = this._max_value;
				this.__speed = 0;
			}
		}
		
		this._callrenderer();
		
		if(!this.options.endless && this.options.bouncing){
			
			var out_value = 0;
			
			if(this.value < this._min_value){
				out_value = this._min_value - this.value;
			}else if(this.value > this._max_value){
				out_value = this._max_value - this.value;
			}
			
			this.__isout =  Math.abs(out_value) >= this.options.minValidDist;
			
			if(this.__isout){
				if(this.__speed * out_value <= 0){
					this.__speed += out_value * this.options.outFriction;
				}else {
					this.__speed = out_value * this.options.outAcceleration;
				}
			}
		}
	};

	p._startDecelaration = function(){
		if(this._deceleration) return;
		this._deceleration = true;
		
		var self = this;
		
		var tick = function (){
			
			if(!self._deceleration) return;
			
			self._computeDeceleration();
			
			if(Math.abs(self.__speed) > self.options.minValidDist || self.__isout){
				window.requestAnimationFrame(tick);
			}else{
				self._deceleration = false;
				self.__isout = false;
				
				if(this.__needsSnap && self.options.snapping && !self.options.paging){
					self.value = self._checkLimits(self.end_loc + self.__extraMove);
				}else{
					self.value = Math.round(self.value);
				}
				
				self._callrenderer();
				self._callonComplete('decel');
			}
		};
		
		tick();
	};
	
	window.Controller = Controller;
	
})();//dev\slider\controls\LayerEffects.js 
 
;(function($){
	
	window.MSLayerEffects = {};
	
	var installed,
		_fade = {opacity:0};
		
	MSLayerEffects.setup = function(){
		
		if(installed) return;
		installed = true;
		
		var st 					= MSLayerEffects,
			transform_css 		= window._jcsspfx + 'Transform',
			transform_orig_css  = window._jcsspfx + 'TransformOrigin',
			o					= $.browser.opera; // Opera sucks :|
			_2d					= window._css2d && window._cssanim && !o;
		
		st.defaultValues = {left : 0 , top: 0 , opacity:1 , right:0 , bottom:0};
		st.defaultValues[transform_css] 	 = '';
		//st.defaultValues[transform_orig_css] = '';
		st.rf = 1;
		
		st.presetEffParams = {
			random: '30|300',
			long 	: 300,
			short	: 30,
			'false'	:false,
			'true'	:true,
			tl	 : 'top left'	,	bl: 'bottom left',
			tr   : 'top right'	,   br: 'bottom right', 
			rt   : 'top right'	,	lb: 'bottom left',
			lt   : 'top left'	,	rb: 'bottom right',
			t	 : 'top'		,	b : 'bottom',
			r	 : 'right'		,	l : 'left',
			c	 : 'center'	
		};
		
		
		/*
		 ----------------------------------------
		 				2D Effects
		 ----------------------------------------
		 */
		
		st.fade = function(){
			return _fade;
		};
	
		st.left = (_2d)? function(dist , fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'translateX(' + -dist*st.rf + 'px)';
			return r;
		} : function (dist, fade){
			var r = fade === false ? {} : {opacity:0};
			r.left = -dist*st.rf + 'px';
			return r;
		};
		
		st.right = (_2d)? function(dist , fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'translateX(' + dist*st.rf + 'px)';
			return r;
		} : function (dist, fade){
			var r = fade === false ? {} : {opacity:0};
			r.left = dist*st.rf + 'px';
			return r;
		};
		
		st.top = (_2d)? function(dist , fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'translateY(' + -dist*st.rf + 'px)';
			return r;
		} : function (dist, fade){
			var r = fade === false ? {} : {opacity:0};
			r.top = -dist*st.rf + 'px';
			return r;
		};
		
		st.bottom = (_2d)? function(dist , fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'translateY(' + dist*st.rf + 'px)';
			return r;
		} : function (dist, fade){
			var r = fade === false ? {} : {opacity:0};
			r.top = dist*st.rf + 'px';
			return r;
		};
		
		st.from = (_2d)? function(leftdis , topdis , fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'translateX('+leftdis*st.rf+'px) translateY(' + topdis*st.rf + 'px)';
			return r;
		} : function (leftdis , topdis, fade){
			var r = fade === false ? {} : {opacity:0};
			r.top = topdis*st.rf + 'px';
			r.left = leftdis*st.rf + 'px';
			return r;
		};
		
		
		// --------------------------------------------------------------------
		
		st.rotate = (_2d)? function(deg , orig ){
			var r = {opacity: 0};
			r[transform_css] = ' rotate('+deg+'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg, orig){
			return _fade;
		};
		
		st.rotateleft = (_2d)? function(deg , dist , orig , fade){
			var r = st.left(dist , fade);
			r[transform_css] += ' rotate('+deg+'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , dist , orig , fade){
			return st.left(dist , fade);
		};
		
		st.rotateright = (_2d)? function(deg , dist , orig , fade){
			var r = st.right(dist , fade);
			r[transform_css] += ' rotate('+deg+'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , dist , orig , fade){
			return st.right(dist , fade);
		};
		
		st.rotatetop = (_2d)? function(deg , dist , orig , fade){
			var r = st.top(dist , fade);
			r[transform_css] += ' rotate('+deg+'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , dist , orig , fade){
			return st.top(dist , fade);
		};
		
		st.rotatebottom = (_2d)? function(deg , dist , orig , fade){
			var r = st.bottom(dist , fade);
			r[transform_css] += ' rotate('+deg+'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , dist , orig , fade){
			return st.bottom(dist , fade);
		};
			
		st.rotatefrom = (_2d)? function(deg , leftdis , topdis , orig , fade){
			var r = st.from(leftdis , topdis , fade);
			r[transform_css] += ' rotate('+deg+'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , leftdis , topdis , orig , fade){
			return st.from(leftdis , topdis , fade);
		};
			
		st.skewleft = (_2d)? function(deg , dist , fade){
			var r = st.left(dist , fade);
			r[transform_css] += ' skewX(' + deg + 'deg)';
			return r;
		} : function (deg , dist , fade){
			return st.left(dist , fade);
		};	
		
		st.skewright = (_2d)? function(deg , dist , fade){
			var r = st.right(dist , fade);
			r[transform_css] += ' skewX(' + -deg + 'deg)';
			return r;
		} : function (deg , dist , fade){
			return st.right(dist , fade);
		};	
		
		st.skewtop = (_2d)? function(deg , dist , fade){
			var r = st.top(dist , fade);
			r[transform_css] += ' skewY(' + deg + 'deg)';
			return r;
		} : function (deg , dist , fade){
			return st.top(dist , fade);
		};	
		
		st.skewbottom = (_2d)? function(deg , dist , fade){
			var r = st.bottom(dist , fade);
			r[transform_css] += ' skewY(' + -deg + 'deg)';
			return r;
		} : function (deg , dist , fade){
			return st.bottom(dist , fade);
		};	
		
		
		st.scale = (_2d)? function(x , y , orig , fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = ' scaleX('+x+') scaleY('+y+')';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (x , y , orig , fade){
			return fade === false ? {} : {opacity:0};
		};
		
		st.scaleleft = (_2d)? function(x , y  , dist , orig , fade){
			var r = st.left(dist , fade);
			r[transform_css] = ' scaleX('+x+') scaleY('+y+')';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (x , y  , dist , orig , fade){
			return st.left(dist , fade);
		};
		
		st.scaleright = (_2d)? function(x , y  , dist , orig , fade){
			var r = st.right(dist , fade);
			r[transform_css] = ' scaleX('+x+') scaleY('+y+')';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (x , y  , dist , orig , fade){
			return st.right(dist , fade);
		};
		
		st.scaletop = (_2d)? function(x , y  , dist , orig , fade){
			var r = st.top(dist , fade);
			r[transform_css] = ' scaleX('+x+') scaleY('+y+')';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (x , y  , dist , orig , fade){
			return st.top(dist , fade);
		};
		
		st.scalebottom = (_2d)? function(x , y  , dist , orig , fade){
			var r = st.bottom(dist , fade);
			r[transform_css] = ' scaleX('+x+') scaleY('+y+')';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (x , y  , dist , orig , fade){
			return st.bottom(dist , fade);
		};
			
		st.scalefrom = (_2d)? function(x , y  , leftdis , topdis , orig , fade){
			var r = st.from(leftdis , topdis , fade);
			r[transform_css] += ' scaleX('+x+') scaleY('+y+')';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (x , y  , leftdis , topdis , orig , fade){
			return st.from(leftdis , topdis , fade);
		};
		
		st.rotatescale = (_2d)? function(deg , x , y  ,  orig , fade){
			var r = st.scale(x , y , orig , fade);
			r[transform_css] += ' rotate('+deg+'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , x , y  ,  orig , fade){
			return st.scale(x , y , orig , fade);
		};
		
		
		/*
		 ----------------------------------------
		 				3D Effects
		 ----------------------------------------
		 */
		
		st.front = (window._css3d)? function(dist , fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'perspective(2000px) translate3d(0 , 0 ,' + dist + 'px ) rotate(0.001deg)';
			return r;
		} : function (dist){
			return _fade;
		};
		
		st.back = (window._css3d)? function(dist, fade){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'perspective(2000px) translate3d(0 , 0 ,' + -dist + 'px ) rotate(0.001deg)';
			return r;
		} : function (dist){
			return _fade;
		};
		
		st.rotatefront = (window._css3d)? function(deg , dist , orig , fade ){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'perspective(2000px) translate3d(0 , 0 ,' + dist + 'px ) rotate('+ (deg || 0.001) +'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , dist , orig , fade ){
			return _fade;
		};
		
		st.rotateback = (window._css3d)? function(deg , dist , orig , fade ){
			var r = fade === false ? {} : {opacity:0};
			r[transform_css] = 'perspective(2000px) translate3d(0 , 0 ,' + -dist + 'px ) rotate('+ (deg || 0.001) +'deg)';
			if(orig) r[transform_orig_css] = orig;
			return r;
		} : function (deg , dist , orig , fade ){
			return _fade;
		};
						
		st.rotate3dleft = (window._css3d)? function(x , y , z , dist , orig , fade){
			var r = st.left(dist , fade);
			r[transform_css] += (x?' rotateX('+x+'deg)' : ' ')+(y?' rotateY('+y+'deg)' : '')+(z?' rotateZ('+z+'deg)' : '');
			if(orig) r[transform_orig_css] = orig;
			return r;		
			
		} : function (x , y , z , dist , orig , fade){
			return st.left(dist , fade);;
		};
		
		st.rotate3dright = (window._css3d)? function(x , y , z , dist , orig , fade){
			var r = st.right(dist , fade);
			r[transform_css] += (x?' rotateX('+x+'deg)' : ' ')+(y?' rotateY('+y+'deg)' : '')+(z?' rotateZ('+z+'deg)' : '');
			if(orig) r[transform_orig_css] = orig;
			return r;		
		} : function (x , y , z , dist , orig , fade){
			return st.right(dist , fade);;
		};
		
		st.rotate3dtop = (window._css3d)? function(x , y , z , dist , orig , fade){
			var r = st.top(dist , fade);
			r[transform_css] += (x?' rotateX('+x+'deg)' : ' ')+(y?' rotateY('+y+'deg)' : '')+(z?' rotateZ('+z+'deg)' : '');
			if(orig) r[transform_orig_css] = orig;
			return r;		
		} : function (x , y , z , dist , orig , fade){
			return st.top(dist , fade);;
		};
		
		st.rotate3dbottom = (window._css3d)? function(x , y , z , dist , orig , fade){
			var r = st.bottom(dist , fade);
			r[transform_css] += (x?' rotateX('+x+'deg)' : ' ')+(y?' rotateY('+y+'deg)' : '')+(z?' rotateZ('+z+'deg)' : '');
			if(orig) r[transform_orig_css] = orig;
			return r;		
		} : function (x , y , z , dist , orig , fade){
			return st.bottom(dist , fade);
		};
		
		st.rotate3dfront = (window._css3d)? function(x , y , z , dist , orig , fade){
			var r = st.front(dist , fade);
			r[transform_css] += (x?' rotateX('+x+'deg)' : ' ')+(y?' rotateY('+y+'deg)' : '')+(z?' rotateZ('+z+'deg)' : '');
			if(orig) r[transform_orig_css] = orig;
			return r;		
		} : function (x , y , z , dist , orig , fade){
			return st.front(dist , fade);
		};		
		
		st.rotate3dback = (window._css3d)? function(x , y , z , dist , orig , fade){
			var r = st.back(dist , fade);
			r[transform_css] += (x?' rotateX('+x+'deg)' : ' ')+(y?' rotateY('+y+'deg)' : '')+(z?' rotateZ('+z+'deg)' : '');
			if(orig) r[transform_orig_css] = orig;
			return r;		
		} : function (x , y , z , dist , orig , fade){
			return st.back(dist , fade);
		};

		// transform effect
		st.t = (window._css3d)? function(fade,tx,ty,tz,r,rx,ry,rz,scx,scy,skx,sky,ox,oy,oz){
			var _r = fade === false ? {} : {opacity:0};
			var transform = '';

			tx  !== 'n' && (transform += 'translateX(' + tx * st.rf + 'px) ');
			ty  !== 'n' && (transform += 'translateY(' + ty * st.rf + 'px) ');
			tz  !== 'n' && (transform += 'translateZ(' + tz * st.rf + 'px) ');
			r   !== 'n' && (transform += 'rotate(' + r + 'deg) ');
			rx  !== 'n' && (transform += 'rotateX(' + rx + 'deg) ');
			ry  !== 'n' && (transform += 'rotateY(' + ry + 'deg) ');
			rz  !== 'n' && (transform += 'rotateZ(' + rz + 'deg) ');
			skx !== 'n' && (transform += 'skewX(' + skx + 'deg) ');
			sky !== 'n' && (transform += 'skewY(' + sky + 'deg) ');
			scx !== 'n' && (transform += 'scaleX(' + scx + ') ');
			scy !== 'n' && (transform += 'scaleY(' + scy + ')');

			_r[transform_css] = transform;

			var trans_origin = '';

			trans_origin += (ox !== 'n' ? ox + '% ' : '50% '); 
			trans_origin += (oy !== 'n' ? oy + '% ' : '50% '); 
			trans_origin += (oz !== 'n' ? oz + 'px' : ''); 

			_r[transform_orig_css] = trans_origin;
			
			return _r;

		} : function(fade,tx,ty,tz,r,rx,ry,rz,scx,scy,skx,sky,ox,oy,oz) {

			var r = fade === false ? {} : {opacity:0};
			tx  !== 'n' && (r.left += tx * st.rf + 'px');
			ty  !== 'n' && (r.top  += ty * st.rf + 'px');
			return r;
		}			
	};
})(jQuery);
//dev\slider\controls\LayerElement.js 
 
;(function($){
	
	window.MSLayerElement = function(){
		
		//this.$element = $('<div></div>').addClass('layer-element');
		this.$cont	  = $('<div></div>').addClass('layer-cont');//.append(this.$element);
			
		this.start_anim = {
			name		: 'fade',
			duration	: 1000,
			ease 		: 'linear',
			delay		: 0		
		};
		
		this.end_anim = {
			duration	: 1000,
			ease 		: 'linear'
		};
		
		this.type = 'text'; // video , image
		
		this.swipe 		= true;
		this.resizable 	= true;
		this.minWidth 	= -1;
			
		this.__cssConfig = [
			'margin-top' 	,      'padding-top'	,
			'margin-bottom'	,      'padding-left'	,
			'margin-right'	,      'padding-right'	,
			'margin-left'	,      'padding-bottom' ,
			
			'left'			,       'right'			, 
			'top'			,       'bottom'		,
			'font-size' 	,  		'line-height'	,
			'width'			,		'height'
		];
		
		this.baseStyle = {};
	};
	
	var p = MSLayerElement.prototype;
	
	/*-------------- METHODS --------------*/	
	p.__playAnimation = function(animation , css){	
		var options = {};
		//if(animation.delay > 0) options.delay = animation.delay;
		if(animation.ease)		options.ease = animation.ease;
		
		this.show_tween = CTween.animate(this.$element, animation.duration , css , options);					
	};
	
	p._randomParam = function(value){
		var min = Number(value.slice(0,value.indexOf('|')));
		var max = Number(value.slice(value.indexOf('|')+1));
		
		return min + Math.random() * (max - min);
	};
	
	p._parseEff = function(eff_name){
		
		var eff_params = [];
		
		if(eff_name.indexOf('(') !== -1){
			var temp   = eff_name.slice(0 , eff_name.indexOf('(')).toLowerCase();
			var	value;
			
			eff_params = eff_name.slice(eff_name.indexOf('(') + 1 , -1).replace(/\"|\'|\s/g , '').split(',');
			eff_name   = temp;
		
			for(var i = 0 , l = eff_params.length; i < l ; ++i){
				value = eff_params[i];
				
				if(value in MSLayerEffects.presetEffParams)
					value = MSLayerEffects.presetEffParams[value];
				
				eff_params[i] = value;
			}
		}
		
		return {eff_name:eff_name , eff_params:eff_params};
	};
	
	p._parseEffParams = function(params){
		var eff_params = [];
		for(var i = 0 , l = params.length; i < l ; ++i){
			var value = params[i];
			if(typeof value === 'string' && value.indexOf('|') !== -1) value = this._randomParam(value);
			
			eff_params[i] = value;
		}
		
		return eff_params;
	};
	
	p._checkPosKey = function(key , style){		
		if(key === 'left' && !(key in this.baseStyle) && 'right' in this.baseStyle){
			 style.right = -parseInt(style.left) + 'px';
			 delete style.left;
			 return true;
		}
		
		if(key === 'top'  && !(key in this.baseStyle) && 'bottom' in this.baseStyle){
			style.bottom = -parseInt(style.top) + 'px';
			delete style.top;
			return true;
		} 
		
		return false;
	};
	
	
	/*
	---------------------------------------------------
	 					Public Methods
	---------------------------------------------------
	*/	
	p.setStartAnim = function(anim){ 
		$.extend(this.start_anim , anim); $.extend(this.start_anim  , this._parseEff(this.start_anim.name)); 
		this.$element.css('visibility' , 'hidden');
	};
	p.setEndAnim   = function(anim){ $.extend(this.end_anim   , anim ); };
	
	p.create = function(){
		this.$element.css('display' , 'none');
		this.$element.removeAttr('data-delay')
					 .removeAttr('data-effect')
					 .removeAttr('data-duration')
					 .removeAttr('data-type');
					 
		if(!this.end_anim.name)		this.end_anim.name  = this.start_anim.name;
		if(this.end_anim.time)		this.autoHide = true;//this.end_anim.delay = this.slide.delay * 1000 - this.end_anim.duration;
		
		$.extend(this.end_anim  , this._parseEff(this.end_anim.name));
		
	};
	
	p.init = function(){
		//if(this.initialized) return;
		this.initialized = true;

		var value;
		
		this.$element.css('visibility' , '');
		// store initial layer styles
		for(var i = 0 , l = this.__cssConfig.length; i < l ; i ++){
			var key = this.__cssConfig[i];
			if( this.type === 'text' && key === 'width'){ // in some browsers using computed style for width in text layer causes unexpected word wrapping 
				value = this.$element[0].style.width;
			} else {
				value = this.$element.css(key);
			}
			if(value != 'auto' && value != "" && value != "normal") 
				this.baseStyle[key] = parseInt(value);
		}
	};
	
	p.locate = function(){
		
		var layer_cont 	= this.slide.$layers;
		var width 		= parseFloat(layer_cont.css('width'));
		
		this.visible(this.minWidth < width);
		
		if(!this.resizable) return;
		
		this.factor 		= width / this.slide.slider.options.width;
		
		for(var key in this.baseStyle)
			this.$element.css(key , this.baseStyle[key] * this.factor + 'px');
		
	};
	
	p.start = function(){

		if(this.isShowing) return;
		this.isShowing = true;
		
		var key , base;
		
		// reads css value form LayerEffects
		MSLayerEffects.rf = this.factor;
		var effect_css = MSLayerEffects[this.start_anim.eff_name].apply(null , this._parseEffParams(this.start_anim.eff_params));
		
		// checkes effect css and defines TO css values
		var start_css_eff = {};
			
		for(key in effect_css){
			if(this._checkPosKey(key , effect_css)) continue;
			if(MSLayerEffects.defaultValues[key] != null)
				start_css_eff[key] = MSLayerEffects.defaultValues[key];
			if(key in this.baseStyle){
				base = this.baseStyle[key];
				effect_css[key] = base + parseFloat(effect_css[key]) + 'px';
				start_css_eff[key] = base + 'px';
			}
			this.$element.css(key , effect_css[key]);
		}
		
		var that = this;
		clearTimeout(this.to);
		this.to = setTimeout(function(){
			that.$element.css('display' , '');
			that.__playAnimation(that.start_anim , start_css_eff);
		} , that.start_anim.delay || 0.01);
		
		
		this.cl_to = setTimeout(function(){
			that.show_cl = true;
		},(this.start_anim.delay || 0.01) + this.start_anim.duration);
		
		if(this.autoHide){
			clearTimeout(this.hto);
			this.hto = setTimeout(function(){that.hide();} , that.end_anim.time );
		}
	};
	
	p.hide = function(){
		this.isShowing = false;
		
		// reads css value form LayerEffects
		var effect_css = MSLayerEffects[this.end_anim.eff_name].apply(null , this._parseEffParams(this.end_anim.eff_params));
		
		for(key in effect_css){
			
			if(this._checkPosKey(key , effect_css)) continue;
			
			if( key === window._jcsspfx + 'TransformOrigin' ){
				this.$element.css(key , effect_css[key]);
			}

			if(key in this.baseStyle){
				effect_css[key] = this.baseStyle[key] + parseFloat(effect_css[key]) +  'px';
			}
				
		}
		
		this.__playAnimation(this.end_anim , effect_css);
		
		clearTimeout(this.to);
		clearTimeout(this.hto);		
		clearTimeout(this.cl_to);		
	};
	
	p.reset = function(){
		this.isShowing = false;
		//this.$element.css(window._csspfx + 'animation-name', ''	);
		this.$element[0].style.display = 'none';
		this.$element.css('opacity', '100');
		this.$element[0].style['transitionDuration'] = '0ms';
		
		if(this.show_tween)
			this.show_tween.stop(true);
		
		clearTimeout(this.to);
		clearTimeout(this.hto);
	};
		
	p.destroy = function(){
		this.reset();
		this.$element.remove();
		this.$cont.remove();
	};
	
	p.visible = function(value){
		if(this.isVisible == value) return;
		
		this.isVisible = value;
		
		this.$element.css('display' , (value ? '' : 'none'));		
	};
	
})(jQuery);
//dev\slider\controls\ImageLayerElement.js 
 
;(function($){
	
	window.MSImageLayerElement = function(){
		MSLayerElement.call(this);
		this.needPreload = true;
		
		this.__cssConfig = [
			'margin-top' 	,      'padding-top'	,
			'margin-bottom'	,      'padding-left'	,
			'margin-right'	,      'padding-right'	,
			'margin-left'	,      'padding-bottom' ,
			
			'left'			,       'right'			, 
			'top'			,       'bottom'		,
			'width'			,		'height'
		];
		
	};
	
	MSImageLayerElement.extend(MSLayerElement);
	
	var p = MSImageLayerElement.prototype;
	var _super = MSLayerElement.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.create = function(){
		
		if(this.link){
			var p = this.$element.parent();
			p.append(this.link);
			this.link.append(this.$element);
			this.link.removeClass('ms-layer');
			this.$element.addClass('ms-layer');
			p = null;
		}

		_super.create.call(this);
		
		if(this.$element.data('src') != undefined){
			this.img_src = this.$element.data('src');
			this.$element.removeAttr('data-src');
		}else{
			var that = this;
			this.$element.on('load', function(event){
				that.slide.preloadCount--;
				if(that.slide.preloadCount === 0)
					that.slide.___onlayersReady();
			}).each($.jqLoadFix);
		}
		
		if($.browser.msie)
			this.$element.on('dragstart', function(event) { event.preventDefault(); }); // disable native dragging
	};
	
	p.loadImage = function(){
		var that = this;
		this.$element.preloadImg(this.img_src , function(event){
			that.slide.preloadCount--;
			if(that.slide.preloadCount === 0) that.slide.___onlayersReady();
		});
	};
	
})(jQuery);
//dev\slider\controls\VideoLayerElement.js 
 
;(function($){
	
	window.MSVideoLayerElement = function(){
		MSLayerElement.call(this);
		/*
		this.__cssConfig.push(
			'width'			,		'height'
		);*/
	};
	
	MSVideoLayerElement.extend(MSLayerElement);
	
	var p  = MSVideoLayerElement.prototype;
	var _super  = MSLayerElement.prototype;
	
	/*-------------- METHODS --------------*/
	p.__playVideo = function(){
		if(this.img)CTween.fadeOut(this.img , 500 , false);
		CTween.fadeOut(this.video_btn , 500 , false);
		this.video_frame.attr('src' , 'about:blank').css('display' , 'block');
		if(this.video_url.indexOf('?') == -1) this.video_url += '?';
		this.video_frame.attr('src' , this.video_url + '&autoplay=1');
	};

	p.reset = function(){
		_super.reset.call(this);
		
		if(this.needPreload || this.$element.data('btn')){
			this.video_btn.css('opacity' , 1);
			this.video_frame.attr('src' , 'about:blank').css('display' , 'none');
		}
		
		if(this.needPreload){
			this.img.css('opacity' , 1);	
			return;
		}
		
		this.video_frame.attr('src' , this.video_url);
	};

	p.create = function(){
		_super.create.call(this);

		this.video_frame = this.$element.find('iframe').css({width:'100%' , height:'100%'});
		this.video_url   = this.video_frame.attr('src');
		
		var has_img = this.$element.has('img').length != 0;
		
		if(!has_img && !this.$element.data('btn')) return;
		
		this.video_frame.attr('src' , 'about:blank').css('display' , 'none');
		
		var that = this;
		
		this.video_btn = $('<div></div>').appendTo(this.$element).addClass('ms-video-btn').click(function() {
			that.__playVideo();
		});
		
		//this.video_frame.attr('src' , 'about:blank');
		
		if(!has_img) return;
		
		this.needPreload = true;
		this.img = this.$element.find('img:first').addClass('ms-video-img');
		
		if(this.img.data('src') !== undefined){
			this.img_src = this.img.data('src');
			this.img.removeAttr('data-src');
		}else{
			var that = this;
			this.img.attr('src' , this.img_src).on('load', function(event) {
				that.slide.preloadCount--;
				if(that.slide.preloadCount == 0)
					that.slide.___onlayersReady();
			}).each($.jqLoadFix);
		}
		
		if($.browser.msie)
			this.img.on('dragstart', function(event) { event.preventDefault(); }); // disables native dragging
	};
	
	p.loadImage = function(){
		var that = this;
		this.img.preloadImg(this.img_src, function(event) {
			that.slide.preloadCount--;
			if(that.slide.preloadCount == 0) that.slide.___onlayersReady();
		});
	};
	
})(jQuery);
//dev\slider\controls\HotspotLayer.js 
 
;(function($){

	"use strict";
	
	window.MSHotspotLayer = function(){
		MSLayerElement.call(this);
		
		this.__cssConfig = [
			'margin-top' 	,      'padding-top'	,
			'margin-bottom'	,      'padding-left'	,
			'margin-right'	,      'padding-right'	,
			'margin-left'	,      'padding-bottom' ,
			
			'left'			,       'right'			, 
			'top'			,       'bottom'		
		];
		
		
		this.ease = 'Expo'; 
		
	};
	
	MSHotspotLayer.extend(MSLayerElement);
	
	var p = MSHotspotLayer.prototype;
	var _super = MSLayerElement.prototype;
	
	/*-------------- METHODS --------------*/
	
	p._showTT = function(){
		if(!this.show_cl)  return;
		this.align = this._orgAlign;
		this._locateTT();
		
		//clearTimeout(this.hto);
		this.hide_start = false;
		
		if(this._tween)	this._tween.stop(true);
		
		this.tt.css({display:'block'});
		this._tween = CTween.animate(this.tt , 900 , this.to , {ease:'easeOut'+this.ease});
	};
	
	p._hideTT = function(){
		if(!this.show_cl)  return;
		if(this._tween)	this._tween.stop(true);
		
		var that = this;
		this._tween = CTween.animate(this.tt , 900 , this.from , {ease:'easeOut'+this.ease , complete:function(){that.tt.css('display' , 'none');}} );
		
		//clearTimeout(this.hto);
		//this.hto = setTimeout(function(){that.hide_start = true;} , 200);
	};
	
	p._updateClassName = function(name){
		if(this._lastClass)	this.tt.removeClass(this._lastClass);
		this.tt.addClass(name);
		this._lastClass = name;
	}
	
	p._alignPolicy = function(){
		var h = this.tt.outerHeight(),
		    w = Math.max(this.tt.outerWidth() , parseInt(this.tt.css('max-width'))),
		 	ww = window.innerWidth,
		 	wh = window.innerHeight;
		 	
		switch(this.align){
			case 'top':
				if(this.base_t < 0 )
					return 'bottom';
			break;
			case 'right':
				if(this.base_l + w > ww || this.base_t < 0)
					return 'bottom';
			break;
			case 'left':
				if(this.base_l < 0 || this.base_t < 0)
					return 'bottom';
			break;
		}
		
		return null;	
	};
		
	p._locateTT = function(){
		var os = this.$element.offset(),
		os2 = this.slide.slider.$element.offset();
		
		var dist = 50,
			space = 15 //* this.factor;
		
		this.pos_x = os.left - os2.left - this.slide.slider.$element.scrollLeft();
		this.pos_y = os.top - os2.top - this.slide.slider.$element.scrollTop();
		
		this.from = {opacity:0};
		this.to = {opacity:1};
		
		this._updateClassName('ms-tooltip-'+this.align);
		this.tt_arrow.css('margin-left' , '');
		
		var arrow_w = 15,//parseInt(this.tt_arrow.css('border-left')) + parseInt(this.tt_arrow.css('border-right')),
			arrow_h = 15;//parseInt(this.tt_arrow.css('border-top'))  + parseInt(this.tt_arrow.css('border-bottom'));
			
			//console.log(arrow_h,arrow_w);
		//
		switch(this.align){
			case 'top':
				var w = Math.max(this.tt.outerWidth() , parseInt(this.tt.css('max-width')));
				this.base_t = this.pos_y - this.tt.outerHeight() - arrow_h - space;
				this.base_l = this.pos_x - w/2;
				
				if(this.base_l + w > window.innerWidth){
					this.tt_arrow.css('margin-left' , -arrow_w/2 + this.base_l + w -window.innerWidth + 'px');
					this.base_l = window.innerWidth - w;
				}
				
				if(this.base_l < 0){
					this.base_l = 0;
					this.tt_arrow.css('margin-left' , -arrow_w/2 + this.pos_x - this.tt.outerWidth() / 2 + 'px');
				}
				
				if(window._css3d){
					this.from[window._jcsspfx+'Transform'] = 'translateY(-'+dist+'px)';
					this.to[window._jcsspfx+'Transform']   = '';
				}else{	
					this.from.top = (this.base_t - dist) + 'px';
					this.to.top = this.base_t + 'px';
				}

			break;
			case 'bottom':
				var w = Math.max(this.tt.outerWidth() , parseInt(this.tt.css('max-width')));
				
				this.base_t = this.pos_y + arrow_h + space;
				this.base_l = this.pos_x - w/2;
				
				if(this.base_l + w > window.innerWidth){
					this.tt_arrow.css('margin-left' , -arrow_w/2 + this.base_l + w -window.innerWidth + 'px');
					this.base_l = window.innerWidth - w;
				}
				
				if(this.base_l < 0){
					this.base_l = 0;
					this.tt_arrow.css('margin-left' , -arrow_w/2 + this.pos_x - this.tt.outerWidth() / 2 + 'px');
				}
				
				if(window._css3d){
					this.from[window._jcsspfx+'Transform'] = 'translateY('+dist+'px)';
					this.to[window._jcsspfx+'Transform'] = '';
				}else{
					this.from.top = (this.base_t + dist) + 'px';
					this.to.top = this.base_t + 'px';
				}
				
			break;
			case 'right':
				this.base_l = this.pos_x + arrow_w + space;
				this.base_t = this.pos_y - this.tt.outerHeight() / 2;
				
				if(window._css3d){
					this.from[window._jcsspfx+'Transform'] = 'translateX('+dist+'px)';
					this.to[window._jcsspfx+'Transform'] = '';
				}else{
					this.from.left = (this.base_l + dist) + 'px';
					this.to.left = this.base_l + 'px';
				}
				
			break;
			case 'left':
				this.base_l = this.pos_x - arrow_w - this.tt.outerWidth() - space;
				this.base_t = this.pos_y - this.tt.outerHeight() / 2;
				
				if(window._css3d){
					this.from[window._jcsspfx+'Transform'] = 'translateX(-'+dist+'px)';
					this.to[window._jcsspfx+'Transform'] = '';
				}else{
					this.from.left = (this.base_l - dist) + 'px';
					this.to.left = this.base_l + 'px';
				}
				
			break;
		}
		
		
		
		var policyAlign = this._alignPolicy();
		if(policyAlign !== null){
			this.align = policyAlign;
			this._locateTT();
			return;
		}
		
		this.tt.css('top'  ,parseInt(this.base_t)+'px').
				css('left' ,parseInt(this.base_l)+'px');
		
		this.tt.css(this.from);		
		
		
	};
	
	p.start = function(){
		_super.start.call(this);
		this.tt.appendTo(this.slide.slider.$element);
		//this._locateTT();
		this.tt.css('display' , 'none');
	};
	
	p.reset = function(){
		_super.reset.call(this);
		this.tt.detach();
	};
	
	p.create = function(){
		var that = this;
		
		_super.create.call(this);
		
		this._orgAlign = this.align = this.$element.data('align') !== undefined ? this.$element.data('align') : 'top';
		
		this.data = this.$element.html();
		
		this.$element.html('').on('mouseenter' , function(){that._showTT();}).on('mouseleave',function(){that._hideTT();});
		
		this.point = $('<div><div class="ms-point-center"></div><div class="ms-point-border"></div></div>')
					.addClass('ms-tooltip-point')
					.appendTo(this.$element);

		var link = this.$element.data('link'),
			target = this.$element.data('target');

		if( link ){
			this.point.on('click', function(){window.open(link , target || '_self');});
		}

		this.tt =  $('<div></div>')
					.addClass('ms-tooltip')
					//.addClass('ms-tooltip-'+this.align)
					.css('display','hidden')
					.css('opacity' , 0);
		
		this.tt_arrow = $('<div></div>')
						.addClass('ms-tooltip-arrow')
						.appendTo(this.tt);
		
		this._updateClassName('ms-tooltip-'+this.align);
		
		this.ttcont = $('<div></div>')
					  .addClass('ms-tooltip-cont')
					  .html(this.data)
					  .appendTo(this.tt); 

		//this.tt.on('mouseenter' , function(){if(!that.hide_start)that._showTT();}).on('mouseleave',function(){if(!that.hide_start)that._hideTT();});
	};

	
})(jQuery);
//dev\slider\SliderEvent.js 
 
window.MSSliderEvent = function (type){
	this.type = type;
};

MSSliderEvent.CHANGE_START      	= 'changeStart';
MSSliderEvent.CHANGE_END       		= 'changeEnd';
MSSliderEvent.WATING		      	= 'wating';
MSSliderEvent.AUTOPLAY_CHANGE   	= 'autoplayChange';
MSSliderEvent.VIDEO_PLAY		   	= 'videoPlay';
MSSliderEvent.VIDEO_CLOSE		   	= 'videoClose';
MSSliderEvent.INIT					= 'init';
MSSliderEvent.RESIZE				= 'resize';
MSSliderEvent.RESERVED_SPACE_CHANGE = 'rsc'; // internal use//dev\slider\Slide.js 
 
;(function($){
	
	"use strict";
	
	window.MSSlide = function(){
		
		this.$element = null;
		
		this.$loading = $('<div></div>').addClass('ms-slide-loading');
		
		this.layers = [];
		
		this.view 		= null;
		this.index 		= -1;
		
		this.__width 	= 0;
		this.__height 	= 0;
		
		this.preloadCount = 0;
		
		this.fillMode = 'fill'; // fill , fit , stretch , tile , center
		
		this.selected = false;
		this.pselected = false;
		this.autoAppend = true;
		
		this.moz = $.browser.mozilla;
	};
	
	var p = MSSlide.prototype;
		
	/*-------------- METHODS --------------*/
	
	
	/* -----------------------------------------------------
	 * 				Slide Swipe Reaction
	 -----------------------------------------------------*/
	p.onSwipeStart = function(){
		//this.$layers.css(window._csspfx + 'transition-duration' , '0ms');
		if(this.link)  this.linkdis = true;
		if(this.video) this.videodis = true;
	};
		
	p.onSwipeCancel = function(){
		if(this.link) this.linkdis = false;
		if(this.video) this.videodis = false;
		//this.$layers.css(window._csspfx + 'transition-duration' , this.view.__slideDuration + 'ms');
	};

	/* -----------------------------------------------------
	 * 					Slide Layers
	 -----------------------------------------------------*/
	
	p.addLayer = function(layer){
		if(!this.hasLayers)
			this.$layers  = $('<div></div>').addClass('ms-slide-layers');
		
		this.hasLayers = true;
		
		this.$layers.append(layer.$element);
		this.layers.push(layer);
		layer.slide = this;
		layer.create();
		
		if(layer.needPreload) this.preloadCount ++;		
	};
	
	// This method will be called by the last layer after loading all of layers.
	p.___onlayersReady = function(){
		this.ready = true;
		this.slider.api._startTimer();
		
		if(this.selected){
			/*this.initLayers();
			this.locateLayers();
			this.startLayers();*/

			this.showLayers();

			if(this.vinit){
				this.bgvideo.play();
				if(!this.autoPauseBgVid) 
					this.bgvideo.currentTime = 0;
			}

		}		

		if(!this.isSleeping)
			this.setup();

		CTween.fadeOut(this.$loading , 300 , true);
		
		//sequence loading
		if((this.slider.options.preload === 0 || this.slider.options.preload === 'all') && this.index < this.view.slideList.length - 1)
			this.view.slideList[this.index + 1].loadImages();
		else if(this.slider.options.preload === 'all' && this.index === this.view.slideList.length - 1)
			this.slider._removeLoading();
		
	};
	/*
	p.updateLayers = function(){
		if(!this.hasLayers) return;
		
		var value = -parseInt(this.$element.css('left')) - this.view.__contPos;
		
		this.$layers[0].style.opacity = (1 - Math.abs(value / this.__width));
		//this.$layers.css('opacity' ,  1 - Math.abs(value / this.__width));
	};
	*/
	p.startLayers = function(){
		for(var i = 0 , l = this.layers.length; i < l; ++i)
			this.layers[i].start();
	};
	
	p.initLayers = function(force){
		if(this.init && !force || this.slider.init_safemode) return;
		this.init = true;
		for(var i = 0 , l = this.layers.length; i < l; ++i)
			this.layers[i].init();
	};
	
	p.locateLayers = function(){
		for(var i = 0 , l = this.layers.length; i < l; ++i)
			this.layers[i].locate();
	};
	
	p.resetLayers = function(){
		this.$layers.css('display' , 'none');
		this.$layers.css('opacity' ,  1);
		for(var i = 0 , l = this.layers.length; i < l; ++i)
			this.layers[i].reset();
	};
	
	p.hideLayers = function(){
		if(this.preloadCount !== 0) return;
		for(var i = 0 , l = this.layers.length; i < l; ++i)
			this.layers[i].hide();
	};

	p.showLayers = function(){
		if(!this.hasLayers) return;

		if(this.lht){
			if(this.lht.reset)
				this.lht.reset();
			else
				this.lht.stop('true');
		}
		

		this.resetLayers();
		this.$layers.css('opacity' ,  1)
					.css('display' , '');
		

		if(this.preloadCount === 0){
			this.initLayers();
			this.locateLayers();
			this.startLayers();
		} 
	}
	
	/* -----------------------------------------------------*/
	
	p.setBG = function(img){
		this.hasBG = true;	
		var that = this;
		
		this.$imgcont = $('<div></div>').addClass('ms-slide-bgcont');
		
		this.$element.append(this.$loading)
			   		 .append(this.$imgcont);
		
		this.$bg_img = $(img).css('visibility' , 'hidden');
		this.$imgcont.append(this.$bg_img);
		
		this.bgAligner = new MSAligner(that.fillMode , that.$imgcont, that.$bg_img );
		this.bgAligner.widthOnly = this.slider.options.autoHeight;
			
		if(that.slider.options.autoHeight && (that.pselected || that.selected))
			 that.slider.setHeight(that.slider.options.height);
		
		if(this.$bg_img.data('src') !== undefined){
			this.bg_src = this.$bg_img.data('src');
			this.$bg_img.removeAttr('data-src');
		}else{
			this.$bg_img.one('load', function(event) {that._onBGLoad(event);})
						.each($.jqLoadFix);
		}
		
		this.preloadCount++;	
	};
	
	p._onBGLoad = function(event){
		this.bgNatrualWidth = event.width;
		this.bgNatrualHeight = event.height;

		this.bgLoaded = true;
		
		if($.browser.msie)
			this.$bg_img.on('dragstart', function(event) { event.preventDefault(); }); // disables native dragging
		
		this.preloadCount--;
		if(this.preloadCount === 0)
			this.___onlayersReady();
	};
	
	p.loadImages = function(){
		if(this.ls)return;
		this.ls = true;
		
		if(this.hasBG && this.bg_src){
			var that = this;
			this.$bg_img.preloadImg(this.bg_src , function(event) {that._onBGLoad(event);});
			//console.log('var a = ' + this.$bg_img, this.$bg_img.width(),this.$bg_img.height());
		}
		
		for(var i = 0 , l = this.layers.length; i < l; ++i){
			if(this.layers[i].needPreload)this.layers[i].loadImage();
		}

		if(this.bgvideo)
			this.bgvideo.load();
	};
	
	/* -----------------------------------------------------*/

	p.setBGVideo = function($video){
		if(!$video[0].play) return;

		// disables video in mobile devices
		if(window._mobile){
			$video.remove();
			return;
		}

		this.bgvideo  = $video[0];
		var that = this;

		$video.addClass('ms-slide-bgvideo');
		
		if($video.data('loop') !== false){
			this.bgvideo.addEventListener('ended' , function(){
				//that.bgvideo.currentTime = -1;
				that.bgvideo.play();
			});
		}	

		if($video.data('mute') !== false)
			this.bgvideo.muted = true;

		if($video.data('autopause') === true)
			this.autoPauseBgVid = true;

		this.bgvideo_fillmode = $video.data('fill-mode') || 'fill'; // fill , fit , none
		
		if(this.bgvideo_fillmode !== 'none') {
			this.bgVideoAligner = new MSAligner(this.bgvideo_fillmode , this.$element, $video );
			
			this.bgvideo.addEventListener('loadedmetadata' , function(){
				if(that.vinit) return;

				that.vinit = true;
				that.video_aspect = that.bgVideoAligner.baseHeight/that.bgVideoAligner.baseWidth;
				that.bgVideoAligner.init(that.bgvideo.videoWidth , that.bgvideo.videoHeight);

				//alert(that.bgvideo.videoWidth + ' ' + that.selected)
				that._alignBGVideo();
				CTween.fadeIn($(that.bgvideo) , 200);
				if(that.selected)
					that.bgvideo.play();
			});
		}

		$video.css('opacity' , 0);

		this.$bgvideocont = $('<div></div>').addClass('ms-slide-bgvideocont').append($video);

		if(this.hasBG)
			this.$imgcont.before(this.$bgvideocont);
		else
			this.$bgvideocont.appendTo(this.$element);
	};

	p._alignBGVideo = function(){
		if(!this.bgvideo_fillmode || this.bgvideo_fillmode === 'none') return;
		this.bgVideoAligner.align();
	};

	/* -----------------------------------------------------*/
	
	p.setSize = function(width , height , hard){
		
		this.__width  = width;
		
		if(this.slider.options.autoHeight){
			if(this.bgLoaded){
				this.ratio = this.__width / this.bgWidth;
				height = Math.floor(this.ratio * this.bgHeight);
				this.$imgcont.height(height);
			}else{
				this.ratio = width / this.slider.options.width;
				height = this.slider.options.height * this.ratio;
			}
		}
	
		this.__height = height;
		this.$element.width(width).height(height);
			

		if(this.hasBG && this.bgLoaded)this.bgAligner.align();
		this._alignBGVideo();
		
		if(hard && this.selected) this.initLayers(hard);
		if(this.selected) this.locateLayers();
		
		if(this.hasLayers){
			if(this.slider.options.autoHeight){
				this.$layers[0].style.height = this.getHeight() + 'px';
			}
			
			if(this.slider.options.layersMode == 'center') 
				this.$layers[0].style.left = Math.max( 0 ,  (this.__width - this.slider.options.width) / 2 ) + 'px';
		}
	};

	
	p.getHeight = function(){
		if(this.bgLoaded) return this.bgHeight * this.ratio;
		return Math.max(this.$element[0].clientHeight, this.slider.options.height * this.ratio);
	};

	/* -----------------------------------------------------*/

	p.__playVideo = function(){
		if(this.vplayed || this.videodis) return;
		this.vplayed = true;
		if(!this.slider.api.paused){
			this.slider.api.pause();
			this.roc = true; // resume on close;
		}
		this.vcbtn.css('display' , '');
		CTween.fadeOut(this.vpbtn 	, 500 , false);
		CTween.fadeIn(this.vcbtn 	, 500);
		CTween.fadeIn(this.vframe 	, 500);
		this.vframe.css('display' , 'block').attr('src' , this.video + '&autoplay=1');
		this.view.$element.addClass('ms-def-cursor');
		this.view.swipeControl.disable();
		
		this.slider.slideController.dispatchEvent(new MSSliderEvent(MSSliderEvent.VIDEO_PLAY));
	};
	
	p.__closeVideo = function(){
		if(!this.vplayed) return;
		this.vplayed = false;
		if(this.roc)
			this.slider.api.resume();
		var that = this;
		
		CTween.fadeIn(this.vpbtn	, 500);
		CTween.animate(this.vcbtn   , 500 , {opacity:0} , {complete:function(){	that.vcbtn.css  ('display'  , 'none'); }});
		CTween.animate(this.vframe  , 500 , {opacity:0} , {complete:function(){	that.vframe.attr('src'  , 'about:blank').css('display'  , 'none');}});
		
		this.view.swipeControl.enable();
		this.view.$element.removeClass('ms-def-cursor');
		this.slider.slideController.dispatchEvent(new MSSliderEvent(MSSliderEvent.VIDEO_CLOSE));
	};

	/* -----------------------------------------------------*/

	p.create = function(){
		var that = this;
		if(this.hasLayers){			
			this.$element.append(this.$layers);
			
			if(this.slider.options.layersMode == 'center')
				this.$layers.css('max-width' , this.slider.options.width + 'px');
		}

		if(this.link){
			this.$element.css('cursor' , 'pointer')
						 .click(function(){ if(!that.linkdis) window.open(that.link , that.link_targ || '_self'); });
		}
		
		if(this.video){

			if(this.video.indexOf('?') === -1) this.video += '?';
			this.vframe = $('<iframe></iframe>')
						  .addClass('ms-slide-video')
						  .css({width:'100%' , height:'100%' , display:'none'})
						  .attr('src' , 'about:blank')
						  .appendTo(this.$element);
			
			this.vpbtn = $('<div></div>')
						.addClass('ms-slide-vpbtn')
						.click(function(){that.__playVideo();})
						.appendTo(this.$element);	
			
			this.vcbtn = $('<div></div>')
						.addClass('ms-slide-vcbtn')
						.click(function(){that.__closeVideo();})
						.appendTo(this.$element)
						.css('display','none');

			if(window._touch){
				this.vcbtn.removeClass('ms-slide-vcbtn')
						  .addClass('ms-slide-vcbtn-mobile')
						  .append('<div class="ms-vcbtn-txt">Close video</div>')
						  .appendTo(this.view.$element.parent());
			}
		}	
		
		if(!this.slider.options.autoHeight && this.hasBG){
			this.$imgcont.css('height' , '100%');
			
			if(this.fillMode === 'center' || this.fillMode === 'stretch')
				this.fillMode = 'fill';		
		}

		this.sleep();
	};
	
	
	p.destroy = function(){
		for(var i = 0 , l = this.layers.length; i < l; ++i)
			this.layers[i].$element.stop(true).remove();
		this.$element.remove();
		this.$element = null;
	};
	
	p.setup = function(){

		//if(this.isSettedup) return;
		//this.isSettedup = true;

		if(!this.initBG && this.bgLoaded){
			this.initBG = true;
			this.$bg_img.css('visibility' , '');
			this.bgWidth  = this.bgNatrualWidth  || this.$bg_img.width();
			this.bgHeight = this.bgNatrualHeight || this.$bg_img.height();

			CTween.fadeIn(this.$imgcont , 300);	

			if(this.slider.options.autoHeight)
			this.$imgcont.height(this.bgHeight * this.ratio);
			
			this.bgAligner.init(this.bgWidth  , this.bgHeight );
			this.setSize(this.__width , this.__height);
			
			if(this.slider.options.autoHeight && (this.pselected || this.selected))
			 	this.slider.setHeight(this.getHeight());
		}

	};

	p.prepareToSelect = function(){
		if(this.pselected || this.selected) return;
		this.pselected = true;		
		
		if(this.link || this.video){
			this.view.addEventListener(MSViewEvents.SWIPE_START  , this.onSwipeStart  , this);
			this.view.addEventListener(MSViewEvents.SWIPE_CANCEL , this.onSwipeCancel , this);
		}

		this.loadImages();
			
		if(this.preloadCount === 0){
			if( this.bgvideo ){
				this.bgvideo.play();
			}

			if( this.slider.options.instantStartLayers){
				this.showLayers();
			}
		}

		if(this.moz)
			this.$element.css('margin-top' , '');
	};
	
	/*p.prepareToUnselect = function(){
		if(!this.pselected || !this.selected) return;
		
		this.pselected = false;
		
	};*/
	
	p.select = function(){
		if(this.selected) return;
		this.selected = true;
		this.pselected = false;
				
		this.$element.addClass('ms-sl-selected');
		
		if(this.hasLayers){
			if(this.slider.options.autoHeight)
				this.$layers[0].style.height = this.getHeight() + 'px';
			
			if( !this.slider.options.instantStartLayers ) {
				this.showLayers();
			}

			//this.view.addEventListener(MSViewEvents.SCROLL 		, this.updateLayers  , this)
		} 	

		if(this.preloadCount === 0 && this.bgvideo)
			this.bgvideo.play();
	};
	
	p.unselect = function(){
		this.pselected = false;

		if(this.moz)
			this.$element.css('margin-top' , '0.1px');

		if(this.link || this.video){
			this.view.removeEventListener(MSViewEvents.SWIPE_START 	, this.onSwipeStart  , this);
			this.view.removeEventListener(MSViewEvents.SWIPE_CANCEL  , this.onSwipeCancel , this);
		}

		if(this.bgvideo){
			this.bgvideo.pause();
			if(!this.autoPauseBgVid && this.vinit)
				this.bgvideo.currentTime = 0;
		}

		if(!this.selected) return;
		this.selected = false;

		this.$element.removeClass('ms-sl-selected');		
		
		if(this.hasLayers){
			var that = this;
			that.lht = CTween.animate(this.$layers ,500 , {opacity:0} , {complete:function(){	that.resetLayers();	}});
			//this.view.removeEventListener(MSViewEvents.SCROLL 		, this.updateLayers  , this);
		}
			
		if(this.video && this.vplayed){
			this.__closeVideo();
			this.roc = false;
		}	
	};	

	p.sleep = function(){
		if(this.isSleeping) return;
		this.isSleeping = true;
		if(this.autoAppend)
			this.$element.detach();
	};
	
	p.wakeup = function(){
		if(!this.isSleeping) return;
		this.isSleeping = false;
		
		if(this.autoAppend)
			this.view.$slideCont.append(this.$element);

		if(this.moz)
			this.$element.css('margin-top' , '0.1px');
		
		this.setup();

		// aling bg
		if(this.hasBG)
			this.bgAligner.align();
	};

})(jQuery);//dev\slider\SlideController.js 
 
;(function($){
	
	"use strict";
	
	var SliderViewList = {};
	
	window.MSSlideController = function(slider){
		
		this._delayProgress		= 0;
		
		this._timer 			= new averta.Timer(100);
		this._timer.onTimer 	= this.onTimer;
		this._timer.refrence 	= this;
		
		this.currentSlide		= null;
		
		this.slider 	= slider;
		this.so 		= slider.options;
		
		
		
		averta.EventDispatcher.call(this);
		
	};
	
	MSSlideController.registerView = function(name , _class){
		if(name in SliderViewList){
			 throw new Error( name + ', is already registered.');
			 return;
		}
		
		SliderViewList[name] = _class;
	};
	
	MSSlideController.SliderControlList = {};
	MSSlideController.registerControl = function(name , _class){
		if(name in MSSlideController.SliderControlList){
			 throw new Error( name + ', is already registered.');
			 return;
		}
		
		MSSlideController.SliderControlList[name] = _class;
	};	
	
	var p = MSSlideController.prototype;
	
	/*-------------- METHODS --------------*/
	

	p.setupView = function(){

		var that = this;
		this.resize_listener = function(){that.__resize();};
		
		// in @version 1.5.7 it will be added in Masterslider.js _setupSliderLayout function
		//$(window).bind('resize', this.resize_listener);
		
		//if(this.so.smoothHeight) this.so.autoHeight = true;
	
		var viewOptions = {
			spacing: 		this.so.space,
			mouseSwipe:		this.so.mouse,
			loop:			this.so.loop,
			autoHeight:		this.so.autoHeight,
			swipe:			this.so.swipe,
			speed:			this.so.speed,
			dir:			this.so.dir,
			viewNum: 		this.so.inView,
			critMargin: 	this.so.critMargin  	
		};	
		
		if(this.so.viewOptions)
			$.extend(viewOptions , this.so.viewOptions);
				
		if(this.so.autoHeight) this.so.heightLimit = false;
	
		//this.view.slideDuration = this.so.duration;

		var viewClass = SliderViewList[this.slider.options.view] || MSBasicView;
		if(viewClass._3dreq && (!window._css3d || $.browser.msie) ) viewClass = viewClass._fallback || MSBasicView;
		
		this.view = new viewClass(viewOptions);

		if(this.so.overPause){
			var that = this;
			this.slider.$element.mouseenter(function(){
				that.is_over = true;
				that._stopTimer();
			}).mouseleave(function(){
				that.is_over = false;
				that._startTimer();
			});
		}

	};

	p.onChangeStart = function(){
		
		this.change_started = true;

		if(this.currentSlide) this.currentSlide.unselect();
		this.currentSlide = this.view.currentSlide;
		this.currentSlide.prepareToSelect();
		//this.__appendSlides();
		if(this.so.endPause && this.currentSlide.index === this.slider.slides.length - 1){
			this.pause();
			//this._timer.reset();
			this.skipTimer();
		}
		
		if(this.so.autoHeight){
			this.slider.setHeight(this.currentSlide.getHeight());
		}
		
		this.dispatchEvent(new MSSliderEvent(MSSliderEvent.CHANGE_START));
	};
	
	p.onChangeEnd = function(){
		//if(!this.currentSlide.selected)
		//	this._timer.reset();
		this.change_started = false;
		
		this._startTimer();
		this.currentSlide.select();

		
		
		if(this.so.preload > 1){
			var loc ,i , l = this.so.preload - 1;
			
			// next slides
			for(i=1;i<=l;++i){
				loc = this.view.index + i;
				
				if(loc >= this.view.slideList.length) {
					if(this.so.loop){
						loc = loc - this.view.slideList.length;
					}else{
						i = l; 
						continue;
					}
				}
				this.view.slideList[loc].loadImages();
			}
			
			// previous slides
			if(l > this.view.slideList.length/2) 
				l = Math.floor(this.view.slideList.length/2);
			
			for(i=1;i<=l;++i){
				
				loc = this.view.index - i;
				
				if(loc < 0){
					if(this.so.loop){
						loc = this.view.slideList.length + loc;
					}else{
						i = l;
						continue;
					}
				} 
				this.view.slideList[loc].loadImages();
			}
		}
		
		this.dispatchEvent(new MSSliderEvent(MSSliderEvent.CHANGE_END));
		
	};
		
	p.onSwipeStart = function(){
		//this._timer.reset();
		this.skipTimer();
	};
	
	p.skipTimer = function(){
		this._timer.reset();
		this._delayProgress  = 0;
		this.dispatchEvent(new MSSliderEvent(MSSliderEvent.WATING));
	};

	p.onTimer = function(time) {
		
		if(this._timer.getTime() >= this.view.currentSlide.delay * 1000){
			//this._timer.reset();
			this.skipTimer();
			this.view.next();
			this.hideCalled = false;
		}
		this._delayProgress = this._timer.getTime() / (this.view.currentSlide.delay * 10);
		
		if(this.so.hideLayers && !this.hideCalled && this.view.currentSlide.delay * 1000 - this._timer.getTime() <= 300){
			this.view.currentSlide.hideLayers();
			this.hideCalled = true;
		}
		
		this.dispatchEvent(new MSSliderEvent(MSSliderEvent.WATING));
	};
	
	p._stopTimer = function(){
		if(this._timer)
			this._timer.stop();
	};
	
	p._startTimer = function(){
		if(!this.paused && !this.is_over && this.currentSlide && this.currentSlide.ready && !this.change_started)
			this._timer.start();
	};

	p.__appendSlides = function(){
		var slide , loc , i = 0 , l = this.view.slideList.length -1;

		// detach all
		for ( i ; i < l ; ++i){
			slide = this.view.slideList[i];
			if(!slide.detached){
			 	slide.$element.detach();
			 	slide.detached = true;
			}
		}

		// append current slide
		this.view.appendSlide(this.view.slideList[this.view.index]);

		l = 3;

		// next slides
		for(i=1;i<=l;++i){
			loc = this.view.index + i;
			
			if(loc >= this.view.slideList.length) {
				if(this.so.loop){
					loc = loc - this.view.slideList.length;
				}else{
					i = l; 
					continue;
				}
			}

			slide = this.view.slideList[loc];
			slide.detached = false;
			this.view.appendSlide(slide);

		}
		
		// previous slides
		if(l > this.view.slideList.length/2) 
			l = Math.floor(this.view.slideList.length/2);
		
		for(i=1;i<=l;++i){
			
			loc = this.view.index - i;
			
			if(loc < 0){
				if(this.so.loop){
					loc = this.view.slideList.length + loc;
				}else{
					i = l;
					continue;
				}
			} 
			
			slide = this.view.slideList[loc];
			slide.detached = false;
			this.view.appendSlide(slide);
		}

	}

	p.__resize = function(hard){
		if(!this.created) return;

		this.width = this.slider.$element[0].clientWidth || this.so.width;
		
		if(!this.so.fullwidth){ 
			this.width = Math.min(this.width , this.so.width);
			//this.view.$element.css('left' , (this.slider.$element[0].clientWidth - this.width) / 2 + 'px');
		}
		
		if(!this.so.fullheight)
			this.height = this.width / this.slider.aspect;
		else{
			this.so.heightLimit = false;
			this.so.autoHeight = false;
			this.height = this.slider.$element[0].clientHeight;
		}
		
		if(!this.so.autoHeight)
			this.view.setSize(this.width , (this.so.heightLimit ? Math.min(this.height , this.so.height) : this.height) , hard);
		else{
			this.currentSlide.setSize(this.width , null , hard);
			this.view.setSize(this.width , this.currentSlide.getHeight() , hard);
		}
		
		if(this.slider.$controlsCont){
			if(this.so.centerControls && this.so.fullwidth) {
				this.view.$element.css('left' , Math.min(0,-(this.slider.$element[0].clientWidth - this.so.width) / 2) + 'px');
			}
		}
		
		this.dispatchEvent(new MSSliderEvent(MSSliderEvent.RESIZE));
	};

	p.__dispatchInit = function(){
		this.dispatchEvent(new MSSliderEvent(MSSliderEvent.INIT));
	};
		
	p.setup = function(){
		
		this.created = true;
		this.paused = !this.so.autoplay;

		//this.slider.$element.append(this.view.$element);
		this.view.addEventListener(MSViewEvents.CHANGE_START , this.onChangeStart , this);
		this.view.addEventListener(MSViewEvents.CHANGE_END   , this.onChangeEnd   , this);
		this.view.addEventListener(MSViewEvents.SWIPE_START  , this.onSwipeStart  , this);	
		
		this.currentSlide = this.view.slides[this.so.start - 1];
		this.__resize();
		this.view.create(this.so.start - 1);
		
		if(this.so.preload === 0)
			this.view.slides[0].loadImages();
			
		this.scroller = this.view.controller;

		if(this.so.wheel){
			var that = this;
			var last_time = new Date().getTime();
			this.wheellistener = function(event){
				var current_time = new Date().getTime();
				if(current_time - last_time < 350) return;
				last_time = current_time;
				var e = window.event || event.orginalEvent || event;
				var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
				if(delta < 0)		that.next();
				else if(delta > 0)	that.previous();
				return false;
			};
			
			if($.browser.mozilla) this.slider.$element[0].addEventListener('DOMMouseScroll' , this.wheellistener);
			else this.slider.$element.bind('mousewheel', this.wheellistener);
		}

		if(this.slider.$element[0].clientWidth === 0)
			this.slider.init_safemode = true;

		this.__resize();
	};
	
	p.index = function(){
		return this.view.index;
	};
	
	p.count = function(){
		return this.view.slidesCount;
	};
	
	p.next = function(){
		this.skipTimer();
		this.view.next();
	};
	
	p.previous = function(){
		this.skipTimer();
		this.view.previous();
	};
	
	p.gotoSlide = function(index) { 
		this.skipTimer();
		this.view.gotoSlide(index);
	};

	p.destroy = function(reset){
		this.slider.destroy(reset);
	};

	p._destroy = function(){
		this._timer.reset();
		this._timer = null;
		
		$(window).unbind('resize', this.resize_listener);
		this.view.destroy();
		this.view = null;
		
		if(this.so.wheel){
			if($.browser.mozilla) this.slider.$element[0].removeEventListener('DOMMouseScroll' , this.wheellistener);
			else this.slider.$element.unbind('mousewheel', this.wheellistener);
			this.wheellistener = null;
		}
			
		this.so = null;
	};

	p.update = function(hard){
		if(this.slider.init_safemode && hard)
			this.slider.init_safemode = false;
		this.__resize(hard);
	}
		
	p.locate = function(){
		this.__resize();
	};
	
	p.resume = function(){
		if(!this.paused) return;
		this.paused = false;
		this._startTimer();
	};
	
	p.pause = function(){
		if(this.paused) return;
		this.paused = true;
		this._stopTimer();
	};

	p.currentTime = function(){
		return this._delayProgress;
	};
	
	averta.EventDispatcher.extend(p);
})(jQuery);
//dev\slider\MasterSlider.js 
 
/**
 * Master Slider Main JavaScript File
 * @version 1.5.7
 * @author Averta Ltd.
 */

;(function($){
	
	"use strict";
	
	var LayerTypes = {
		'image' 	: MSImageLayerElement,
		'text'  	: MSLayerElement,
		'video' 	: MSVideoLayerElement,
		'hotspot'	: MSHotspotLayer
	};
	
	window.MasterSlider = function(){
		
		// Default Options
		this.options = {
			autoplay 		: false,      // Enables the autoplay slideshow.
			loop 			: false,	  // Enables the continuous sliding mode.
			mouse			: true,		  // Whether the user can use mouse drag navigation.
			swipe			: true,		  // Whether the drag/swipe navigation is enabled.
			grabCursor		: true,		  // Whether the slider uses grab mouse cursor.
			space  			: 0,		  // The spacing value between slides in pixels.
			fillMode		: 'fill',  	  // Specifies the slide background scaling method. Its acceptable values are "fill", "fit", "stretch", "center" and "tile". 
			start			: 1,		  // The slider starting slide number.
			view			: 'basic',	  // The slide changing transition. 
			width			: 300,		  // The base width of slides. It helps the slider to resize in correct ratio.
			height			: 150,		  // The base height of slides, It helps the slider to resize in correct ratio.
			inView			: 15, 		  // Specifies number of slides which will be added at a same time in DOM.
			critMargin		: 1,		  // 
			heightLimit		: true,		  // It force the slide to use max height value as its base specified height value.
			smoothHeight	: true,		  // Whether the slider uses smooth animation while its height changes.
			autoHeight		: false,      // Whether the slider adapts its height to each slide height or not. It overrides heightLimit option.
			fullwidth		: false,	  // It enables the slider to adapt width to its parent element. It's very useful for creating full-width sliders. In default it takes max width as its base width value.
			fullheight		: false,	  // It enables the slider to adapt height to its parent element.
			autofill		: false,	  // It enables the slider to adapt width and height to its parent element, It's very useful for creating fullscreen or fullwindow slider.
			layersMode		: 'center',	  // It accepts two values "center" and "full". The "center" value indicates that the slider aligns layers to the center. This option is only effective in full width mode.
			hideLayers		: false,	  // Whether the slider hides all layers before changing slide.
			endPause		: false,	  // Whether the slider pauses slideshow when it stays at the last slide.
			centerControls 	: true,		  // Whether the slider aligns UI controls to center. This option is only effective in full width mode.
			overPause		: true,		  // Whether the slider pauses slideshow on hover.
			shuffle			: false,	  // Enables the shuffle slide order.
			speed			: 17, 		  // Specifies slide changing speed. It accepts float values between 0 and 100.
			dir				: 'h',		  // Specifies slide changing direction. It accepts two values "h" (horizontal) and "v" (vertical).
			preload			: 0,		  // Specifies number of slides which will be loaded by slider. 0 value means the slider loads slides in sequence.
			wheel			: false,	  // Whether slider uses mouse wheel for navigation.
			layout			: 'boxed',	  // It accepts 'fullwidth', 'fullscreen', 'fillwidth', 'autofill', 'partialview', 'boxed'. It overrides 'fullwidth' and 'autofill' (added in v1.5.6)
			fullscreenMargin: 0,
			instantStartLayers: false
		};
		
		this.slides = [];		
		this.$element = null;

		// used by new layout method. to force fullwidth or fullscreen
		this.lastMargin = 0; 

		// Reserved side spaces of slider
		this.leftSpace = 0;
		this.topSpace = 0;
		this.rightSpace = 0;
		this.bottomSpace = 0;

		var that = this;
		this.resize_listener = function(){that._resize();};
		$(window).bind('resize', this.resize_listener);
				
	};
	
	MasterSlider.author  		= 'Averta Ltd. (www.averta.net)';
	MasterSlider.version 		= '1.5.7';
	MasterSlider.releaseDate 	= 'March 2014';
	
	var p = MasterSlider.prototype;
	
	/*-------------- METHODS --------------*/

	/**
	 * create one slide object for each slide and add it to slide controller
	 * @since 1.0
	 * @private
	 */
	p.__setupSlides = function(){
		var that = this,
			new_slide,
			ind = 0;
		
		this.$element.children('.ms-slide').each(function(index) {
			
			var $slide_ele = $(this);
			
			new_slide 			= new MSSlide();
			new_slide.$element 	= $slide_ele;
			new_slide.slider 	= that;
			new_slide.delay  	= $slide_ele.data('delay') 		!== undefined ? $slide_ele.data('delay') 		: 3;
			new_slide.fillMode 	= $slide_ele.data('fill-mode')	!== undefined ? $slide_ele.data('fill-mode') 	: that.options.fillMode;
			new_slide.index 	= ind++;

			// Slide Background Image
			var slide_img = $slide_ele.children('img');
			if(slide_img.length > 0 ) new_slide.setBG(slide_img[0]);
			
			// Slide Video Background
			var slide_video = $slide_ele.children('video');
			if(slide_video.length > 0) new_slide.setBGVideo(slide_video);

			// controls
			if(that.controls){
				for(var i = 0 , l = that.controls.length; i<l ; ++i)
					that.controls[i].slideAction(new_slide);
			}
			
			// Slide Link and Video
			var slide_link = $slide_ele.children('a').each(function(index) {
			  var $this = $(this);
			  if(this.getAttribute('data-type') === 'video'){
			  	new_slide.video = this.getAttribute('href');
			  	$this.remove();
			  }else if(!$this.hasClass('ms-layer')) {
			  	new_slide.link  = this.getAttribute('href');
			  	new_slide.link_targ = this.getAttribute('target');
			  	$this.remove();
			  }
			});//.remove();
			
			// Slide Layers
			that.__createSlideLayers(new_slide , $slide_ele.find('.ms-layer'));
			
			that.slides.push(new_slide);
			that.slideController.view.addSlide(new_slide);

		});
	};
	
	/**
	 * Creates layers of specified layer
	 * @param  {MSSlide} slide  
	 * @param  {Array} layers
	 * @since 1.0
	 * @private
	 */
	p.__createSlideLayers = function(slide , layers) {
		if(layers.length == 0) return;
		
		layers.each(function(index , domEle){
			var $layer_element,
				$parent_ele;
			
			if (domEle.nodeName === 'A'){
				$parent_ele = $(this);
				$layer_element = $parent_ele.find('img');
			}else{
				$layer_element = $(this);
			} 
			
			var layer = new (LayerTypes[$layer_element.data('type') || 'text']) ();
			
			layer.$element = $layer_element;
			
			layer.link = $parent_ele;
			
			var eff_parameters = {},
				end_eff_parameters = {};
		
			if($layer_element.data('effect')	!== undefined)		eff_parameters.name 			= $layer_element.data('effect');
			if($layer_element.data('ease')		!== undefined) 		eff_parameters.ease 			= $layer_element.data('ease');
			if($layer_element.data('duration')  !== undefined)  	eff_parameters.duration 		= $layer_element.data('duration');
			if($layer_element.data('delay')   	!== undefined)   	eff_parameters.delay			= $layer_element.data('delay');

			if($layer_element.data('hide-effect'))		    		end_eff_parameters.name 		= $layer_element.data('hide-effect');
			if($layer_element.data('hide-ease'))		   			end_eff_parameters.ease 		= $layer_element.data('hide-ease');
			if($layer_element.data('hide-duration') !== undefined)  end_eff_parameters.duration		= $layer_element.data('hide-duration');
			if($layer_element.data('hide-time') 	!== undefined)  end_eff_parameters.time 		= $layer_element.data('hide-time');
			
			if($layer_element.data('resize')   !== undefined) 		layer.resizable					= $layer_element.data('resize');
			if($layer_element.data('swipe')	   !== undefined)  		layer.swipe						= $layer_element.data('swipe');
					
			if($layer_element.data('widthlimit') !== undefined) 	layer.minWidth					= $layer_element.data('widthlimit');
			
			layer.setStartAnim(eff_parameters);
			layer.setEndAnim(end_eff_parameters);
			
			slide.addLayer(layer);
			
		});
		
	};
	
	/**
	 * remove slider initialize loading
	 * @since 1.0
	 * @private
	 */
	p._removeLoading = function(){
		$(window).unbind('resize', this.resize_listener);
		this.$element = $('#' + this.id).removeClass('before-init')
										.css('visibility', 'visible')
										.css('height','')
										.css('opacity' , 0);
		CTween.fadeIn(this.$element);
		this.$loading.remove();

		if(this.slideController)
			this.slideController.__resize();
	};
	
	/**
	 * resize listener, it only used for aligning slider loading and after slider init it will be removed
	 * @param  {Event} e
	 * @since 1.0
	 * @private
	 */
	p._resize = function(e){
		if(this.$loading){
			var h = this.$loading[0].clientWidth / this.aspect;
			h = this.options.heightLimit ? Math.min(h , this.options.height) : h;
			
			this.$loading.height(h);
			this.$element.height(h);		
		}
	};
	
	/**
	 * changes the order of slides element before setup slides
	 * @since 1.0
	 * @private
	 */
	p._shuffleSlides = function(){
		var slides = this.$element.children('.ms-slide') , r;

		for(var i = 0 , l = slides.length; i < l ; ++i){
			r = Math.floor(Math.random() * (l - 1));
			if(i != r){
				this.$element[0].insertBefore(slides[i] , slides[r]);
				slides = this.$element.children('.ms-slide');
			}
		}
	};

	/**
	 * New method of setting up the layout of slider
	 * @since 1.5.6 
	 */
	p._setupSliderLayout = function(){

		// create side spaces
		this._updateSideMargins();
		this.lastMargin = this.leftSpace;
		
		var lo = this.options.layout;

		if( lo !== 'boxed' && lo !== 'partialview' ){
			this.options.fullwidth = true;  // enable slider fullscreen for fullwidth, fillwidth, autofill and fullscreen layouts.
		} 

		if( lo === 'fullscreen' || lo === 'autofill' ){
			this.options.fullheight = true;
		}

		// partial view 
		if ( lo === 'partialview' ){
			this.$element.addClass('ms-layout-partialview');
		}

		if( lo === 'fullscreen' ||  lo === 'fullwidth' ){
			$(window).bind('resize', {that:this}, this._updateLayout);
			this._updateLayout();
		}

		// bind resize handler of slidecontroller __resize 
		$(window).bind('resize', this.slideController.resize_listener);
	};

	/**
	 * updates layout of slider based on window size
	 * @param  {Event} event
	 * @since 1.5.6
	 */
	p._updateLayout = function(event){
		var that = event? event.data.that : this,
			lo = that.options.layout,
			$element = that.$element;

		// width 
		$element.width($('body').innerWidth() - that.leftSpace - that.rightSpace);
		var margin = -$element.offset().left + that.leftSpace + that.lastMargin;
		$element.css('margin-left', margin );
		that.lastMargin = margin;

		// height
		if( lo === 'fullscreen' ){
			$element.height(window.innerHeight - that.options.fullscreenMargin - that.topSpace - that.bottomSpace);
		}
	};


	/**
	 * initialize the slider, called by document ready
	 * <code>preventInit</code> property prevents auto initialize slider after document ready it used by plugins of slider like Flickr
	 * @since 1.0
	 * @protected
	 */
	p._init = function(){

		if(this.preventInit) return;
		
		this.initialized = true;

		if(this.options.preload !== 'all')
			this._removeLoading();
		//else
		//	this.$element.css('width' , this.$loading[0].clientWidth);
		
		if(this.options.shuffle) 	this._shuffleSlides();

		MSLayerEffects.setup();

		this.slideController.setupView();
		this.view = this.slideController.view;

		if(this.controls){		
			this.$controlsCont = $('<div></div>').addClass('ms-container').appendTo(this.$element);
			if(this.options.centerControls)
				this.$controlsCont.css('max-width' , this.options.width + 'px');
				
			for(var i = 0 , l = this.controls.length; i<l ; ++i){
				this.controls[i].setup();
			}
			
			this.$controlsCont.prepend(this.view.$element);
		}else{
			this.$element.append(this.view.$element);
		}

		this._setupSliderLayout();
		this.__setupSlides();
		this.slideController.setup();
		
		if(this.controls){
			for(i = 0 , l = this.controls.length; i<l ; ++i)
				this.controls[i].create();
		}
		
		if(this.options.autoHeight){
			this.slideController.view.$element.height(this.slideController.currentSlide.getHeight());
		}
			
		// add grab cursor
		if(this.options.swipe && !window._touch && this.options.grabCursor && this.options.mouse){
			var $view = this.view.$element;
			
			$view.mousedown(function(){
				$view.removeClass('ms-grab-cursor');
				$view.addClass('ms-grabbing-cursor');
			}).addClass('ms-grab-cursor');
			
			$(document).mouseup(function(){
				$view.removeClass('ms-grabbing-cursor');
				$view.addClass('ms-grab-cursor');
			});
		}

		this.slideController.__dispatchInit();
		
	};
	
	/**
	 * changes the height of slider, it used in autoheight slider
	 * @param {Number} value
	 * @since 1.0
	 * @public
	 */
	p.setHeight = function(value){
		if(this.options.smoothHeight){
			if(this.htween){
				if(this.htween.reset)this.htween.reset();
				else	 			 this.htween.stop(true);
			} 
			this.htween = CTween.animate(this.slideController.view.$element , 500 , {height:value} , {ease:'easeOutQuart'});
		}else
			this.slideController.view.$element.height(value);
	};
	
	/**
	 * reserves white space in sides of slider, it used by controls
	 * @param  {String} side  left|right|top|bottom
	 * @param  {Number} space 
	 * @returns {Number} start position in space.
	 * @since 1.5.7
	 * @public
	 */
	p.reserveSpace = function(side, space){
		var sideSpace = side+'Space',
			pos = this[sideSpace];

		this[sideSpace] += space;
		
		this._updateSideMargins();

		return pos;
	};

	/**
	 * returns the reserved space, it used by controls and called when aligned control hides
	 * @param  {String} side  
	 * @param  {Number} space 
	 * @since 1.5.7
	 * @public 
	 */
	/*p.returnSpace = function(side, space){
		var sideSpace = side+'Space';
		this[sideSpace] = Math.max(0 , this[sideSpace] - space);

		this.api.dispatchEvent(new MSSliderEvent(MSSliderEvent.RESERVED_SPACE_CHANGE));
		this._updateSideMargins();
	};*/

	p._updateSideMargins = function(){
		this.$element.css('margin', this.topSpace + 'px ' + this.rightSpace + 'px ' + this.bottomSpace + 'px ' + this.leftSpace + 'px');
	}

	p._realignControls = function(){
		this.rightSpace = this.leftSpace = this.topSpace = this.bottomSpace = 0;
		this._updateSideMargins();
		this.api.dispatchEvent(new MSSliderEvent(MSSliderEvent.RESERVED_SPACE_CHANGE));
	};

	/*------------------------- Public Methods -----------------------*/

	/**
	 * Adds new control to the slider
	 * @param  {String} control
	 * @param  {Object} options [description]
	 * @since 1.0
	 * @public
	 */
	p.control = function(control , options){
		if(!(control in MSSlideController.SliderControlList)) return;
		if(!this.controls) this.controls = [];
		var ins = new MSSlideController.SliderControlList[control](options);
		ins.slider = this;
		this.controls.push(ins);
		
		return this;
	};
	
	/**
	 * setup slider
	 * @param  {String|jQuery object} id
	 * @param  {Object} options 
	 * @since 1.0
	 * @public
	 */
	p.setup = function(id , options){
		this.id = id;
		if(typeof id === 'string')
			this.$element = $('#' + id);
		else 
			this.$element = id.eq(0);

		//create a copy from slider markup, it will be used in destroy method.
		this.setupMarkup = this.$element.html();

		if(this.$element.length === 0){
			if(console) console.log('Master Slider Error: #'+id+' not found.');
			return;
		}

		this.$element.addClass('master-slider').addClass('before-init');

		// IE prefix class
		if($.browser.msie){
			this.$element.addClass('ms-ie')
						 .addClass('ms-ie' + $.browser.version.slice(0 , $.browser.version.indexOf('.')));
		}
		
		// Android prefix class
		var ua = navigator.userAgent.toLowerCase();
		var isAndroid = ua.indexOf("android") > -1;
		if(isAndroid) {
		  this.$element.addClass('ms-android');
		}

		var that = this;
		$.extend(this.options, options);
		
		this.aspect = this.options.width / this.options.height;
		
		this.$loading = $('<div></div>').
						addClass('ms-loading-container').
						insertBefore(this.$element).
						append($('<div></div>').addClass('ms-loading'));

		this.$loading.parent().css('position' , 'relative');
		
		
		// old methods 
		if(this.options.autofill){
			this.options.fullwidth = true;
			this.options.fullheight = true;
		}
		
		if(this.options.fullheight){
			this.$element.addClass('ms-fullheight');
		}

		//this._setupSliderLayout();	
		this._resize();
		
		// define slide controller and api
		this.slideController = new MSSlideController(this);
		this.api = this.slideController;

		$(document).ready(function(){that._init();});

		return this;
	};
	
	/**
	 * destroy the slider instance 
	 * @param  {Boolean} insertMarkup	 whether add slider markup after destroy.
	 * @since 1.4
	 * @public
	 */
	p.destroy = function(insertMarkup){
		
		if(this.controls){
			for(var i = 0 , l = this.controls.length; i!==l ; i++)
				this.controls[i].destroy();
		}
		
		if(this.slideController) this.slideController._destroy();

		if(this.$loading) this.$loading.remove();

		if(insertMarkup) 
			this.$element.html(this.setupMarkup).css('visibility' , 'hidden');
		else    		 
			this.$element.remove();

		var lo = this.options.layout;
		if( lo === 'fullscreen' ||  lo === 'fullwidth' ){
			$(window).unbind('resize', this._updateLayout);
		}
	};
		
})(jQuery);
//dev\slider\views\ViewEvents.js 
 
window.MSViewEvents = function (type){
	this.type = type;
};

MSViewEvents.SWIPE_START      = 'swipeStart';
MSViewEvents.SWIPE_END        = 'swipeEnd';
MSViewEvents.SWIPE_MOVE		 = 'swipeMove';
MSViewEvents.SWIPE_CANCEL   	 = 'swipeCancel';
MSViewEvents.SCROLL 			 = 'scoll';
MSViewEvents.CHANGE_START     = 'slideChangeStart';
MSViewEvents.CHANGE_END	     = 'slideChangeEnd';

//dev\slider\views\BasicView.js 
 
;(function($){
	
	"use strict";
	
	window.MSBasicView = function(options){
		
		this.options = {
			loop 			: false,
			dir  			: 'h',
			autoHeight 		: false,
			spacing			: 5,
			mouseSwipe		: true,
			swipe			: true,
			speed			: 17,
			minSlideSpeed	: 2,

			viewNum			: 20,
			critMargin		: 1
		};
		
		$.extend(this.options , options);
		
		this.dir		= this.options.dir;
		this.loop   	= this.options.loop;
		this.spacing	= this.options.spacing;
		
		this.__width  = 0;
		this.__height = 0;

		this.__cssProb 		= this.dir === 'h' ? 'left'    : 'top';
		this.__offset 		= this.dir === 'h' ? 'offsetLeft' : 'offsetTop';
		this.__dimension    = this.dir === 'h' ? '__width' : '__height';

		this.__translate_end	= window._css3d ? ' translateZ(0px)' : '';

		this.$slideCont	= $('<div></div>').addClass('ms-slide-container');
		this.$element 	= $('<div></div>').addClass('ms-view').addClass('ms-basic-view').append(this.$slideCont);
	
		this.currentSlide 	= null;
		this.index 			= -1;
		this.slidesCount	= 0;

		this.slides			= [];
		this.slideList		= []; // All of slides with added priority sort;
		this.viewSlidesList = []; 
			
		this.css3 			= window._cssanim;
		this.start_buffer = 0;
		this.firstslide_snap = 0;
		
		this.controller 	 = new Controller(0 , 0 , {
			snapping	     : true,
			snapsize		 : 100,
			paging			 : true,
			snappingMinSpeed : this.options.minSlideSpeed,
			friction		 : (100 - this.options.speed * 0.5) / 100,
			endless			 : this.loop
		});
		
		this.controller.renderCallback(this.dir === 'h'? this._horizUpdate : this._vertiUpdate , this);
		this.controller.snappingCallback(this.__snapUpdate , this);
		this.controller.snapCompleteCallback(this.__snapCompelet , this);
		
		averta.EventDispatcher.call(this);
	};
	
	var p = MSBasicView.prototype;
		
	/*-------------- METHODS --------------*/
	
	p.__snapCompelet = function(snap , type){
		// if(this.loop && Math.abs(this.__contPos) > 20000){
		// 	this.__locateSlides();
		// 	this.gotoSlide(this.index , true);
		// }

		this.__locateSlides();
		this.start_buffer = 0;
	
		this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_END));	
	};
	
	p.__snapUpdate = function(controller , snap , change){

		if(this.loop){
			var target_index = this.index + change;
			this.updateLoop(target_index);

			if(target_index >= this.slidesCount)	target_index = target_index - this.slidesCount;
			if(target_index <  0)					target_index = this.slidesCount + target_index;
		
			this.index = target_index;
		}else{
			if(snap < 0 ||  snap >= this.slidesCount) return
			this.index = snap;
		}
		
		this._checkCritMargins();

		if($.browser.mozilla){
			this.slideList[this.index].$element[0].style.marginTop 	= '0.1px';
			if(this.currentSlide){
				this.currentSlide.$element[0].style.marginTop 	= '';
			}
		}

		var new_slide = this.slideList[this.index];
		if(new_slide === this.currentSlide)return;
		
		this.currentSlide = new_slide;
		this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_START));	
	};


	p._checkCritMargins = function(){
		if(this.normalMode) return;

		var hlf 	= Math.floor(this.options.viewNum / 2),
			inView 	= this.viewSlidesList.indexOf(this.slideList[this.index]),
			size 	= (this[this.__dimension] + this.spacing),
			cm 		= this.options.critMargin;

		if(this.loop){
			if(inView <= cm || inView >= this.viewSlidesList.length - cm){
				size *= (inView - hlf);
				this.__locateSlides(false ,  size + this.start_buffer );
				this.start_buffer += size;
			}	

			return;
		}

		if( (inView < cm && this.index >= cm ) || (inView >= this.viewSlidesList.length - cm && this.index < this.slidesCount - cm)){
			this.__locateSlides(false);
		}

	};


	p._vertiUpdate = function(controller , value){
		
		this.__contPos = value;
		this.dispatchEvent(new MSViewEvents(MSViewEvents.SCROLL));
		
		if(this.css3){
			this.$slideCont[0].style[window._jcsspfx + 'Transform'] = 'translateY('+-value+'px)' + this.__translate_end;
			return;
		}

		this.$slideCont[0].style.top = -value + 'px';
		
	};
	
	p._horizUpdate = function(controller , value){

		this.__contPos = value;
		this.dispatchEvent(new MSViewEvents(MSViewEvents.SCROLL));
		
		if(this.css3) {
			this.$slideCont[0].style[window._jcsspfx + 'Transform'] = 'translateX('+-value+'px)'+ this.__translate_end;
			return;
		}
		
		this.$slideCont[0].style.left = -value + 'px';
		
	};


	p.__updateViewList = function(){

		if(this.normalMode) {
			this.viewSlidesList = this.slides;
			return;
		}

		var temp = this.viewSlidesList.slice();

		// update view list 
		this.viewSlidesList = [];	
		var i = 0 , hlf = Math.floor(this.options.viewNum / 2) , l;

		if(this.loop){
			for(; i !== this.options.viewNum ; i++)
				this.viewSlidesList.push(this.slides[this.currentSlideLoc - hlf + i]);
		}else{
			// before
			for(i = 0 ; i !== hlf && this.index - i !== -1 ; i++)
				this.viewSlidesList.unshift(this.slideList[this.index - i]);	
			// after
			for(i = 1; i !== hlf && this.index + i !== this.slidesCount; i++)
				this.viewSlidesList.push(this.slideList[this.index + i]);
		}

		for (i = 0 , l = temp.length ; i !== l ; i++)
			if( this.viewSlidesList.indexOf(temp[i]) === -1)
				temp[i].sleep();

		temp = null;
	};
	
	p.__locateSlides = function(move , start){

		this.__updateViewList();

		start = !this.loop ? this.slides.indexOf(this.viewSlidesList[0]) * (this[this.__dimension] + this.spacing ) : start || 0; 

		// old method
		/*for(i = 0; i < this.slidesCount ; ++i){
			var pos =  i * (this[this.__dimension] + this.spacing);
			
			this.slides[i].position = pos;
			this.slides[i].$element[0].style[this.__cssProb] =  pos + 'px';
		}*/

		var l = this.viewSlidesList.length , slide;
		
		for(var i = 0; i !== l ; i++){
			var pos =  start + i * (this[this.__dimension] + this.spacing );
			slide = this.viewSlidesList[i];
			slide.wakeup();
			slide.position = pos;
			slide.$element[0].style[this.__cssProb] =  pos + 'px';
		}

		if(move !== false)this.controller.changeTo( this.slideList[this.index].position , false , null , null , false);

	};
		
	p.__createLoopList = function(){ 
		var return_arr = [];
		var i = 0,
			count = this.slidesCount / 2;
		
		var before_count  = (this.slidesCount % 2 === 0)? count - 1	: Math.floor(count);
		var after_count	  = (this.slidesCount % 2 === 0)? count 	: Math.floor(count);
		
		this.currentSlideLoc = before_count;

		// before
		for(i = 1 ; i <= before_count ; ++i)
			return_arr.unshift(this.slideList[(this.index - i < 0)? this.slidesCount -  i + this.index: this.index - i]);
		
		// current
		return_arr.push(this.slideList[this.index]);
		
		// after
		for(i = 1; i <= after_count; ++i)
			return_arr.push(this.slideList[(this.index + i >= this.slidesCount)? this.index + i - this.slidesCount : this.index + i]);
		
		return return_arr;
		
	};
	
	/*
	 * Calculate shortest distance from index to target.
	 * It will used in loop gesture.
	 * 
	 * Negative values means left direction.
	 */
	
	p.__getSteps = function(index , target){ 
		var right = (target < index)?  this.slidesCount - index + target : target - index;
		var left  = Math.abs(this.slidesCount - right);
		
		return (right < left)? right : -left;		
	};
	
	p.__pushEnd = function(){ 
		var first_slide = this.slides.shift();
		var last_slide = this.slides[this.slidesCount - 2];
		
		this.slides.push(first_slide);
		
		if(!this.normalMode) return;

		var pos = last_slide.$element[0][this.__offset] + this.spacing + this[this.__dimension];
		first_slide.$element[0].style[this.__cssProb] = pos + 'px';
		first_slide.position = pos;
	};
	
	p.__pushStart = function(){ 
		var last_slide =  this.slides.pop();
		var first_slide = this.slides[0];
		
		this.slides.unshift(last_slide);

		if(!this.normalMode) return;

		var pos = first_slide.$element[0][this.__offset] - this.spacing - this[this.__dimension];
		last_slide.$element[0].style[this.__cssProb] = pos + 'px';
		last_slide.position = pos;
	};
	
	p.addSlide = function(slide){ 
		slide.view = this;

		//this.$slideCont.append(slide.$element);

		this.slides.push(slide);
		this.slideList.push(slide);
		
		this.slidesCount++;
	};
	
	p.appendSlide = function(slide){
		this.$slideCont.append(slide.$element);
	};

	p.updateLoop = function(index){
		if(this.loop){
			var steps = this.__getSteps(this.index , index);
			
			for(var i = 0 , l = Math.abs(steps) ; i < l ; ++ i){
				if(steps < 0) 	this.__pushStart();
				else			this.__pushEnd();
			}
		}
	};
	
	p.gotoSlide = function(index , fast){
		this.updateLoop(index);

		// is in critical margin ?
		this.index = index;
		
		var target_slide = this.slideList[this.index];

		this._checkCritMargins();

		//this.controller.changeTo( target_slide.$element[0][this.__offset] , !fast , null , null , false);
		this.controller.changeTo( target_slide.position , !fast , null , null , false);
		if(target_slide === this.currentSlide) return;
		
		//if(this.currentSlide) this.currentSlide.unselect();
		
		this.currentSlide = target_slide;
		
		this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_START));
		if(fast)this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_END));	
	}; 
	
	p.next = function(){ 
		this.gotoSlide((this.index + 1 >= this.slidesCount)? 0 : this.index + 1);
	};
	
	p.previous = function(){ 
		this.gotoSlide((this.index - 1 < 0)? this.slidesCount - 1 : this.index - 1);
	};
	
	/* --------------- Swipe control ------------------*/	
	
	p.setupSwipe = function(){ 
		
		this.swipeControl = new averta.TouchSwipe(this.$element);
		this.swipeControl.swipeType = this.dir === 'h'? 'horizontal' : 'vertical';
		var that = this;
		
		if(this.dir === 'h'){
			this.swipeControl.onSwipe = function(status){
				that.horizSwipeMove(status);
			};
		}else{
			this.swipeControl.onSwipe = function(status){
				that.vertSwipeMove(status);
			};
		}
		
	};
	
	p.vertSwipeMove = function(status){
		var phase = status.phase;
		if(phase === 'start'){
			this.controller.stop();
			this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_START));		
		}else if(phase === 'move' && (!this.loop || Math.abs(this.currentSlide.position - this.controller.value + status.moveY ) < this.cont_size / 2)){
			this.controller.drag(status.moveY);
		}else if(phase === 'end' || phase === 'cancel'){
			
			var speed = status.distanceY / status.duration * 50/3;
			
			if(Math.abs(speed) > 0.1){
				this.controller.push(-speed);
				if(speed > this.controller.options.snappingMinSpeed)
					this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_END));
			}else{
				this.controller.cancel();
				this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_CANCEL));
			}
			
		}
	};
	
	p.horizSwipeMove = function(status){	
		var phase = status.phase;
		//console.log(this.loop)
		if(phase === 'start'){
			this.controller.stop();
			this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_START));		
		}else if(phase === 'move' && (!this.loop || Math.abs(this.currentSlide.position - this.controller.value + status.moveX ) < this.cont_size / 2)){
			this.controller.drag(status.moveX);
		}else if(phase === 'end' || phase === 'cancel'){
			
			var speed = status.distanceX / status.duration * 50/3;
			
			if(Math.abs(speed) > 0.1){
				this.controller.push(-speed );
				if(speed > this.controller.options.snappingMinSpeed)
					this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_END));
			}else{
				this.controller.cancel();
				this.dispatchEvent(new MSViewEvents(MSViewEvents.SWIPE_CANCEL));
			}
			
		}
	};
		
	/* ------------------------------------------------*/	
	
	p.setSize = function(width , height , hard){
		if(this.lastWidth === width && height === this.lastHeight && !hard) return;

		this.$element.width(width).height(height);
		
		for(var i = 0; i < this.slidesCount ; ++i)
				this.slides[i].setSize(width , height , hard);
				
		this.__width 	= width;
		this.__height 	= height;
			
		if(this.__created){	
			this.__locateSlides();
			
			this.cont_size = (this.slidesCount - 1) * (this[this.__dimension] + this.spacing);
			if(!this.loop) 	this.controller._max_value = this.cont_size;
				
			this.controller.options.snapsize = this[this.__dimension] + this.spacing;
			this.controller.changeTo(this.currentSlide.position , false , null , null , false );
			this.controller.cancel();
			
			this.lastWidth = width;
			this.lastHeight = height;
		}
	};
	
	p.create = function(index){
		
		this.__created = true;
		
		this.index = Math.min((index || 0), this.slidesCount - 1);

		if(this.loop)
			this.slides = this.__createLoopList();

		this.normalMode = this.slidesCount <= this.options.viewNum;

		this.__locateSlides();
				
		for(var i = 0; i < this.slidesCount ; ++i)
			this.slides[i].create();
			
		this.controller.options.snapsize = this[this.__dimension] + this.spacing;		
		if(!this.loop)	this.controller._max_value = (this.slidesCount - 1) * (this[this.__dimension] + this.spacing);
		
		this.gotoSlide(this.index , true);
		
		if(this.options.swipe && (window._touch || this.options.mouseSwipe))
			this.setupSwipe();

	};
	
	p.destroy = function(){
		if(!this.__created) return;
		
		for(var i = 0; i < this.slidesCount ; ++i)
			this.slides[i].destroy();
			
		this.slides = null;
		this.slideList = null;
		this.$element.remove();
		
		this.controller.destroy();
		this.controller = null;
	};
	
	averta.EventDispatcher.extend(p);
	
	MSSlideController.registerView('basic' , MSBasicView);
	
})(jQuery);
//dev\slider\views\WaveView.js 
 
;(function($){
	
	"use strict";
	
	window.MSWaveView = function(options){
		MSBasicView.call(this , options);
		this.$element.removeClass('ms-basic-view').addClass('ms-wave-view');
		this.$slideCont.css(window._csspfx + 'transform-style' , 'preserve-3d');
	};
	
	MSWaveView.extend(MSBasicView);
	MSWaveView._3dreq = true;
	MSWaveView._fallback = MSBasicView;
	
	var p  = MSWaveView.prototype;
	var _super  = MSBasicView.prototype;
	 
	/*-------------- METHODS --------------*/
	
	/*p.__setSlideTransDuration = function(value){
		for(var i=0; i<this.slidesCount; ++i)
			this.slides[i].$element.css(window._csspfx + 'transition-duration' , value + 'ms');
	};*/
	
	p._horizUpdate = function(controller , value){
		
		_super._horizUpdate.call(this, controller , value);
		
		var cont_scroll = -value;
		var slide_pos , slide , distance;
		
		for(var i = 0; i < this.slidesCount; ++i){
			slide = this.slideList[i];
			//slide_pos = parseInt(slide.$element.css('left'));
			distance = -cont_scroll - slide.position;
			this.__updateSlidesHoriz(slide , distance);
		}
		
	};
	
	p._vertiUpdate = function(controller , value){
		
		_super._vertiUpdate.call(this, controller , value);
		
		var cont_scroll = -value;
		var slide_pos , slide , distance;
		
		for(var i = 0; i < this.slidesCount; ++i){
			slide = this.slideList[i];
			//slide_pos = parseInt(slide.$element.css('left'));
			distance = -cont_scroll - slide.position;
			this.__updateSlidesVertic(slide , distance);
		}
		
	};
	
	
	p.__updateSlidesHoriz = function(slide , distance){
		var value =  Math.abs(distance * 100 / this.__width);
		//var value2 = Math.min(value , 100);
	//	var sp = Math.min(100 , )
		//slide.$bg_img.css('opacity' , (100 -  Math.abs(distance * 120 / this.__width / 3)) / 100);
		slide.$element.css(window._csspfx + 'transform' , 'translateZ('+ -value * 3 +'px) rotateY(0.01deg)'/* translateX('+(distance < 0 ? 1 : -1) * -value * 5+'px)'*/);
	};
	
	p.__updateSlidesVertic = function(slide , distance){
		this.__updateSlidesHoriz(slide , distance);
	};
	
	/*
	p.swipeMove = function(status){
		
		if(status.phase == 'start'){
			this.__setSlideTransDuration(0);
		}else if(status.phase == 'end'){
			this.__setSlideTransDuration(this.__slideDuration);
		}
		
		_super.swipeMove.call(this , status);
	};
	
	p.create = function(index){
		_super.create.call(this , index);
		
		for(var i = 0; i<this.slidesCount ; ++i){
			this.slides[i].$element.css(window._csspfx + 'transition-property' , window._csspfx 		+ 'transform');
			this.slides[i].$element.css(window._csspfx + 'transition-duration' , this.slideDuration + 'ms');
		}
	};
	*/
	MSSlideController.registerView('wave' , MSWaveView);
})(jQuery);

//dev\slider\views\FadeBasicView.js 
 
/**
 * Master Slider Fade Basic view
 * @author averta
 * @version 1.1
 * @package MS
 */

;(function(){
	
	window.MSFadeBasicView = function(options){
		MSWaveView.call(this , options);
		this.$element.removeClass('ms-wave-view').addClass('ms-fade-basic-view');
	};
	
	MSFadeBasicView.extend(MSWaveView);
	
	var p = MSFadeBasicView.prototype;
	var _super = MSFadeBasicView.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.__updateSlidesHoriz = function(slide , distance){
		var value =  Math.abs(distance * 0.6 / this.__width);
		value = 1 - Math.min(value , 0.6);
		slide.$element.css('opacity' , value);
	};
	
	p.__updateSlidesVertic = function(slide , distance){
		this.__updateSlidesHoriz(slide , distance);
	};
	
	MSSlideController.registerView('fadeBasic' , MSFadeBasicView);
	MSWaveView._fallback = MSFadeBasicView;
})();//dev\slider\views\FadeWaveView.js 
 
/**
 * Master Slider Fade Wave View
 * @author averta
 * @version 1.0
 * @extends {MSWaveView}
 */
;(function(){
	
	window.MSFadeWaveView = function(options){
		MSWaveView.call(this , options);
		this.$element.removeClass('ms-wave-view').addClass('ms-fade-wave-view');
	};
	
	MSFadeWaveView.extend(MSWaveView);
	MSFadeWaveView._3dreq = true;
	MSFadeWaveView._fallback = MSFadeBasicView;
	
	var p = MSFadeWaveView.prototype;
	var _super = MSWaveView.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.__updateSlidesHoriz = function(slide , distance){
		var value =  Math.abs(distance * 100 / this.__width);
		 value = Math.min(value , 100);
		slide.$element.css('opacity' , 1-value/300);
		slide.$element.css(window._csspfx + 'transform' , 'scale('+ (1 - value/800) +') rotateY(0.01deg) ');
	};
	
	p.__updateSlidesVertic = function(slide , distance){
		this.__updateSlidesHoriz(slide , distance);
	};
	
	MSSlideController.registerView('fadeWave' , MSFadeWaveView);
	
})();//dev\slider\views\FlowView.js 
 
;(function($){
	
	"use strict";
	
	window.MSFlowView = function(options){
		MSWaveView.call(this , options);
		this.$element.removeClass('ms-wave-view').addClass('ms-flow-view');
		//this.$slideCont.css(window._csspfx + 'transform-style' , 'preserve-3d');
	};
	
	MSFlowView.extend(MSWaveView);
	MSFlowView._3dreq = true;
	MSFlowView._fallback = MSFadeBasicView;
	
	var p  = MSFlowView.prototype;
	var _super  = MSWaveView.prototype;
	 
	/*-------------- METHODS --------------*/
	
	
	p.__updateSlidesHoriz = function(slide , distance){
		var value  =  Math.abs(distance * 100 / this.__width);
		var rvalue =  Math.min(value * 0.3 , 30) * (distance < 0 ? -1 : 1);
		var zvalue = value * 1.2;
		slide.$element[0].style[window._jcsspfx + 'Transform'] = 'translateZ('+ -zvalue*5 +'px) rotateY(' + rvalue + 'deg) ';
	};
	
	p.__updateSlidesVertic  = function(slide , distance){
		var value  =  Math.abs(distance * 100 / this.__width);
		var rvalue =  Math.min(value * 0.3 , 30) * (distance < 0 ? -1 : 1);
		var zvalue = value * 1.2;
		slide.$element[0].style[window._jcsspfx + 'Transform'] = 'translateZ('+ -zvalue*5 +'px) rotateX(' + -rvalue + 'deg) ';
	};
	
	
	MSSlideController.registerView('flow' , MSFlowView);
})(jQuery);

//dev\slider\views\FadeFlowView.js 
 
/**
 * Master Slider Fade Flow View
 * @author averta
 * @extends {MSWaveView}
 * @version 1.0
 */
;(function(){
	
	window.MSFadeFlowView = function(options){
		MSWaveView.call(this , options);
		this.$element.removeClass('ms-wave-view').addClass('ms-fade-flow-view');
	};
	
	MSFadeFlowView.extend(MSWaveView);
	MSFadeFlowView._3dreq = true;

	var p = MSFadeFlowView.prototype;
	var _super = MSWaveView.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.__calculate = function(distance){
		var value = Math.min(Math.abs(distance * 100 / this.__width) , 100);
		var rvalue =  Math.min(value * 0.5 , 50) * (distance < 0 ? -1 : 1);
		return {value: value, rvalue: rvalue};
	};

	p.__updateSlidesHoriz = function(slide , distance){
		var clc = this.__calculate(distance);
		slide.$element.css('opacity' , 1-clc.value/300);
		slide.$element[0].style[window._csspfx + 'transform'] = 'translateZ('+ -clc.value +'px) rotateY(' + clc.rvalue + 'deg) ';
	};
	
	p.__updateSlidesVertic = function(slide , distance){
		var clc = this.__calculate(distance);
		slide.$element.css('opacity' , 1-clc.value/300);
		slide.$element[0].style[window._csspfx + 'transform'] = 'translateZ('+ -clc.value +'px) rotateX(' + -clc.rvalue + 'deg) ';
	};
	
	MSSlideController.registerView('fadeFlow' , MSFadeFlowView);
	
})();//dev\slider\views\MaskView.js 
 
;(function($){
	
	"use strict";
	
	window.MSMaskView = function(options){
		MSBasicView.call(this , options);
		this.$element.removeClass('ms-basic-view').addClass('ms-mask-view');
		
	};
	
	MSMaskView.extend(MSBasicView);
	
	var p  = MSMaskView.prototype;
	var _super  = MSBasicView.prototype;
		
	/*-------------- METHODS --------------*/
	
	p.addSlide = function(slide){ // OK
		slide.view = this;
		
		slide.$frame = $('<div></div>').addClass('ms-mask-frame').append(slide.$element);
		slide.$element[0].style.position = 'relative';
		//this.$slideCont.append(slide.$frame);
		slide.autoAppend = false;

		this.slides.push(slide);
		this.slideList.push(slide);
		
		this.slidesCount++;
	};
	
	p.setSize = function(width , height){
		var slider = this.slides[0].slider;
		
		for(var i = 0; i < this.slidesCount ; ++i){
			this.slides[i].$frame[0].style.width  = width  + 'px';
			if(!slider.options.autoHeight)
				this.slides[i].$frame[0].style.height = height + 'px';
		}
		
		_super.setSize.call(this , width , height);
	};
	
	// p.__snapUpdate = function(controller , snap , change){
		
	// 	if(this.loop){
	// 		var target_index = this.index + change;
	// 		this.updateLoop(target_index);

	// 		if(target_index >= this.slidesCount)	target_index = target_index - this.slidesCount;
	// 		if(target_index <  0)					target_index = this.slidesCount + target_index;
		
	// 		this.index = target_index;
	// 	}else{
	// 		if(snap < 0 ||  snap >= this.slidesCount) return
	// 		this.index = snap;
	// 	}
		
		
	// 	this._checkCritMargins();

	// 	if($.browser.mozilla){
			
	// 		this.slideList[this.index].$frame[0].style.marginTop 	= '0.1px';
	// 		this.slideList[this.index].$element[0].style.marginTop 	= '0.1px';
			
	// 		if(this.currentSlide){
	// 			this.currentSlide.$frame[0].style.marginTop 	= '';
	// 			this.currentSlide.$element[0].style.marginTop 	= '';
	// 		}
	// 	}
		
	// 		var new_slide = this.slideList[this.index];
	// 	if(new_slide === this.currentSlide)return;
		
	// 	this.currentSlide = new_slide;
	// 	this.dispatchEvent(new MSViewEvents(MSViewEvents.CHANGE_START));		
	// };
	
	p._horizUpdate = function(controller , value){
		
		_super._horizUpdate.call(this , controller , value);
		
		var i = 0;
		
		if(this.css3) {
			for(i = 0 ; i < this.slidesCount ; ++i){
				this.slideList[i].$element[0].style[window._jcsspfx + 'Transform'] = 'translateX('+(value - this.slideList[i].position)+'px)'+ this.__translate_end;
			}
			return;
		}
		
		for(i = 0 ; i < this.slidesCount ; ++i){
			this.slideList[i].$element[0].style.left = (value - this.slideList[i].position) + 'px';	
		}
			
	};
	
	p._vertiUpdate = function(controller , value){
		
		_super._vertiUpdate.call(this , controller , value);
		
		var i = 0;
		
		if(this.css3) {
			for(i = 0 ; i < this.slidesCount ; ++i){
				this.slideList[i].$element[0].style[window._jcsspfx + 'Transform'] = 'translateY('+(value - this.slideList[i].position)+'px)'+ this.__translate_end;
			}
			return;
		}
		
		for(i = 0 ; i < this.slidesCount ; ++i){
			this.slideList[i].$element[0].style.top = (value - this.slideList[i].position) + 'px';	
		}
			
	};
	
	p.__pushEnd = function(){ // OK
		var first_slide = this.slides.shift();
		var last_slide = this.slides[this.slidesCount - 2];
		
		this.slides.push(first_slide);
		if(!this.normalMode) return;

		var pos = last_slide.$frame[0][this.__offset] + this.spacing + this[this.__dimension];
		first_slide.$frame[0].style[this.__cssProb] = pos + 'px';
		first_slide.position = pos;
	};
	
	p.__pushStart = function(){ // OK
		
		var last_slide =  this.slides.pop();
		var first_slide = this.slides[0];
		
		this.slides.unshift(last_slide);
		
		if(!this.normalMode) return;
		
		var pos = first_slide.$frame[0][this.__offset] - this.spacing - this[this.__dimension];
		last_slide.$frame[0].style[this.__cssProb] = pos + 'px';
		last_slide.position = pos;
	};
	
	p.__updateViewList = function(){

			if(this.normalMode) {
			this.viewSlidesList = this.slides;
			return;
		}

		var temp = this.viewSlidesList.slice();

		// update view list 
		this.viewSlidesList = [];	
		var i = 0 , hlf = Math.floor(this.options.viewNum / 2) , l;

		if(this.loop){
			for(; i !== this.options.viewNum ; i++)
				this.viewSlidesList.push(this.slides[this.currentSlideLoc - hlf + i]);
		}else{
			// before
			for(i = 0 ; i !== hlf && this.index - i !== -1 ; i++)
				this.viewSlidesList.unshift(this.slideList[this.index - i]);	
			// after
			for(i = 1; i !== hlf && this.index + i !== this.slidesCount; i++)
				this.viewSlidesList.push(this.slideList[this.index + i]);
		}

		for (i = 0 , l = temp.length ; i !== l ; i++){
			if( this.viewSlidesList.indexOf(temp[i]) === -1){
				temp[i].sleep();
				temp[i].$frame.detach();
			}
		}

		temp = null;
	};


	p.__locateSlides = function(move , start){ // OK
		this.__updateViewList();

		start = !this.loop ? this.slides.indexOf(this.viewSlidesList[0]) * (this[this.__dimension] + this.spacing ) : start || 0; 

		// Old method
		// for(var i = 0; i < this.slidesCount ; ++i){
		// 	var pos =  i * (this[this.__dimension] + this.spacing);
			
		// 	this.slides[i].position = pos;
		// 	this.slides[i].$frame[0].style[this.__cssProb] =  pos + 'px';
		// }

		var l = this.viewSlidesList.length , slide;
		
		for(var i = 0; i !== l ; i++){
			var pos =  start + i * (this[this.__dimension] + this.spacing );
			slide = this.viewSlidesList[i];

			this.$slideCont.append(slide.$frame);
			slide.wakeup(false);
			slide.position = pos;
			slide.$frame[0].style[this.__cssProb] =  pos + 'px';
		}

		if(move !== false)this.controller.changeTo( this.slideList[this.index].position , false , null , null , false);

	};
	
	MSSlideController.registerView('mask' , MSMaskView);
})(jQuery);
//dev\slider\views\FadeView.js 
 
;(function($){
	
	"use strict";
	
	window.MSFadeView = function(options){
		MSBasicView.call(this , options);
		this.$element.removeClass('ms-basic-view').addClass('ms-fade-view');
		this.controller.renderCallback(this.__update , this);
	};
	
	MSFadeView.extend(MSBasicView);
	
	var p  = MSFadeView.prototype;
	var _super  = MSBasicView.prototype;
	 
	/*-------------- METHODS --------------*/
	
	p.__update = function(controller , value){
		var cont_scroll = -value;
		var slide_pos , slide , distance;
		
		for(var i = 0; i < this.slidesCount; ++i){
			slide = this.slideList[i];
			distance = -cont_scroll - slide.position;
			this.__updateSlides(slide , distance);
		}
	};
	
	p.__updateSlides = function(slide , distance){
		var value =  Math.abs(distance / this[this.__dimension]);
		if(1 - value <= 0){
			slide.$element.fadeTo(0 , 0).css('visibility' , 'hidden');	
		}else{
			slide.$element.fadeTo(0 , 1 - value).css('visibility' , '');
		}
	};
	
	p.__locateSlides = function(move , start){

		this.__updateViewList();

		// Old method
		// for(var i = 0; i < this.slidesCount ; ++i){
		// 	this.slides[i].position = i * this[this.__dimension];
		// }

		start = !this.loop ? this.slides.indexOf(this.viewSlidesList[0]) * (this[this.__dimension] + this.spacing ) : start || 0; 

		var l = this.viewSlidesList.length , slide;
		
		for(var i = 0; i !== l ; i++){
			var pos =  start + i * this[this.__dimension];
			slide = this.viewSlidesList[i];
			slide.wakeup();
			slide.position = pos;
		}

		if(move !== false)this.controller.changeTo( this.slideList[this.index].position , false , null , null , false);

	};
	
	p.__pushEnd = function(){
		var first_slide = this.slides.shift();
		var last_slide = this.slides[this.slidesCount - 2];
		this.slides.push(first_slide);
		first_slide.position = last_slide.position + this[this.__dimension];
	};
	
	p.__pushStart = function(){
		var last_slide =  this.slides.pop();
		var first_slide = this.slides[0];
		this.slides.unshift(last_slide);		
		last_slide.position = first_slide.position - this[this.__dimension];
	};
	
	p.create = function(index){
		_super.create.call(this , index);
		this.spacing = 0;
		this.controller.options.minValidDist = 10;
	};
	
	MSSlideController.registerView('fade' , MSFadeView);
})(jQuery);//dev\slider\views\ScaleView.js 
 
;(function($){
	
	"use strict";
	
	window.MSScaleView = function(options){
		MSBasicView.call(this , options);
		this.$element.removeClass('ms-basic-view').addClass('ms-scale-view');
		this.controller.renderCallback(this.__update , this);
	};
	
	MSScaleView.extend(MSFadeView);
	
	var p  = MSScaleView.prototype;
	var _super  = MSFadeView.prototype;
	 
	/*-------------- METHODS --------------*/

	p.__updateSlides = function(slide , distance){
		var value =  Math.abs(distance / this[this.__dimension]);
		if(1 - value <= 0){
			slide.$element.fadeTo(0 , 0).css('visibility' , 'hidden');	
		}else{
			slide.$element.fadeTo(0 , 1 - value).css('visibility' , '').css(window._jcsspfx + 'Transform' , 'perspective(2000px) translateZ('+(value* (distance < 0 ? -0.5 : 0.5)) * 300+'px)');
		}
	};
	
	p.create = function(index){
		_super.create.call(this , index);
		this.controller.options.minValidDist = 0.03;
	};
	
	MSSlideController.registerView('scale' , MSScaleView);
})(jQuery);//dev\slider\views\FocusView.js 
 
/**
 * Master Slider Focus View
 * @version 1.1
 * @author averta
 * @package MS
 * @extends {MSFadeBasicView}
 */

;(function(){

	'use strict';
	
	var perspective = 2000;

	window.MSFocusView = function(options){
		MSWaveView.call(this , options);
		this.$element.removeClass('ms-wave-view').addClass('ms-focus-view');
		this.options.centerSpace = this.options.centerSpace  || 1;
	};
	
	MSFocusView.extend(MSWaveView);
	MSFocusView._3dreq = true;
	MSFocusView._fallback = MSFadeBasicView;
	
	var p = MSFocusView.prototype;
	var _super = MSWaveView.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.__calcview = function(z , w){
		var a =  w / 2 * z / (z + perspective); 
		return a * (z + perspective) / perspective;
	};
	
	p.__updateSlidesHoriz = function(slide , distance){
		var value =  Math.abs(distance * 100 / this.__width);
		value = -Math.min(value , 100)* 15;
		slide.$element.css(window._csspfx + 'transform' , 'translateZ('+ value  +'px) rotateY(0.01deg) translateX('+ (distance < 0 ? 1 : -1) * (-this.__calcview(value, this.__width) * this.options.centerSpace )+'px)');
	};
	
	p.__updateSlidesVertic = function(slide , distance){
		var value =  Math.abs(distance * 100 / this.__width);
		value = -Math.min(value , 100)* 15;
		slide.$element.css(window._csspfx + 'transform' , 'translateZ('+ value  +'px) rotateY(0.01deg) translateY('+ (distance < 0 ? 1 : -1) * (-this.__calcview(value, this.__width) * this.options.centerSpace )+'px)');
	};
	
	MSSlideController.registerView('focus' , MSFocusView);
	
})();//dev\slider\views\PartialWaveView.js 
 
/**
 * Master Slider Partial Wave View
 * @version 1.0
 * @author averta
 * @extends {MSWaveView}
 */

;(function(){
	
	window.MSPartialWaveView = function(options){
		MSWaveView.call(this , options);
		this.$element.removeClass('ms-wave-view').addClass('ms-partial-wave-view');
	};
	
	MSPartialWaveView.extend(MSWaveView);
	MSPartialWaveView._3dreq = true;
	MSPartialWaveView._fallback = MSFadeBasicView;
	
	var p = MSPartialWaveView.prototype;
	var _super = MSWaveView.prototype;
	
	/*-------------- METHODS --------------*/
	
	p.__updateSlidesHoriz = function(slide , distance){
		var value =  Math.abs(distance * 100 / this.__width);
		slide.$bg_img.css('opacity' , (100 -  Math.abs(distance * 120 / this.__width / 3)) / 100);
		slide.$element.css(window._csspfx + 'transform' , 'translateZ('+ -value * 3 +'px) rotateY(0.01deg) translateX('+distance*0.75+'px)');
	};
	
	p.__updateSlidesVertic = function(slide , distance){
		var value =  Math.abs(distance * 100 / this.__width);
		slide.$bg_img.css('opacity' , (100 -  Math.abs(distance * 120 / this.__width / 3)) / 100);
		slide.$element.css(window._csspfx + 'transform' , 'translateZ('+ -value * 3 +'px) rotateY(0.01deg) translateY('+distance*0.75+'px)');
	};
	
	MSSlideController.registerView('partialWave' , MSPartialWaveView);
	
})();//dev\slider\uicontrols\BaseControl.js 
 
;(function($){
	
	"use strict";
	
	var BaseControl = function(){
		this.options = {
			prefix:'ms-',
			autohide:true,
			overVideo:true	
		};
	};
	
	var p = BaseControl.prototype;
	
	/* -------------------------------- */
	
	p.slideAction = function(slide){

	};
	
	p.setup = function(){		
		this.cont = this.options.insertTo ? $(this.options.insertTo) : this.slider.$controlsCont;
		if(!this.options.overVideo) this._hideOnvideoStarts();

		if(this.options.hideUnder){
			//this.slider.api.addEventListener(MSSliderEvent.RESIZE, this.onSliderResize, this);
			$(window).bind('resize', {that:this}, this.onResize);
			this.onResize();
		}
	};

	/**
	 * hide control if width of slider changes to lower that specified value [hideUnder]
	 * @since 1.5.7
	 * @protected
	 */
	p.onResize = function(event){
		var that = (event && event.data.that) || this;
		var w = window.innerWidth;
		if( w <= that.options.hideUnder && !that.detached ){
			that.$element.css('display', 'none');
			that.detached = true;
			if( that.onDetach ){
				that.onDetach();
			}
		}else if( w >= that.options.hideUnder && that.detached ){
			that.detached = false;
			that.$element.css('display', '');
			that.visible();
			if( that.onAppend ){
				that.onAppend();
			}
		}
	};
	
	p.create = function(){
		var that = this;
		if(this.options.autohide && !window._touch){
			
			this.hide(true);
			
			this.slider.$controlsCont.mouseenter(function(){
				if(!that._disableAH && !that.mdown)that.visible();
				that.mleave = false;
			}).mouseleave(function(){
				that.mleave = true;
				if(!that.mdown)that.hide();
			}).mousedown(function(){
				that.mdown = true;
			});
			
			$(document).mouseup(function(){
				if(that.mdown && that.mleave)that.hide();
				that.mdown = false;
			});
		}

	};
	
	p._hideOnvideoStarts = function(){
		var that = this;
		slider.api.addEventListener(MSSliderEvent.VIDEO_PLAY , function(){
   			 that._disableAH = true;
   			 that.hide();
		});
		 
		slider.api.addEventListener(MSSliderEvent.VIDEO_CLOSE , function(){
		     that._disableAH = false;
   			 that.visible();
		});
	};
	
	p.hide = function(fast){
		if(fast) this.$element.css('opacity' , 0);
		else	 CTween.fadeOut(this.$element , 400 , false);
		
		this.$element.addClass('ms-ctrl-hide');
	};
	
	p.visible = function(){
		if(this.detached) return;
		CTween.fadeIn(this.$element , 400 );
		this.$element.removeClass('ms-ctrl-hide');
	};
	

	
	p.destroy = function(){
		if(this.options.hideUnder){
			//this.slider.api.removeEventListener(MSSliderEvent.RESIZE, this.onResize, this);
			$(window).unbind('resize', this.onResize);
		}
	};
	
	window.BaseControl = BaseControl;
	
})(jQuery);
//dev\slider\uicontrols\Arrows.js 
 
;(function($){
	
	"use strict";
	
	var MSArrows = function(options){
		BaseControl.call(this);
		$.extend(this.options , options);
	};
	
	MSArrows.extend(BaseControl);
	
	var p = MSArrows.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */
	
	p.setup = function(){
		var that = this;
		_super.setup.call(this);
		
		this.$next = $('<div></div>')
					.addClass(this.options.prefix + 'nav-next')
					.appendTo(this.cont)
					.bind('click' , function(){
						if(!that.slider.options.loop && that.slider.api.index() === that.slider.api.count() - 1)
							that.slider.view.controller.bounce(10);
						else
							that.slider.api.next();
					});
				
		
		this.$prev = $('<div></div>')
					.addClass(this.options.prefix + 'nav-prev')
					.appendTo(this.cont)
					.bind('click' , function(){
						if(!that.slider.options.loop && that.slider.api.index() === 0)
							that.slider.view.controller.bounce(-10);
						else
							that.slider.api.previous();
					});
		
	};
	
	p.hide = function(fast){
		if(fast){
			this.$prev.css('opacity' , 0);
			this.$next.css('opacity' , 0);
			return;
		}
		//RK added to disable fade in on mouseover control
	  if(this.options.dontFade){
			this.$prev.css('opacity' , 0);
			this.$next.css('opacity' , 0);
		} else {
			CTween.fadeOut(this.$prev , 400 , false);
			CTween.fadeOut(this.$next , 400 , false);
		}

		
		this.$prev.addClass('ms-ctrl-hide');
		this.$next.addClass('ms-ctrl-hide');
	};
	
	p.visible = function(){
		//RK added to disable fade in on mouseover control
		if(this.options.dontFade){
			this.$prev.css('opacity' , 1);
			this.$next.css('opacity' , 1);
		} else {
			CTween.fadeIn(this.$prev , 400 );
			CTween.fadeIn(this.$next , 400 );
		}

		this.$prev.removeClass('ms-ctrl-hide');
		this.$next.removeClass('ms-ctrl-hide');
	};
	
	p.destroy = function(){
		this.$next.remove();
		this.$prev.remove();
	};
	
	window.MSArrows = MSArrows;
	MSSlideController.registerControl('arrows' , MSArrows);
})(jQuery);
//dev\slider\uicontrols\Thumblist.js 
 
;(function($){
	
	"use strict";
	
	var MSThumblist = function(options){
		BaseControl.call(this);
		
		// default options
		this.options.dir 	= 'h';
		this.options.wheel	= options.dir === 'v';
		this.options.arrows = true;
		this.options.speed  = 17;
		this.options.align  = null;
		this.options.inset = false;
		this.options.margin = 10;
		this.options.space = 10;
		this.options.width = 100;
		this.options.height = 100;
		this.options.type = 'thumbs'; // tabs
		
		
		$.extend(this.options , options);
		
		this.thumbs = [];
		this.index_count = 0;
		
		this.__dimen    		= this.options.dir === 'h' ? 'width' : 'height';
		this.__alignsize 		= this.options.dir === 'h' ? 'height' : 'width';
		this.__jdimen    		= this.options.dir === 'h' ? 'outerWidth' : 'outerHeight';
		this.__pos				= this.options.dir === 'h' ? 'left'	 : 'top';		
		
		this.click_enable = true;

	};
	
	MSThumblist.extend(BaseControl);
	
	var p = MSThumblist.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */
	
	p.setup = function(){
		this.$element = $('<div></div>')
						.addClass(this.options.prefix + 'thumb-list');

		if(this.options.type === 'tabs'){
			this.$element.addClass(this.options.prefix + 'tabs');
		}
		
		this.$element.addClass('ms-dir-' + this.options.dir);

		_super.setup.call(this);	


		if( this.slider.$controlsCont === this.cont ){
			this.$element.appendTo(this.slider.$element);
		}else{
			this.$element.appendTo(this.cont);
		}
						
		this.$thumbscont = $('<div></div>')
						.addClass('ms-thumbs-cont')
						.appendTo(this.$element);
		
		if(this.options.arrows){
			var that = this;
			this.$fwd = $('<div></div>').addClass('ms-thumblist-fwd').appendTo(this.$element).click(function(){that.controller.push(-15);});
			this.$bwd = $('<div></div>').addClass('ms-thumblist-bwd').appendTo(this.$element).click(function(){that.controller.push(15);});
		}

		// align control
		if( !this.options.insetTo && this.options.align ){
			var align = this.options.align;
			if( this.options.inset ){
				this.$element.css(align, this.options.margin );
			}else{
				this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE, this.align, this);
				this.align();
			}

			if( this.options.dir === 'v' ){
				this.$element.width(this.options.width);
			}else{
				this.$element.height(this.options.height);
			}
		}
	
	};
	
	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onAppend = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onDetach = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by "RESERVED_SPACE_CHGANE" realigns the control in slider
	 * @since 1.5.7
	 */
	p.align = function(event){
		if( this.detached ){
			return;
		}
		var align = this.options.align;
		var pos = this.slider.reserveSpace(align, this.options[this.__alignsize] + this.options.margin * 2);
		this.$element.css(align, -pos - this.options[this.__alignsize] - this.options.margin);
	};

	p.slideAction = function(slide){
		var thumb_ele = $(slide.$element.find('.ms-thumb'));
		var that = this;
		var thumb_frame = $('<div></div>')
					.addClass('ms-thumb-frame')
					.append(thumb_ele)
					.append($('<div class="ms-thumb-ol"></div>'))
					.bind('click' , function(){that.changeSlide(thumb_frame);});

		if( this.options.align ){
			thumb_frame.width(this.options.width)
					.height(this.options.height)
					.css('margin-'+(this.options.dir === 'v' ? 'bottom' : 'right'), this.options.space); 
		}			
					
		thumb_frame[0].index =  this.index_count ++;
		
		this.$thumbscont.append(thumb_frame);
		if($.browser.msie)
				thumb_ele.on('dragstart', function(event) { event.preventDefault(); }); // disable native dragging
				
		this.thumbs.push(thumb_frame);
	};
	
	p.create = function(){
		_super.create.call(this);
		
		this.__translate_end	= window._css3d ? ' translateZ(0px)' : '';
		this.controller 	 = new Controller(0 , 0 , {
			//snapping	     : true,
			snappingMinSpeed : 2,
			friction		 : (100 - this.options.speed * 0.5) / 100
		});
				
		this.controller.renderCallback(this.options.dir === 'h'? this._hMove : this._vMove , this);
		//this.controller.snappingCallback(this.__snapUpdate , this);
		//this.controller.snapCompleteCallback(this.__snapCompelet , this);
		
		var that = this;
		this.resize_listener = function(){that.__resize();};
		$(window).bind('resize', this.resize_listener);
		
		this.thumbSize = this.thumbs[0][this.__jdimen](true);
		
		this.setupSwipe();
		this.__resize();
		
		var that = this;
		if(this.options.wheel){
			
			this.wheellistener = function(event){
				var e = window.event || event.orginalEvent || event;
				var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));
				that.controller.push(-delta*10);
				return false;
			};
			
			if($.browser.mozilla) this.$element[0].addEventListener('DOMMouseScroll' , this.wheellistener);
			else this.$element.bind('mousewheel', this.wheellistener);
		}
		
		this.slider.api.addEventListener(MSSliderEvent.CHANGE_START , this.update , this);
		this.cindex =  this.slider.api.index();
		this.select(this.thumbs[this.cindex]);
		
		
	};
	
	p._hMove = function(controller , value){
		this.__contPos = value;
		if(window._cssanim) {
			this.$thumbscont[0].style[window._jcsspfx + 'Transform'] = 'translateX('+-value+'px)'+ this.__translate_end;
			return;
		}
		this.$thumbscont[0].style.left = -value + 'px';
	};
	
	p._vMove = function(controller , value){
		this.__contPos = value;
		if(window._cssanim) {
			this.$thumbscont[0].style[window._jcsspfx + 'Transform'] = 'translateY('+-value+'px)'+ this.__translate_end;
			return;
		}
		this.$thumbscont[0].style.top = -value + 'px';
	};
	
	p.setupSwipe = function(){ 
		this.swipeControl = new averta.TouchSwipe(this.$element);
		this.swipeControl.swipeType = this.options.dir === 'h'? 'horizontal' : 'vertical';
		
		var that = this;
		if(this.options.dir === 'h')
			this.swipeControl.onSwipe = function(status){that.horizSwipeMove(status);};
		else
			this.swipeControl.onSwipe = function(status){that.vertSwipeMove(status);};
	};
	
	p.vertSwipeMove = function(status){
		if(this.dTouch) return;
		var phase = status.phase;
		if(phase === 'start')
			this.controller.stop();	
		else if(phase === 'move')
			this.controller.drag(status.moveY);
		else if(phase === 'end' || phase === 'cancel'){
			var speed = Math.abs(status.distanceY / status.duration * 50/3);
			if(speed > 0.1){
				this.controller.push(-status.distanceY / status.duration * 50/3 );
			}else{
				this.click_enable = true;
				this.controller.cancel();
			} 
		}
	};
	
	p.horizSwipeMove = function(status){
		if(this.dTouch) return;
		var phase = status.phase;
		if(phase === 'start'){
			this.controller.stop();	
			this.click_enable = false;
		}else if(phase === 'move')
			this.controller.drag(status.moveX);
		else if(phase === 'end' || phase === 'cancel'){
			var speed = Math.abs(status.distanceX / status.duration * 50/3);
			if(speed > 0.1){
				 this.controller.push(-status.distanceX / status.duration * 50/3 );
			}else {
				this.click_enable = true;
				this.controller.cancel();
			}
		}
	};
	
	p.update = function(){
		var nindex = this.slider.api.index();
		if(this.cindex === nindex) return;
		
		if(this.cindex != null)this.unselect(this.thumbs[this.cindex]);
		this.cindex = nindex;
		this.select(this.thumbs[this.cindex]);
	
		if(!this.dTouch)this.updateThumbscroll();
	};

	p.updateThumbscroll = function(){
		var thumb_size;
		
		var pos = this.thumbSize * this.cindex;
		
		if(this.controller.value == NaN) this.controller.value = 0;
		
		if(pos -  this.controller.value < 0){
			this.controller.gotoSnap(this.cindex , true);
			return;
		}
				
		if(pos + this.thumbSize - this.controller.value > this.$element[this.__dimen]()){
			var first_snap = this.cindex - Math.floor(this.$element[this.__dimen]() / this.thumbSize) + 1;
			this.controller.gotoSnap(first_snap , true);
			return;
		}
	};

	p.changeSlide = function(thumb){
		if(!this.click_enable || this.cindex === thumb[0].index) return;
		this.slider.api.gotoSlide(thumb[0].index);
	};
	
	p.unselect = function(ele){
		ele.removeClass('ms-thumb-frame-selected');
	};
	
	p.select = function(ele){
		ele.addClass('ms-thumb-frame-selected');
	};
	
	p.__resize = function(){
		var size = this.$element[this.__dimen]();

		if(this.ls === size) return;
		
		this.ls = size;
		
		this.thumbSize = this.thumbs[0][this.__jdimen](true);
		var len = this.slider.api.count() * this.thumbSize;
		this.$thumbscont[0].style[this.__dimen] = len + 'px';
		
		if(len <= size){
			this.dTouch = true;
			this.controller.stop();
			this.$thumbscont[0].style[this.__pos] = (size - len)*.5 + 'px';
			this.$thumbscont[0].style[window._jcsspfx + 'Transform'] = '';			
		}else{
			this.dTouch = false;
			this.click_enable = true;
			this.$thumbscont[0].style[this.__pos] = '';
			this.controller._max_value = len - size;
			this.controller.options.snapsize = this.thumbSize;
			this.updateThumbscroll();
		}
		
	};
	
	p.destroy = function(){
		if(this.options.wheel){
			if($.browser.mozilla) this.$element[0].removeEventListener('DOMMouseScroll' , this.wheellistener);
			else this.$element.unbind('mousewheel', this.wheellistener);
			this.wheellistener = null;
		}		
		
		$(window).unbind('resize', this.resize_listener);

		this.$element.remove();

		this.slider.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE, this.align, this);

		_super.destroy();
	};
	
	window.MSThumblist = MSThumblist;
	MSSlideController.registerControl('thumblist' , MSThumblist);
	
})(jQuery);
//dev\slider\uicontrols\Bullets.js 
 
;(function($){
	
	"use strict";
	
	var MSBulltes = function(options){
		BaseControl.call(this);
		
		this.options.dir 	= 'h';
		this.options.inset  = true;
		this.options.margin = 10;
		

		$.extend(this.options , options);
		
		this.bullets = [];
		
	};
	
	MSBulltes.extend(BaseControl);
	
	var p = MSBulltes.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */
	
	p.setup = function(){
		_super.setup.call(this);

		this.$element = $('<div></div>')
						.addClass(this.options.prefix + 'bullets')
						.addClass('ms-dir-' + this.options.dir)
						.appendTo(this.cont);
		
		this.$bullet_cont = $('<div></div>')
						.addClass('ms-bullets-count')
						.appendTo(this.$element);
		

		
		if( !this.options.insetTo && this.options.align ){
			// reset old styles
			this.$element.css({
				top:'auto',
				bottom:'auto'
			})

			var align = this.options.align;
			if( this.options.inset ){
				this.$element.css(align, this.options.margin );
			}
		}

	};
	
	p.create = function(){
		_super.create.call(this);
		var that = this;
									
		this.slider.api.addEventListener(MSSliderEvent.CHANGE_START , this.update , this);
		this.cindex =  this.slider.api.index();
		for(var i = 0; i < this.slider.api.count(); ++i){
			var bullet = $('<div></div>').addClass('ms-bullet');
			bullet[0].index = i;
			bullet.on('click', function(){that.changeSlide(this.index);});
			this.$bullet_cont.append(bullet);
			this.bullets.push(bullet);
		}
		
		if(this.options.dir === 'h') 
			this.$element.width(bullet.outerWidth(true) * this.slider.api.count());
		
		this.select(this.bullets[this.cindex]);
	};
	
	p.update = function(){
		var nindex = this.slider.api.index();
		if(this.cindex === nindex) return;
		
		if(this.cindex != null)this.unselect(this.bullets[this.cindex]);
		this.cindex = nindex;
		this.select(this.bullets[this.cindex]);
	};
	
	p.changeSlide = function(index){
		if(this.cindex === index) return;
		this.slider.api.gotoSlide(index);
	};
	
	p.unselect = function(ele){
		ele.removeClass('ms-bullet-selected');
	};
	
	p.select = function(ele){
		ele.addClass('ms-bullet-selected');
	};
	
	p.destroy = function(){
		this.$element.remove();
	};
	
	window.MSBulltes = MSBulltes;
	
	MSSlideController.registerControl('bullets' , MSBulltes);
	
})(jQuery);
//dev\slider\uicontrols\Scrollbar.js 
 
;(function($){
	
	"use strict";
	
	var MSScrollbar = function(options){
		BaseControl.call(this);
		
		this.options.dir 		= 'h';
		this.options.autohide	= true;
		this.options.width 		= 4;
		this.options.color 		= '#3D3D3D';
		this.options.margin		= 10;
		
		$.extend(this.options , options);
		this.__dimen    		= this.options.dir === 'h' ? 'width' : 'height';
		this.__jdimen    		= this.options.dir === 'h' ? 'outerWidth' : 'outerHeight';
		this.__pos				= this.options.dir === 'h' ? 'left'	 : 'top';
		this.__translate_end	= window._css3d ? ' translateZ(0px)' : '';
		this.__translate_start	= this.options.dir === 'h' ? ' translateX(' : 'translateY(';
	};
	
	MSScrollbar.extend(BaseControl);
	
	var p = MSScrollbar.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */
	
	p.setup = function(){

		this.$element = $('<div></div>')
						.addClass(this.options.prefix + 'sbar')
						.addClass('ms-dir-' + this.options.dir);
						
		_super.setup.call(this);
	
		if( this.slider.$controlsCont === this.cont ){
			this.$element.appendTo(this.slider.$element);
		}else{
			this.$element.appendTo(this.cont);
		}

		this.$bar = $('<div></div>')
					.addClass(this.options.prefix + 'bar')
					.appendTo(this.$element);
					
		if(this.slider.options.loop){
			console.log('WARNING, MSScrollbar cannot work with looped slider.');
			this.disable = true;
			this.$element.remove();
		}
		
		/**
		 * align control
		 * @since 1.5.7
		 */
		// change width 
		if( this.options.dir === 'v' ){
			this.$bar.width(this.options.width);
		} else {
			this.$bar.height(this.options.width);
		}

		// change color
		this.$bar.css('background-color', this.options.color);

		if( !this.options.insetTo && this.options.align ){
			
			// reset old versions styles
			if( this.options.dir === 'v' ){
				this.$element.css({
					right:'auto',
					left:'auto',
				});
			} else {
				this.$element.css({
					top:'auto',
					bottom:'auto',
				});
			}

			var align = this.options.align;
			if( this.options.inset ){
				this.$element.css(align, this.options.margin );
			}else{
				this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE, this.align, this);
				this.align();
			}
		}
	};

	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onAppend = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onDetach = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by "RESERVED_SPACE_CHGANE" realigns the control in slider
	 * @since 1.5.7
	 */
	p.align = function(event){
		if( this.detached ){
			return;
		}

		var align = this.options.align;
		var pos = this.slider.reserveSpace(align, this.options.margin * 2 + this.options.width);
		this.$element.css(align, -pos - this.options.margin - this.options.width);
	};
	
	p.create = function(){
		
		if(this.disable) return;
		
		//_super.create.call(this);
		var that = this;
		
		this.scroller = this.slider.api.scroller;
		
		this.slider.api.view.addEventListener(MSViewEvents.SCROLL , this._update , this);		
		this.slider.api.addEventListener(MSSliderEvent.RESIZE , this._resize , this);
		
		this._resize();
		
		if(this.options.autohide){
			this.$bar.css('opacity' , '0');
		}
	};
	
	p._resize = function(){
		this.vdimen = this.$element[this.__dimen]();
		this.bar_dimen = this.slider.api.view[ '__' + this.__dimen] * this.vdimen / this.scroller._max_value; 
		this.$bar[this.__dimen](this.bar_dimen );
	};
	
	p._update = function(){
		var value = this.scroller.value * (this.vdimen - this.bar_dimen) / this.scroller._max_value;
		if(this.lvalue === value) return;
		this.lvalue = value;
		
		if(this.options.autohide){
			clearTimeout(this.hto);
			this.$bar.css('opacity' , '1');
			
			var that = this;
			this.hto = setTimeout(function(){
				//if(!that.slider.api.view.swipeControl.touchStarted)
				that.$bar.css('opacity' , '0');
			} , 150);
		}
		
		if(value < 0){
			this.$bar[0].style[this.__dimen] = this.bar_dimen + value + 'px';
			return;
		}
		
		if(value > this.vdimen - this.bar_dimen)
			this.$bar[0].style[this.__dimen] = this.vdimen - value + 'px';

		if(window._cssanim) {
			this.$bar[0].style[window._jcsspfx + 'Transform'] = this.__translate_start +value+'px)'+ this.__translate_end;
			return;
		}
		
		this.$bar[0].style[this.__pos] = value + 'px';
		
	};
	
	p.destroy = function(){
		this.slider.api.view.removeEventListener(MSViewEvents.SCROLL , this._update , this);		
		this.slider.api.removeEventListener(MSSliderEvent.RESIZE , this._resize , this);
		this.slider.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE, this.align, this);

		this.$element.remove();
		_super.destroy();
	};
	
	window.MSScrollbar = MSScrollbar;
	MSSlideController.registerControl('scrollbar' , MSScrollbar);
})(jQuery);
//dev\slider\uicontrols\Timebar.js 
 
;(function($){
	
	"use strict";
	
	var MSTimerbar = function(options){
		BaseControl.call(this);

		this.options.autohide = false;
		this.options.width 		= 4;
		this.options.color 		= '#FFFFFF';
		this.options.inset 		= true;

		$.extend(this.options , options);
	};
	
	MSTimerbar.extend(BaseControl);
	
	var p = MSTimerbar.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */
	
	p.setup = function(){
		var that = this;
		_super.setup.call(this);
		
		this.$element = $('<div></div>')
					.addClass(this.options.prefix + 'timerbar');
		
		_super.setup.call(this);
	
		if( this.slider.$controlsCont === this.cont ){
			this.$element.appendTo(this.slider.$element);
		}else{
			this.$element.appendTo(this.cont);
		}

		this.$bar = $('<div></div>')
					.addClass('ms-time-bar')
					.appendTo(this.$element);

		// change width 
		if( this.options.dir === 'v' ){
			this.$bar.width(this.options.width);
		} else {
			this.$bar.height(this.options.width);
		}

		// change color
		this.$bar.css('background-color', this.options.color);
		
		if( !this.options.insetTo && this.options.align ){
			
			this.$element.css({
				top:'auto',
				bottom:'auto',
			});

			var align = this.options.align;
			if( this.options.inset ){
				this.$element.css(align, this.options.margin );
			}else{
				this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE, this.align, this);
				this.align();
			}
		}
		
	};

	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onAppend = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onDetach = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by "RESERVED_SPACE_CHGANE" realigns the control in slider
	 * @since 1.5.7
	 */
	p.align = function(event){
		if( this.detached ){
			return;
		}

		var align = this.options.align;
		var pos = this.slider.reserveSpace(align, this.options.margin * 2 + this.options.width);
		this.$element.css(align, -pos - this.options.margin - this.options.width);
	};
	
	p.create = function(){
		_super.create.call(this);
		this.slider.api.addEventListener(MSSliderEvent.WATING , this._update , this);
		this._update();
	};
	
	p._update = function(){
		this.$bar[0].style.width = this.slider.api._delayProgress  + '%';
	};
	
	p.destroy = function(){
		this.slider.api.removeEventListener(MSSliderEvent.WATING , this._update , this);
		this.$element.remove();
	};
	
	window.MSTimerbar = MSTimerbar;
	MSSlideController.registerControl('timebar' , MSTimerbar);
})(jQuery);
//dev\slider\uicontrols\CircleTimer.js 
 
;(function($){
	
	"use strict";
	
	var MSCircleTimer = function(options){
		BaseControl.call(this);
		
		this.options.color 	= '#A2A2A2';
		this.options.stroke = 10;
		this.options.radius	= 4;
		
		this.options.autohide = false;
		$.extend(this.options , options);
	};
	
	MSCircleTimer.extend(BaseControl);
	
	var p = MSCircleTimer.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */
	
	p.setup = function(){
		var that = this;
		_super.setup.call(this);
		
		this.$element = $('<div></div>')
					.addClass(this.options.prefix + 'ctimer')
					.appendTo(this.cont);
					
		this.$canvas = 	$('<canvas></canvas>')
					.addClass('ms-ctimer-canvas')
					.appendTo(this.$element);		
		
		this.$bar = $('<div></div>')
					.addClass('ms-ctimer-bullet')
					.appendTo(this.$element);
		
		if(!this.$canvas[0].getContext){
			this.destroy();
			this.disable = true;
			return;
		}
		
		
		this.ctx		= this.$canvas[0].getContext('2d');
		this.prog		= 0;
		
		this.__w = (this.options.radius + this.options.stroke/2) * 2;
		this.$canvas[0].width  = this.__w;
		this.$canvas[0].height = this.__w;
	};
	
	p.create = function(){
		if(this.disable) return;
		_super.create.call(this);
		this.slider.api.addEventListener(MSSliderEvent.WATING , this._update , this);
		
		var that = this;
		this.$element.click(function(){
			if(that.slider.api.paused)
				that.slider.api.resume();
			else
				that.slider.api.pause();
		});
		
		this._update();
	};
	
	p._update = function(){
		var that = this;
		$(this).stop(true).animate({prog:this.slider.api._delayProgress * 0.01} ,
					 	{duration:200 , step:function(){that._draw();}});
		//this.$bar[0].style.width = this.slider.api._delayProgress/100 * this.$element.width() + 'px';
	};
	
	p._draw = function(){
		this.ctx.clearRect(0 , 0,  this.__w ,  this.__w);
		this.ctx.beginPath(); 
		this.ctx.arc(this.__w * .5 , this.__w * .5 ,this.options.radius , Math.PI * 1.5 , Math.PI * 1.5 + 2 * Math.PI * this.prog, false);
		this.ctx.strokeStyle = this.options.color;
		this.ctx.lineWidth = this.options.stroke;
		this.ctx.stroke();
	};
	
	p.destroy = function(){
		if(this.disable) return;
		$(this).stop(true);
		this.slider.api.removeEventListener(MSSliderEvent.WATING , this._update , this);
		this.$element.remove();
	};
	
	window.MSCircleTimer = MSCircleTimer;
		MSSlideController.registerControl('circletimer' , MSCircleTimer);
})(jQuery);
//dev\slider\uicontrols\Lightbox.js 
 
;(function($){
	
	"use strict";
	
	window.MSLightbox = function(options){
		BaseControl.call(this , options);
		
		this.options.autohide	= false;
		$.extend(this.options , options);

		this.data_list = [];
	};
	MSLightbox.fadeDuratation = 400;
	MSLightbox.extend(BaseControl);
	
	var p = MSLightbox.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */	
		p.setup = function(){
		_super.setup.call(this);

		this.$element = $('<div></div>')
						.addClass(this.options.prefix + 'lightbox-btn')
						.appendTo(this.cont);
		
	};
	
	p.slideAction = function(slide){
		 $('<div></div>')
						.addClass(this.options.prefix + 'lightbox-btn')
						.appendTo(slide.$element)
						.append($(slide.$element.find('.ms-lightbox')));
	
	};
	
	p.create = function(){
		_super.create.call(this);
	
	};
	

	MSSlideController.registerControl('lightbox' , MSLightbox);
})(jQuery);
//dev\slider\uicontrols\SlideInfo.js 
 
;(function($){
	
	"use strict";
	
	window.MSSlideInfo = function(options){
		BaseControl.call(this , options);
		
		this.options.autohide	= false;
		this.options.align  = null;
		this.options.inset = false;
		this.options.margin = 10;
		this.options.size = 100;
		this.options.dir = 'h';

		$.extend(this.options , options);

		this.data_list = [];
	};
	MSSlideInfo.fadeDuratation = 400;
	MSSlideInfo.extend(BaseControl);
	
	var p = MSSlideInfo.prototype;
	var _super = BaseControl.prototype;
	
	/* -------------------------------- */	
	p.setup = function(){
		this.$element = $('<div></div>')
						.addClass(this.options.prefix + 'slide-info')
						.addClass('ms-dir-' + this.options.dir);

		_super.setup.call(this);	

		if( this.slider.$controlsCont === this.cont ){
			this.$element.appendTo(this.slider.$element);
		}else{
			this.$element.appendTo(this.cont);
		}
		
		// align control
		if( !this.options.insetTo && this.options.align ){
			var align = this.options.align;
			if( this.options.inset ){
				this.$element.css(align, this.options.margin );
			}else{
				this.slider.api.addEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE, this.align, this);
				this.align();
			}

			if( this.options.dir === 'v' ){
				this.$element.width(this.options.size);
			}else{
				this.$element.css('min-height', this.options.size);
			}
		}

	};


	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onAppend = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by the parent class [MSBaseControl] when the control element visibles [hideUnder option]
	 * @since 1.5.7
	 */
	p.onDetach = function(){
		if( !this.options.insetTo && this.options.align && !this.options.inset ){
			this.slider._realignControls();
		}
	};

	/**
	 * calls by "RESERVED_SPACE_CHGANE" realigns the control in slider
	 * @since 1.5.7
	 */
	p.align = function(event){
		if( this.detached ){
			return;
		}
		var align = this.options.align;
		var pos = this.slider.reserveSpace(align, this.options.size + this.options.margin * 2);
		this.$element.css(align, -pos - this.options.size - this.options.margin);
	};
	
	p.slideAction = function(slide){
		var info_ele = $(slide.$element.find('.ms-info'));
		var that = this;
		info_ele.detach();
		
		this.data_list[slide.index] = info_ele;
	};
	
	p.create = function(){
		_super.create.call(this);
		this.slider.api.addEventListener(MSSliderEvent.CHANGE_START , this.update , this);
		this.cindex =  this.slider.api.index();
		this.switchEle(this.data_list[this.cindex]);
	};
	
	p.update = function(){
		var nindex = this.slider.api.index();
		this.switchEle(this.data_list[nindex]);
		this.cindex = nindex;
	};
	
	p.switchEle = function(ele){
		if(this.current_ele){
			var that = this;
			
			if(this.current_ele[0].tween)this.current_ele[0].tween.stop(true);
			this.current_ele[0].tween = CTween.animate(this.current_ele , MSSlideInfo.fadeDuratation  , {opacity:0} , {complete:function(){this.detach(); this[0].tween = null;} , target:this.current_ele });
			
			clearTimeout(this.tou);
			this.tou = setTimeout(function(){that.__show(ele);} , MSSlideInfo.fadeDuratation+200 );
			
			return;
		}
		this.__show(ele);
	};
	
	p.__show = function(ele){
		ele.appendTo(this.$element).css('opacity','0');
		CTween.fadeIn(ele , MSSlideInfo.fadeDuratation );
		if(ele[0].tween)ele[0].tween.stop(true);
		this.current_ele = ele;
	};

	p.destroy = function(){
		clearTimeout(this.tou);
		if(this.current_ele){
			this.current_ele[0].tween.stop('true');
		}
		this.$element.remove();
		this.slider.removeEventListener(MSSliderEvent.RESERVED_SPACE_CHANGE, this.align, this);
	};
	
	MSSlideController.registerControl('slideinfo' , MSSlideInfo);
})(jQuery);
//dev\slider\plugins\MSGallery.js 
 
/**
 *	Master Slider, Gallery Template v1.0
 * 	@author: Averta Ltd.
 */

;(function(){
	
	window.MSGallery = function(id , slider){
		this.id = id;
		this.slider = slider;
		
		this.telement = $('#'+id);
		
		this.botcont = $('<div></div>').addClass('ms-gallery-botcont').appendTo(this.telement);
		this.thumbcont = $('<div></div>').addClass('ms-gal-thumbcont hide-thumbs').appendTo(this.botcont);
		this.playbtn  = $('<div></div>').addClass('ms-gal-playbtn').appendTo(this.botcont);
		this.thumbtoggle  = $('<div></div>').addClass('ms-gal-thumbtoggle').appendTo(this.botcont);
		
		// adds required controls to slider
		slider.control('thumblist' , {insertTo:this.thumbcont , autohide:false , dir:'h'});
		slider.control('slidenum'  , {insertTo:this.botcont , autohide:false});
		slider.control('slideinfo' , {insertTo:this.botcont , autohide:false});		
		slider.control('timebar'   , {insertTo:this.botcont , autohide:false});		
		slider.control('bullets'   , {insertTo:this.botcont , autohide:false});		
	};
	
	var p = MSGallery.prototype;
	
	p._init = function(){
		var that = this;
		
		if(!this.slider.api.paused)
			 this.playbtn.addClass('btn-pause');
		 
		this.playbtn.click(function(){
			if(that.slider.api.paused){
				 that.slider.api.resume();
				 that.playbtn.addClass('btn-pause');
			}else{
				 that.slider.api.pause();
				 that.playbtn.removeClass('btn-pause');
			}
		});
		
		
		this.thumbtoggle.click(function(){
			
			if(that.vthumbs){
				//that.hideThumbs();
				that.thumbtoggle.removeClass('btn-hide');
				that.vthumbs = false;
				that.thumbcont.addClass('hide-thumbs');
			}else{
				//that.showThumbs();
				that.thumbtoggle.addClass('btn-hide');
				that.thumbcont.removeClass('hide-thumbs');
				that.vthumbs = true;
			}
		});
		
	};
	
	p.setup = function(){
		var that = this;
		$(document).ready(function(){that._init();});
	};
	
	
})();
(function () {
	'use strict';

	var isCommonjs = typeof module !== 'undefined' && module.exports;
	var keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;

	var fn = (function () {
		var val;
		var valLength;

		var fnMap = [
			[
				'requestFullscreen',
				'exitFullscreen',
				'fullscreenElement',
				'fullscreenEnabled',
				'fullscreenchange',
				'fullscreenerror'
			],
			// new WebKit
			[
				'webkitRequestFullscreen',
				'webkitExitFullscreen',
				'webkitFullscreenElement',
				'webkitFullscreenEnabled',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			// old WebKit (Safari 5.1)
			[
				'webkitRequestFullScreen',
				'webkitCancelFullScreen',
				'webkitCurrentFullScreenElement',
				'webkitCancelFullScreen',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			[
				'mozRequestFullScreen',
				'mozCancelFullScreen',
				'mozFullScreenElement',
				'mozFullScreenEnabled',
				'mozfullscreenchange',
				'mozfullscreenerror'
			],
			[
				'msRequestFullscreen',
				'msExitFullscreen',
				'msFullscreenElement',
				'msFullscreenEnabled',
				'MSFullscreenChange',
				'MSFullscreenError'
			]
		];

		var i = 0;
		var l = fnMap.length;
		var ret = {};

		for (; i < l; i++) {
			val = fnMap[i];
			if (val && val[1] in document) {
				for (i = 0, valLength = val.length; i < valLength; i++) {
					ret[fnMap[0][i]] = val[i];
				}
				return ret;
			}
		}

		return false;
	})();

	var screenfull = {
		request: function (elem) {
			var request = fn.requestFullscreen;

			elem = elem || document.documentElement;

			// Work around Safari 5.1 bug: reports support for
			// keyboard in fullscreen even though it doesn't.
			// Browser sniffing, since the alternative with
			// setTimeout is even worse.
			if (/5\.1[\.\d]* Safari/.test(navigator.userAgent)) {
				elem[request]();
			} else {
				elem[request](keyboardAllowed && Element.ALLOW_KEYBOARD_INPUT);
			}
		},
		exit: function () {
			document[fn.exitFullscreen]();
		},
		toggle: function (elem) {
			if (this.isFullscreen) {
				this.exit();
			} else {
				this.request(elem);
			}
		},
		raw: fn
	};

	if (!fn) {
		if (isCommonjs) {
			module.exports = false;
		} else {
			window.screenfull = false;
		}

		return;
	}

	Object.defineProperties(screenfull, {
		isFullscreen: {
			get: function () {
				return !!document[fn.fullscreenElement];
			}
		},
		element: {
			enumerable: true,
			get: function () {
				return document[fn.fullscreenElement];
			}
		},
		enabled: {
			enumerable: true,
			get: function () {
				// Coerce to boolean in case of old WebKit
				return !!document[fn.fullscreenEnabled];
			}
		}
	});

	if (isCommonjs) {
		module.exports = screenfull;
	} else {
		window.screenfull = screenfull;
	}
})();
/*!
   JW Player version 8.2.0
   Copyright (c) 2018, JW Player, All Rights Reserved 
   This source code and its use and distribution is subject to the terms 
   and conditions of the applicable license agreement. 
   https://www.jwplayer.com/tos/
   This product includes portions of other software. For the full text of licenses, see
   https://ssl.p.jwpcdn.com/player/v/8.2.0/notice.txt
*/

window.jwplayer=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n=window.webpackJsonpjwplayer;window.webpackJsonpjwplayer=function(t,r,o){for(var a,u,c=0,s=[];c<t.length;c++)u=t[c],i[u]&&s.push(i[u][0]),i[u]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);for(n&&n(t,r,o);s.length;)s.shift()()};var r={},i={16:0};return t.e=function(e){function n(){u.onerror=u.onload=null,clearTimeout(c);var t=i[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),i[e]=void 0)}var r=i[e];if(0===r)return new Promise(function(e){e()});if(r)return r[2];var o=new Promise(function(t,n){r=i[e]=[t,n]});r[2]=o;var a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.type="text/javascript",u.charset="utf-8",u.async=!0,u.timeout=35e3,t.nc&&u.setAttribute("nonce",t.nc),u.src=t.p+""+({0:"jwplayer.core.controls.polyfills.html5",1:"jwplayer.core.controls.html5",2:"jwplayer.core.controls.polyfills",3:"jwplayer.core.controls",4:"jwplayer.controls",5:"provider.shaka",6:"provider.hlsjs",7:"jwplayer.core",8:"provider.html5",9:"provider.flash",10:"polyfills.intersection-observer",11:"provider.cast",12:"jwplayer.vr",13:"vttparser",14:"provider.airplay",15:"polyfills.webvtt"}[e]||e)+".js";var c=setTimeout(n,35e3);return u.onerror=u.onload=n,a.appendChild(u),o},t.m=e,t.c=r,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.oe=function(e){throw console.error(e),e},t(t.s=55)}([function(e,t,n){"use strict";n.d(t,"a",function(){return P}),n.d(t,"b",function(){return S});var r=n(21),i={},o=Array.prototype,a=Object.prototype,u=Function.prototype,c=o.slice,s=o.concat,l=a.toString,f=a.hasOwnProperty,d=o.map,p=o.reduce,v=o.forEach,h=o.filter,m=o.every,g=o.some,y=o.indexOf,b=Array.isArray,w=Object.keys,j=u.bind,O=function e(t){return t instanceof e?t:this instanceof e?void 0:new e(t)},k=O.each=O.forEach=function(e,t,n){var r,o;if(null==e)return e;if(v&&e.forEach===v)e.forEach(t,n);else if(e.length===+e.length){for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e)===i)return}else{var a=O.keys(e);for(r=0,o=a.length;r<o;r++)if(t.call(n,e[a[r]],a[r],e)===i)return}return e};O.map=O.collect=function(e,t,n){var r=[];return null==e?r:d&&e.map===d?e.map(t,n):(k(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r)};O.reduce=O.foldl=O.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=O.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(k(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError("Reduce of empty array with no initial value");return n},O.find=O.detect=function(e,t,n){var r;return C(e,function(e,i,o){if(t.call(n,e,i,o))return r=e,!0}),r},O.filter=O.select=function(e,t,n){var r=[];return null==e?r:h&&e.filter===h?e.filter(t,n):(k(e,function(e,i,o){t.call(n,e,i,o)&&r.push(e)}),r)},O.reject=function(e,t,n){return O.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},O.compact=function(e){return O.filter(e,O.identity)},O.every=O.all=function(e,t,n){t||(t=O.identity);var r=!0;return null==e?r:m&&e.every===m?e.every(t,n):(k(e,function(e,o,a){if(!(r=r&&t.call(n,e,o,a)))return i}),!!r)};var C=O.some=O.any=function(e,t,n){t||(t=O.identity);var r=!1;return null==e?r:g&&e.some===g?e.some(t,n):(k(e,function(e,o,a){if(r||(r=t.call(n,e,o,a)))return i}),!!r)};O.size=function(e){return null==e?0:e.length===+e.length?e.length:O.keys(e).length},O.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},O.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},O.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}};var T=function(e){return null==e?O.identity:O.isFunction(e)?e:O.property(e)},E=function(e){return function(t,n,r){var i={};return n=T(n),k(t,function(o,a){var u=n.call(r,o,a,t);e(i,u,o)}),i}};O.groupBy=E(function(e,t,n){O.has(e,t)?e[t].push(n):e[t]=[n]}),O.indexBy=E(function(e,t,n){e[t]=n}),O.sortedIndex=function(e,t,n,r){n=T(n);for(var i=n.call(r,t),o=0,a=e.length;o<a;){var u=o+a>>>1;n.call(r,e[u])<i?o=u+1:a=u}return o},O.contains=O.include=function(e,t){return null!=e&&(e.length!==+e.length&&(e=O.values(e)),O.indexOf(e,t)>=0)},O.pluck=function(e,t){return O.map(e,O.property(t))},O.where=function(e,t){return O.filter(e,O.matches(t))},O.findWhere=function(e,t){return O.find(e,O.matches(t))},O.max=function(e,t,n){if(!t&&O.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return k(e,function(e,o,a){var u=t?t.call(n,e,o,a):e;u>i&&(r=e,i=u)}),r},O.difference=function(e){var t=s.apply(o,c.call(arguments,1));return O.filter(e,function(e){return!O.contains(t,e)})},O.without=function(e){return O.difference(e,c.call(arguments,1))},O.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=O.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1};var x=function(){};O.bind=function(e,t){var n,r;if(j&&e.bind===j)return j.apply(e,c.call(arguments,1));if(!O.isFunction(e))throw new TypeError;return n=c.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(c.call(arguments)));x.prototype=e.prototype;var i=new x;x.prototype=null;var o=e.apply(i,n.concat(c.call(arguments)));return Object(o)===o?o:i}},O.partial=function(e){var t=c.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,o=r.length;i<o;i++)r[i]===O&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},O.once=O.partial(O.before,2),O.memoize=function(e,t){var n={};return t||(t=O.identity),function(){var r=t.apply(this,arguments);return O.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},O.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},O.defer=function(e){return O.delay.apply(O,[e,1].concat(c.call(arguments,1)))},O.throttle=function(e,t,n){var i,o,a,u=null,c=0;n||(n={});var s=function(){c=!1===n.leading?0:Object(r.a)(),u=null,a=e.apply(i,o),i=o=null};return function(){c||!1!==n.leading||(c=r.a);var l=t-(r.a-c);return i=this,o=arguments,l<=0?(clearTimeout(u),u=null,c=r.a,a=e.apply(i,o),i=o=null):u||!1===n.trailing||(u=setTimeout(s,l)),a}},O.keys=function(e){if(!O.isObject(e))return[];if(w)return w(e);var t=[];for(var n in e)O.has(e,n)&&t.push(n);return t},O.invert=function(e){for(var t={},n=O.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},O.defaults=function(e){return k(c.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},O.extend=function(e){return k(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},O.pick=function(e){var t={},n=s.apply(o,c.call(arguments,1));return k(n,function(n){n in e&&(t[n]=e[n])}),t},O.omit=function(e){var t={},n=s.apply(o,c.call(arguments,1));for(var r in e)O.contains(n,r)||(t[r]=e[r]);return t},O.clone=function(e){return O.isObject(e)?O.isArray(e)?e.slice():O.extend({},e):e},O.isArray=b||function(e){return"[object Array]"==l.call(e)},O.isObject=function(e){return e===Object(e)},k(["Function","String","Number","Date","RegExp"],function(e){O["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),O.isFunction=function(e){return"function"==typeof e},O.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};var P=O.isNaN=function(e){return O.isNumber(e)&&e!=+e};O.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==l.call(e)},O.isNull=function(e){return null===e},O.isUndefined=function(e){return void 0===e},O.has=function(e,t){return f.call(e,t)},O.identity=function(e){return e},O.constant=function(e){return function(){return e}},O.property=function(e){return function(t){return t[e]}},O.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},O.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},O.now=r.a,O.result=function(e,t){if(null!=e){var n=e[t];return O.isFunction(n)?n.call(e):n}};var S=O.isNumber;t.c=O},function(e,t,n){"use strict";n.d(t,"b",function(){return o});var r=n(56),i=window.Promise||(window.Promise=r.a),o=i.resolve();t.a=i},function(e,t,n){"use strict";function r(e){return e.replace(/^\s+|\s+$/g,"")}function i(e,t,n){for(e=""+e,n=n||"0";e.length<t;)e=n+e;return e}function o(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()===t.toLowerCase())return e.attributes[n].value.toString();return""}function a(e){return/[(,]format=m3u8-/i.test(e)?"m3u8":!!/[(,]format=mpd-/i.test(e)&&"mpd"}function u(e){if(!e||"rtmp"===e.substr(0,4))return"";var t=a(e);return t||(e=e.split("?")[0].split("#")[0],e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0)}function c(e){var t=parseInt(e/3600),n=parseInt(e/60)%60,r=e%60;return i(t,2)+":"+i(n,2)+":"+i(r.toFixed(3),6)}function s(e,t){if(!e)return 0;if(p.c.isNumber(e)&&!p.c.isNaN(e))return e;e=e.replace(",",".");var n=e.split(":"),r=n.length,i=0;if("s"===e.slice(-1))i=parseFloat(e);else if("m"===e.slice(-1))i=60*parseFloat(e);else if("h"===e.slice(-1))i=3600*parseFloat(e);else if(r>1){var o=r-1;4===r&&(t&&(i=parseFloat(n[o])/t),o-=1),i+=parseFloat(n[o]),i+=60*parseFloat(n[o-1]),r>=3&&(i+=3600*parseFloat(n[o-2]))}else i=parseFloat(e);return p.c.isNaN(i)?0:i}function l(e,t,n){if(p.c.isString(e)&&"%"===e.slice(-1)){var r=parseFloat(e);return!t||isNaN(t)||isNaN(r)?null:t*r/100}return s(e,n)}function f(e,t){return p.c.map(e,function(e){return t+e})}function d(e,t){return p.c.map(e,function(e){return e+t})}t.h=r,t.d=i,t.i=o,t.a=u,t.b=c,t.f=s,t.c=l,t.e=f,t.g=d;var p=n(0)},,,function(e,t,n){"use strict";n.d(t,"_3",function(){return r}),n.d(t,"_6",function(){return i}),n.d(t,"_4",function(){return o}),n.d(t,"_8",function(){return a}),n.d(t,"_9",function(){return u}),n.d(t,"_5",function(){return c}),n.d(t,"_7",function(){return s}),n.d(t,"_10",function(){return l}),n.d(t,"n",function(){return f}),n.d(t,"p",function(){return d}),n.d(t,"o",function(){return p}),n.d(t,"i",function(){return v}),n.d(t,"l",function(){return h}),n.d(t,"_11",function(){return m}),n.d(t,"m",function(){return g}),n.d(t,"S",function(){return y}),n.d(t,"P",function(){return b}),n.d(t,"q",function(){return w}),n.d(t,"R",function(){return j}),n.d(t,"r",function(){return O}),n.d(t,"a",function(){return k}),n.d(t,"d",function(){return C}),n.d(t,"z",function(){return T}),n.d(t,"_0",function(){return E}),n.d(t,"J",function(){return x}),n.d(t,"w",function(){return P}),n.d(t,"v",function(){return S}),n.d(t,"y",function(){return _}),n.d(t,"k",function(){return N}),n.d(t,"V",function(){return L}),n.d(t,"h",function(){return M}),n.d(t,"A",function(){return A}),n.d(t,"B",function(){return I}),n.d(t,"G",function(){return F}),n.d(t,"H",function(){return R}),n.d(t,"K",function(){return B}),n.d(t,"_2",function(){return D}),n.d(t,"U",function(){return q}),n.d(t,"x",function(){return X}),n.d(t,"L",function(){return Q}),n.d(t,"I",function(){return z}),n.d(t,"M",function(){return V}),n.d(t,"O",function(){return W}),n.d(t,"F",function(){return H}),n.d(t,"E",function(){return U}),n.d(t,"C",function(){return $}),n.d(t,"D",function(){return J}),n.d(t,"N",function(){return K}),n.d(t,"j",function(){return Y}),n.d(t,"s",function(){return G}),n.d(t,"_1",function(){return Z}),n.d(t,"W",function(){return ee}),n.d(t,"X",function(){return te}),n.d(t,"b",function(){return ne}),n.d(t,"c",function(){return re}),n.d(t,"T",function(){return ie}),n.d(t,"u",function(){return oe}),n.d(t,"g",function(){return ae}),n.d(t,"f",function(){return ue}),n.d(t,"Y",function(){return ce}),n.d(t,"Z",function(){return se}),n.d(t,"_12",function(){return le}),n.d(t,"t",function(){return fe}),n.d(t,"e",function(){return de}),n.d(t,"Q",function(){return pe});var r="buffering",i="idle",o="complete",a="paused",u="playing",c="error",s="loading",l="stalled",f="drag",d="dragStart",p="dragEnd",v="click",h="doubleClick",m="tap",g="doubleTap",y="over",b="move",w="enter",j="out",O=c,k="adSkipped",C="autostartNotAllowed",T=o,E="ready",x="seek",P="beforePlay",S="beforeComplete",_="bufferFull",N="displayClick",L="playlistComplete",M="cast",A="mediaError",I="firstFrame",F="playAttempt",R="playAttemptFailed",B="seeked",D="setupError",q="state",X="bufferChange",Q="time",z="ratechange",V="mediaType",W="volume",H="mute",U="meta",$="levels",J="levelsChanged",K="visualQuality",Y="controls",G="fullscreen",Z="resize",ee="playlistItem",te="playlist",ne="audioTracks",re="audioTrackChanged",ie="playbackRateChanged",oe="logoClick",ae="captionsList",ue="captionsChanged",ce="providerChanged",se="providerFirstFrame",le="userAction",fe="instreamClick",de="breakpoint",pe="fullscreenchange"},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(l.a.debug)return e.apply(t||this,n);try{return e.apply(t||this,n)}catch(t){return new i(e.name,t)}}function i(e,t){this.name=e,this.message=t.message||t.toString(),this.error=t}var o=n(16),a=n(11),u=n(12),c=n(2),s=n(22),l=n(15),f=n(0),d=n(30),p=n(25),v=n(26),h=n(52);n.d(t,"b",function(){return g});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g="function"==typeof console.log?console.log.bind(console):function(){},y=function(e,t,n){return Math.max(Math.min(e,n),t)},b=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},w=f.c.indexOf,j=function(){},O=m({},u,a,o,{addClass:p.a,hasClass:p.h,removeClass:p.j,replaceClass:p.k,toggleClass:p.m,classList:p.d,styleDimension:p.l,createElement:p.e,emptyElement:p.g,addStyleSheet:p.b,bounds:p.c,css:v.b,clearCss:v.a,style:v.d,transform:v.e,getRgba:v.c,ajax:h.a,crossdomain:h.b,tryCatch:r,Error:i,Timer:s.a,log:g,between:y,foreach:b,flashVersion:d.a,isIframe:d.m,indexOf:w,trim:c.h,pad:c.d,extension:c.a,hms:c.b,seconds:c.f,prefix:c.e,suffix:c.g,noop:j});t.a=O},function(e,t,n){"use strict";function r(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;var r=this._events||(this._events={});return(r[e]||(r[e]=[])).push({callback:t,context:n}),this}function i(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var r=0,i=this,o=function n(){r++||(i.off(e,n),t.apply(this,arguments))};return o._callback=t,this.on(e,o,n)}function o(e,t,n){if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return delete this._events,this;for(var r=e?[e]:Object.keys(this._events),i=0,o=r.length;i<o;i++){e=r[i];var a=this._events[e];if(a){var u=this._events[e]=[];if(t||n)for(var s=0,l=a.length;s<l;s++){var f=a[s];(t&&t!==f.callback&&t!==f.callback._callback||n&&n!==f.context)&&u.push(f)}u.length||delete this._events[e]}}return this}function a(e){if(!this._events)return this;var t=f.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&s(n,t,this),r&&s(r,arguments,this),this}function u(e){if(!this._events)return this;var t=f.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&s(n,t,this,e),r&&s(r,arguments,this,e),this}function c(e,t,n,r){if(!n)return!0;if("object"===(void 0===n?"undefined":l(n))){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e[t].apply(e,[i,n[i]].concat(r));return!1}if(d.test(n)){for(var o=n.split(d),a=0,u=o.length;a<u;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0}function s(e,t,n,r){for(var i=-1,o=e.length;++i<o;){var a=e[i];if(r)try{a.callback.apply(a.context||n,t)}catch(e){console.log('Error in "'+r+'" event handler:',e)}else a.callback.apply(a.context||n,t)}}t.c=r,t.d=i,t.b=o,t.e=a,t.f=u;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=[].slice,d=/\s+/;t.a={on:r,once:i,off:o,trigger:a}},function(e,t,n){"use strict";function r(e,t){var n=void 0,r=void 0,i=void 0,o=void 0;return e.chrome?n=-1!==t.indexOf("Chrome")?t.substring(t.indexOf("Chrome")+7):t.substring(t.indexOf("CriOS")+6):e.safari?n=t.substring(t.indexOf("Version")+8):e.firefox?n=t.substring(t.indexOf("Firefox")+8):e.edge?n=t.substring(t.indexOf("Edge")+5):e.ie&&(-1!==t.indexOf("rv:")?n=t.substring(t.indexOf("rv:")+3):-1!==t.indexOf("MSIE")&&(n=t.substring(t.indexOf("MSIE")+5))),n&&(-1!==(o=n.indexOf(";"))&&(n=n.substring(0,o)),-1!==(o=n.indexOf(" "))&&(n=n.substring(0,o)),-1!==(o=n.indexOf(")"))&&(n=n.substring(0,o)),r=parseInt(n,10),i=parseInt(n.split(".")[1],10)),{version:n,major:r,minor:i}}function i(e,t){if(e&&e.length>t)return e[t]}function o(e,t){var n=void 0,r=void 0,o=void 0;if(e.windows)switch(n=i(/Windows(?: NT|)? ([._\d]+)/.exec(t),1)){case"6.1":n="7.0";break;case"6.2":n="8.0";break;case"6.3":n="8.1"}else e.android?n=i(/Android ([._\d]+)/.exec(t),1):e.iOS?n=i(/OS ([._\d]+)/.exec(t),1):e.mac&&(n=i(/Mac OS X (10[._\d]+)/.exec(t),1));if(n){r=parseInt(n,10);var a=n.split(/[._]/);a&&(o=parseInt(a[1],10))}return{version:n,major:r,minor:o}}function a(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}Object.defineProperty(t,"__esModule",{value:!0});var u=n(30),c=n(0);n.d(t,"Browser",function(){return f}),n.d(t,"OS",function(){return d}),n.d(t,"Features",function(){return p});var s=c.c.memoize,l=navigator.userAgent,f={},d={},p={},v=function(){return l.indexOf("Windows")>-1};Object.defineProperties(f,{androidNative:{get:s(u.c),enumerable:!0},chrome:{get:s(u.d),enumerable:!0},edge:{get:s(u.e),enumerable:!0},facebook:{get:s(u.g),enumerable:!0},firefox:{get:s(u.f),enumerable:!0},ie:{get:s(u.i),enumerable:!0},msie:{get:s(u.n),enumerable:!0},safari:{get:s(u.q),enumerable:!0},version:{get:s(r.bind(this,f,l)),enumerable:!0}}),Object.defineProperties(d,{android:{get:s(u.b),enumerable:!0},iOS:{get:s(u.j),enumerable:!0},mobile:{get:s(u.o),enumerable:!0},mac:{get:s(u.p),enumerable:!0},iPad:{get:s(u.k),enumerable:!0},iPhone:{get:s(u.l),enumerable:!0},windows:{get:s(v),enumerable:!0},version:{get:s(o.bind(this,d,l)),enumerable:!0}}),Object.defineProperties(p,{flash:{get:s(u.h),enumerable:!0},flashVersion:{get:s(u.a),enumerable:!0},iframe:{get:s(u.m),enumerable:!0},passiveEvents:{get:s(a),enumerable:!0},backgroundLoading:{get:s(function(){return!(d.iOS||f.safari)}),enumerable:!0}})},function(e,t,n){"use strict";function r(e){return b||(b=o(e)),b}function i(){throw new Error("Network error")}function o(e){var t=e.get("controls"),n=a(),r=u(e,"html5");return t&&n&&r?c():t&&r?s():t&&n?l():t?f():d()}function a(){var e=window.IntersectionObserverEntry;return!(e&&"IntersectionObserver"in window&&"intersectionRatio"in e.prototype)}function u(e,t){var n=e.get("playlist");if(Array.isArray(n)&&n.length)for(var r=Object(v.a)(n[0]).sources,i=0;i<r.length;i++)for(var o=r[i],a=e.getProviders(),u=0;u<h.a.length;u++){var c=h.a[u];if(a.providerSupports(c,o))return c.name===t}return!1}function c(){return w.html5=!0,n.e(0).then(function(e){n(10);var t=n(4).default;return g.b.controls=n(3).default,Object(m.a)(n(116).default),t}.bind(null,n)).catch(i)}function s(){return w.html5=!0,n.e(1).then(function(e){var t=n(4).default;return g.b.controls=n(3).default,Object(m.a)(n(116).default),t}.bind(null,n)).catch(i)}function l(){return n.e(2).then(function(e){n(10);var t=n(4).default;return g.b.controls=n(3).default,t}.bind(null,n)).catch(i)}function f(){return n.e(3).then(function(e){var t=n(4).default;return g.b.controls=n(3).default,t}.bind(null,n)).catch(i)}function d(){return p().then(function(){return n.e(7).then(function(e){return n(4).default}.bind(null,n)).catch(i)})}function p(){return a()?n.e(10).then(function(e){return n(10)}.bind(null,n)).catch(i):y.b}n.d(t,"a",function(){return w}),t.c=r,t.b=i;var v=n(23),h=n(17),m=n(18),g=n(48),y=n(1),b=null,w={}},,function(e,t,n){"use strict";function r(e){switch(void 0===e?"undefined":c(e)){case"string":return e.length>0;case"object":return null!==e;case"undefined":return!1;default:return!0}}function i(){return"https:"===window.location.protocol}function o(e,t){return 0===e.indexOf("rtmp:")||"rtmp"===t}function a(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)}function u(e){if(null===e)return"null";var t=void 0===e?"undefined":c(e);return"object"===t&&Array.isArray(e)?"array":t}Object.defineProperty(t,"__esModule",{value:!0}),t.exists=r,t.isHTTPS=i,t.isRtmp=o,t.isYouTube=a,t.typeOf=u;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},function(e,t,n){"use strict";function r(e,t){if(Object(l.exists)(t)||(t=document.location.href),Object(l.exists)(e)){if(i(e))return e;var n=t.substring(0,t.indexOf("://")+3),r=t.substring(n.length,t.indexOf("/",n.length+1)),o=void 0;if(0===e.indexOf("/"))o=e.split("/");else{var a=t.split("?")[0];a=a.substring(n.length+r.length+1,a.lastIndexOf("/")),o=a.split("/").concat(e.split("/"))}for(var u=[],c=0;c<o.length;c++)o[c]&&Object(l.exists)(o[c])&&"."!==o[c]&&(".."===o[c]?u.pop():u.push(o[c]));return n+r+"/"+u.join("/")}}function i(e){return/^(?:(?:https?|file):)?\/\//.test(e)}function o(e){return f.c.some(e,function(e){return"parsererror"===e.nodeName})}function a(e){var t=null;try{"DOMParser"in window?(t=(new window.DOMParser).parseFromString(e,"text/xml"),(o(t.childNodes)||t.childNodes&&o(t.childNodes[0].childNodes))&&(t=null)):(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(e){}return t}function u(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e}function c(e){return"string"==typeof e?""===e?0:e.lastIndexOf("%")>-1?e:parseInt(e.replace("px",""),10):e}function s(e,t){if(e<=0&&!t||f.c.isNaN(parseInt(e)))return"00:00";var n=e<0?"-":"";e=Math.abs(e);var r=Math.floor(e/3600),i=Math.floor((e-3600*r)/60),o=Math.floor(e%60);return n+(r?r+":":"")+(i<10?"0":"")+i+":"+(o<10?"0":"")+o}Object.defineProperty(t,"__esModule",{value:!0}),t.getAbsolutePath=r,t.isAbsolutePath=i,t.parseXML=a,t.serialize=u,t.parseDimension=c,t.timeFormat=s;var l=n(11),f=n(0)},function(e,t,n){"use strict";function r(e){var t="";return e&&(e.localName?t=e.localName:e.baseName&&(t=e.baseName)),t}function i(e){var t="";return e&&(e.textContent?t=Object(u.h)(e.textContent):e.text&&(t=Object(u.h)(e.text))),t}function o(e,t){return e.childNodes[t]}function a(e){return e.childNodes?e.childNodes.length:0}t.b=r,t.d=i,t.a=o,t.c=a;var u=n(2)},function(e,t,n){"use strict";function r(e){var t={setup:[i,o,a,u,c,l,f,d,s],drm:[c,l,f,d],ads:[l,f,d,s,c],jwpsrv:[i,o,a,u,c,l,d,s],discovery:[l,c,d,f]};return function(n){return t[n]&&t[n].indexOf(e)>-1}}t.a=r;var i="free",o="starter",a="business",u="premium",c="enterprise",s="platinum",l="ads",f="unlimited",d="trial"},function(e,t,n){"use strict";t.a={debug:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getScriptPath",function(){return i}),n.d(t,"repo",function(){return o}),n.d(t,"versionCheck",function(){return a}),n.d(t,"loadFrom",function(){return u});var r=n(20),i=function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var r=t[n].src;if(r){var i=r.lastIndexOf("/"+e);if(i>=0)return r.substr(0,i+1)}}return""},o=function(){var e="//ssl.p.jwpcdn.com/player/v/8.2.0/";return("file:"===window.location.protocol?"https:":"")+e},a=function(e){var t=("0"+e).split(/\W/),n=r.a.split(/\W/),i=parseFloat(t[0]),o=parseFloat(n[0]);return!(i>o)&&!(i===o&&parseFloat("0"+t[1])>parseFloat(n[1]))},u=function(){return o()}},function(e,t,n){"use strict";function r(){return!!window.MediaSource&&!!window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function i(e){if(e.drm&&!Object(l.a)(e.drm))return!1;var t=window.MediaSource;if(!window.HTMLVideoElement||!t)return!1;var n=!0;return e.mediaTypes&&(n=c.c.all(e.mediaTypes,function(e){return t.isTypeSupported(e)})),n&&("dash"===e.type||"mpd"===e.type||(e.file||"").indexOf("mpd-time-csf")>-1)}var o=n(46),a=n(8),u=n(14),c=n(0),s=n(11),l=n(29),f=c.c.find(o.a,c.c.matches({name:"html5"})),d=f.supports;f.supports=function(e,t){var n=d.apply(this,arguments);if(n&&e.drm&&"hls"===e.type){var r=Object(u.a)(t),i=r("drm");if(i&&e.drm.fairplay){var o=window.WebKitMediaKeys;return o&&o.isTypeSupported&&o.isTypeSupported("com.apple.fps.1_0","video/mp4")}return i}return n},o.a.push({name:"shaka",supports:i}),o.a.splice(0,0,{name:"hlsjs",supports:function(e){if(e.drm)return!1;var t=a.Browser.chrome||a.Browser.firefox||a.Browser.edge||a.Browser.ie&&11===a.Browser.version.major,n=a.OS.android&&!!e.hlsjsdefault,i=!a.OS.iOS&&a.Browser.safari&&!!e.safarihlsjs,o=r()&&(t||n||i),u=e.file.indexOf(".m3u8")>-1,c="hls"===e.type||"m3u8"===e.type;return o&&(u||c)}}),o.a.push({name:"flash",supports:function(e){if(!a.Features.flash||e.drm)return!1;var t=e.type;return"hls"===t||"m3u8"===t||!Object(s.isRtmp)(e.file,t)&&["flv","f4v","mov","m4a","m4v","mp4","aac","f4a","mp3","mpeg","smil"].indexOf(t)>-1}}),t.a=o.a},function(e,t,n){"use strict";function r(e){var t=e.getName().name;if(!i.a[t]){if(!u.c.find(o.a,u.c.matches({name:t}))){if(!u.c.isFunction(e.supports))throw new Error("Tried to register a provider with an invalid object");o.a.unshift({name:t,supports:e.supports})}u.c.defaults(e.prototype,a.a),i.a[t]=e}}t.a=r;var i=n(33),o=n(17),a=n(45),u=n(0)},function(e,t,n){"use strict";function r(e,t,n){var r=e.name,i=document.createElement("div");i.id=n.id+"_"+r,i.className="jw-plugin jw-reset";var o=s({},t),a=e.getNewInstance(n,o,i);n.addPlugin(r,a)}function i(e){switch(y(e)){case m:return e;case g:return Object(p.getAbsolutePath)(e,window.location.href)}}function o(e){return x[e]=new f,x[e]}function a(e,t){var n=e.get("id"),r=e.get("plugins");window.jwplayerPluginJsonp=P;var i=o(n);return i.load(t,E,r).then(function(e){i===x[n]&&(e&&e.forEach(function(e){e instanceof Error&&Object(j.b)(e.message)}),delete window.jwplayerPluginJsonp)})}var u=n(1),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){this.load=function(e,t,n){return n&&"object"===(void 0===n?"undefined":c(n))?u.a.all(Object.keys(n).filter(function(e){return e}).map(function(i){var o=t.addPlugin(i,!0),a=n[i];return o.load().then(function(){r(o,a,e)}).catch(function(e){return e instanceof Error?e:new Error("Error in "+i+' "'+e+'"')})})):u.b}},f=l,d=n(24),p=n(12),v=n(2),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=0,g=1,y=function(e){if("string"==typeof e){e=e.split("?")[0];var t=e.indexOf("://");if(t>0)return m;var n=e.indexOf("/"),r=Object(v.a)(e);return!(t<0&&n<0)||r&&isNaN(r)?g:2}},b=function(e){this.url=e};h(b.prototype,{load:function(){if(2===y(this.url))return u.b;var e=new d.a(i(this.url));return this.loader=e,e.load()},registerPlugin:function(e,t,n){this.name=e,this.target=t,this.js=n},getNewInstance:function(e,t,n){var r=this.js,i=new r(e,t,n);return i.addToPlayer=function(){var t=e.getContainer().querySelector(".jw-overlays");t&&(n.left=t.style.left,n.top=t.style.top,t.appendChild(n),i.displayArea=t)},i.resizeHandler=function(){var e=i.displayArea;e&&i.resize(e.clientWidth,e.clientHeight)},i}});var w=b,j=n(6),O={},k=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(js)$/,"$2")},C=function(){this.addPlugin=function(e,t){var n=k(e),r=O[n];return r?t&&r.url!==e&&Object(j.b)('JW Plugin "'+n+'" already loaded from "'+r.url+'". Ignoring "'+e+'."'):(r=new w(e),O[n]=r),r},this.getPlugins=function(){return O}},T=C;n.d(t,"b",function(){return P}),t.a=a;var E=new T,x={},P=function(e,t,n){var r=E.addPlugin(e);r.js||r.registerPlugin(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="8.2.0+commercial_v8-2-0.251.commercial.cdc12c5.hlsjs..jwplayer.f5e22c2.dai.ccc6c77.freewheel.29771b0.googima.f42cc17.vast.1ba6186.analytics.abc087d.gapro.f664e4e.related.a6a8ec0"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Date.now||function(){return(new Date).getTime()}},function(e,t,n){"use strict";function r(){return a+o.now()}var i=n(21),o=window.performance||{timing:{}},a=o.timing.navigationStart||Object(i.a)();"now"in o||(o.now=function(){return Object(i.a)()-a});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){var e={},t={},n={},i={};return{start:function(t){e[t]=r(),n[t]=n[t]+1||1},end:function(n){if(e[n]){var i=r(),o=i-e[n];delete e[n],t[n]=t[n]+o||o}},dump:function(){var o=u({},t);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=r(),s=c-e[a];o[a]=o[a]+s||s}return{counts:u({},n),sums:o,events:u({},i)}},tick:function(e){i[e]=r()},clear:function(e){delete i[e]},between:function(e,t){return i[t]&&i[e]?i[t]-i[e]:null}}};t.a=c},function(e,t,n){"use strict";var r=n(36),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e){if(e&&e.file)return i({},{kind:"captions",default:!1},e)},a=o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=Array.isArray,s=function(e){e=e||{},c(e.tracks)||delete e.tracks;var t=u({},{sources:[],tracks:[],minDvrWindow:120},e);t.sources!==Object(t.sources)||c(t.sources)||(t.sources=[Object(r.a)(t.sources)]),c(t.sources)&&0!==t.sources.length||(e.levels?t.sources=e.levels:t.sources=[Object(r.a)(e)]);for(var n=0;n<t.sources.length;n++){var i=t.sources[n];if(i){var o=i.default;i.default=!!o&&"true"===o.toString(),t.sources[n].label||(t.sources[n].label=n.toString()),t.sources[n]=Object(r.a)(t.sources[n])}}return t.sources=t.sources.filter(function(e){return!!e}),c(t.tracks)||(t.tracks=[]),c(t.captions)&&(t.tracks=t.tracks.concat(t.captions),delete t.captions),t.tracks=t.tracks.map(a).filter(function(e){return!!e}),t};t.a=s},function(e,t,n){"use strict";function r(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t}function i(e){var t=document.createElement("script");return t.type="text/javascript",t.charset="utf-8",t.async=!0,t.timeout=l,t.src=e,t}var o=n(7),a=n(5),u=n(1),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s={},l=15e3,f=2,d=3,p=function(e,t){function n(e){p=f,c.trigger(a.r,e).off()}function o(e){p=d,c.trigger(a._4,e).off()}var c=this,p=0;this.getStatus=function(){return p},this.load=function(){var a=s[e];return 0!==p?a:(a&&a.then(o).catch(n),p=1,a=new u.a(function(a,u){var c=t?r:i,s=c(e),f=function(){s.onerror=s.onload=null,clearTimeout(p)},d=function(e){f(),n(e),u(e)},p=setTimeout(function(){d(new Error("Network timeout "+e))},l);s.onerror=function(){d(new Error("Failed to load "+e))},s.onload=function(e){f(),o(e),a(e)};var v=document.getElementsByTagName("head")[0]||document.documentElement;v.insertBefore(s,v.firstChild)}),s[e]=a,a)}};c(p.prototype,o.a),t.a=p},function(e,t,n){"use strict";function r(e,t){return e.classList.contains(t)}function i(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}function o(e){return e+(e.toString().indexOf("%")>0?"":"px")}function a(e){return b.c.isString(e.className)?e.className.split(" "):[]}function u(e,t){t=Object(y.h)(t),e.className!==t&&(e.className=t)}function c(e){return e.classList?e.classList:a(e)}function s(e,t){var n=a(e),r=b.c.isArray(t)?t:t.split(" ");b.c.each(r,function(e){b.c.contains(n,e)||n.push(e)}),u(e,n.join(" "))}function l(e,t){var n=a(e),r=b.c.isArray(t)?t:t.split(" ");u(e,b.c.difference(n,r).join(" "))}function f(e,t,n){var r=e.className||"";t.test(r)?r=r.replace(t,n):n&&(r+=" "+n),u(e,r)}function d(e,t,n){var i=r(e,t);(n=b.c.isBoolean(n)?n:!i)!==i&&(n?s(e,t):l(e,t))}function p(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function v(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function h(e){e&&p(e)}function m(e){var t={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!e||!document.body.contains(e))return t;var n=e.getBoundingClientRect(),r=window.pageYOffset,i=window.pageXOffset;return n.width||n.height||n.left||n.top?(t.left=n.left+i,t.right=n.right+i,t.top=n.top+r,t.bottom=n.bottom+r,t.width=n.right-n.left,t.height=n.bottom-n.top,t):t}function g(e,t){e.insertBefore(t,e.firstChild)}t.h=r,t.e=i,t.l=o,t.d=c,t.a=s,t.j=l,t.k=f,t.m=d,t.g=p,t.b=v,t.f=h,t.c=m,t.i=g;var y=n(2),b=n(0)},function(e,t,n){"use strict";function r(e,t,n,r){n=n||"all-players";var o="";if("object"===(void 0===t?"undefined":d(t))){var a=document.createElement("div");i(a,t);var u=a.style.cssText;r&&u&&(u=u.replace(/;/g," !important;")),o="{"+u+"}"}else"string"==typeof t&&(o=t);if(""===o||"{}"===o)return void f.a.clear(n,e);f.a.style([[e,e+o]],n)}function i(e,t){if(void 0!==e&&null!==e){void 0===e.length&&(e=[e]);var n,r={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=a(n,t[n]));for(var i=0;i<e.length;i++){var u,c=e[i];if(void 0!==c&&null!==c)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(u=o(n),c.style[u]!==r[n]&&(c.style[u]=r[n]))}}}function o(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}function a(e,t){return""===t||void 0===t||null===t?"":"string"==typeof t&&isNaN(t)?/png|gif|jpe?g/i.test(t)&&t.indexOf("url")<0?"url("+t+")":t:0===t||"z-index"===e||"opacity"===e?""+t:/color/i.test(e)?"#"+Object(s.d)(t.toString(16).replace(/^0x/i,""),6):Math.ceil(t)+"px"}function u(e,t){i(e,{transform:t,webkitTransform:t,msTransform:t,mozTransform:t,oTransform:t})}function c(e,t){var n="rgb",r=void 0!==t&&100!==t;if(r&&(n+="a"),!v){var i=document.createElement("canvas");i.height=1,i.width=1,v=i.getContext("2d")}e?isNaN(parseInt(e,16))||(e="#"+e):e="#000000",v.clearRect(0,0,1,1),v.fillStyle=e,v.fillRect(0,0,1,1);var o=v.getImageData(0,0,1,1).data;return n+="("+o[0]+", "+o[1]+", "+o[2],r&&(n+=", "+t/100),n+")"}n.d(t,"a",function(){return p}),t.b=r,t.d=i,t.e=u,t.c=c;var s=n(2),l=n(39),f=n.n(l),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=f.a.clear,v=void 0},function(e,t,n){"use strict";var r=[];t.a=r},function(e,t,n){"use strict";function r(e){this.config=e||{}}var i=n(17),o=n(18),a=n(33),u=n(9),c=n(1),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l={html5:function(){return n.e(8).then(function(e){var t=n(116).default;return Object(o.a)(t),t}.bind(null,n)).catch(u.b)}};s(r.prototype,{load:function(e){var t=l[e],n=function(){return c.a.reject(new Error("Failed to load media"))};return t?t().then(function(){var t=a.a[e];return t||n()}):n()},providerSupports:function(e,t){return e.supports(t)},choose:function(e){if(e===Object(e))for(var t=i.a.length,n=0;n<t;n++){var r=i.a[n];if(this.providerSupports(r,e)){var o=t-n-1;return{priority:o,name:r.name,type:e.type,providerToCheck:r,provider:a.a[r.name]}}}return{}}});var f=r,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=void 0;d(l,{shaka:function(){return n.e(5).then(function(e){var t=n(124).default;return Object(o.a)(t),t}.bind(null,n)).catch(u.b)},hlsjs:function(){return n.e(6).then(function(e){var t=n(125).default;return t.setEdition&&t.setEdition(p),Object(o.a)(t),t}.bind(null,n)).catch(u.b)},flash:function(){return n.e(9).then(function(e){var t=n(126).default;return Object(o.a)(t),t}.bind(null,n)).catch(u.b)}}),f.prototype.providerSupports=function(e,t){return p=this.config.edition,e.supports(t,p)};t.a=f},function(e,t,n){"use strict";function r(e){return e.some(function(e){return!!e.drm||e.sources.some(function(e){return!!e.drm})})}function i(e){return new l.a(function(t,n){var r=void 0;try{r=new window.MSMediaKeys(e)}catch(e){return void n(e)}t(r)})}function o(e){if(v)return v;if(a()&&Object(s.a)(e)("drm")){var t=i;return navigator.requestMediaKeySystemAccess&&(t=navigator.requestMediaKeySystemAccess.bind(navigator)),f.forEach(function(e){var n=t(e.keyName,[{initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}]}]).then(function(){p[e.configName]=!0}).catch(function(){p[e.configName]=!1});d.push(n)}),v=l.a.all(d)}return l.b}function a(){return!!navigator.requestMediaKeySystemAccess&&!!MediaKeySystemAccess.prototype.getConfiguration||!!window.MSMediaKeys}function u(e){return p[e]}function c(e){if(v)return Object.keys(e).some(function(e){return u(e)})}t.b=r,t.d=o,t.c=u,t.a=c;var s=n(14),l=n(1),f=[{configName:"clearkey",keyName:"org.w3.clearkey"},{configName:"widevine",keyName:"com.widevine.alpha"},{configName:"playready",keyName:"com.microsoft.playready"}],d=[],p={},v=void 0},function(e,t,n){"use strict";function r(e){return null!==g.match(e)}function i(e){return function(){return r(e)}}function o(){var e=m();return!!(e&&e>=18)}function a(){return r(/\sEdge\/\d+/i)}function u(){return r(/msie/i)}function c(){return r(/\s(?:Chrome|CriOS)\//i)&&!a()&&!r(/UCBrowser/i)}function s(){return a()||b()||u()}function l(){return r(/safari/i)&&!r(/(?:Chrome|CriOS|chromium|android|phantom)/i)}function f(){return r(/iP(hone|ad|od)/i)}function d(){return!(r(/chrome\/[123456789]/i)&&!r(/chrome\/18/i)&&!y())&&p()}function p(){return r(/Android/i)&&!r(/Windows Phone/i)}function v(){return f()||p()||r(/Windows Phone/i)}function h(){try{return window.self!==window.top}catch(e){return!0}}function m(){if(p())return 0;var e,t=navigator.plugins;if(t&&(e=t["Shockwave Flash"])&&e.description)return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if(void 0!==window.ActiveXObject){try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(e){return 0}return e}return 0}t.h=o,n.d(t,"f",function(){return y}),n.d(t,"l",function(){return w}),n.d(t,"k",function(){return j}),n.d(t,"p",function(){return O}),n.d(t,"g",function(){return k}),t.e=a,t.n=u,t.d=c,t.i=s,t.q=l,t.j=f,t.c=d,t.b=p,t.o=v,t.m=h,t.a=m;var g=navigator.userAgent,y=i(/gecko\//i),b=i(/trident\/.+rv:\s*11/i),w=i(/iP(hone|od)/i),j=i(/iPad/i),O=i(/Macintosh/i),k=i(/FBAV/i)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=window.atob},function(e,t,n){"use strict";var r=document.createElement("video");t.a=r},function(e,t,n){"use strict";var r={};t.a=r},function(e,t,n){"use strict";var r=n(35),i=n(14),o=n(31),a="invalid",u=function(e){var t=void 0,n=void 0,u=void 0;this.edition=function(){return u&&u.getTime()<(new Date).getTime()?a:t},this.token=function(){return n},this.expiration=function(){return u},function(e,c){try{var s=Object(r.a)(e,Object(o.a)(c)),l=s.split("/");"pro"===(t=l[0])&&(t="premium");var f=Object(i.a)(t);if(l.length>2&&f("setup")){n=l[1];var d=parseInt(l[2]);d>0&&(u=new Date,u.setTime(d))}else t=a}catch(e){t=a}}(e||"","NDh2aU1Cb0NHRG5hcDFRZQ==")};t.a=u},function(e,t,n){"use strict";function r(e){return unescape(encodeURIComponent(e))}function i(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}function o(e){for(var t=new Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t}function a(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(255&e[n],e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")}function u(e,t){if(e=String(e),t=String(t),0===e.length)return"";for(var n=o(Object(c.a)(e)),u=o(r(t).slice(0,16)),s=n.length,l=n[s-1],f=n[0],d=void 0,p=void 0,v=2654435769*Math.floor(6+52/s);v;){p=v>>>2&3;for(var h=s-1;h>=0;h--)l=n[h>0?h-1:s-1],d=(l>>>5^f<<2)+(f>>>3^l<<4)^(v^f)+(u[3&h^p]^l),f=n[h]-=d;v-=2654435769}return i(a(n).replace(/\0+$/,""))}t.a=u;var c=n(31)},function(e,t,n){"use strict";var r=n(11),i=n(2),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e){if(e&&e.file){var t=o({},{default:!1},e);t.file=Object(i.h)(""+t.file);var n=/^[^\/]+\/(?:x-)?([^\/]+)$/;if(n.test(t.type)&&(t.mimeType=t.type,t.type=t.type.replace(n,"$1")),Object(r.isYouTube)(t.file)?t.type="youtube":Object(r.isRtmp)(t.file)?t.type="rtmp":t.type||(t.type=Object(i.a)(t.file)),t.type){switch(t.type){case"m3u8":case"vnd.apple.mpegurl":t.type="hls";break;case"dash+xml":t.type="dash";break;case"m4a":t.type="aac";break;case"smil":t.type="rtmp"}return Object.keys(t).forEach(function(e){""===t[e]&&delete t[e]}),t}}};t.a=a},function(e,t,n){"use strict";function r(e){for(var t=[],n=0;n<Object(a.c)(e);n++){var r=e.childNodes[n];"jwplayer"===r.prefix&&"mediatypes"===Object(a.b)(r).toLowerCase()&&t.push(Object(a.d)(r))}return t}function i(e){var t=[];t.feedData={};for(var n=0;n<Object(a.c)(e);n++){var r=Object(a.a)(e,n);if("channel"===Object(a.b)(r).toLowerCase())for(var i=0;i<Object(a.c)(r);i++){var u=Object(a.a)(r,i),c=Object(a.b)(u).toLowerCase();"item"===c?t.push(o(u)):c&&(t.feedData[c]=Object(a.d)(u))}}return t}function o(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n],i=Object(a.b)(r);if(i)switch(i.toLowerCase()){case"enclosure":t.file=Object(u.i)(r,"url");break;case"title":t.title=Object(a.d)(r);break;case"guid":t.mediaid=Object(a.d)(r);break;case"pubdate":t.date=Object(a.d)(r);break;case"description":t.description=Object(a.d)(r);break;case"link":t.link=Object(a.d)(r);break;case"category":t.tags?t.tags+=Object(a.d)(r):t.tags=Object(a.d)(r)}}return new p.a(d(e,l(e,t)))}var a=n(13),u=n(2),c=n(6),s=function e(t,n){for(var i=[],o=0;o<Object(a.c)(t);o++){var s=t.childNodes[o];if("media"===s.prefix){if(!Object(a.b)(s))continue;switch(Object(a.b)(s).toLowerCase()){case"content":if(Object(u.i)(s,"duration")&&(n.duration=c.a.seconds(Object(u.i)(s,"duration"))),Object(u.i)(s,"url")){n.sources||(n.sources=[]);var l={file:Object(u.i)(s,"url"),type:Object(u.i)(s,"type"),width:Object(u.i)(s,"width"),label:Object(u.i)(s,"label")},f=r(s);f.length&&(l.mediaTypes=f),n.sources.push(l)}Object(a.c)(s)>0&&(n=e(s,n));break;case"title":n.title=Object(a.d)(s);break;case"description":n.description=Object(a.d)(s);break;case"guid":n.mediaid=Object(a.d)(s);break;case"thumbnail":n.image||(n.image=Object(u.i)(s,"url"));break;case"group":e(s,n);break;case"subtitle":var d={};d.file=Object(u.i)(s,"url"),d.kind="captions",Object(u.i)(s,"lang").length>0&&(d.label=function(e){var t={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};return t[e]?t[e]:e}(Object(u.i)(s,"lang"))),i.push(d)}}}n.hasOwnProperty("tracks")||(n.tracks=[]);for(var p=0;p<i.length;p++)n.tracks.push(i[p]);return n},l=s,f=function(e,t){for(var n="default",r=[],i=[],o=0;o<e.childNodes.length;o++){var s=e.childNodes[o];if("jwplayer"===s.prefix){var l=Object(a.b)(s);"source"===l?(delete t.sources,r.push({file:Object(u.i)(s,"file"),default:Object(u.i)(s,n),label:Object(u.i)(s,"label"),type:Object(u.i)(s,"type")})):"track"===l?(delete t.tracks,i.push({file:Object(u.i)(s,"file"),default:Object(u.i)(s,n),kind:Object(u.i)(s,"kind"),label:Object(u.i)(s,"label")})):(t[l]=c.a.serialize(Object(a.d)(s)),"file"===l&&t.sources&&delete t.sources)}t.file||(t.file=t.link)}if(r.length){t.sources=[];for(var f=0;f<r.length;f++)r[f].file.length>0&&(r[f][n]="true"===r[f][n],r[f].label.length||delete r[f].label,t.sources.push(r[f]))}if(i.length){t.tracks=[];for(var d=0;d<i.length;d++)i[d].file.length>0&&(i[d][n]="true"===i[d][n],i[d].kind=i[d].kind.length?i[d].kind:"captions",i[d].label.length||delete i[d].label,t.tracks.push(i[d]))}return t},d=f,p=n(23);t.a=i},function(e,t,n){"use strict";function r(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]}function i(e){var t=e||window.event;return e instanceof MouseEvent&&("which"in t?3===t.which:"button"in t&&2===t.button)}function o(e){var t=e||window.event;return t instanceof KeyboardEvent&&13===t.keyCode&&(e.stopPropagation(),!0)}function a(e,t,n){var r=void 0;return r=t instanceof MouseEvent||!t.touches&&!t.changedTouches?t:t.touches&&t.touches.length?t.touches[0]:t.changedTouches[0],{type:e,sourceEvent:t,target:t.target,currentTarget:n,pageX:r.pageX,pageY:r.pageY}}function u(e){(e instanceof MouseEvent||e instanceof v)&&(e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault())}function c(e){return g&&e instanceof v||m&&e instanceof h&&"touch"===e.pointerType?"touch":"mouse"}t.b=c;var s=n(8),l=n(5),f=n(7),d=n(21),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=window.TouchEvent,h=window.PointerEvent,m="PointerEvent"in window&&!s.OS.android,g="ontouchstart"in window,y=!(m||g&&s.OS.mobile),b=s.Browser.firefox&&s.OS.mac,w=function(e,t){function n(e){"touch"!==e.pointerType&&O(l.S,e)}function c(e){"touch"!==e.pointerType&&O(l.P,e)}function f(t){if("touch"!==t.pointerType&&"x"in t){var n=t.x,r=t.y,i=document.elementFromPoint(n,r);e.contains(i)||O(l.R,t)}}function p(e){O(l.R,e)}function v(e){o(e)&&O(l.q,e)}function h(e,t,n){e.removeEventListener(t,n),e.addEventListener(t,n)}function g(n){S=n.target,T=r(n,"X"),E=r(n,"Y"),i(n)||("pointerdown"===n.type&&n.isPrimary?(t.preventScrolling&&(_=n.pointerId,e.setPointerCapture(_)),h(e,"pointermove",w,N),h(e,"pointercancel",j),"mouse"===n.pointerType&&"OBJECT"===S.nodeName?h(document,"mouseup",L):h(e,"pointerup",j)):"mousedown"===n.type?(h(document,"mousemove",w,N),b&&"object"===n.target.nodeName.toLowerCase()?h(e,"click",j):h(document,"mouseup",L)):"touchstart"===n.type&&(h(S,"touchmove",w,N),h(S,"touchcancel",j),h(S,"touchend",j)),t.preventScrolling&&u(n))}function w(e){if(C)O(l.n,e);else{var n=r(e,"X"),i=r(e,"Y"),o=n-T,a=i-E;o*o+a*a>36&&(O(l.p,e),C=!0,O(l.n,e))}t.preventScrolling&&u(e)}function j(n){var r="pointerup"===n.type||"pointercancel"===n.type;r&&t.preventScrolling&&e.releasePointerCapture(_),e.removeEventListener("pointermove",w),e.removeEventListener("pointercancel",j),e.removeEventListener("pointerup",j),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",L),S&&(S.removeEventListener("touchmove",w),S.removeEventListener("touchcancel",j),S.removeEventListener("touchend",j)),C?O(l.o,n):t.directSelect&&n.target!==e||-1!==n.type.indexOf("cancel")||("mouseup"===n.type||"click"===n.type||r&&"mouse"===n.pointerType?O(l.i,n):(O(l._11,n),"touchend"===n.type&&u(n))),S=null,C=!1}function O(e,n){var r=void 0;if(t.enableDoubleTap&&(e===l.i||e===l._11))if(Object(d.a)()-x<P){var i=e===l.i?l.l:l.m;r=a(i,n,k),M.trigger(i,r),x=0}else x=Object(d.a)();r=a(e,n,k),M.trigger(e,r)}var k=e,C=!1,T=0,E=0,x=0,P=300,S=void 0,_=void 0;t=t||{};var N=!!s.Features.passiveEvents&&{passive:!t.preventScrolling},L=function(e){return j(e)};m?(e.addEventListener("pointerdown",g,N),t.useHover&&(e.addEventListener("pointerover",n),e.addEventListener("pointerout",f)),t.useMove&&e.addEventListener("pointermove",c)):(y&&(e.addEventListener("mousedown",g,N),t.useHover&&(e.addEventListener("mouseover",n),e.addEventListener("mouseout",p)),t.useMove&&e.addEventListener("mousemove",c)),e.addEventListener("touchstart",g,N)),e.addEventListener("keydown",v),t.useFocus&&(e.addEventListener("focus",n),e.addEventListener("blur",p));var M=this;return this.triggerEvent=O,this.destroy=function(){this.off(),e.removeEventListener("touchstart",g),e.removeEventListener("mousedown",g),e.removeEventListener("keydown",v),S&&(S.removeEventListener("touchmove",w),S.removeEventListener("touchcancel",j),S.removeEventListener("touchend",j),S=null),m&&(t.preventScrolling&&e.releasePointerCapture(_),e.removeEventListener("pointerover",n),e.removeEventListener("pointerdown",g),e.removeEventListener("pointermove",w),e.removeEventListener("pointermove",c),e.removeEventListener("pointercancel",j),e.removeEventListener("pointerout",f),e.removeEventListener("pointerup",j)),e.removeEventListener("click",j),e.removeEventListener("mouseover",n),e.removeEventListener("mousemove",c),e.removeEventListener("mouseout",p),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",L),t.useFocus&&(e.removeEventListener("focus",n),e.removeEventListener("blur",p))},this};p(w.prototype,f.a),t.a=w},function(e,t,n){var r;void 0!==(r=function(e,t,n){function r(e,t){o(t,a(e))}function i(e,t){var n=f[e];if(n)if(t){var r=n[t];if(r)for(var i=0;i<r.parts.length;i+=1)r.parts[i]()}else{for(var o=Object.keys(n),a=0;a<o.length;a+=1)for(var u=n[o[a]],c=0;c<u.parts.length;c+=1)u.parts[c]();delete f[e]}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=(f[e]||{})[r.id];if(i){for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(s(e,r.parts[o]))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(s(e,r.parts[o]));f[e]=f[e]||{},f[e][r.id]={id:r.id,parts:a}}}}function a(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],u=i[2],c={css:a,media:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function u(e){p().appendChild(e)}function c(e){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-jwplayer-id",e),u(t),t}function s(e,t){var n,r,i,o=d[e];o||(o=d[e]={element:c(e),counter:0});var a=o.counter++;return n=o.element,r=function(e){l(n,a,e)},i=function(){l(n,a,"")},r(t.css),function(e){if(e){if(e.css===t.css&&e.media===t.media)return;t=e,r(t.css)}else i()}}function l(e,t,n){if(e.styleSheet)e.styleSheet.cssText=v(t,n);else{var r=document.createTextNode(n),i=e.childNodes,o=i[t];o?e.replaceChild(r,o):e.appendChild(r)}}var f={},d={},p=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return document.head||document.getElementsByTagName("head")[0]});n.exports={style:r,clear:i};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()}.call(t,n,t,e))&&(e.exports=r)},function(e,t,n){"use strict";function r(e,t,n){function r(){for(;i.length>0;){var t=i.shift(),n=t.command,r=t.args;(o[n]||e[n]).apply(e,r)}}var i=[],o={};t.forEach(function(t){var a=e[t];o[t]=a,e[t]=function(){var e=Array.prototype.slice.call(arguments,0);n()?i.push({command:t,args:e}):(r(),a&&a.apply(this,e))}}),Object.defineProperty(this,"queue",{enumerable:!0,get:function(){return i}}),this.flush=r,this.empty=function(){i.length=0},this.off=function(){t.forEach(function(t){var n=o[t];n&&(e[t]=n,delete o[t])})},this.destroy=function(){this.off(),this.empty()}}t.a=r},function(e,t,n){"use strict";function r(e,t){var n=t.indexOf(":")+1,r=n>0?t.substr(0,n):"Error loading player:",u=t.substr(n),c=i(e.get("id"),r,u),s=e.get("width"),l=e.get("height"),f=Object(o.e)(c);return Object(a.d)(f,{width:s.toString().indexOf("%")>0?s:s+"px",height:l.toString().indexOf("%")>0?l:l+"px"}),f}var i=function(e){return'<div id="'+e+'" class="jw-error jw-reset"><div class="jw-error-msg jw-reset"><style>[id="'+e+'"].jw-error{position:relative;background:#000;overflow:hidden;position:relative}[id="'+e+'"] .jw-error-msg{top:50%;left:50%;position:absolute;align-items:center;display:flex;transform:translate(-50%,-50%)}[id="'+e+'"] .jw-title{color:#FFF;position:static}[id="'+e+'"] .jw-title-primary,[id="'+e+'"] .jw-title-secondary{font:600 14px/1.35 Arial,Helvetica,sans-serif}[id="'+e+'"] .jw-title-secondary{font-weight:400}</style><div class="jw-icon jw-reset"></div><div class="jw-title jw-reset"><div class="jw-title-primary jw-reset">'+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+'</div><div class="jw-title-secondary jw-reset">'+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+"</div></div></div></div>"},o=n(25),a=n(26);t.a=r},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=4,i=2,o=1},function(e,t,n){"use strict";var r=n(7),i={on:r.a.on,once:r.a.once,off:r.a.off,trigger:r.a.trigger,get:function(e){return this.attributes=this.attributes||{},this.attributes[e]},set:function(e,t){if(this.attributes=this.attributes||{},this.attributes[e]!==t){var n=this.attributes[e];this.attributes[e]=t,this.trigger("change:"+e,this,t,n)}},clone:function(){var e={},t=this.attributes;if(t)for(var n in t)e[n]=t[n];return e},change:function(e,t,n){this.on("change:"+e,t,n);var r=this.get(e);return t.call(n,this,r,r),this}};t.a=i},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=n(5),i={audioMode:!1,flashBlocked:!1,item:0,itemMeta:{},playbackRate:1,playRejected:!1,state:r._6,itemReady:!1},o={position:0,duration:0,buffer:0,currentTime:0}},function(e,t,n){"use strict";var r=n(5),i=function(){},o=function(){return!1},a={name:"default"},u=function(){return a},c={supports:o,play:i,pause:i,preload:i,load:i,stop:i,volume:i,mute:i,seek:i,resize:i,remove:i,destroy:i,eventsOn_:i,eventsOff_:i,setVisibility:i,setFullscreen:i,getFullscreen:o,getContainer:i,setContainer:o,getName:u,getQualityLevels:i,getCurrentQuality:i,setCurrentQuality:i,getAudioTracks:i,getCurrentAudioTrack:i,setCurrentAudioTrack:i,setPlaybackRate:i,getPlaybackRate:function(){return 1},checkComplete:i,setControls:i,attachMedia:i,detachMedia:i,init:i,setState:function(e){this.state=e,this.trigger(r.U,{newstate:e})},sendMediaType:function(e){var t=e[0].type,n="oga"===t||"aac"===t||"mp3"===t||"mpeg"===t||"vorbis"===t;this.trigger(r.M,{mediaType:n?"audio":"video"})}};t.a=c},function(e,t,n){"use strict";function r(e){if(!1===Object(i.a)(e))return!1;if(!a.a.canPlayType)return!1;var t=e.file,n=e.type;if(Object(o.isRtmp)(t,n))return!1;var r=e.mimeType||u[n];return!!r&&!!a.a.canPlayType(r)}t.b=r;var i=n(53),o=n(11),a=n(32),u={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"},c=[{name:"html5",supports:r}];t.a=c},function(e,t,n){"use strict";function r(e){Object.keys(e).forEach(function(t){"id"!==t&&(e[t]=Object(x.serialize)(e[t]))})}function i(e){return e.slice&&"px"===e.slice(-2)&&(e=e.slice(0,-2)),e}function o(e,t){if(-1===t.toString().indexOf("%"))return 0;if("string"!=typeof e||!e)return 0;if(/^\d*\.?\d+%$/.test(e))return e;var n=e.indexOf(":");if(-1===n)return 0;var r=parseFloat(e.substr(0,n)),i=parseFloat(e.substr(n+1));return r<=0||i<=0?0:i/r*100+"%"}function a(e){var t=e.flashplayer;return t||(t=(Object(E.getScriptPath)("jwplayer.js")||e.base)+"jwplayer.flash.swf"),"http:"===window.location.protocol&&(t=t.replace(/^https/,"http")),t}function u(e){var t="file:"===window.location.protocol?"https:":"",n={jwpsrv:"//ssl.p.jwpcdn.com/player/v/8.2.0/jwpsrv.js",dai:"//ssl.p.jwpcdn.com/player/plugins/dai/v/0.2.2/dai.js",vast:"//ssl.p.jwpcdn.com/player/plugins/vast/v/8.2.0/vast.js",googima:"//ssl.p.jwpcdn.com/player/plugins/googima/v/8.1.11/googima.js",freewheel:"//ssl.p.jwpcdn.com/player/plugins/freewheel/v/2.1.3/freewheel.js",related:"//ssl.p.jwpcdn.com/player/plugins/related/v/6.2.2/related.js",gapro:"//ssl.p.jwpcdn.com/player/plugins/gapro/v/2.1.3/gapro.js"},r=n[e];return r?t+r:""}function c(e,t,n){if(t){e[t.client||u(n)]=t,delete t.client}}function s(e){var t=A({},e.plugins),n=e.edition,r=Object(M.a)(n);if(r("ads")){var i=A({},e.advertising),o=i.client;if(o){t[u(o)||o]=i,delete i.client}}if(r("jwpsrv")){var a=e.analytics;a!==Object(a)&&(a={}),c(t,a,"jwpsrv")}c(t,e.ga,"gapro");var s=e.related,l=s===Object(s)&&r("discovery");if(!1!==e.controls||l){var f=!1!==e.visualplaylist||l;l||(s={disableRelated:!0}),s.showButton=f,c(t,s,"related")}return t}function l(e){var t=e.get("playlist");if("string"==typeof t)return new D.a(function(n,r){var i=new q.a;i.on(B.X,function(t){var r=t.playlist;delete t.playlist,f(e,r,t),n()}),i.on(B.r,function(t){f(e,[],{}),r(new Error("Error loading playlist: "+t.message))}),i.load(t)});var n=e.get("feedData")||{};return f(e,t,n),D.b}function f(e,t,n){var r=e.attributes;r.playlist=Object(X.a)(t),r.feedData=n}function d(e){return l(e).then(function(){if(!h(e)){var t=Object(X.b)(e.get("playlist"),e);Object(X.d)(t);var n=e.getProviders(),r=n.choose(t[0].sources[0]),i=r.name,o=r.provider;if(!R.a.html5||!o||"html5"!==i)return n.load(i)}})}function p(e){for(var t=document.styleSheets,n=0,r=t.length;n<r;n++)if(t[n].href===e)return!0;return!1}function v(e){var t=e.get("skin")?e.get("skin").url:void 0;if("string"==typeof t&&!p(t)){return new Q.a(t,!0).load().catch(function(e){return e})}return D.b}function h(e){return e.attributes._destroyed}function m(e){return l(e).then(function(){return e.get("drm")||Object(W.b)(e.get("playlist"))?Object(W.d)(e.get("edition")):D.b})}function g(e){return m(e).then(function(){return V(e)})}function y(e,t){this.namespace=e,this.items=t}function b(){for(var e=oe.c,t=[],n=[],r=0;r<e;r++){var i=j();t.push(i),n.push(i)}var o=n.shift(),a=n.shift();return{prime:function(){t.forEach(w)},getPrimedElement:function(){return n.length?n.shift():null},getAdElement:function(){return o},getTestElement:function(){return a},clean:function(e){if(e.src){e.removeAttribute("src");try{e.load()}catch(e){}}},recycle:function(e){e&&!n.some(function(t){return t===e})&&(this.clean(e),n.push(e))},syncVolume:function(e){t.forEach(function(t){t.volume=e/100})},syncMute:function(e){t.forEach(function(t){t.muted=e})}}}function w(e){if(e.src){if(ae.OS.android&&!e.parentNode){var t=e.played;(!t||t&&!t.length)&&e.load()}}else e.load()}function j(){var e=document.createElement("video");return e.className="jw-video jw-reset",e.setAttribute("disableRemotePlayback",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),e}function O(e,t){D.b.then(function(){var n=t.message,r=t.code,i=Object(ie.a)(e,n);ie.a.cloneIcon&&i.querySelector(".jw-icon").appendChild(ie.a.cloneIcon("error")),k(e,i);var o={message:n,code:r,error:t},a=e._model||e.modelShim;a.set("errorEvent",o),a.set("state",B._5),e.trigger(B._2,o)})}function k(e,t){if(!document.body.contains(e.currentContainer)){var n=document.getElementById(e.get("id"));n&&(e.currentContainer=n)}e.currentContainer.parentElement&&e.currentContainer.parentElement.replaceChild(t,e.currentContainer),e.currentContainer=t}var C=n(40),T=n(0),E=n(16),x=n(12),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S={autostart:!1,castAvailable:!1,controls:!0,defaultPlaybackRate:1,displaydescription:!0,displaytitle:!0,height:360,liveTimeout:null,localization:{player:"Video Player",play:"Play",playback:"Start Playback",pause:"Pause",volume:"Volume",prev:"Previous",next:"Next",cast:"Chromecast",airplay:"AirPlay",fullscreen:"Fullscreen",playlist:"Playlist",hd:"Quality",cc:"Closed Captions",audioTracks:"Audio Tracks",playbackRates:"Playback Rates",replay:"Replay",buffer:"Loading",more:"More",liveBroadcast:"Live",loadingAd:"Loading ad",rewind:"Rewind 10 Seconds",nextUp:"Next Up",nextUpClose:"Next Up Close",related:"More Videos",close:"Close",settings:"Settings",unmute:"Unmute",copied:"Copied"},mute:!1,nextUpDisplay:!0,playbackRateControls:!1,playbackRates:[.5,1,1.25,1.5,2],renderCaptionsNatively:!1,repeat:!1,stretching:"uniform",volume:90,width:640},_=function(e,t){var a=P({},(window.jwplayer||{}).defaults,t,e);r(a),a.localization=P({},S.localization,a.localization);var u=P({},S,a);"."===u.base&&(u.base=Object(E.getScriptPath)("jwplayer.js")),u.base=(u.base||Object(E.loadFrom)()).replace(/\/?$/,"/"),n.p=u.base,u.width=i(u.width),u.height=i(u.height),u.aspectratio=o(u.aspectratio,u.width);var c=u.playbackRateControls;if(c){var s=u.playbackRates;Array.isArray(c)&&(s=c),s=s.filter(function(e){return T.c.isNumber(e)&&e>=.25&&e<=4}).map(function(e){return Math.round(4*e)/4}),s.indexOf(1)<0&&s.push(1),s.sort(),u.playbackRateControls=!0,u.playbackRates=s}(!u.playbackRateControls||u.playbackRates.indexOf(u.defaultPlaybackRate)<0)&&(u.defaultPlaybackRate=1),u.playbackRate=u.defaultPlaybackRate,u.aspectratio||delete u.aspectratio;var l=u.playlist;if(l)Array.isArray(l.playlist)&&(u.feedData=l,u.playlist=l.playlist);else{var f=T.c.pick(u,["title","description","type","mediaid","image","file","sources","tracks","preload","duration"]);u.playlist=[f]}u.qualityLabels=u.qualityLabels||u.hlslabels,delete u.duration;var d=u.liveTimeout;return null!==d&&(Object(T.a)(d)||!Object(T.b)(d)?d=null:0!==d&&(d=Math.max(30,d)),u.liveTimeout=d),u},N=_,L=n(34),M=n(14),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=function(e,t){var r=N(e,t),i=r.key||window.jwplayer&&window.jwplayer.key,o=new L.a(i),u=o.edition();if(r.key=i,r.edition=u,r.error=null,"unlimited"===u){var c=Object(E.getScriptPath)("jwplayer.js");if(!c)throw new Error("Error setting up player: Could not locate jwplayer.js script tag");n.p=c}if("invalid"===u){var l=void 0===i?"Missing":"Invalid";r.error=new Error("Error setting up player: "+l+" license key")}r.flashplayer=a(r),r.plugins=s(r);var f=r.ab;return f&&Object.keys(f.tests).forEach(function(e){f.tests[e].forEach(function(e){e.addConfig&&e.addConfig(r,e.selection)})}),r},F=I,R=n(9),B=n(5),D=n(1),q=n(49),X=n(50),Q=n(24),z=function(e){return h(e)?D.a.reject():D.a.all([d(e),v(e)])},V=z,W=n(29),H=n(19),U=function(e){var t=void 0;this.start=function(n){var r=D.a.all([Object(R.c)(e),g(e),Object(H.a)(e,n)]),i=new D.a(function(e,n){t=setTimeout(function(){n(new Error("Setup Timeout Error: Setup took longer than 30 seconds to complete."))},3e4);var i=function(){clearTimeout(t),e()};r.then(i).catch(i)});return D.a.race([r,i])},this.destroy=function(){clearTimeout(t),e=null}},$=U,J=n(28),K=n(22),Y=n(15),G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z={removeItem:function(){}};try{Z=window.localStorage||Z}catch(e){}G(y.prototype,{getAllItems:function(){var e=this;return this.items.reduce(function(t,n){var r=Z[e.namespace+"."+n];return r&&(t[n]=Object(x.serialize)(r)),t},{})},track:function(e){var t=this;this.items.forEach(function(n){e.on("change:"+n,function(e,r){try{Z[t.namespace+"."+n]=r}catch(e){Y.a.debug&&console.error(e)}})})},clear:function(){var e=this;this.items.forEach(function(t){Z.removeItem(e.namespace+"."+t)})}});var ee=y,te=n(43),ne=n(44),re=n(7),ie=n(41),oe=n(42),ae=n(8),ue=n(51);t.b=k;var ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se=function(){};ce(se.prototype,te.a);var le=function(e){this._events={},this.modelShim=new se,this.modelShim._qoeItem=new K.a,this.mediaShim={},this.setup=new $(this.modelShim),this.currentContainer=this.originalContainer=e,this.apiQueue=new C.a(this,["load","play","pause","seek","stop","playlistItem","playlistNext","playlistPrev","next","setConfig","setCurrentAudioTrack","setCurrentCaptions","setCurrentQuality","setFullscreen","addButton","removeButton","castToggle","setMute","setVolume","setPlaybackRate","setCues","resize","setCaptions","setControls"],function(){return!0})};ce(le.prototype,{on:re.a.on,once:re.a.once,off:re.a.off,trigger:re.a.trigger,init:function(e,t){var n=this,r=this.modelShim,i=new ee("jwplayer",["volume","mute","captionLabel","qualityLabel"]),o=i&&i.getAllItems();r.attributes=r.attributes||{},ce(this.mediaShim,ne.a);var a=e,u=F(ce({},e),o);u.id=t.id,u.setupConfig=a,ce(r.attributes,u,ne.b),r.getProviders=function(){return new J.a(u)},r.setProvider=function(){};var c=b();return ae.Features.backgroundLoading||(c=Object(ue.a)(c.getPrimedElement(),c)),c.prime(),this.setup.start(t).then(function(e){var r=e[0];if(n.setup){var o=n.modelShim.clone();if(o.error instanceof Error)throw o.error;var a=n.apiQueue.queue.slice(0);n.apiQueue.destroy(),ce(n,r.prototype),n.setup(o,t,n.originalContainer,n._events,a,c);var u=n._model;return i.track(u),n.updatePlaylist(u.get("playlist"),u.get("feedData"))}}).then(function(){n.setup&&n.playerReady()}).catch(function(e){n.setup&&O(n,e)})},playerDestroy:function(){this.apiQueue&&this.apiQueue.destroy(),this.setup&&this.setup.destroy(),this.off(),this._events=this._model=this.originalContainer=this.apiQueue=this.setup=null},getContainer:function(){return this.currentContainer},get:function(e){return e in this.mediaShim?this.mediaShim[e]:this.modelShim.get(e)},getItemQoe:function(){return this.modelShim._qoeItem},getConfig:function(){return ce({},this.modelShim.attributes,this.mediaShim)},getCurrentCaptions:function(){return this.get("captionsIndex")},getWidth:function(){return this.get("containerWidth")},getHeight:function(){return this.get("containerHeight")},getMute:function(){return this.get("mute")},getProvider:function(){return this.get("provider")},getState:function(){return this.get("state")},getAudioTracks:function(){return null},getCaptionsList:function(){return null},getQualityLevels:function(){return null},getVisualQuality:function(){return null},getCurrentQuality:function(){return-1},getCurrentAudioTrack:function(){return-1},getSafeRegion:function(){return{x:0,y:0,width:0,height:0}},isBeforeComplete:function(){return!1},isBeforePlay:function(){return!1},createInstream:function(){return null},skipAd:function(){},attachMedia:function(){},detachMedia:function(){return null}});t.a=le},function(e,t,n){"use strict";function r(){return o||(o=n.e(4).then(function(t){var r=n(3).default;return e.controls=r,r}.bind(null,n)).catch(function(){o=null,Object(i.b)()})),o}n.d(t,"b",function(){return e}),t.a=r;var i=n(9),o=null,e={}},function(e,t,n){"use strict";var r=n(5),i=n(13),o=n(37),a=n(6),u=n(7),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e){try{var a,u=e.responseXML?e.responseXML.childNodes:null,s="";if(u){for(var l=0;l<u.length&&(s=u[l],8===s.nodeType);l++);if("xml"===Object(i.b)(s)&&(s=s.nextSibling),"rss"===Object(i.b)(s)){var f=Object(o.a)(s);a=c({playlist:f},f.feedData)}}if(!a)try{var d=JSON.parse(e.responseText);if(Array.isArray(d))a={playlist:d};else{if(!Array.isArray(d.playlist))throw Error;a=d}}catch(e){throw new Error("Not a valid RSS/JSON feed")}n.trigger(r.X,a)}catch(e){t(e.message)}}function t(e){n.trigger(r.r,{message:e||"Error loading file"})}var n=c(this,u.a);this.load=function(n){a.a.ajax(n,e,t)},this.destroy=function(){this.off()}};t.a=s},function(e,t,n){"use strict";function r(e,t){return l[e]?e:l[t]?t:"metadata"}function i(e,t,n){var i=[],o=t.getProviders(),c=t.get("preload"),s=v({},n);return delete s.playlist,e.forEach(function(e){e=v({},e),e.preload=r(e.preload,c),e.allSources=a(e,t),e.sources=u(e.allSources,o),e.sources.length&&(e.file=e.sources[0].file,n&&(e.feedData=s),i.push(e))}),i}function o(e){if(!Array.isArray(e)||0===e.length)throw new Error("No playable sources found")}function a(e,t){var n=e.sources,i=t.get("androidhls"),o=t.get("safarihlsjs"),a=e.drm||t.get("drm"),u=s(e.withCredentials,t.get("withCredentials")),c=!1!==t.get("hlsjsdefault");return n.map(function(t){if(t!==Object(t))return null;void 0!==i&&null!==i&&(t.androidhls=i),void 0!==o&&null!==o&&(t.safarihlsjs=o),void 0!==o&&null!==o&&(t.safarihlsjs=o),(t.drm||a)&&(t.drm=t.drm||a),t.preload=r(t.preload,e.preload);var n=s(t.withCredentials,u);return void 0!==n&&(t.withCredentials=n),c&&(t.hlsjsdefault=c),Object(d.a)(t)}).filter(function(e){return!!e})}function u(e,t){t&&t.choose||(t=new p.a);var n=c(e,t);if(!n)return[];var r=n.provider,i=n.type;return e.filter(function(e){return e.type===i&&t.providerSupports(r,e)})}function c(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t.choose(r),o=i.providerToCheck;if(o)return{type:r.type,provider:o}}return null}function s(e,t){return void 0===e?t:e}var l={none:!0,metadata:!0,auto:!0},f=n(23),d=n(36),p=n(28);t.b=i,t.d=o,n.d(t,"c",function(){return m});var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e){return(Array.isArray(e)?e:[e]).map(f.a)},m=function(e,t){return u(a(e,t),t.getProviders())};t.a=h},function(e,t,n){"use strict";function r(e,t){return i({},t,{prime:function(){e.src||e.load()},getPrimedElement:function(){return e},clean:function(){t.clean(e)},recycle:function(){t.clean(e)}})}t.a=r;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";function r(e){var t=document.createElement("a"),n=document.createElement("a");t.href=location.href;try{return n.href=e,n.href=n.href,t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(e){}return!0}function i(e,t,n,i){d.c.isObject(e)&&(i=e,e=i.url);var s,l=p({xhr:null,url:e,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:t||v,onerror:n||v,mimeType:i&&!i.responseType?"text/xml":"",requireValidXML:!1,responseType:i&&i.plainText?"text":""},i);if("XDomainRequest"in window&&r(e))s=l.xhr=new window.XDomainRequest,s.onload=c(l),s.ontimeout=s.onprogress=v,h=!0;else{if(!("XMLHttpRequest"in window))return void l.onerror("",e);s=l.xhr=new window.XMLHttpRequest,s.onreadystatechange=u(l)}var f=a("Error loading file",l);s.onerror=f,"overrideMimeType"in s?l.mimeType&&s.overrideMimeType(l.mimeType):h=!0;try{e=e.replace(/#.*$/,""),s.open("GET",e,!0)}catch(e){return f(e),s}if(l.responseType)try{s.responseType=l.responseType}catch(e){}l.timeout&&(l.timeoutId=setTimeout(function(){o(s),l.onerror("Timeout",e,s)},l.timeout),s.onabort=function(){clearTimeout(l.timeoutId)});try{l.withCredentials&&"withCredentials"in s&&(s.withCredentials=!0),s.send()}catch(e){f(e)}return s}function o(e){e.onload=null,e.onprogress=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()}function a(e,t){return function(n){var r=n.currentTarget||t.xhr;if(clearTimeout(t.timeoutId),t.retryWithoutCredentials&&t.xhr.withCredentials){o(r);return void i(p({},t,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1}))}t.onerror(e,t.url,r)}}function u(e){return function(t){var n=t.currentTarget||e.xhr;if(4===n.readyState){if(clearTimeout(e.timeoutId),n.status>=400){var r;return r=404===n.status?"File not found":n.status+"("+n.statusText+")",e.onerror(r,e.url,n)}if(200===n.status)return c(e)(t)}}}function c(e){return function(t){var n=t.currentTarget||e.xhr;if(clearTimeout(e.timeoutId),e.responseType){if("json"===e.responseType)return s(n,e)}else{var r,i=n.responseXML;if(i)try{r=i.firstChild}catch(e){}if(i&&r)return l(n,i,e);if(h&&n.responseText&&!i&&(i=Object(f.parseXML)(n.responseText))&&i.firstChild)return l(n,i,e);if(e.requireValidXML)return void e.onerror("Invalid XML",e.url,n)}e.oncomplete(n)}}function s(e,t){if(!e.response||d.c.isString(e.response)&&'"'!==e.responseText.substr(1))try{e=p({},e,{response:JSON.parse(e.responseText)})}catch(n){return void t.onerror("Invalid JSON",t.url,e)}return t.oncomplete(e)}function l(e,t,n){var r=t.documentElement;return n.requireValidXML&&("parsererror"===r.nodeName||r.getElementsByTagName("parsererror").length)?void n.onerror("Invalid XML",n.url,e):(e.responseXML||(e=p({},e,{responseXML:t})),n.oncomplete(e))}t.b=r,t.a=i;var f=n(12),d=n(0),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){},h=!1},function(e,t,n){"use strict";function r(e){return"hls"===e.type&&i.OS.android?!1!==e.androidhls&&(!i.Browser.firefox&&parseFloat(i.OS.version.version)>=4.4):null}t.a=r;var i=n(8)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t){var n=new y.a(t);return n.on(b._0,function(t){e._qoe.tick("ready"),t.setupTime=e._qoe.between("setup","ready")}),n.on("all",function(t,n){e.trigger(t,n)}),n}function i(e,t){var n=e.plugins;Object.keys(n).forEach(function(e){delete n[e]}),e.off(),t.playerDestroy(),t.getContainer().removeAttribute("data-jwplayer-id")}function o(e){for(var t=s.a.length;t--;)if(s.a[t].uniqueId===e.uniqueId){s.a.splice(t,1);break}}function a(e){var t=++T,n=e.id||"player-"+t,a=new w.a,u={},c=r(this,e);a.tick("init"),e.setAttribute("data-jwplayer-id",n),Object.defineProperties(this,{id:{get:function(){return n}},uniqueId:{get:function(){return t}},plugins:{get:function(){return u}},_qoe:{get:function(){return a}},version:{get:function(){return h.a}},Events:{get:function(){return j.a}},utils:{get:function(){return O.a}},_:{get:function(){return k.c}}}),C(this,{_events:{},setup:function(t){return a.clear("ready"),a.tick("setup"),i(this,c),c=r(this,e),c.init(t,this),this.on(t.events,null,this)},remove:function(){return o(this),this.trigger("remove"),i(this,c),this},qoe:function(){var e=c.getItemQoe();return{setupTime:this._qoe.between("setup","ready"),firstFrame:e.getFirstFrame?e.getFirstFrame():null,player:this._qoe.dump(),item:e.dump()}},getAudioTracks:function(){return c.getAudioTracks()},getBuffer:function(){return c.get("buffer")},getCaptions:function(){return c.get("captions")},getCaptionsList:function(){return c.getCaptionsList()},getConfig:function(){return c.getConfig()},getContainer:function(){return c.getContainer()},getControls:function(){return c.get("controls")},getCurrentAudioTrack:function(){return c.getCurrentAudioTrack()},getCurrentCaptions:function(){return c.getCurrentCaptions()},getCurrentQuality:function(){return c.getCurrentQuality()},getCurrentTime:function(){return c.get("currentTime")},getDuration:function(){return c.get("duration")},getEnvironment:function(){return g},getFullscreen:function(){return c.get("fullscreen")},getHeight:function(){return c.getHeight()},getItemMeta:function(){return c.get("itemMeta")||{}},getMute:function(){return c.getMute()},getPlaybackRate:function(){return c.get("playbackRate")},getPlaylist:function(){return c.get("playlist")},getPlaylistIndex:function(){return c.get("item")},getPlaylistItem:function(e){if(!O.a.exists(e))return c.get("playlistItem");var t=this.getPlaylist();return t?t[e]:null},getPosition:function(){return c.get("position")},getProvider:function(){return c.getProvider()},getQualityLevels:function(){return c.getQualityLevels()},getSafeRegion:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return c.getSafeRegion(e)},getState:function(){return c.getState()},getStretching:function(){return c.get("stretching")},getViewable:function(){return c.get("viewable")},getVisualQuality:function(){return c.getVisualQuality()},getVolume:function(){return c.get("volume")},getWidth:function(){return c.getWidth()},setCaptions:function(e){return c.setCaptions(e),this},setConfig:function(e){return c.setConfig(e),this},setControls:function(e){return c.setControls(e),this},setCurrentAudioTrack:function(e){c.setCurrentAudioTrack(e)},setCurrentCaptions:function(e){c.setCurrentCaptions(e)},setCurrentQuality:function(e){c.setCurrentQuality(e)},setFullscreen:function(e){return c.setFullscreen(e),this},setMute:function(e){return c.setMute(e),this},setPlaybackRate:function(e){return c.setPlaybackRate(e),this},setCues:function(e){return c.setCues(e),this},setVolume:function(e){return c.setVolume(e),this},load:function(e,t){return c.load(e,t),this},play:function(e){return c.play(e),this},pause:function(e){return c.pause(e),this},playToggle:function(e){switch(this.getState()){case b._9:case b._3:return this.pause(e);default:return this.play(e)}},seek:function(e,t){return c.seek(e,t),this},playlistItem:function(e,t){return c.playlistItem(e,t),this},playlistNext:function(e){return c.playlistNext(e),this},playlistPrev:function(e){return c.playlistPrev(e),this},next:function(){return c.next(),this},castToggle:function(){return c.castToggle(),this},createInstream:function(){return c.createInstream()},skipAd:function(){return c.skipAd(),this},stop:function(){return c.stop(),this},resize:function(e,t){return c.resize(e,t),this},addButton:function(e,t,n,r,i){return c.addButton(e,t,n,r,i),this},removeButton:function(e){return c.removeButton(e),this},attachMedia:function(){return c.attachMedia(),this},detachMedia:function(){return c.detachMedia(),this},isBeforeComplete:function(){return c.isBeforeComplete()},isBeforePlay:function(){return c.isBeforePlay()}})}function u(e){for(var t=0;t<s.a.length;t++)if(s.a[t].id===e)return s.a[t];return null}Object.defineProperty(t,"__esModule",{value:!0});var c=n(16),s=n(27),l=n(17),f=n(18),d={availableProviders:l.a,registerProvider:f.a},p=n(19);d.registerPlugin=function(e,t,n){"jwpsrv"!==e&&Object(p.b)(e,t,n)};var v=d,h=n(20),m=n(15),g=n(8),y=n(47),b=n(5),w=n(22),j=n(7),O=n(6),k=n(0),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T=0;C(a.prototype,{on:function(e,t,n){return j.c.call(this,e,t,n)},once:function(e,t,n){return j.d.call(this,e,t,n)},off:function(e,t,n){return j.b.call(this,e,t,n)},trigger:function(e,t){return t=k.c.isObject(t)?C({},t):{},t.type=e,m.a.debug?j.e.call(this,e,t):j.f.call(this,e,t)},getPlugin:function(e){return this.plugins[e]},addPlugin:function(e,t){this.plugins[e]=t,this.on("ready",t.addToPlayer),t.resize&&this.on("resize",t.resizeHandler)},registerPlugin:function(e,t,n){Object(p.b)(e,t,n)},getAdBlock:function(){return!1},playAd:function(e){},pauseAd:function(e){}}),n.p=Object(c.loadFrom)();var E=function(e){var t=void 0,n=void 0;if(e?"string"==typeof e?(t=u(e))||(n=document.getElementById(e)):"number"==typeof e?t=s.a[e]:e.nodeType&&(n=e,t=u(n.id||n.getAttribute("data-jwplayer-id"))):t=s.a[0],t)return t;if(n){var r=new a(n);return s.a.push(r),r}return{registerPlugin:p.b}};Object.defineProperties(E,{api:{get:function(){return v},set:function(){}},version:{get:function(){return h.a},set:function(){}},debug:{get:function(){return m.a.debug},set:function(e){m.a.debug=!!e}}});var x=E,P=n(38),S=n(34),_=n(24),N=n(35),L=n(37),M=n(32),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=k.c.extend,F={};F.api=v,F._=k.c,F.version="8.2.0+commercial_v8-2-0.251.commercial.cdc12c5.hlsjs..jwplayer.f5e22c2.dai.ccc6c77.freewheel.29771b0.googima.f42cc17.vast.1ba6186.analytics.abc087d.gapro.f664e4e.related.a6a8ec0",F.utils=A(O.a,{key:S.a,extend:I,scriptloader:_.a,rssparser:{parse:L.a},tea:N.a,UI:P.a}),F.utils.css.style=F.utils.style,F.vid=M.a;var R=F,B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=window;B(x,R),"function"==typeof D.define&&D.define.amd&&D.define([],function(){return x});var q=x;D.jwplayer&&(q=D.jwplayer);t.default=q},function(e,t,n){"use strict";(function(e){function n(){}function r(e,t){return function(){e.apply(t,arguments)}}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:u)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}a(t.promise,r)})}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void l(r(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}var f=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new s(e,t,r)),r},i.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},i.all=function(e){return new i(function(t,n){function r(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(t){r(e,t)},n)}i[e]=a,0==--o&&t(i)}catch(e){n(e)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){f(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=i}).call(t,n(57).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(58),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return s[c]=r,u(c),c++}function i(e){delete s[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=s[e];if(t){l=!0;try{o(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var u,c=1,s={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){u=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),u=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},u=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;u=function(t){var n=f.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){u=function(e){setTimeout(a,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(54),n(59))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){h&&p&&(h=!1,p.length?v=p.concat(v):m=-1,v.length&&u())}function u(){if(!h){var e=i(a);h=!0;for(var t=v.length;t;){for(p=v,v=[];++m<t;)p&&p[m].run();m=-1,t=v.length}p=null,h=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function s(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,v=[],h=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new c(e,t)),1!==v.length||h||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}}]).default;
/*!
   JW Player version 8.2.0
   Copyright (c) 2018, JW Player, All Rights Reserved 
   This source code and its use and distribution is subject to the terms 
   and conditions of the applicable license agreement. 
   https://www.jwplayer.com/tos/
   This product includes portions of other software. For the full text of licenses, see
   https://ssl.p.jwpcdn.com/player/v/8.2.0/notice.txt
*/

webpackJsonpjwplayer([8],{111:function(e,t,i){"use strict";var n=i(5),r=i(6),a={canplay:function(){this.trigger(n.y)},play:function(){this.stallTime=-1,this.video.paused||this.state===n._9||this.setState(n._7)},loadedmetadata:function(){var e={duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth},t=this.drmUsed;t&&(e.drm=t),this.trigger(n.E,e)},timeupdate:function(){var e=this.video.videoHeight;e!==this._helperLastVideoHeight&&this.adaptation&&this.adaptation({size:{width:this.video.videoWidth,height:e}}),this._helperLastVideoHeight=e;var t=this.getCurrentTime(),i=this.getDuration();if(!isNaN(i)){this.seeking||this.video.paused||this.state!==n._10&&this.state!==n._7||this.stallTime===this.getCurrentTime()||(this.stallTime=-1,this.setState(n._9));var r={position:t,duration:i,currentTime:this.video.currentTime,metadata:{currentTime:this.video.currentTime}};if(this.getPtsOffset){var a=this.getPtsOffset();a>=0&&(r.metadata.mpegts=a+t)}(this.state===n._9||this.seeking)&&this.trigger(n.L,r)}},click:function(e){this.trigger(n.i,e)},volumechange:function(){var e=this.video;this.trigger(n.O,{volume:Math.round(100*e.volume)}),this.trigger(n.F,{mute:e.muted})},seeked:function(){this.seeking&&(this.seeking=!1,this.trigger(n.K))},playing:function(){-1===this.stallTime&&this.setState(n._9),this.trigger(n.Z)},pause:function(){this.state!==n._4&&(this.video.ended||this.video.error||this.video.currentTime!==this.video.duration&&this.setState(n._8))},progress:function(){var e=this.getDuration();if(!(e<=0||e===1/0)){var t=this.video.buffered;if(t&&0!==t.length){var i=r.a.between(t.end(t.length-1)/e,0,1);this.trigger(n.x,{bufferPercent:100*i,position:this.getCurrentTime(),duration:e})}}},ratechange:function(){this.trigger(n.I,{playbackRate:this.video.playbackRate})},ended:function(){this._helperLastVideoHeight=0,this.state!==n._6&&this.state!==n._4&&this.trigger(n.z)},loadeddata:function(){this.renderNatively&&this.setTextTracks(this.video.textTracks)},error:function(){var e=this.video.error&&this.video.error.code||-1,t={1:"Unknown operation aborted",2:"Unknown network error",3:"Unknown decode error",4:"File could not be played"}[e]||"Unknown";this.trigger(n.A,{code:e,message:"Error loading media: "+t})}};t.a=a},112:function(e,t,i){"use strict";var n=i(26),r=i(73),a={container:null,volume:function(e){e=Math.max(Math.min(e/100,1),0),this.video.volume=e},mute:function(e){this.video.muted=!!e,this.video.muted||this.video.removeAttribute("muted")},resize:function(e,t,i){if(!(e&&t&&this.video.videoWidth&&this.video.videoHeight))return!1;if("uniform"===i){var r=e/t,a=this.video.videoWidth/this.video.videoHeight,s=null;Math.abs(r-a)<.09&&(s="fill"),Object(n.d)(this.video,{objectFit:s,width:null,height:null})}return!1},getContainer:function(){return this.container},setContainer:function(e){this.container=e,this.video.parentNode!==e&&e.appendChild(this.video)},remove:function(){this.stop(),this.destroy();var e=this.container;e&&e===this.video.parentNode&&e.removeChild(this.video)},atEdgeOfLiveStream:function(){if(!this.isLive())return!1;return Object(r.a)(this.video.buffered)-this.video.currentTime<=2}};t.a=a},113:function(e,t,i){"use strict";var n={attachMedia:function(){this.eventsOn_()},detachMedia:function(){return this.eventsOff_(),this.video}};t.a=n},116:function(e,t,i){"use strict";function n(e,t){Object.keys(e).forEach(function(i){t.removeEventListener(i,e[i]),t.addEventListener(i,e[i])})}function r(e,t){Object.keys(e).forEach(function(i){t.removeEventListener(i,e[i])})}function a(e,t,i){function a(){var e=Z.level;if(e.width!==J.videoWidth||e.height!==J.videoHeight){if(e.width=J.videoWidth,e.height=J.videoHeight,W(),!e.width||!e.height||-1===ne)return;Z.reason=Z.reason||"auto",Z.mode="hls"===ie[ne].type?"auto":"manual",Z.bitrate=0,e.index=ne,e.label=ie[ne].label,z.trigger(f.N,Z),Z.reason=""}}function s(e){te=o(e)}function o(e){return z.getDuration()<0&&(e-=R()),e}function c(e){Y&&-1!==Y&&e&&e!==1/0&&z.seek(Y)}function u(e){var t;return"array"===p.a.typeOf(e)&&e.length>0&&(t=x.c.map(e,function(e,t){return{label:e.label||t}})),t}function d(e){ie=e,ne=l(e)}function l(e){var i=Math.max(0,ne),n=t.qualityLabel;if(e)for(var r=0;r<e.length;r++)if(e[r].default&&(i=r),n&&e[r].label===n)return r;return Z.reason="initial choice",Z.level.width&&Z.level.height||(Z.level={}),i}function h(){return J.play()||Object(j.a)(J)}function w(e){Y=0,X();var t=J.src,i=document.createElement("source");i.src=ie[ne].file,i.src!==t?(M(ie[ne]),t&&J.load()):0===e&&J.currentTime>0&&(Y=-1,z.seek(e)),e>0&&z.seek(e);var n=u(ie);n&&z.trigger(f.C,{levels:n,currentQuality:ne}),ie.length&&"hls"!==ie[0].type&&z.sendMediaType(ie)}function M(e){se=null,oe=-1,Z.reason||(Z.reason="initial choice",Z.level={}),G=!1;var t=document.createElement("source");t.src=e.file,J.src!==t.src&&(J.src=e.file)}function N(){J&&(z.disableTextTrack(),J.removeAttribute("preload"),J.removeAttribute("src"),Object(_.g)(J),Object(y.d)(J,{objectFit:""}),ne=-1,!g.Browser.msie&&"load"in J&&J.load())}function A(){for(var e=J.seekable?J.seekable.length:0,t=1/0;e--;)t=Math.min(t,J.seekable.start(e));return t}function R(){for(var e=J.seekable?J.seekable.length:0,t=0;e--;)t=Math.max(t,J.seekable.end(e));return t}function P(){for(var e=-1,t=0;t<J.audioTracks.length;t++)if(J.audioTracks[t].enabled){e=t;break}F(e)}function H(e){z.trigger("fullscreenchange",{target:e.target,jwstate:re})}function U(e){if(se=null,e){if(e.length){for(var t=0;t<e.length;t++)if(e[t].enabled){oe=t;break}-1===oe&&(oe=0,e[oe].enabled=!0),se=x.c.map(e,function(e){return{name:e.label||e.language,language:e.language}})}z.addTracksListener(e,"change",P),se&&z.trigger("audioTracks",{currentTrack:oe,tracks:se})}}function F(e){J&&J.audioTracks&&se&&e>-1&&e<J.audioTracks.length&&e!==oe&&(J.audioTracks[oe].enabled=!1,oe=e,J.audioTracks[oe].enabled=!0,z.trigger("audioTrackChanged",{currentTrack:oe,tracks:se}))}function D(){return se||[]}function V(){return oe}function W(){if("hls"===ie[0].type){var e="video";if(0===J.videoHeight){if((g.OS.iOS||g.Browser.safari)&&J.readyState<2)return;e="audio"}z.trigger(f.M,{mediaType:e})}}function q(){if(0!==$){var e=Object(B.a)(J.buffered);z.isLive()&&e&&de===e?-1===ce&&(ce=setTimeout(function(){ue=!0,K()},$)):(X(),ue=!1),de=e}}function K(){return!(!ue||!z.atEdgeOfLiveStream())&&(z.trigger(f.A,{message:"The live stream is either down or has ended"}),!0)}function X(){L(ce),ce=-1}this.state=f._6,this.seeking=!1;var z=this,Q={progress:function(){k.a.progress.call(z),q()},timeupdate:function(){te!==J.currentTime&&(s(J.currentTime),k.a.timeupdate.call(z)),q(),g.Browser.ie&&a()},resize:a,ended:function(){ne=-1,X(),k.a.ended.call(z)},loadedmetadata:function(){var e=z.getDuration();le&&e===1/0&&(e=0);var t={duration:e,height:J.videoHeight,width:J.videoWidth};z.trigger(f.E,t),a()},durationchange:function(){le||k.a.progress.call(z)},loadeddata:function(){k.a.loadeddata.call(z),U(J.audioTracks),c(z.getDuration())},canplay:function(){G=!0,le||W(),g.Browser.ie&&9===g.Browser.version.major&&z.setTextTracks(z._textTracks),k.a.canplay.call(z)},seeking:function(){var e=null!==ee?ee:z.getCurrentTime(),t=te;s(e),ee=null,Y=0,z.seeking=!0,z.trigger(f.J,{position:t,offset:e})},seeked:function(){k.a.seeked.call(z)},waiting:function(){z.seeking?z.setState(f._7):z.state===f._9&&(z.atEdgeOfLiveStream()&&z.setPlaybackRate(1),z.stallTime=z.getCurrentTime(),z.setState(f._10))},webkitbeginfullscreen:function(e){re=!0,H(e)},webkitendfullscreen:function(e){re=!1,H(e)}};Object.keys(k.a).forEach(function(e){if(!Q[e]){var t=k.a[e];Q[e]=function(e){t.call(z,e)}}}),E(this,C.a,b.a,m.a,O.a,{renderNatively:function(e){return!(!g.OS.iOS&&!g.Browser.safari)||e&&g.Browser.chrome}(t.renderCaptionsNatively),eventsOn_:function(){n(Q,J)},eventsOff_:function(){r(Q,J)},detachMedia:function(){return m.a.detachMedia.call(z),X(),this.removeTracksListener(J.textTracks,"change",this.textTrackChangeHandler),this.disableTextTrack(),J},attachMedia:function(){m.a.attachMedia.call(z),G=!1,this.seeking=!1,J.loop=!1,this.enableTextTrack(),this.renderNatively&&this.setTextTracks(this.video.textTracks),this.addTracksListener(J.textTracks,"change",this.textTrackChangeHandler)},isLive:function(){return J.duration===1/0}});var J=i,Z={level:{}},$=null!==t.liveTimeout?t.liveTimeout:3e4,G=!1,Y=0,ee=null,te=null,ie=void 0,ne=-1,re=!1,ae=p.a.noop,se=null,oe=-1,ce=-1,ue=!1,de=null,le=!1;this.isSDK=!!t.sdkplatform,this.video=J,this.supportsPlaybackRate=!0,z.getCurrentTime=function(){return o(J.currentTime)},z.getDuration=function(){var e=J.duration;if(le&&e===1/0&&0===J.currentTime||isNaN(e))return 0;var t=R();if(z.isLive()&&t){var i=t-A();i!==1/0&&i>S&&(e=-i)}return e},this.stop=function(){X(),N(),this.clearTracks(),g.Browser.ie&&J.pause(),this.setState(f._6)},this.destroy=function(){ae=p.a.noop,r(Q,J),this.removeTracksListener(J.audioTracks,"change",P),this.removeTracksListener(J.textTracks,"change",z.textTrackChangeHandler),this.off()},this.init=function(e){d(e.sources);var t=ie[ne];le=Object(T.a)(t),le&&(z.supportsPlaybackRate=!1,Q.waiting=p.a.noop),z.eventsOn_(),ie.length&&"hls"!==ie[0].type&&this.sendMediaType(ie),Z.reason=""},this.preload=function(e){d(e.sources);var t=ie[ne],i=t.preload||"metadata";"none"!==i&&(J.setAttribute("preload",i),M(t))},this.load=function(e){d(e.sources),w(e.starttime,e.duration),this.setupSideloadedTracks(e.tracks)},this.play=function(){return ae(),h()},this.pause=function(){X(),ae=function(){if(J.paused&&J.currentTime&&z.isLive()){var e=R(),t=e-A(),i=t<S,n=e-J.currentTime;i&&e&&(n>15||n<0)&&(ee=Math.max(e-10,e-t),s(J.currentTime),J.currentTime=ee)}},J.pause()},this.seek=function(e){if(e<0&&(e+=A()+R()),G||(G=!!R()),G){Y=0;try{z.seeking=!0,ee=e,s(J.currentTime),J.currentTime=e}catch(t){z.seeking=!1,Y=e}}else Y=e,g.Browser.firefox&&J.paused&&h()},this.setVisibility=function(e){e=!!e,e||g.OS.android?Object(y.d)(z.container,{visibility:"visible",opacity:1}):Object(y.d)(z.container,{visibility:"",opacity:0})},this.resize=function(e,t,i){if(e&&t&&J.videoWidth&&J.videoHeight){var n={objectFit:"",width:"",height:""};if("uniform"===i){var r=e/t,a=J.videoWidth/J.videoHeight;Math.abs(r-a)<.09&&(n.objectFit="fill",i="exactfit")}if(g.Browser.ie||g.OS.iOS&&g.OS.version.major<9||g.Browser.androidNative){var s=-Math.floor(J.videoWidth/2+1),o=-Math.floor(J.videoHeight/2+1),c=Math.ceil(100*e/J.videoWidth)/100,u=Math.ceil(100*t/J.videoHeight)/100;"none"===i?c=u=1:"fill"===i?c=u=Math.max(c,u):"uniform"===i&&(c=u=Math.min(c,u)),n.width=J.videoWidth,n.height=J.videoHeight,n.top=n.left="50%",n.margin=0,Object(y.e)(J,"translate("+s+"px, "+o+"px) scale("+c.toFixed(2)+", "+u.toFixed(2)+")")}Object(y.d)(J,n)}},this.setFullscreen=function(e){if(e=!!e){return!(p.a.tryCatch(function(){var e=J.webkitEnterFullscreen||J.webkitEnterFullScreen;e&&e.apply(J)})instanceof p.a.Error)&&z.getFullScreen()}var t=J.webkitExitFullscreen||J.webkitExitFullScreen;return t&&t.apply(J),e},z.getFullScreen=function(){return re||!!J.webkitDisplayingFullscreen},this.setCurrentQuality=function(e){if(ne!==e&&e>=0&&ie&&ie.length>e){ne=e,Z.reason="api",Z.level={},this.trigger(f.D,{currentQuality:e,levels:u(ie)}),t.qualityLabel=ie[e].label;var i=J.currentTime||0;z.getDuration();w(i),h()}},this.setPlaybackRate=function(e){J.playbackRate=J.defaultPlaybackRate=e},this.getPlaybackRate=function(){return J.playbackRate},this.getCurrentQuality=function(){return ne},this.getQualityLevels=function(){return x.c.map(ie,function(e){return Object(v.a)(e)})},this.getName=function(){return{name:I}},this.setCurrentAudioTrack=F,this.getAudioTracks=D,this.getCurrentAudioTrack=V}function s(e,t,i){var n=0,r=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),a=new DataView(r);new Uint8Array(r,n,e.byteLength).set(e),n+=e.byteLength,a.setUint32(n,t.byteLength,!0),n+=4;var s=new Uint16Array(r,n,t.length);return s.set(t),n+=s.byteLength,a.setUint32(n,i.byteLength,!0),n+=4,new Uint8Array(r,n,i.byteLength).set(i),new Uint8Array(r,0,r.byteLength)}function o(e,t,i){c(e,t,i),e.addEventListener(t,i,!1)}function c(e,t,i){e&&e.removeEventListener(t,i,!1)}function u(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),n=0,r=e.length;n<r;n++)i[n]=e.charCodeAt(n);return i}function d(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function l(e){for(var t=Object(h.a)(e),i=t.length,n=new Uint8Array(new ArrayBuffer(i)),r=0;r<i;r++)n[r]=t.charCodeAt(r);return n}Object.defineProperty(t,"__esModule",{value:!0});var h=i(31),f=i(5),v=i(74),g=i(8),T=i(53),k=i(111),b=i(112),m=i(113),y=i(26),p=i(6),_=i(25),x=i(0),w=i(45),C=i(7),O=i(71),B=i(73),j=i(66),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},L=window.clearTimeout,S=120,I="html5";E(a.prototype,w.a),a.getName=function(){return{name:"html5"}};var M=a,N=i(52),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},R=function(e,t,i){function n(e){var t=e.sources[0];if(!x.fairplay||!Object.is(x.fairplay.source,t)){var i=t.drm;i&&i.fairplay?(x.fairplay=A({},{certificateUrl:"",processSpcUrl:"",licenseResponseType:"arraybuffer",licenseRequestHeaders:[],licenseRequestMessage:function(e){return e},licenseRequestFilter:function(){},licenseResponseFilter:function(){},extractContentId:function(e){return e.split("skd://")[1]},extractKey:function(e){return new Uint8Array(e)}},i.fairplay),x.fairplay.source=t,x.fairplay.destroy=function(){c(x.video,"webkitneedkey",r);var e=this.session;e&&(c(e,"webkitkeymessage",a),c(e,"webkitkeyerror",b)),x.fairplay=null},o(x.video,"webkitneedkey",r)):x.fairplay&&x.fairplay.destroy()}}function r(e){var t=e.target,i=e.initData;if(t.webkitKeys||t.webkitSetMediaKeys(new window.WebKitMediaKeys("com.apple.fps.1_0")),!t.webkitKeys)throw new Error("Could not create MediaKeys");var n=x.fairplay;n.initData=i,Object(N.a)(n.certificateUrl,function(e){var r=new Uint8Array(e.response),c=n.extractContentId(d(i));"string"==typeof c&&(c=u(c));var l=s(i,c,r),h=t.webkitKeys.createSession("video/mp4",l);if(!h)throw new Error("Could not create key session");o(h,"webkitkeymessage",a),o(h,"webkitkeyerror",b),n.session=h},k,{responseType:"arraybuffer"})}function a(e){var t=x.fairplay,i=e.target,n=e.message,r=new XMLHttpRequest;r.responseType=t.licenseResponseType,r.addEventListener("load",v,!1),r.addEventListener("error",m,!1);var a="";a="function"==typeof t.processSpcUrl?t.processSpcUrl(d(t.initData)):t.processSpcUrl,r.open("POST",a,!0),r.body=t.licenseRequestMessage(n,i),r.headers={},[].concat(t.licenseRequestHeaders||[]).forEach(function(e){r.setRequestHeader(e.name,e.value)});var s=t.licenseRequestFilter,o=s.call(e.target,r,t);o&&"function"==typeof o.then?o.then(function(){h(r)}):h(r)}function h(e){Object.keys(e.headers).forEach(function(t){e.setRequestHeader(t,e.headers[t])}),e.send(e.body)}function v(e){var t=x.fairplay,i=e.target,n={};(i.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).forEach(function(e){var t=e.split(": "),i=t.shift();n[i]=t.join(": ")});var r={data:i.response,headers:n},a=t.licenseResponseFilter,s=a.call(e.target,r,t);s&&"function"==typeof s.then?s.then(function(){g(r.data)}):g(r.data)}function g(e){var t=x.fairplay.extractKey(e);"function"==typeof t.then?t.then(T):T(t)}function T(e){var t=x.fairplay.session,i=e;"string"==typeof i&&(i=l(i)),t.update(i)}function k(){x.trigger(f.A,{message:"Error loading media: Failed to retrieve the server certificate"})}function b(){x.trigger(f.A,{message:"Error loading media: Decryption key error was encountered"})}function m(){x.trigger(f.A,{message:"Error loading media: The license request failed"})}M.call(this,e,t,i);var y=this.init,p=this.load,_=this.destroy,x=this;this.init=function(e){n(e),y.call(this,e)},this.load=function(e){n(e),p.call(this,e)},this.destroy=function(e){this.fairplay&&this.fairplay.destroy(),_.call(this,e)}};A(R.prototype,M.prototype),R.getName=M.getName;t.default=R},60:function(e,t,i){"use strict";function n(e){var t=[];e=Object(a.h)(e);var i=e.split("\r\n\r\n");1===i.length&&(i=e.split("\n\n"));for(var n=0;n<i.length;n++)if("WEBVTT"!==i[n]){var s=r(i[n]);s.text&&t.push(s)}return t}function r(e){var t={},i=e.split("\r\n");1===i.length&&(i=e.split("\n"));var n=1;if(i[0].indexOf(" --\x3e ")>0&&(n=0),i.length>n+1&&i[n+1]){var r=i[n],s=r.indexOf(" --\x3e ");s>0&&(t.begin=Object(a.f)(r.substr(0,s)),t.end=Object(a.f)(r.substr(s+5)),t.text=i.slice(n+1).join("\r\n"))}return t}t.a=n;var a=i(2)},61:function(e,t,i){"use strict";function n(e){return"string"==typeof e&&(!!{"":!0,lr:!0,rl:!0}[e.toLowerCase()]&&e.toLowerCase())}function r(e){return"string"==typeof e&&(!!{start:!0,middle:!0,end:!0,left:!0,right:!0}[e.toLowerCase()]&&e.toLowerCase())}var a=window.VTTCue;if(!a){a=function(e,t,i){var a=this;a.hasBeenReset=!1;var s="",o=!1,c=e,u=t,d=i,l=null,h="",f=!0,v="auto",g="start",T="auto",k=100,b="middle";Object.defineProperty(a,"id",{enumerable:!0,get:function(){return s},set:function(e){s=""+e}}),Object.defineProperty(a,"pauseOnExit",{enumerable:!0,get:function(){return o},set:function(e){o=!!e}}),Object.defineProperty(a,"startTime",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"endTime",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"text",{enumerable:!0,get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}}),Object.defineProperty(a,"region",{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"vertical",{enumerable:!0,get:function(){return h},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}}),Object.defineProperty(a,"snapToLines",{enumerable:!0,get:function(){return f},set:function(e){f=!!e,this.hasBeenReset=!0}}),Object.defineProperty(a,"line",{enumerable:!0,get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"lineAlign",{enumerable:!0,get:function(){return g},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}),Object.defineProperty(a,"position",{enumerable:!0,get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");T=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"size",{enumerable:!0,get:function(){return k},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");k=e,this.hasBeenReset=!0}}),Object.defineProperty(a,"align",{enumerable:!0,get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}}),a.displayState=void 0},a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)}}t.a=a},63:function(e,t,i){"use strict";function n(e){r(e);var t=[],i=e.getElementsByTagName("p"),n=30,s=e.getElementsByTagName("tt");if(s&&s[0]){var o=parseFloat(s[0].getAttribute("ttp:frameRate"));isNaN(o)||(n=o)}r(i),i.length||(i=e.getElementsByTagName("tt:p"),i.length||(i=e.getElementsByTagName("tts:p")));for(var c=0;c<i.length;c++){for(var u=i[c],d=u.getElementsByTagName("br"),l=0;l<d.length;l++){var h=d[l];h.parentNode.replaceChild(e.createTextNode("\r\n"),h)}var f=u.innerHTML||u.textContent||u.text||"",v=Object(T.h)(f).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(v){var g=u.getAttribute("begin"),k=u.getAttribute("dur"),b=u.getAttribute("end"),m={begin:Object(T.f)(g,n),text:v};b?m.end=Object(T.f)(b,n):k&&(m.end=m.begin+Object(T.f)(k,n)),t.push(m)}}return t.length||a(),t}function r(e){e||a()}function a(){throw new Error("Invalid DFXP file")}function s(e,t,i){e.xhr=f.a.ajax(e.file,function(n){u(n,e,t,i)},i)}function o(e){e&&e.forEach(function(e){var t=e.xhr;t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()),delete e.xhr})}function c(e){return e.map(function(e){return new l.a(e.begin,e.end,e.text)})}function u(e,t,i,r){var a,s,o=e.responseXML?e.responseXML.firstChild:null;if(o)for("xml"===Object(v.b)(o)&&(o=o.nextSibling);o.nodeType===o.COMMENT_NODE;)o=o.nextSibling;try{if(o&&"tt"===Object(v.b)(o))a=n(e.responseXML),s=c(a),delete t.xhr,i(s);else{var u=e.responseText;u.indexOf("WEBVTT")>=0?d().then(function(e){var n=new e(window);s=[],n.oncue=function(e){s.push(e)},n.onflush=function(){delete t.xhr,i(s)},n.parse(u)}).catch(function(e){delete t.xhr,r(e)}):(a=Object(g.a)(u),s=c(a),delete t.xhr,i(s))}}catch(e){delete t.xhr,r(e)}}function d(){return i.e(13).then(function(e){return i(120).default}.bind(null,i)).catch(h.b)}var l=i(61),h=i(9),f=i(6),v=i(13),g=i(60),T=i(2);t.c=s,t.a=o,t.b=c},64:function(e,t,i){"use strict";function n(e,t){var i=e.kind||"cc";return e.default||e.defaulttrack?"default":e._id||e.file||i+t}function r(e,t){var i=e.label||e.name||e.language;return i||(i="Unknown CC",(t+=1)>1&&(i+=" ["+t+"]")),{label:i,unknownCount:t}}t.a=n,t.b=r},66:function(e,t,i){"use strict";function n(e){return new r.a(function(t,i){if(e.paused)return i(new Error("Play refused."));var n=function(){e.removeEventListener("playing",r),e.removeEventListener("pause",r),e.removeEventListener("abort",r),e.removeEventListener("error",r)},r=function(e){n(),"playing"===e.type?t():i(new Error('The play() request was interrupted by a "'+e.type+'" event.'))};e.addEventListener("playing",r),e.addEventListener("abort",r),e.addEventListener("error",r),e.addEventListener("pause",r)})}t.a=n;var r=i(1)},69:function(e,t,i){"use strict";function n(e,t){for(var i=e.length,n=void 0,r=void 0,a=void 0,s="",o=t||0;o<i;)if(0!==(n=e[o++])&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(n);break;case 12:case 13:r=e[o++],s+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[o++],a=e[o++],s+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&a)<<0)}return s}function r(e,t){for(var i=e.length-1,n="",r=t||0;r<i;)254===e[r]&&255===e[r+1]||(n+=String.fromCharCode((e[r]<<8)+e[r+1])),r+=2;return n}function a(e){var t=s(e);return 127&t|(32512&t)>>1|(8323072&t)>>2|(2130706432&t)>>3}function s(e){for(var t="0x",i=0;i<e.length;i++)e[i]<16&&(t+="0"),t+=e[i].toString(16);return parseInt(t)}function o(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){if(!("value"in t)&&"data"in t&&t.data instanceof ArrayBuffer){var i=t,s=new Uint8Array(i.data),o=s.length;t={value:{key:"",data:""}};for(var u=10;u<14&&u<s.length&&0!==s[u];)t.value.key+=String.fromCharCode(s[u]),u++;var d=19,l=s[d];3!==l&&0!==l||(l=s[++d],o--);var h=0;if(1!==l&&2!==l)for(var f=d+1;f<o;f++)if(0===s[f]){h=f-d;break}if(h>0){var v=n(s.subarray(d,d+=h),0);if("PRIV"===t.value.key){if("com.apple.streaming.transportStreamTimestamp"===v){var g=1&a(s.subarray(d,d+=4)),T=a(s.subarray(d,d+=4))+(g?4294967296:0);t.value.data=T}else t.value.data=n(s,d+1);t.value.info=v}else t.value.info=v,t.value.data=n(s,d+1)}else{var k=s[d];t.value.data=1===k||2===k?r(s,d+1):n(s,d+1)}}if(c.hasOwnProperty(t.value.key)&&(e[c[t.value.key]]=t.value.data),t.value.info){var b=e[t.value.key];b!==Object(b)&&(b={},e[t.value.key]=b),b[t.value.info]=t.value.data}else e[t.value.key]=t.value.data;return e},{})}t.c=n,t.b=a,t.a=o;var c={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"}},71:function(e,t,i){"use strict";function n(e){if(this._currentTextTrackIndex=-1,e){if(this._textTracks?(this._unknownCount=0,this._textTracks=A.c.reject(this._textTracks,function(e){var t=e._id;if(this.renderNatively&&t&&0===t.indexOf("nativecaptions"))return delete this._tracksById[t],!0;e.name&&0===e.name.indexOf("Unknown")&&this._unknownCount++},this),delete this._tracksById.nativemetadata):this._initTextTracks(),e.length){var t=0,i=e.length;for(t;t<i;t++){var n=e[t];if(!n._id){if("captions"===n.kind||"metadata"===n.kind){if(n._id="native"+n.kind+t,!n.label&&"captions"===n.kind){var r=Object(S.b)(n,this._unknownCount);n.name=r.label,this._unknownCount=r.unknownCount}}else n._id=Object(S.a)(n,this._textTracks.length);if(this._tracksById[n._id])continue;n.inuse=!0}if(n.inuse&&!this._tracksById[n._id])if("metadata"===n.kind)n.mode="hidden",n.oncuechange=B.bind(this),this._tracksById[n._id]=n;else if(_(n.kind)){var a,s=n.mode;if(n.mode="hidden",!n.cues.length&&n.embedded)continue;if(n.mode=s,this._cuesByTrackId[n._id]&&!this._cuesByTrackId[n._id].loaded){for(var o=this._cuesByTrackId[n._id].cues;a=o.shift();)y(this.renderNatively,n,a);n.mode=s,this._cuesByTrackId[n._id].loaded=!0}C.call(this,n)}}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||T.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(M.Browser.edge||M.Browser.firefox||M.Browser.safari)&&(this.addTrackHandler=this.addTrackHandler||k.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function r(e){if(this.renderNatively){var t=e===this._itemTracks;t||Object(L.a)(this._itemTracks),this._itemTracks=e,e&&(t||(this.disableTextTrack(),O.call(this),this.addTextTracks(e)))}}function a(){return this._currentTextTrackIndex}function s(e){if(!this.renderNatively)return void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1));this._textTracks&&(0===e&&A.c.each(this._textTracks,function(e){e.mode=e.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==e-1&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))}function o(e){if(e.text&&e.begin&&e.end){var t=e.trackid.toString(),i=this._tracksById&&this._tracksById[t];i||(i={kind:"captions",_id:t,data:[]},this.addTextTracks([i]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));var n;e.useDTS&&(i.source||(i.source=e.source||"mpegts")),n=e.begin+"_"+e.text;var r=this._metaCuesByTextTime[n];if(!r){r={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[n]=r;var a=Object(L.b)([r])[0];i.data.push(a)}}}function c(e){this._tracksById||this._initTextTracks();var t=e.track?e.track:"native"+e.type,i=this._tracksById[t],n="captions"===e.type?"Unknown CC":"ID3 Metadata",r=e.cue;if(!i){var a={kind:e.type,_id:t,label:n,embedded:!0};i=w.call(this,a),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):b.call(this,[i])}j.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?y(this.renderNatively,i,r):i.data.push(r))}function u(e){var t=this._tracksById[e.name];if(t){t.source=e.source;for(var i=e.captions||[],n=[],r=!1,a=0;a<i.length;a++){var s=i[a],o=e.name+"_"+s.begin+"_"+s.end;this._metaCuesByTextTime[o]||(this._metaCuesByTextTime[o]=s,n.push(s),r=!0)}r&&n.sort(function(e,t){return e.begin-t.begin});var c=Object(L.b)(n);Array.prototype.push.apply(t.data,c)}}function d(e,t,i){e&&(l(e,t,i),this.instreamMode||(e.addEventListener?e.addEventListener(t,i):e["on"+t]=i))}function l(e,t,i){e&&(e.removeEventListener?e.removeEventListener(t,i):e["on"+t]=null)}function h(){Object(L.a)(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(p(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._currentTextTrackIndex=-1,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),p(this.renderNatively,this.video.textTracks))}function f(e){var t=this._cachedVTTCues;t&&t[e]&&(t[e]={},this._tracksById&&(this._tracksById[e].data=[]))}function v(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];if(e){e.mode="disabled";var t=e._id;t&&0===t.indexOf("nativecaptions")&&(e.mode="hidden")}}}function g(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}}function T(){var e=this.video.textTracks,t=A.c.filter(e,function(e){return(e.inuse||!e._id)&&_(e.kind)});if(!this._textTracks||E.call(this,t))return void this.setTextTracks(e);for(var i=-1,n=0;n<this._textTracks.length;n++)if("showing"===this._textTracks[n].mode){i=n;break}i!==this._currentTextTrackIndex&&this.setSubtitlesTrack(i+1)}function k(){this.setTextTracks(this.video.textTracks)}function b(e){var t=this;e&&(this._textTracks||this._initTextTracks(),e.forEach(function(e){if(!e.kind||_(e.kind)){var i=w.call(t,e);C.call(t,i),e.file&&(e.data=[],Object(L.c)(e,function(e){t.addVTTCuesToTrack(i,e)},function(e){t.trigger(N.r,{message:"Captions failed to load",reason:e})}))}}),this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks}))}function m(e,t){if(this.renderNatively){var i=this._tracksById[e._id];if(!i)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(!this._cuesByTrackId[e._id]||!this._cuesByTrackId[e._id].loaded){var n;for(this._cuesByTrackId[e._id]={cues:t,loaded:!0};n=t.shift();)y(this.renderNatively,i,n)}}}function y(e,t,i){if(!M.Browser.ie||!e||!window.TextTrackCue)return void t.addCue(i);var n=new window.TextTrackCue(i.startTime,i.endTime,i.text);t.addCue(n)}function p(e,t){t&&t.length&&A.c.each(t,function(t){if(!(M.Browser.ie&&e&&/^(native|subtitle|cc)/.test(t._id))){t.mode="disabled",t.mode="hidden";for(var i=t.cues.length;i--;)t.removeCue(t.cues[i]);t.embedded||(t.mode="disabled"),t.inuse=!1}})}function _(e){return"subtitles"===e||"captions"===e}function x(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function w(e){var t,i=Object(S.b)(e,this._unknownCount),n=i.label;if(this._unknownCount=i.unknownCount,this.renderNatively||"metadata"===e.kind){var r=this.video.textTracks;t=A.c.findWhere(r,{label:n}),t||(t=this.video.addTextTrack(e.kind,n,e.language||"")),t.default=e.default,t.mode="disabled",t.inuse=!0}else t=e,t.data=t.data||[];return t._id||(t._id=Object(S.a)(e,this._textTracks.length)),t}function C(e){this._textTracks.push(e),this._tracksById[e._id]=e}function O(){if(this._textTracks){var e=A.c.filter(this._textTracks,function(e){return e.embedded||"subs"===e.groupid});this._initTextTracks(),A.c.each(e,function(e){this._tracksById[e._id]=e}),this._textTracks=e}}function B(e){var t=e.currentTarget.activeCues;if(t&&t.length){var i=t[t.length-1].startTime;if(this._activeCuePosition!==i){var n=[];if(A.c.each(t,function(e){e.startTime<i||(e.data||e.value?n.push(e):e.text&&this.trigger("meta",{metadataTime:i,metadata:JSON.parse(e.text)}))},this),n.length){var r=Object(I.a)(n);this.trigger("meta",{metadataTime:i,metadata:r})}this._activeCuePosition=i}}}function j(e,t){var i=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var n,r=this._cachedVTTCues[e._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*t.startTime);var a="_"+t.line,s=Math.floor(20*t.endTime),o=r[n+a]||r[n+1+a]||r[n-1+a];return!(o&&Math.abs(o-s)<=1)&&(r[n+a]=s,!0);case"metadata":var c=t.data?new Uint8Array(t.data).join(""):t.text;return n=t.startTime+c,r[n]?!1:(r[n]=t.endTime,!0);default:return!1}}function E(e){if(e.length>this._textTracks.length)return!0;for(var t=0;t<e.length;t++){var i=e[t];if(!i._id||!this._tracksById[i._id])return!0}return!1}var L=i(63),S=i(64),I=i(69),M=i(8),N=i(5),A=i(0),R={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:x,addTracksListener:d,clearTracks:h,clearCueData:f,disableTextTrack:v,enableTextTrack:g,getSubtitlesTrack:a,removeTracksListener:l,addTextTracks:b,setTextTracks:n,setupSideloadedTracks:r,setSubtitlesTrack:s,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:u,addCaptionsCue:o,addVTTCue:c,addVTTCuesToTrack:m,renderNatively:!1};t.a=R},73:function(e,t,i){"use strict";function n(e){return e&&e.length?e.end(e.length-1):0}t.a=n},74:function(e,t,i){"use strict";function n(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}t.a=n}});
//fgnass.github.com/spin.js#v1.2.5
// spin.min.js
(function(a,b,c){function g(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function h(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function j(a,b,c,d){var g=["opacity",b,~~(a*100),c,d].join("-"),h=.01+c/d*100,j=Math.max(1-(1-a)/b*(100-h),a),k=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=k&&"-"+k+"-"||"";return e[g]||(i.insertRule("@"+l+"keyframes "+g+"{"+"0%{opacity:"+j+"}"+h+"%{opacity:"+a+"}"+(h+.01)+"%{opacity:1}"+(h+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+j+"}"+"}",0),e[g]=1),g}function k(a,b){var e=a.style,f,g;if(e[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(g=0;g<d.length;g++){f=d[g]+b;if(e[f]!==c)return f}}function l(a,b){for(var c in b)a.style[k(a,c)||c]=b[c];return a}function m(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function n(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var d=["webkit","Moz","ms","O"],e={},f,i=function(){var a=g("style");return h(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},p=function q(a){if(!this.spin)return new q(a);this.opts=m(a||{},q.defaults,o)};p.defaults={},m(p.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,d=b.el=l(g(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),e=c.radius+c.length+c.width,h,i;a&&(a.insertBefore(d,a.firstChild||null),i=n(a),h=n(d),l(d,{left:(c.left=="auto"?i.x-h.x+(a.offsetWidth>>1):c.left+e)+"px",top:(c.top=="auto"?i.y-h.y+(a.offsetHeight>>1):c.top+e)+"px"})),d.setAttribute("aria-role","progressbar"),b.lines(d,b.opts);if(!f){var j=0,k=c.fps,m=k/c.speed,o=(1-c.opacity)/(m*c.trail/100),p=m/c.lines;!function q(){j++;for(var a=c.lines;a;a--){var e=Math.max(1-(j+a*p)%m*o,c.opacity);b.opacity(d,c.lines-a,e,c)}b.timeout=b.el&&setTimeout(q,~~(1e3/k))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function e(a,d){return l(g(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:d,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*c+b.rotate)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}var c=0,d;for(;c<b.lines;c++)d=l(g(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:f&&j(b.opacity,b.trail,c,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&h(d,l(e("#000","0 0 4px #000"),{top:"2px"})),h(a,h(d,e(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),!function(){function a(a,b){return g("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}var b=l(g("group"),{behavior:"url(#default#VML)"});!k(b,"transform")&&b.adj?(i.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(b,c){function f(){return l(a("group",{coordsize:e+" "+e,coordorigin:-d+" "+ -d}),{width:e,height:e})}function k(b,e,g){h(i,h(l(f(),{rotation:360/c.lines*b+"deg",left:~~e}),h(l(a("roundrect",{arcsize:1}),{width:d,height:c.width,left:c.radius,top:-c.width>>1,filter:g}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var d=c.length+c.width,e=2*d,g=-(c.width+c.length)*2+"px",i=l(f(),{position:"absolute",top:g,left:g}),j;if(c.shadow)for(j=1;j<=c.lines;j++)k(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(j=1;j<=c.lines;j++)k(j);return h(b,i)},p.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}):f=k(b,"animation")}(),a.Spinner=p})(window,document);
$.fn.spin = function(opts) {
	this.each(function() {
		var $this = $(this),
				spinner = $this.data('spinner');

		if (spinner) spinner.stop();
		if (opts !== false) {
			opts = $.extend({color: $this.css('color')}, opts);
			spinner = new Spinner(opts).spin(this);
			$this.data('spinner', spinner);
		}
	});
	return this;
};

/* to use

 spinner = $('#middle-area .explorer-full').first().spin(main.spinner_opts);
 or to stop
 spinner.spin(false)
*/
;
/*! Picturefill - v2.1.0-beta - 2014-06-03
 * http://scottjehl.github.io/picturefill
 * Copyright (c) 2014 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT */

window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(a,b){"use strict";function c(a){var b,c,d,f,g,h;a=a||{},b=a.elements||e.getAllElements();for(var i=0,j=b.length;j>i;i++)if(c=b[i],d=c.nodeName.toUpperCase(),f=void 0,g=void 0,h=void 0,c[e.ns]||(c[e.ns]={}),a.reevaluate||!c[e.ns].evaluated){if("PICTURE"===d){if(e.removeVideoShim(c),f=e.getMatch(c),f===!1)continue;h=c.getElementsByTagName("img")[0]}else f=void 0,h=c;h&&(h[e.ns]||(h[e.ns]={}),h.srcset&&("PICTURE"===d||h.getAttribute("sizes"))&&e.dodgeSrcset(h),f?(g=e.processSourceSet(f),e.applyBestCandidate(g,h)):(g=e.processSourceSet(h),(void 0===h.srcset||h[e.ns].srcset)&&e.applyBestCandidate(g,h)),c[e.ns].evaluated=!0)}}function d(){c();var d=setInterval(function(){return c(),/^loaded|^i|^c/.test(b.readyState)?void clearInterval(d):void 0},250);if(a.addEventListener){var e;a.addEventListener("resize",function(){a._picturefillWorking||(a._picturefillWorking=!0,a.clearTimeout(e),e=a.setTimeout(function(){c({reevaluate:!0}),a._picturefillWorking=!1},60))},!1)}}if(!a.HTMLPictureElement){b.createElement("picture");var e={};e.ns="picturefill",e.srcsetSupported=void 0!==(new a.Image).srcset,e.trim=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},e.endsWith=function(a,b){return a.endsWith?a.endsWith(b):-1!==a.indexOf(b,a.length-b.length)},e.matchesMedia=function(b){return a.matchMedia&&a.matchMedia(b).matches},e.getDpr=function(){return a.devicePixelRatio||1},e.getWidthFromLength=function(a){return a=a&&parseFloat(a)>0?a:"100vw",a=a.replace("vw","%"),e.lengthEl||(e.lengthEl=b.createElement("div"),b.documentElement.insertBefore(e.lengthEl,b.documentElement.firstChild)),e.lengthEl.style.cssText="position: absolute; left: 0; width: "+a+";",e.lengthEl.offsetWidth},e.types={},e.types["image/jpeg"]=!0,e.types["image/gif"]=!0,e.types["image/png"]=!0,e.types["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),e.types["image/webp"]=function(){var b=new a.Image,d="image/webp";b.onerror=function(){e.types[d]=!1,c()},b.onload=function(){e.types[d]=1===b.width,c()},b.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="},e.verifyTypeSupport=function(a){var b=a.getAttribute("type");return null===b||""===b?!0:"function"==typeof e.types[b]?(e.types[b](),"pending"):e.types[b]},e.parseSize=function(a){var b=/(\([^)]+\))?\s*(.+)/g.exec(a);return{media:b&&b[1],length:b&&b[2]}},e.findWidthFromSourceSize=function(a){for(var b,c=e.trim(a).split(/\s*,\s*/),d=0,f=c.length;f>d;d++){var g=c[d],h=e.parseSize(g),i=h.length,j=h.media;if(i&&(!j||e.matchesMedia(j))){b=i;break}}return e.getWidthFromLength(b)},e.parseSrcset=function(a){for(var b=[];""!==a;){a=a.replace(/^\s+/g,"");var c,d=a.search(/\s/g),e=null;if(-1!==d){c=a.slice(0,d);var f=c[c.length-1];if((","===f||""===c)&&(c=c.replace(/,+$/,""),e=""),a=a.slice(d+1),null===e){var g=a.indexOf(",");-1!==g?(e=a.slice(0,g),a=a.slice(g+1)):(e=a,a="")}}else c=a,a="";(c||e)&&b.push({url:c,descriptor:e})}return b},e.parseDescriptor=function(a,b){var c,d=a&&a.replace(/(^\s+|\s+$)/g,""),f=b?e.findWidthFromSourceSize(b):"100%";if(d)for(var g=d.split(" "),h=g.length+1;h>=0;h--){var i=g[h],j=i&&i.slice(i.length-1);if(("w"===j||"x"===j)&&(c=i),b&&c)c=parseFloat(parseInt(i,10)/f);else{var k=i&&parseFloat(i,10);c=k&&!isNaN(k)&&"x"===j||"w"===j?k:1}}else c=1;return c},e.getCandidatesFromSourceSet=function(a,b){for(var c=e.parseSrcset(a),d=[],f=0,g=c.length;g>f;f++){var h=c[f];d.push({url:h.url,resolution:e.parseDescriptor(h.descriptor,b)})}return d},e.dodgeSrcset=function(a){a.srcset&&(a[e.ns].srcset=a.srcset,a.removeAttribute("srcset"))},e.processSourceSet=function(a){var b=a.getAttribute("srcset"),c=a.getAttribute("sizes"),d=[];return"IMG"===a.nodeName.toUpperCase()&&a[e.ns]&&a[e.ns].srcset&&(b=a[e.ns].srcset),b&&(d=e.getCandidatesFromSourceSet(b,c)),d},e.applyBestCandidate=function(a,b){var c,d,f;a.sort(e.ascendingSort),d=a.length,f=a[d-1];for(var g=0;d>g;g++)if(c=a[g],c.resolution>=e.getDpr()){f=c;break}e.endsWith(b.src,f.url)||(b.src=f.url,b.currentSrc=b.src)},e.ascendingSort=function(a,b){return a.resolution-b.resolution},e.removeVideoShim=function(a){var b=a.getElementsByTagName("video");if(b.length){for(var c=b[0],d=c.getElementsByTagName("source");d.length;)a.insertBefore(d[0],c);c.parentNode.removeChild(c)}},e.getAllElements=function(){for(var a=b.getElementsByTagName("picture"),c=[],d=b.getElementsByTagName("img"),f=0,g=a.length+d.length;g>f;f++)if(f<a.length)c[f]=a[f];else{var h=d[f-a.length];"PICTURE"!==h.parentNode.nodeName.toUpperCase()&&(e.srcsetSupported&&h.getAttribute("sizes")||null!==h.getAttribute("srcset"))&&c.push(h)}return c},e.getMatch=function(a){for(var b,c=a.childNodes,d=0,f=c.length;f>d;d++){var g=c[d];if(1===g.nodeType){if("IMG"===g.nodeName.toUpperCase())return b;if("SOURCE"===g.nodeName.toUpperCase()){var h=g.getAttribute("media");if(g.getAttribute("srcset")&&(!h||e.matchesMedia(h))){var i=e.verifyTypeSupport(g);if(i===!0){b=g;break}if("pending"===i)return!1}}}}return b},d(),c._=e,"object"==typeof module&&"object"==typeof module.exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):"object"==typeof a&&(a.picturefill=c)}}(this,this.document);
/* tooltipsy by Brian Cray
 * Lincensed under GPL2 - http://www.gnu.org/licenses/gpl-2.0.html
 * Option quick reference:
 * - alignTo: "element" or "cursor" (Defaults to "element")
 * - offset: Tooltipsy distance from element or mouse cursor, dependent on alignTo setting. Set as array [x, y] (Defaults to [0, -1])
 * - content: HTML or text content of tooltip. Defaults to "" (empty string), which pulls content from target element's title attribute
 * - show: function(event, tooltip) to show the tooltip. Defaults to a show(100) effect
 * - hide: function(event, tooltip) to hide the tooltip. Defaults to a fadeOut(100) effect
 * - delay: A delay in milliseconds before showing a tooltip. Set to 0 for no delay. Defaults to 200
 * - css: object containing CSS properties and values. Defaults to {} to use stylesheet for styles
 * - className: DOM class for styling tooltips with CSS. Defaults to "tooltipsy"
 * - showEvent: Set a custom event to bind the show function. Defaults to mouseenter
 * - hideEvent: Set a custom event to bind the show function. Defaults to mouseleave
 * Method quick reference:
 * - $('element').data('tooltipsy').show(): Force the tooltip to show
 * - $('element').data('tooltipsy').hide(): Force the tooltip to hide
 * - $('element').data('tooltipsy').destroy(): Remove tooltip from DOM
 * More information visit http://tooltipsy.com/
 */

;(function(a){a.tooltipsy=function(c,b){this.options=b;this.$el=a(c);this.title=this.$el.attr("title")||"";this.$el.attr("title","");this.random=parseInt(Math.random()*10000);this.ready=false;this.shown=false;this.width=0;this.height=0;this.delaytimer=null;this.$el.data("tooltipsy",this);this.init()};a.tooltipsy.prototype={init:function(){var e=this,d,b=e.$el,c=b[0];e.settings=d=a.extend({},e.defaults,e.options);d.delay=+d.delay;if(typeof d.content==="function"){e.readify()}if(d.showEvent===d.hideEvent&&d.showEvent==="click"){b.toggle(function(f){if(d.showEvent==="click"&&c.tagName=="A"){f.preventDefault()}if(d.delay>0){e.delaytimer=window.setTimeout(function(){e.show(f)},d.delay)}else{e.show(f)}},function(f){if(d.showEvent==="click"&&c.tagName=="A"){f.preventDefault()}window.clearTimeout(e.delaytimer);e.delaytimer=null;e.hide(f)})}else{b.bind(d.showEvent,function(f){if(d.showEvent==="click"&&c.tagName=="A"){f.preventDefault()}e.delaytimer=window.setTimeout(function(){e.show(f)},d.delay||0)}).bind(d.hideEvent,function(f){if(d.showEvent==="click"&&c.tagName=="A"){f.preventDefault()}window.clearTimeout(e.delaytimer);e.delaytimer=null;e.hide(f)})}},show:function(i){if(this.ready===false){this.readify()}var b=this,f=b.settings,h=b.$tipsy,k=b.$el,d=k[0],g=b.offset(d);if(b.shown===false){if((function(m){var l=0,e;for(e in m){if(m.hasOwnProperty(e)){l++}}return l})(f.css)>0){b.$tip.css(f.css)}b.width=h.outerWidth();b.height=h.outerHeight()}if(f.alignTo==="cursor"&&i){var j=[i.clientX+f.offset[0],i.clientY+f.offset[1]];if(j[0]+b.width>a(window).width()){var c={top:j[1]+"px",right:j[0]+"px",left:"auto"}}else{var c={top:j[1]+"px",left:j[0]+"px",right:"auto"}}}else{var j=[(function(){if(f.offset[0]<0){return g.left-Math.abs(f.offset[0])-b.width}else{if(f.offset[0]===0){return g.left-((b.width-k.outerWidth())/2)}else{return g.left+k.outerWidth()+f.offset[0]}}})(),(function(){if(f.offset[1]<0){return g.top-Math.abs(f.offset[1])-b.height}else{if(f.offset[1]===0){return g.top-((b.height-b.$el.outerHeight())/2)}else{return g.top+b.$el.outerHeight()+f.offset[1]}}})()]}h.css({top:j[1]+"px",left:j[0]+"px"});b.settings.show(i,h.stop(true,true))},hide:function(c){var b=this;if(b.ready===false){return}if(c&&c.relatedTarget===b.$tip[0]){b.$tip.bind("mouseleave",function(d){if(d.relatedTarget===b.$el[0]){return}b.settings.hide(d,b.$tipsy.stop(true,true))});return}b.settings.hide(c,b.$tipsy.stop(true,true))},readify:function(){this.ready=true;this.$tipsy=a('<div id="tooltipsy'+this.random+'" style="position:fixed;z-index:2147483647;display:none">').appendTo("body");this.$tip=a('<div class="'+this.settings.className+'">').appendTo(this.$tipsy);this.$tip.data("rootel",this.$el);var c=this.$el;var b=this.$tip;this.$tip.html(this.settings.content!=""?(typeof this.settings.content=="string"?this.settings.content:this.settings.content(c,b)):this.title)},offset:function(b){return this.$el[0].getBoundingClientRect()},destroy:function(){if(this.$tipsy){this.$tipsy.remove();a.removeData(this.$el,"tooltipsy")}},defaults:{alignTo:"element",offset:[0,-1],content:"",show:function(c,b){b.fadeIn(100)},hide:function(c,b){b.fadeOut(100)},css:{},className:"tooltipsy",delay:200,showEvent:"mouseenter",hideEvent:"mouseleave"}};a.fn.tooltipsy=function(b){return this.each(function(){new a.tooltipsy(this,b)})}})(jQuery);
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */


(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if("object"==typeof e){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if("object"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):e.eventie=o}(this),function(e,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return"[object Array]"===d.call(e)}function o(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),"function"==typeof t?n=t:i(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred);var r=this;setTimeout(function(){r.check()})}function f(e){this.img=e}function c(e){this.src=e,v[e]=this}var a=e.jQuery,u=e.console,h=u!==void 0,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var f=r[o];this.addImage(f)}}},s.prototype.addImage=function(e){var t=new f(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&h&&u.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},a&&(a.fn.imagesLoaded=function(e,t){var n=new s(this,e,t);return n.jqDeferred.promise(a(this))}),f.prototype=new t,f.prototype.check=function(){var e=v[this.img.src]||new c(this.img.src);if(e.isConfirmed)return this.confirm(e.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var v={};return c.prototype=new t,c.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},c.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},s});
!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function r(n){return null===n?NaN:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function a(n){return n.length}function o(n){for(var t=1;n*t%1;)t*=10;return t}function l(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function c(){this._=Object.create(null)}function s(n){return(n+="")===xa||n[0]===ba?ba+n:n}function f(n){return(n+="")[0]===ba?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=_a.length;r>e;++e){var u=_a[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new c;return t.on=function(t,u){var i,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,i=e.indexOf(a)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){oa.event.preventDefault()}function k(){for(var n,t=oa.event;n=t.sourceEvent;)t=n;return t}function N(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=oa.event;u.target=n,oa.event=u,t[u.type].apply(e,r)}finally{oa.event=i}}},t}function E(n){return Sa(n,Aa),n}function A(n){return"function"==typeof n?n:function(){return ka(n,this)}}function C(n){return"function"==typeof n?n:function(){return Na(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=oa.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?o:a:n.local?i:u}function L(n){return n.trim().replace(/\s+/g," ")}function q(n){return new RegExp("(?:^|\\s+)"+oa.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=q(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",L(u+" "+n))):e.setAttribute("class",L(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ca&&t.documentElement.namespaceURI===Ca?t.createElement(n):t.createElementNS(e,n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=oa.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return Ea(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],a=0,o=i.length;o>a;a++)(u=i[a])&&t(u,a,e);return n}function Z(n){return Sa(n,La),n}function V(n){var t,e;return function(r,u,i){var a,o=n[i].update,l=o.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(a=o[t])&&++t<l;);return a}}function X(n,t,e){function r(){var t=this[a];t&&(this.removeEventListener(n,t,t.$),delete this[a])}function u(){var u=l(t,ca(arguments));r.call(this),this.addEventListener(n,this[a]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+oa.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var a="__on"+n,o=n.indexOf("."),l=$;o>0&&(n=n.slice(0,o));var c=qa.get(n);return c&&(n=c,l=B),o?t?u:r:t?b:i}function $(n,t){return function(e){var r=oa.event;oa.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{oa.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Ra,u="click"+r,i=oa.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ta&&(Ta="onselectstart"in e?!1:x(e.style,"userSelect")),Ta){var a=n(e).style,o=a[Ta];a[Ta]="none"}return function(n){if(i.on(r,null),Ta&&(a[Ta]=o),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Da){var i=t(n);if(i.scrollX||i.scrollY){r=oa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Da=!(a.f||a.e),r.remove()}}return Da?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}function G(){return oa.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nn(n){return n>1?0:-1>n?ja:Math.acos(n)}function tn(n){return n>1?Oa:-1>n?-Oa:Math.asin(n)}function en(n){return((n=Math.exp(n))-1/n)/2}function rn(n){return((n=Math.exp(n))+1/n)/2}function un(n){return((n=Math.exp(2*n))-1)/(n+1)}function an(n){return(n=Math.sin(n/2))*n}function on(){}function ln(n,t,e){return this instanceof ln?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ln?new ln(n.h,n.s,n.l):_n(""+n,wn,ln):new ln(n,t,e)}function cn(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(a-i)*n/60:180>n?a:240>n?i+(a-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,a;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,a=.5>=e?e*(1+t):e+t-e*t,i=2*e-a,new yn(u(n+120),u(n),u(n-120))}function sn(n,t,e){return this instanceof sn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof sn?new sn(n.h,n.c,n.l):n instanceof hn?pn(n.l,n.a,n.b):pn((n=Sn((n=oa.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new sn(n,t,e)}function fn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new hn(e,Math.cos(n*=Ia)*t,Math.sin(n)*t)}function hn(n,t,e){return this instanceof hn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof hn?new hn(n.l,n.a,n.b):n instanceof sn?fn(n.h,n.c,n.l):Sn((n=yn(n)).r,n.g,n.b):new hn(n,t,e)}function gn(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=vn(u)*Qa,r=vn(r)*no,i=vn(i)*to,new yn(mn(3.2404542*u-1.5371385*r-.4985314*i),mn(-.969266*u+1.8760108*r+.041556*i),mn(.0556434*u-.2040259*r+1.0572252*i))}function pn(n,t,e){return n>0?new sn(Math.atan2(e,t)*Ya,Math.sqrt(t*t+e*e),n):new sn(NaN,NaN,n)}function vn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function dn(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function mn(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function yn(n,t,e){return this instanceof yn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof yn?new yn(n.r,n.g,n.b):_n(""+n,yn,cn):new yn(n,t,e)}function Mn(n){return new yn(n>>16,n>>8&255,255&n)}function xn(n){return Mn(n)+""}function bn(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _n(n,t,e){var r,u,i,a=0,o=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(Nn(u[0]),Nn(u[1]),Nn(u[2]))}return(i=uo.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(a=(3840&i)>>4,a=a>>4|a,o=240&i,o=o>>4|o,l=15&i,l=l<<4|l):7===n.length&&(a=(16711680&i)>>16,o=(65280&i)>>8,l=255&i)),t(a,o,l))}function wn(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),a=Math.max(n,t,e),o=a-i,l=(a+i)/2;return o?(u=.5>l?o/(a+i):o/(2-a-i),r=n==a?(t-e)/o+(e>t?6:0):t==a?(e-n)/o+2:(n-t)/o+4,r*=60):(r=NaN,u=l>0&&1>l?0:r),new ln(r,u,l)}function Sn(n,t,e){n=kn(n),t=kn(t),e=kn(e);var r=dn((.4124564*n+.3575761*t+.1804375*e)/Qa),u=dn((.2126729*n+.7151522*t+.072175*e)/no),i=dn((.0193339*n+.119192*t+.9503041*e)/to);return hn(116*u-16,500*(r-u),200*(u-i))}function kn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Nn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function En(n){return"function"==typeof n?n:function(){return n}}function An(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Cn(t,e,n,r)}}function Cn(n,t,e,r){function u(){var n,t=l.status;if(!t&&Ln(l)||t>=200&&300>t||304===t){try{n=e.call(i,l)}catch(r){return void a.error.call(i,r)}a.load.call(i,n)}else a.error.call(i,l)}var i={},a=oa.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(n)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=u:l.onreadystatechange=function(){l.readyState>3&&u()},l.onprogress=function(n){var t=oa.event;oa.event=n;try{a.progress.call(i,l)}finally{oa.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:o[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(c=n,i):c},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ca(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),l.open(e,n,!0),null==t||"accept"in o||(o.accept=t+",*/*"),l.setRequestHeader)for(var s in o)l.setRequestHeader(s,o[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},oa.rebind(i,a,"on"),null==r?i:i.get(zn(r))}function zn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Ln(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qn(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,n:null};return ao?ao.n=i:io=i,ao=i,oo||(lo=clearTimeout(lo),oo=1,co(Tn)),i}function Tn(){var n=Rn(),t=Dn()-n;t>24?(isFinite(t)&&(clearTimeout(lo),lo=setTimeout(Tn,t)),oo=0):(oo=1,co(Tn))}function Rn(){for(var n=Date.now(),t=io;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Dn(){for(var n,t=io,e=1/0;t;)t.c?(t.t<e&&(e=t.t),t=(n=t).n):t=n?n.n=t.n:io=t.n;return ao=n,e}function Pn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Un(n,t){var e=Math.pow(10,3*Ma(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function jn(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],a=0,o=r[0],l=0;u>0&&o>0&&(l+o+1>t&&(o=Math.max(1,t-l)),i.push(n.substring(u-=o,u+o)),!((l+=o+1)>t));)o=r[a=(a+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=fo.exec(n),r=e[1]||" ",a=e[2]||">",o=e[3]||"-",l=e[4]||"",c=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===a)&&(c=r="0",a="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===l&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=ho.get(g)||Fn;var M=c&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===o?"":o;if(0>p){var l=oa.formatPrefix(n,h);n=l.scale(n),e=l.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!c&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===a?u+n+k:">"===a?k+u+n:"^"===a?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Fn(n){return n+""}function Hn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function On(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new po(e-1)),1),e}function i(n,e){return t(n=new po(+n),e),n}function a(n,r,i){var a=u(n),o=[];if(i>1)for(;r>a;)e(a)%i||o.push(new Date(+a)),t(a,1);else for(;r>a;)o.push(new Date(+a)),t(a,1);return o}function o(n,t,e){try{po=Hn;var r=new Hn;return r._=n,a(r,t,e)}finally{po=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=a;var l=n.utc=In(n);return l.floor=l,l.round=In(r),l.ceil=In(u),l.offset=In(i),l.range=o,n}function In(n){return function(t,e){try{po=Hn;var r=new Hn;return r._=t,n(r,e)._}finally{po=Date}}}function Yn(n){function t(n){function t(t){for(var e,u,i,a=[],o=-1,l=0;++o<r;)37===n.charCodeAt(o)&&(a.push(n.slice(l,o)),null!=(u=mo[e=n.charAt(++o)])&&(e=n.charAt(++o)),(i=A[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),a.push(e),l=o+1);return a.push(n.slice(l,o)),a.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&po!==Hn,a=new(i?Hn:po);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?a._:a},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,a,o=0,l=t.length,c=e.length;l>o;){if(r>=c)return-1;if(u=t.charCodeAt(o++),37===u){if(a=t.charAt(o++),i=C[a in mo?t.charAt(o++):a],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){N.lastIndex=0;var r=N.exec(t.slice(e));return r?(n.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,r){return e(n,A.c.toString(),t,r)}function l(n,t,r){return e(n,A.x.toString(),t,r)}function c(n,t,r){return e(n,A.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{po=Hn;var t=new po;return t._=n,r(t)}finally{po=Date}}var r=t(n);return e.parse=function(n){try{po=Hn;var t=r.parse(n);return t&&t._}finally{po=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ct;var M=oa.map(),x=Vn(v),b=Xn(v),_=Vn(d),w=Xn(d),S=Vn(m),k=Xn(m),N=Vn(y),E=Xn(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return Zn(n.getDate(),t,2)},e:function(n,t){return Zn(n.getDate(),t,2)},H:function(n,t){return Zn(n.getHours(),t,2)},I:function(n,t){return Zn(n.getHours()%12||12,t,2)},j:function(n,t){return Zn(1+go.dayOfYear(n),t,3)},L:function(n,t){return Zn(n.getMilliseconds(),t,3)},m:function(n,t){return Zn(n.getMonth()+1,t,2)},M:function(n,t){return Zn(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return Zn(n.getSeconds(),t,2)},U:function(n,t){return Zn(go.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Zn(go.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return Zn(n.getFullYear()%100,t,2)},Y:function(n,t){return Zn(n.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},C={a:r,A:u,b:i,B:a,c:o,d:tt,e:tt,H:rt,I:rt,j:et,L:at,m:nt,M:ut,p:s,S:it,U:Bn,w:$n,W:Wn,x:l,X:c,y:Gn,Y:Jn,Z:Kn,"%":lt};return t}function Zn(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Vn(n){return new RegExp("^(?:"+n.map(oa.requote).join("|")+")","i")}function Xn(n){for(var t=new c,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function $n(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Bn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Wn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Jn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.y=Qn(+r[0]),e+r[0].length):-1}function Kn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Qn(n){return n+(n>68?1900:2e3)}function nt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function tt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function et(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function rt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ut(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function it(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function at(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ot(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=Ma(t)/60|0,u=Ma(t)%60;return e+Zn(r,"0",2)+Zn(u,"0",2)}function lt(n,t,e){Mo.lastIndex=0;var r=Mo.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ct(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function st(){}function ft(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function ht(n,t){n&&wo.hasOwnProperty(n.type)&&wo[n.type](n,t)}function gt(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function pt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)gt(n[e],t,1);t.polygonEnd()}function vt(){function n(n,t){n*=Ia,t=t*Ia/2+ja/4;var e=n-r,a=e>=0?1:-1,o=a*e,l=Math.cos(t),c=Math.sin(t),s=i*c,f=u*l+s*Math.cos(o),h=s*a*Math.sin(o);ko.add(Math.atan2(h,f)),r=n,u=l,i=c}var t,e,r,u,i;No.point=function(a,o){No.point=n,r=(t=a)*Ia,u=Math.cos(o=(e=o)*Ia/2+ja/4),i=Math.sin(o)},No.lineEnd=function(){n(t,e)}}function dt(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function mt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function yt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Mt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function xt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n){return[Math.atan2(n[1],n[0]),tn(n[2])]}function wt(n,t){return Ma(n[0]-t[0])<Pa&&Ma(n[1]-t[1])<Pa}function St(n,t){n*=Ia;var e=Math.cos(t*=Ia);kt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function kt(n,t,e){++Eo,Co+=(n-Co)/Eo,zo+=(t-zo)/Eo,Lo+=(e-Lo)/Eo}function Nt(){function n(n,u){n*=Ia;var i=Math.cos(u*=Ia),a=i*Math.cos(n),o=i*Math.sin(n),l=Math.sin(u),c=Math.atan2(Math.sqrt((c=e*l-r*o)*c+(c=r*a-t*l)*c+(c=t*o-e*a)*c),t*a+e*o+r*l);Ao+=c,qo+=c*(t+(t=a)),To+=c*(e+(e=o)),Ro+=c*(r+(r=l)),kt(t,e,r)}var t,e,r;jo.point=function(u,i){u*=Ia;var a=Math.cos(i*=Ia);t=a*Math.cos(u),e=a*Math.sin(u),r=Math.sin(i),jo.point=n,kt(t,e,r)}}function Et(){jo.point=St}function At(){function n(n,t){n*=Ia;var e=Math.cos(t*=Ia),a=e*Math.cos(n),o=e*Math.sin(n),l=Math.sin(t),c=u*l-i*o,s=i*a-r*l,f=r*o-u*a,h=Math.sqrt(c*c+s*s+f*f),g=r*a+u*o+i*l,p=h&&-nn(g)/h,v=Math.atan2(h,g);Do+=p*c,Po+=p*s,Uo+=p*f,Ao+=v,qo+=v*(r+(r=a)),To+=v*(u+(u=o)),Ro+=v*(i+(i=l)),kt(r,u,i)}var t,e,r,u,i;jo.point=function(a,o){t=a,e=o,jo.point=n,a*=Ia;var l=Math.cos(o*=Ia);r=l*Math.cos(a),u=l*Math.sin(a),i=Math.sin(o),kt(r,u,i)},jo.lineEnd=function(){n(t,e),jo.lineEnd=Et,jo.point=St}}function Ct(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function zt(){return!0}function Lt(n,t,e,r,u){var i=[],a=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(wt(e,r)){u.lineStart();for(var o=0;t>o;++o)u.point((e=n[o])[0],e[1]);return void u.lineEnd()}var l=new Tt(e,n,null,!0),c=new Tt(e,null,l,!1);l.o=c,i.push(l),a.push(c),l=new Tt(r,n,null,!1),c=new Tt(r,null,l,!0),l.o=c,i.push(l),a.push(c)}}),a.sort(t),qt(i),qt(a),i.length){for(var o=0,l=e,c=a.length;c>o;++o)a[o].e=l=!l;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var o=0,c=s.length;c>o;++o)u.point((f=s[o])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var o=s.length-1;o>=0;--o)u.point((f=s[o])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Rt(n,t,e,r){return function(u,i){function a(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function o(n,t){var e=u(n,t);d.point(e[0],e[1])}function l(){y.point=o,d.lineStart()}function c(){y.point=a,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,a=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++a<r;)i.point((u=n[a])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Dt))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:c,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=c,g=oa.merge(g);var n=Ot(m,p);g.length?(b||(i.polygonStart(),b=!0),Lt(g,Ut,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Pt(),x=t(M),b=!1;return y}}function Dt(n){return n.length>1}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ut(n,t){return((n=n.x)[0]<0?n[1]-Oa-Pa:Oa-n[1])-((t=t.x)[0]<0?t[1]-Oa-Pa:Oa-t[1])}function jt(n){var t,e=NaN,r=NaN,u=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(i,a){var o=i>0?ja:-ja,l=Ma(i-e);Ma(l-ja)<Pa?(n.point(e,r=(r+a)/2>0?Oa:-Oa),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(o,r),n.point(i,r),t=0):u!==o&&l>=ja&&(Ma(e-u)<Pa&&(e-=u*Pa),Ma(i-o)<Pa&&(i-=o*Pa),r=Ft(e,r,i,a),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(o,r),t=0),n.point(e=i,r=a),u=o},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Ft(n,t,e,r){var u,i,a=Math.sin(n-e);return Ma(a)>Pa?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*a)):(t+r)/2}function Ht(n,t,e,r){var u;if(null==n)u=e*Oa,r.point(-ja,u),r.point(0,u),r.point(ja,u),r.point(ja,0),r.point(ja,-u),r.point(0,-u),r.point(-ja,-u),r.point(-ja,0),r.point(-ja,u);else if(Ma(n[0]-t[0])>Pa){var i=n[0]<t[0]?ja:-ja;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Ot(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,a=0;ko.reset();for(var o=0,l=t.length;l>o;++o){var c=t[o],s=c.length;if(s)for(var f=c[0],h=f[0],g=f[1]/2+ja/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=c[d];var m=n[0],y=n[1]/2+ja/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>ja,k=p*M;if(ko.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*Fa:b,S^h>=e^m>=e){var N=yt(dt(f),dt(n));bt(N);var E=yt(u,N);bt(E);var A=(S^b>=0?-1:1)*tn(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(a+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Pa>i||Pa>i&&0>ko)^1&a}function It(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,l,c,s;return{lineStart:function(){c=l=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=a?v?0:u(f,h):v?u(f+(0>f?ja:-ja),h):0;if(!e&&(c=l=v)&&n.lineStart(),v!==l&&(g=r(e,p),(wt(e,g)||wt(p,g))&&(p[0]+=Pa,p[1]+=Pa,v=t(p[0],p[1]))),v!==l)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(o&&e&&a^v){var m;d&i||!(m=r(p,e,!0))||(s=0,a?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&wt(e,p)||n.point(p[0],p[1]),e=p,l=v,i=d},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return s|(c&&l)<<1}}}function r(n,t,e){var r=dt(n),u=dt(t),a=[1,0,0],o=yt(r,u),l=mt(o,o),c=o[0],s=l-c*c;if(!s)return!e&&n;var f=i*l/s,h=-i*c/s,g=yt(a,o),p=xt(a,f),v=xt(o,h);Mt(p,v);var d=g,m=mt(p,d),y=mt(d,d),M=m*m-y*(mt(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=xt(d,(-m-x)/y);if(Mt(b,p),b=_t(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],N=t[1];w>S&&(_=w,w=S,S=_);var E=S-w,A=Ma(E-ja)<Pa,C=A||Pa>E;if(!A&&k>N&&(_=k,k=N,N=_),C?A?k+N>0^b[1]<(Ma(b[0]-w)<Pa?k:N):k<=b[1]&&b[1]<=N:E>ja^(w<=b[0]&&b[0]<=S)){var z=xt(d,(-m+x)/y);return Mt(z,p),[b,_t(z)]}}}function u(t,e){var r=a?n:ja-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),a=i>0,o=Ma(i)>Pa,l=ve(n,6*Ia);return Rt(t,e,l,a?[0,-n]:[-ja,n-ja])}function Yt(n,t,e,r){return function(u){var i,a=u.a,o=u.b,l=a.x,c=a.y,s=o.x,f=o.y,h=0,g=1,p=s-l,v=f-c;if(i=n-l,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-l,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-c,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-c,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:l+h*p,y:c+h*v}),1>g&&(u.b={x:l+g*p,y:c+g*v}),u}}}}}}function Zt(n,t,e,r){function u(r,u){return Ma(r[0]-n)<Pa?u>0?0:3:Ma(r[0]-e)<Pa?u>0?2:1:Ma(r[1]-t)<Pa?u>0?1:0:u>0?3:2}function i(n,t){return a(n.x,t.x)}function a(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(o){function l(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,a=1,o=d[u],l=o.length,c=o[0];l>a;++a)i=o[a],c[1]<=r?i[1]>r&&Q(c,i,n)>0&&++t:i[1]<=r&&Q(c,i,n)<0&&--t,c=i;return 0!==t}function c(i,o,l,c){var s=0,f=0;if(null==i||(s=u(i,l))!==(f=u(o,l))||a(i,o)<0^l>0){do c.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+l+4)%4)!==f)}else c.point(o[0],o[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&o.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=NaN}function g(){v&&(p(y,M),x&&w&&E.rejoin(),v.push(E.buffer())),C.point=f,w&&o.lineEnd()}function p(n,t){n=Math.max(-Ho,Math.min(Ho,n)),t=Math.max(-Ho,Math.min(Ho,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(o.lineStart(),o.point(n,t));else if(e&&w)o.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};A(r)?(w||(o.lineStart(),o.point(r.a.x,r.a.y)),o.point(r.b.x,r.b.y),e||o.lineEnd(),k=!1):e&&(o.lineStart(),o.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,N=o,E=Pt(),A=Yt(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){o=E,v=[],d=[],k=!0},polygonEnd:function(){o=N,v=oa.merge(v);var t=l([n,r]),e=k&&t,u=v.length;(e||u)&&(o.polygonStart(),e&&(o.lineStart(),c(null,null,1,o),o.lineEnd()),u&&Lt(v,i,t,c,o),o.polygonEnd()),v=d=m=null}};return C}}function Vt(n){var t=0,e=ja/3,r=oe(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*ja/180,e=n[1]*ja/180):[t/ja*180,e/ja*180]},u}function Xt(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),a-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),a=Math.sqrt(i)/u;return e.invert=function(n,t){var e=a-t;return[Math.atan2(n,e)/u,tn((i-(n*n+e*e)*u*u)/(2*u))]},e}function $t(){function n(n,t){Io+=u*n-r*t,r=n,u=t}var t,e,r,u;$o.point=function(i,a){$o.point=n,t=r=i,e=u=a},$o.lineEnd=function(){n(t,e)}}function Bt(n,t){Yo>n&&(Yo=n),n>Vo&&(Vo=n),Zo>t&&(Zo=t),t>Xo&&(Xo=t)}function Wt(){function n(n,t){a.push("M",n,",",t,i)}function t(n,t){a.push("M",n,",",t),o.point=e}function e(n,t){a.push("L",n,",",t)}function r(){o.point=n}function u(){a.push("Z")}var i=Jt(4.5),a=[],o={point:n,lineStart:function(){o.point=t},lineEnd:r,polygonStart:function(){o.lineEnd=u},polygonEnd:function(){o.lineEnd=r,o.point=n},pointRadius:function(n){return i=Jt(n),o},result:function(){if(a.length){var n=a.join("");return a=[],n}}};return o}function Jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Gt(n,t){Co+=n,zo+=t,++Lo}function Kt(){function n(n,r){var u=n-t,i=r-e,a=Math.sqrt(u*u+i*i);qo+=a*(t+n)/2,To+=a*(e+r)/2,Ro+=a,Gt(t=n,e=r)}var t,e;Wo.point=function(r,u){Wo.point=n,Gt(t=r,e=u)}}function Qt(){Wo.point=Gt}function ne(){function n(n,t){var e=n-r,i=t-u,a=Math.sqrt(e*e+i*i);qo+=a*(r+n)/2,To+=a*(u+t)/2,Ro+=a,a=u*n-r*t,Do+=a*(r+n),Po+=a*(u+t),Uo+=3*a,Gt(r=n,u=t)}var t,e,r,u;Wo.point=function(i,a){Wo.point=n,Gt(t=r=i,e=u=a)},Wo.lineEnd=function(){n(t,e)}}function te(n){function t(t,e){n.moveTo(t+a,e),n.arc(t,e,a,0,Fa)}function e(t,e){n.moveTo(t,e),o.point=r}function r(t,e){n.lineTo(t,e)}function u(){o.point=t}function i(){n.closePath()}var a=4.5,o={point:t,lineStart:function(){o.point=e},lineEnd:u,polygonStart:function(){o.lineEnd=i},polygonEnd:function(){o.lineEnd=u,o.point=t},pointRadius:function(n){return a=n,o},result:b};return o}function ee(n){function t(n){return(o?r:e)(n)}function e(t){return ie(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=NaN,S.point=i,t.lineStart()}function i(e,r){var i=dt([e,r]),a=n(e,r);u(M,x,y,b,_,w,M=a[0],x=a[1],y=e,b=i[0],_=i[1],w=i[2],o,t),t.point(M,x)}function a(){S.point=e,t.lineEnd()}function l(){
r(),S.point=c,S.lineEnd=s}function c(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,o,t),S.lineEnd=a,a()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,o,l,c,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=o+g,_=l+p,w=c+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),N=Ma(Ma(w)-1)<Pa||Ma(r-h)<Pa?(r+h)/2:Math.atan2(_,b),E=n(N,k),A=E[0],C=E[1],z=A-t,L=C-e,q=M*z-y*L;(q*q/x>i||Ma((y*z+M*L)/x-.5)>.3||a>o*g+l*p+c*v)&&(u(t,e,r,o,l,c,A,C,N,b/=S,_/=S,w,d,m),m.point(A,C),u(A,C,N,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,a=Math.cos(30*Ia),o=16;return t.precision=function(n){return arguments.length?(o=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function re(n){var t=ee(function(t,e){return n([t*Ya,e*Ya])});return function(n){return le(t(n))}}function ue(n){this.stream=n}function ie(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ae(n){return oe(function(){return n})()}function oe(n){function t(n){return n=o(n[0]*Ia,n[1]*Ia),[n[0]*h+l,c-n[1]*h]}function e(n){return n=o.invert((n[0]-l)/h,(c-n[1])/h),n&&[n[0]*Ya,n[1]*Ya]}function r(){o=Ct(a=fe(m,M,x),i);var n=i(v,d);return l=g-n[0]*h,c=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,a,o,l,c,s,f=ee(function(n,t){return n=i(n,t),[n[0]*h+l,c-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Fo,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=le(b(a,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Fo):It((w=+n)*Ia),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Zt(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Ia,d=n[1]%360*Ia,r()):[v*Ya,d*Ya]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Ia,M=n[1]%360*Ia,x=n.length>2?n[2]%360*Ia:0,r()):[m*Ya,M*Ya,x*Ya]},oa.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function le(n){return ie(n,function(t,e){n.point(t*Ia,e*Ia)})}function ce(n,t){return[n,t]}function se(n,t){return[n>ja?n-Fa:-ja>n?n+Fa:n,t]}function fe(n,t,e){return n?t||e?Ct(ge(n),pe(t,e)):ge(n):t||e?pe(t,e):se}function he(n){return function(t,e){return t+=n,[t>ja?t-Fa:-ja>t?t+Fa:t,e]}}function ge(n){var t=he(n);return t.invert=he(-n),t}function pe(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),s=c*r+o*u;return[Math.atan2(l*i-s*a,o*r-c*u),tn(s*i+l*a)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),a=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),s=c*i-l*a;return[Math.atan2(l*i+c*a,o*r+s*u),tn(s*r-o*u)]},e}function ve(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,a,o){var l=a*t;null!=u?(u=de(e,u),i=de(e,i),(a>0?i>u:u>i)&&(u+=a*Fa)):(u=n+a*Fa,i=n-.5*l);for(var c,s=u;a>0?s>i:i>s;s-=l)o.point((c=_t([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function de(n,t){var e=dt(t);e[0]-=n,bt(e);var r=nn(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Pa)%(2*Math.PI)}function me(n,t,e){var r=oa.range(n,t-Pa,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function ye(n,t,e){var r=oa.range(n,t-Pa,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Me(n){return n.source}function xe(n){return n.target}function be(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),a=Math.cos(r),o=Math.sin(r),l=u*Math.cos(n),c=u*Math.sin(n),s=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(an(r-t)+u*a*an(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*l+t*s,u=e*c+t*f,a=e*i+t*o;return[Math.atan2(u,r)*Ya,Math.atan2(a,Math.sqrt(r*r+u*u))*Ya]}:function(){return[n*Ya,t*Ya]};return p.distance=h,p}function _e(){function n(n,u){var i=Math.sin(u*=Ia),a=Math.cos(u),o=Ma((n*=Ia)-t),l=Math.cos(o);Jo+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=r*i-e*a*l)*o),e*i+r*a*l),t=n,e=i,r=a}var t,e,r;Go.point=function(u,i){t=u*Ia,e=Math.sin(i*=Ia),r=Math.cos(i),Go.point=n},Go.lineEnd=function(){Go.point=Go.lineEnd=b}}function we(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),a=Math.cos(u);return[Math.atan2(n*i,r*a),Math.asin(r&&e*i/r)]},e}function Se(n,t){function e(n,t){a>0?-Oa+Pa>t&&(t=-Oa+Pa):t>Oa-Pa&&(t=Oa-Pa);var e=a/Math.pow(u(t),i);return[e*Math.sin(i*n),a-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(ja/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),a=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=a-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(a/r,1/i))-Oa]},e):Ne}function ke(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return Ma(u)<Pa?ce:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Ne(n,t){return[n,Math.log(Math.tan(ja/4+t/2))]}function Ee(n){var t,e=ae(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var a=i.apply(e,arguments);if(a===e){if(t=null==n){var o=ja*r(),l=u();i([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else t&&(a=null);return a},e.clipExtent(null)}function Ae(n,t){return[Math.log(Math.tan(ja/4+t/2)),-n]}function Ce(n){return n[0]}function ze(n){return n[1]}function Le(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function qe(n,t){return n[0]-t[0]||n[1]-t[1]}function Te(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Re(n,t,e,r){var u=n[0],i=e[0],a=t[0]-u,o=r[0]-i,l=n[1],c=e[1],s=t[1]-l,f=r[1]-c,h=(o*(l-c)-f*(u-i))/(f*a-o*s);return[u+h*a,l+h*s]}function De(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Pe(){rr(this),this.edge=this.site=this.circle=null}function Ue(n){var t=cl.pop()||new Pe;return t.site=n,t}function je(n){Be(n),al.remove(n),cl.push(n),rr(n)}function Fe(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,a=n.N,o=[n];je(n);for(var l=i;l.circle&&Ma(e-l.circle.x)<Pa&&Ma(r-l.circle.cy)<Pa;)i=l.P,o.unshift(l),je(l),l=i;o.unshift(l),Be(l);for(var c=a;c.circle&&Ma(e-c.circle.x)<Pa&&Ma(r-c.circle.cy)<Pa;)a=c.N,o.push(c),je(c),c=a;o.push(c),Be(c);var s,f=o.length;for(s=1;f>s;++s)c=o[s],l=o[s-1],nr(c.edge,l.site,c.site,u);l=o[0],c=o[f-1],c.edge=Ke(l.site,c.site,null,u),$e(l),$e(c)}function He(n){for(var t,e,r,u,i=n.x,a=n.y,o=al._;o;)if(r=Oe(o,a)-i,r>Pa)o=o.L;else{if(u=i-Ie(o,a),!(u>Pa)){r>-Pa?(t=o.P,e=o):u>-Pa?(t=o,e=o.N):t=e=o;break}if(!o.R){t=o;break}o=o.R}var l=Ue(n);if(al.insert(t,l),t||e){if(t===e)return Be(t),e=Ue(t.site),al.insert(l,e),l.edge=e.edge=Ke(t.site,l.site),$e(t),void $e(e);if(!e)return void(l.edge=Ke(t.site,l.site));Be(t),Be(e);var c=t.site,s=c.x,f=c.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};nr(e.edge,c,p,x),l.edge=Ke(c,n,null,x),e.edge=Ke(n,p,null,x),$e(t),$e(e)}}function Oe(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var a=n.P;if(!a)return-(1/0);e=a.site;var o=e.x,l=e.y,c=l-t;if(!c)return o;var s=o-r,f=1/i-1/c,h=s/c;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*c)-l+c/2+u-i/2)))/f+r:(r+o)/2}function Ie(n,t){var e=n.N;if(e)return Oe(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ye(n){this.site=n,this.edges=[]}function Ze(n){for(var t,e,r,u,i,a,o,l,c,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=il,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(o=i.edges,l=o.length,a=0;l>a;)s=o[a].end(),r=s.x,u=s.y,c=o[++a%l].start(),t=c.x,e=c.y,(Ma(r-t)>Pa||Ma(u-e)>Pa)&&(o.splice(a,0,new tr(Qe(i.site,s,Ma(r-f)<Pa&&p-u>Pa?{x:f,y:Ma(t-f)<Pa?e:p}:Ma(u-p)<Pa&&h-r>Pa?{x:Ma(e-p)<Pa?t:h,y:p}:Ma(r-h)<Pa&&u-g>Pa?{x:h,y:Ma(t-h)<Pa?e:g}:Ma(u-g)<Pa&&r-f>Pa?{x:Ma(e-g)<Pa?t:f,y:g}:null),i.site,null)),++l)}function Ve(n,t){return t.angle-n.angle}function Xe(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var a=u.x,o=u.y,l=r.x-a,c=r.y-o,s=i.x-a,f=i.y-o,h=2*(l*f-c*s);if(!(h>=-Ua)){var g=l*l+c*c,p=s*s+f*f,v=(f*g-c*p)/h,d=(l*p-s*g)/h,f=d+o,m=sl.pop()||new Xe;m.arc=n,m.site=u,m.x=v+a,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=ll._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}ll.insert(y,m),y||(ol=m)}}}}function Be(n){var t=n.circle;t&&(t.P||(ol=t.N),ll.remove(t),sl.push(t),rr(t),n.circle=null)}function We(n){for(var t,e=ul,r=Yt(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Je(t,n)||!r(t)||Ma(t.a.x-t.b.x)<Pa&&Ma(t.a.y-t.b.y)<Pa)&&(t.a=t.b=null,e.splice(u,1))}function Je(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,a=t[0][0],o=t[1][0],l=t[0][1],c=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(a>d||d>=o)return;if(h>p){if(i){if(i.y>=c)return}else i={x:d,y:l};e={x:d,y:c}}else{if(i){if(i.y<l)return}else i={x:d,y:c};e={x:d,y:l}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else{if(i){if(i.y<l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else if(v>g){if(i){if(i.x>=o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}else{if(i){if(i.x<a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}return n.a=i,n.b=e,!0}function Ge(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ke(n,t,e,r){var u=new Ge(n,t);return ul.push(u),e&&nr(u,n,t,e),r&&nr(u,t,n,r),il[n.i].edges.push(new tr(u,n,t)),il[t.i].edges.push(new tr(u,t,n)),u}function Qe(n,t,e){var r=new Ge(n,null);return r.a=t,r.b=e,ul.push(r),r}function nr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function tr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function er(){this._=null}function rr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ur(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ir(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function ar(n){for(;n.L;)n=n.L;return n}function or(n,t){var e,r,u,i=n.sort(lr).pop();for(ul=[],il=new Array(n.length),al=new er,ll=new er;;)if(u=ol,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(il[i.i]=new Ye(i),He(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Fe(u.arc)}t&&(We(t),Ze(t));var a={cells:il,edges:ul};return al=ll=ul=il=null,a}function lr(n,t){return t.y-n.y||t.x-n.x}function cr(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function sr(n){return n.x}function fr(n){return n.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var a=.5*(e+u),o=.5*(r+i),l=t.nodes;l[0]&&gr(n,l[0],e,r,a,o),l[1]&&gr(n,l[1],a,r,u,o),l[2]&&gr(n,l[2],e,o,a,i),l[3]&&gr(n,l[3],a,o,u,i)}}function pr(n,t,e,r,u,i,a){var o,l=1/0;return function c(n,s,f,h,g){if(!(s>i||f>a||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(l>m){var y=Math.sqrt(l=m);r=t-y,u=e-y,i=t+y,a=e+y,o=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:c(n,s,f,x,b);break;case 1:c(n,x,f,h,b);break;case 2:c(n,s,b,x,g);break;case 3:c(n,x,b,h,g)}}}(n,r,u,i,a),o}function vr(n,t){n=oa.rgb(n),t=oa.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,a=t.g-r,o=t.b-u;return function(n){return"#"+bn(Math.round(e+i*n))+bn(Math.round(r+a*n))+bn(Math.round(u+o*n))}}function dr(n,t){var e,r={},u={};for(e in n)e in t?r[e]=Mr(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function mr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function yr(n,t){var e,r,u,i=hl.lastIndex=gl.lastIndex=0,a=-1,o=[],l=[];for(n+="",t+="";(e=hl.exec(n))&&(r=gl.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),o[a]?o[a]+=u:o[++a]=u),(e=e[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:mr(e,r)})),i=gl.lastIndex;return i<t.length&&(u=t.slice(i),o[a]?o[a]+=u:o[++a]=u),o.length<2?l[0]?(t=l[0].x,function(n){return t(n)+""}):function(){return t}:(t=l.length,function(n){for(var e,r=0;t>r;++r)o[(e=l[r]).i]=e.x(n);return o.join("")})}function Mr(n,t){for(var e,r=oa.interpolators.length;--r>=0&&!(e=oa.interpolators[r](n,t)););return e}function xr(n,t){var e,r=[],u=[],i=n.length,a=t.length,o=Math.min(n.length,t.length);for(e=0;o>e;++e)r.push(Mr(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;a>e;++e)u[e]=t[e];return function(n){for(e=0;o>e;++e)u[e]=r[e](n);return u}}function br(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function _r(n){return function(t){return 1-n(1-t)}}function wr(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function Sr(n){return n*n}function kr(n){return n*n*n}function Nr(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Er(n){return function(t){return Math.pow(t,n)}}function Ar(n){return 1-Math.cos(n*Oa)}function Cr(n){return Math.pow(2,10*(n-1))}function zr(n){return 1-Math.sqrt(1-n*n)}function Lr(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Fa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Fa/t)}}function qr(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Tr(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Rr(n,t){n=oa.hcl(n),t=oa.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,a=t.c-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return fn(e+i*n,r+a*n,u+o*n)+""}}function Dr(n,t){n=oa.hsl(n),t=oa.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,a=t.s-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return cn(e+i*n,r+a*n,u+o*n)+""}}function Pr(n,t){n=oa.lab(n),t=oa.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,a=t.a-r,o=t.b-u;return function(n){return gn(e+i*n,r+a*n,u+o*n)+""}}function Ur(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function jr(n){var t=[n.a,n.b],e=[n.c,n.d],r=Hr(t),u=Fr(t,e),i=Hr(Or(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ya:0}function Fr(n,t){return n[0]*t[0]+n[1]*t[1]}function Hr(n){var t=Math.sqrt(Fr(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Or(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Ir(n){return n.length?n.pop()+",":""}function Yr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push("translate(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}function Zr(n,t,e,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:e.push(Ir(e)+"rotate(",null,")")-2,x:mr(n,t)})):t&&e.push(Ir(e)+"rotate("+t+")")}function Vr(n,t,e,r){n!==t?r.push({i:e.push(Ir(e)+"skewX(",null,")")-2,x:mr(n,t)}):t&&e.push(Ir(e)+"skewX("+t+")")}function Xr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push(Ir(e)+"scale(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(1!==t[0]||1!==t[1])&&e.push(Ir(e)+"scale("+t+")")}function $r(n,t){var e=[],r=[];return n=oa.transform(n),t=oa.transform(t),Yr(n.translate,t.translate,e,r),Zr(n.rotate,t.rotate,e,r),Vr(n.skew,t.skew,e,r),Xr(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,u=-1,i=r.length;++u<i;)e[(t=r[u]).i]=t.x(n);return e.join("")}}function Br(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Wr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Jr(n){for(var t=n.source,e=n.target,r=Kr(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Gr(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Kr(n,t){if(n===t)return n;for(var e=Gr(n),r=Gr(t),u=e.pop(),i=r.pop(),a=null;u===i;)a=u,u=e.pop(),i=r.pop();return a}function Qr(n){n.fixed|=2}function nu(n){n.fixed&=-7}function tu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function eu(n){n.fixed&=-5}function ru(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,a=n.nodes,o=a.length,l=-1;++l<o;)i=a[l],null!=i&&(ru(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=t*e[n.point.index];n.charge+=n.pointCharge=c,r+=c*n.point.x,u+=c*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function uu(n,t){return oa.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=su,n}function iu(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function au(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,a=-1;++a<u;)e.push(i[a]);for(;null!=(n=r.pop());)t(n)}function ou(n){return n.children}function lu(n){return n.value}function cu(n,t){return t.value-n.value}function su(n){return oa.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function fu(n){return n.x}function hu(n){return n.y}function gu(n,t,e){n.y0=t,n.y=e}function pu(n){return oa.range(n.length)}function vu(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function du(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function mu(n){return n.reduce(yu,0)}function yu(n,t){return n+t[1]}function Mu(n,t){return xu(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function xu(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function bu(n){return[oa.min(n),oa.max(n)]}function _u(n,t){return n.value-t.value}function wu(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Su(n,t){n._pack_next=t,t._pack_prev=n}function ku(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Nu(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(c=e.length)){var e,r,u,i,a,o,l,c,s=1/0,f=-(1/0),h=1/0,g=-(1/0);if(e.forEach(Eu),r=e[0],r.x=-r.r,r.y=0,t(r),c>1&&(u=e[1],u.x=u.r,u.y=0,t(u),c>2))for(i=e[2],zu(r,u,i),t(i),wu(r,i),r._pack_prev=i,wu(i,u),u=r._pack_next,a=3;c>a;a++){zu(r,u,i=e[a]);var p=0,v=1,d=1;for(o=u._pack_next;o!==u;o=o._pack_next,v++)if(ku(o,i)){p=1;break}if(1==p)for(l=r._pack_prev;l!==o._pack_prev&&!ku(l,i);l=l._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?Su(r,u=o):Su(r=l,u),a--):(wu(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(a=0;c>a;a++)i=e[a],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(Au)}}function Eu(n){n._pack_next=n._pack_prev=n}function Au(n){delete n._pack_next,delete n._pack_prev}function Cu(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,a=u.length;++i<a;)Cu(u[i],t,e,r)}function zu(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var a=t.r+e.r,o=u*u+i*i;a*=a,r*=r;var l=.5+(r-a)/(2*o),c=Math.sqrt(Math.max(0,2*a*(r+o)-(r-=o)*r-a*a))/(2*o);e.x=n.x+l*u+c*i,e.y=n.y+l*i-c*u}else e.x=n.x+r,e.y=n.y}function Lu(n,t){return n.parent==t.parent?1:2}function qu(n){var t=n.children;return t.length?t[0]:n.t}function Tu(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ru(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Du(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Pu(n,t,e){return n.a.parent===t.parent?n.a:e}function Uu(n){return 1+oa.max(n,function(n){return n.y})}function ju(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Fu(n){var t=n.children;return t&&t.length?Fu(t[0]):n}function Hu(n){var t,e=n.children;return e&&(t=e.length)?Hu(e[t-1]):n}function Ou(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Iu(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Yu(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Zu(n){return n.rangeExtent?n.rangeExtent():Yu(n.range())}function Vu(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Xu(n,t){var e,r=0,u=n.length-1,i=n[r],a=n[u];return i>a&&(e=r,r=u,u=e,e=i,i=a,a=e),n[r]=t.floor(i),n[u]=t.ceil(a),n}function $u(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:Sl}function Bu(n,t,e,r){var u=[],i=[],a=0,o=Math.min(n.length,t.length)-1;for(n[o]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<=o;)u.push(e(n[a-1],n[a])),i.push(r(t[a-1],t[a]));return function(t){var e=oa.bisect(n,t,1,o)-1;return i[e](u[e](t))}}function Wu(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Bu:Vu,l=r?Wr:Br;return a=u(n,t,l,e),o=u(t,n,l,Mr),i}function i(n){return a(n)}var a,o;return i.invert=function(n){return o(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Ur)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Qu(n,t)},i.tickFormat=function(t,e){return ni(n,t,e)},i.nice=function(t){return Gu(n,t),u()},i.copy=function(){return Wu(n,t,e,r)},u()}function Ju(n,t){return oa.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Gu(n,t){return Xu(n,$u(Ku(n,t)[2])),Xu(n,$u(Ku(n,t)[2])),n}function Ku(n,t){null==t&&(t=10);var e=Yu(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Qu(n,t){return oa.range.apply(oa,Ku(n,t))}function ni(n,t,e){var r=Ku(n,t);if(e){var u=fo.exec(e);if(u.shift(),"s"===u[8]){var i=oa.formatPrefix(Math.max(Ma(r[0]),Ma(r[1])));return u[7]||(u[7]="."+ti(i.scale(r[2]))),u[8]="f",e=oa.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+ei(u[8],r)),e=u.join("")}else e=",."+ti(r[2])+"f";return oa.format(e)}function ti(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function ei(n,t){var e=ti(t[2]);return n in kl?Math.abs(e-ti(Math.max(Ma(t[0]),Ma(t[1]))))+ +("e"!==n):e-2*("%"===n)}function ri(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function a(t){return n(u(t))}return a.invert=function(t){return i(n.invert(t))},a.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),a):r},a.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),a):t},a.nice=function(){var t=Xu(r.map(u),e?Math:El);return n.domain(t),r=t.map(i),a},a.ticks=function(){var n=Yu(r),a=[],o=n[0],l=n[1],c=Math.floor(u(o)),s=Math.ceil(u(l)),f=t%1?2:t;if(isFinite(s-c)){if(e){for(;s>c;c++)for(var h=1;f>h;h++)a.push(i(c)*h);a.push(i(c))}else for(a.push(i(c));c++<s;)for(var h=f-1;h>0;h--)a.push(i(c)*h);for(c=0;a[c]<o;c++);for(s=a.length;a[s-1]>l;s--);a=a.slice(c,s)}return a},a.tickFormat=function(n,e){if(!arguments.length)return Nl;arguments.length<2?e=Nl:"function"!=typeof e&&(e=oa.format(e));var r=Math.max(1,t*n/a.ticks().length);return function(n){var a=n/i(Math.round(u(n)));return t-.5>a*t&&(a*=t),r>=a?e(n):""}},a.copy=function(){return ri(n.copy(),t,e,r)},Ju(a,n)}function ui(n,t,e){function r(t){return n(u(t))}var u=ii(t),i=ii(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Qu(e,n)},r.tickFormat=function(n,t){return ni(e,n,t)},r.nice=function(n){return r.domain(Gu(e,n))},r.exponent=function(a){return arguments.length?(u=ii(t=a),i=ii(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return ui(n.copy(),t,e)},Ju(r,n)}function ii(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function ai(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):NaN))-1)%i.length]}function r(t,e){return oa.range(n.length).map(function(n){return t+e*n})}var u,i,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new c;for(var i,a=-1,o=r.length;++a<o;)u.has(i=r[a])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,a=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,o){arguments.length<2&&(o=0);var l=u[0],c=u[1],s=n.length<2?(l=(l+c)/2,0):(c-l)/(n.length-1+o);return i=r(l+s*o/2,s),a=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,o){arguments.length<2&&(o=0);var l=u[0],c=u[1],s=n.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(n.length-1+o)|0;return i=r(l+Math.round(s*o/2+(c-l-(n.length-1+o)*s)/2),s),a=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],f=u[1-c],h=(f-s)/(n.length-o+2*l);return i=r(s+h*l,h),c&&i.reverse(),a=h*(1-o),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],f=u[1-c],h=Math.floor((f-s)/(n.length-o+2*l));return i=r(s+Math.round((f-s-(n.length-o)*h)/2),h),c&&i.reverse(),a=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Yu(t.a[0])},e.copy=function(){return ai(n,t)},e.domain(n)}function oi(n,t){function i(){var e=0,r=t.length;for(o=[];++e<r;)o[e-1]=oa.quantile(n,e/r);return a}function a(n){return isNaN(n=+n)?void 0:t[oa.bisect(o,n)]}var o;return a.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},a.range=function(n){return arguments.length?(t=n,i()):t},a.quantiles=function(){return o},a.invertExtent=function(e){return e=t.indexOf(e),0>e?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},a.copy=function(){return oi(n,t)},i()}function li(n,t,e){function r(t){return e[Math.max(0,Math.min(a,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),a=e.length-1,r}var i,a;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/i+n,[t,t+1/i]},r.copy=function(){return li(n,t,e)},u()}function ci(n,t){function e(e){return e>=e?t[oa.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return ci(n,t)},e}function si(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Qu(n,t)},t.tickFormat=function(t,e){return ni(n,t,e)},t.copy=function(){return si(n)},t}function fi(){return 0}function hi(n){return n.innerRadius}function gi(n){return n.outerRadius}function pi(n){return n.startAngle}function vi(n){return n.endAngle}function di(n){return n&&n.padAngle}function mi(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function yi(n,t,e,r,u){var i=n[0]-t[0],a=n[1]-t[1],o=(u?r:-r)/Math.sqrt(i*i+a*a),l=o*a,c=-o*i,s=n[0]+l,f=n[1]+c,h=t[0]+l,g=t[1]+c,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(Math.max(0,M*M*y-x*x)),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,N=_-p,E=w-v,A=S-p,C=k-v;return N*N+E*E>A*A+C*C&&(_=S,w=k),[[_-l,w-c],[_*e/M,w*e/M]]}function Mi(n){function t(t){function a(){c.push("M",i(n(s),o))}for(var l,c=[],s=[],f=-1,h=t.length,g=En(e),p=En(r);++f<h;)u.call(this,l=t[f],f)?s.push([+g.call(this,l,f),+p.call(this,l,f)]):s.length&&(a(),s=[]);return s.length&&a(),c.length?c.join(""):null}var e=Ce,r=ze,u=zt,i=xi,a=i.key,o=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(a="function"==typeof n?i=n:(i=Tl.get(n)||xi).key,t):a},t.tension=function(n){return arguments.length?(o=n,t):o},t}function xi(n){return n.length>1?n.join("L"):n+"Z"}function bi(n){return n.join("L")+"Z"}function _i(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function wi(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function Si(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function ki(n,t){return n.length<4?xi(n):n[1]+Ai(n.slice(1,-1),Ci(n,t))}function Ni(n,t){return n.length<3?bi(n):n[0]+Ai((n.push(n[0]),n),Ci([n[n.length-2]].concat(n,[n[1]]),t))}function Ei(n,t){return n.length<3?xi(n):n[0]+Ai(n,Ci(n,t))}function Ai(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return xi(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],a=t[0],o=a,l=1;if(e&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],u=n[1],l=2),t.length>1){o=t[1],i=n[l],l++,r+="C"+(u[0]+a[0])+","+(u[1]+a[1])+","+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++)i=n[l],o=t[c],r+="S"+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1]}if(e){var s=n[l];r+="Q"+(i[0]+2*o[0]/3)+","+(i[1]+2*o[1]/3)+","+s[0]+","+s[1]}return r}function Ci(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],a=n[1],o=1,l=n.length;++o<l;)e=i,i=a,a=n[o],r.push([u*(a[0]-e[0]),u*(a[1]-e[1])]);return r}function zi(n){if(n.length<3)return xi(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],a=[u,u,u,(r=n[1])[0]],o=[i,i,i,r[1]],l=[u,",",i,"L",Ri(Pl,a),",",Ri(Pl,o)];for(n.push(n[e-1]);++t<=e;)r=n[t],a.shift(),a.push(r[0]),o.shift(),o.push(r[1]),Di(l,a,o);return n.pop(),l.push("L",r),l.join("")}function Li(n){if(n.length<4)return xi(n);for(var t,e=[],r=-1,u=n.length,i=[0],a=[0];++r<3;)t=n[r],i.push(t[0]),a.push(t[1]);for(e.push(Ri(Pl,i)+","+Ri(Pl,a)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),a.shift(),a.push(t[1]),Di(e,i,a);return e.join("")}function qi(n){for(var t,e,r=-1,u=n.length,i=u+4,a=[],o=[];++r<4;)e=n[r%u],a.push(e[0]),o.push(e[1]);for(t=[Ri(Pl,a),",",Ri(Pl,o)],--r;++r<i;)e=n[r%u],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Di(t,a,o);return t.join("")}function Ti(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],a=n[0][1],o=n[e][0]-i,l=n[e][1]-a,c=-1;++c<=e;)r=n[c],u=c/e,r[0]=t*r[0]+(1-t)*(i+u*o),r[1]=t*r[1]+(1-t)*(a+u*l);return zi(n)}function Ri(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Di(n,t,e){n.push("C",Ri(Rl,t),",",Ri(Rl,e),",",Ri(Dl,t),",",Ri(Dl,e),",",Ri(Pl,t),",",Ri(Pl,e))}function Pi(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Ui(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],a=r[0]=Pi(u,i);++t<e;)r[t]=(a+(a=Pi(u=i,i=n[t+1])))/2;return r[t]=a,r}function ji(n){for(var t,e,r,u,i=[],a=Ui(n),o=-1,l=n.length-1;++o<l;)t=Pi(n[o],n[o+1]),Ma(t)<Pa?a[o]=a[o+1]=0:(e=a[o]/t,r=a[o+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),a[o]=u*e,a[o+1]=u*r));for(o=-1;++o<=l;)u=(n[Math.min(l,o+1)][0]-n[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),i.push([u||0,a[o]*u||0]);return i}function Fi(n){return n.length<3?xi(n):n[0]+Ai(n,ji(n))}function Hi(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Oa,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Oi(n){function t(t){function l(){v.push("M",o(n(m),f),s,c(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=En(e),b=En(u),_=e===r?function(){
return g}:En(r),w=u===i?function(){return p}:En(i);++y<M;)a.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(l(),d=[],m=[]);return d.length&&l(),v.length?v.join(""):null}var e=Ce,r=Ce,u=0,i=ze,a=zt,o=xi,l=o.key,c=o,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(a=n,t):a},t.interpolate=function(n){return arguments.length?(l="function"==typeof n?o=n:(o=Tl.get(n)||xi).key,c=o.reverse||o,s=o.closed?"M":"L",t):l},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Ii(n){return n.radius}function Yi(n){return[n.x,n.y]}function Zi(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Oa;return[e*Math.cos(r),e*Math.sin(r)]}}function Vi(){return 64}function Xi(){return"circle"}function $i(n){var t=Math.sqrt(n/ja);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Bi(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Wi(n,t,e){return Sa(n,Yl),n.namespace=t,n.id=e,n}function Ji(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,a,o){n[i][u].tween.set(t,r(e.call(n,n.__data__,a,o)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Gi(n){return null==n&&(n=""),function(){this.textContent=n}}function Ki(n){return null==n?"__transition__":"__transition_"+n+"__"}function Qi(n,t,e,r,u){function i(n){var t=v.delay;return s.t=t+l,n>=t?a(n-t):void(s.c=a)}function a(e){var u=p.active,i=p[u];i&&(i.timer.c=null,i.timer.t=NaN,--p.count,delete p[u],i.event&&i.event.interrupt.call(n,n.__data__,i.index));for(var a in p)if(r>+a){var c=p[a];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[a]}s.c=o,qn(function(){return s.c&&o(e||1)&&(s.c=null,s.t=NaN),1},0,l),p.active=r,v.event&&v.event.start.call(n,n.__data__,t),g=[],v.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&g.push(r)}),h=v.ease,f=v.duration}function o(u){for(var i=u/f,a=h(i),o=g.length;o>0;)g[--o].call(n,a);return i>=1?(v.event&&v.event.end.call(n,n.__data__,t),--p.count?delete p[r]:delete n[e],1):void 0}var l,s,f,h,g,p=n[e]||(n[e]={active:0,count:0}),v=p[r];v||(l=u.time,s=qn(i,0,l),v=p[r]={tween:new c,time:l,timer:s,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++p.count)}function na(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function ta(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function ea(n){return n.toISOString()}function ra(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=oa.bisect(Kl,u);return i==Kl.length?[t.year,Ku(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Kl[i-1]<Kl[i]/u?i-1:i]:[tc,Ku(n,e)[2]]}return r.invert=function(t){return ua(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(ua)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,ua(+e+1),t).length}var i=r.domain(),a=Yu(i),o=null==n?u(a,10):"number"==typeof n&&u(a,n);return o&&(n=o[0],t=o[1]),r.domain(Xu(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=ua(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=ua(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Yu(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],ua(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return ra(n.copy(),t,e)},Ju(r,n)}function ua(n){return new Date(n)}function ia(n){return JSON.parse(n.responseText)}function aa(n){var t=sa.createRange();return t.selectNode(sa.body),t.createContextualFragment(n.responseText)}var oa={version:"3.5.16"},la=[].slice,ca=function(n){return la.call(n)},sa=this.document;if(sa)try{ca(sa.documentElement.childNodes)[0].nodeType}catch(fa){ca=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),sa)try{sa.createElement("DIV").style.setProperty("opacity",0,"")}catch(ha){var ga=this.Element.prototype,pa=ga.setAttribute,va=ga.setAttributeNS,da=this.CSSStyleDeclaration.prototype,ma=da.setProperty;ga.setAttribute=function(n,t){pa.call(this,n,t+"")},ga.setAttributeNS=function(n,t,e){va.call(this,n,t,e+"")},da.setProperty=function(n,t,e){ma.call(this,n,t+"",e)}}oa.ascending=e,oa.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},oa.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},oa.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},oa.extent=function(n,t){var e,r,u,i=-1,a=n.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<a;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<a;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<a;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},oa.sum=function(n,t){var e,r=0,i=n.length,a=-1;if(1===arguments.length)for(;++a<i;)u(e=+n[a])&&(r+=e);else for(;++a<i;)u(e=+t.call(n,n[a],a))&&(r+=e);return r},oa.mean=function(n,t){var e,i=0,a=n.length,o=-1,l=a;if(1===arguments.length)for(;++o<a;)u(e=r(n[o]))?i+=e:--l;else for(;++o<a;)u(e=r(t.call(n,n[o],o)))?i+=e:--l;return l?i/l:void 0},oa.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},oa.median=function(n,t){var i,a=[],o=n.length,l=-1;if(1===arguments.length)for(;++l<o;)u(i=r(n[l]))&&a.push(i);else for(;++l<o;)u(i=r(t.call(n,n[l],l)))&&a.push(i);return a.length?oa.quantile(a.sort(e),.5):void 0},oa.variance=function(n,t){var e,i,a=n.length,o=0,l=0,c=-1,s=0;if(1===arguments.length)for(;++c<a;)u(e=r(n[c]))&&(i=e-o,o+=i/++s,l+=i*(e-o));else for(;++c<a;)u(e=r(t.call(n,n[c],c)))&&(i=e-o,o+=i/++s,l+=i*(e-o));return s>1?l/(s-1):void 0},oa.deviation=function(){var n=oa.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ya=i(e);oa.bisectLeft=ya.left,oa.bisect=oa.bisectRight=ya.right,oa.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},oa.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},oa.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},oa.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},oa.transpose=function(n){if(!(u=n.length))return[];for(var t=-1,e=oa.min(n,a),r=new Array(e);++t<e;)for(var u,i=-1,o=r[t]=new Array(u);++i<u;)o[i]=n[i][t];return r},oa.zip=function(){return oa.transpose(arguments)},oa.keys=function(n){var t=[];for(var e in n)t.push(e);return t},oa.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},oa.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},oa.merge=function(n){for(var t,e,r,u=n.length,i=-1,a=0;++i<u;)a+=n[i].length;for(e=new Array(a);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--a]=r[t];return e};var Ma=Math.abs;oa.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=o(Ma(e)),a=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++a)>t;)u.push(r/i);else for(;(r=n+e*++a)<t;)u.push(r/i);return u},oa.map=function(n,t){var e=new c;if(n instanceof c)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var a in n)e.set(a,n[a]);return e};var xa="__proto__",ba="\x00";l(c,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),oa.nest=function(){function n(t,a,o){if(o>=i.length)return r?r.call(u,a):e?a.sort(e):a;for(var l,s,f,h,g=-1,p=a.length,v=i[o++],d=new c;++g<p;)(h=d.get(l=v(s=a[g])))?h.push(s):d.set(l,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,o))}):(s={},f=function(e,r){s[e]=n(t,r,o)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=a[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(oa.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return a[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},oa.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},l(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),oa.behavior={},oa.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var _a=["webkit","ms","moz","Moz","o","O"];oa.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},oa.event=null,oa.requote=function(n){return n.replace(wa,"\\$&")};var wa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},ka=function(n,t){return t.querySelector(n)},Na=function(n,t){return t.querySelectorAll(n)},Ea=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(Ea=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(ka=function(n,t){return Sizzle(n,t)[0]||null},Na=Sizzle,Ea=Sizzle.matchesSelector),oa.selection=function(){return oa.select(sa.documentElement)};var Aa=oa.selection.prototype=[];Aa.select=function(n){var t,e,r,u,i=[];n=A(n);for(var a=-1,o=this.length;++a<o;){i.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(u=r[l])?(t.push(e=n.call(u,u.__data__,l,a)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return E(i)},Aa.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var a=this[u],o=-1,l=a.length;++o<l;)(e=a[o])&&(r.push(t=ca(n.call(e,e.__data__,o,u))),t.parentNode=e);return E(r)};var Ca="http://www.w3.org/1999/xhtml",za={svg:"http://www.w3.org/2000/svg",xhtml:Ca,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oa.ns={prefix:za,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),za.hasOwnProperty(e)?{space:za[e],local:n}:n}},Aa.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=oa.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},Aa.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!q(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},Aa.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},Aa.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},Aa.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Aa.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Aa.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},Aa.insert=function(n,t){return n=j(n),t=A(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},Aa.remove=function(){return this.each(F)},Aa.data=function(n,t){function e(n,e){var r,u,i,a=n.length,f=e.length,h=Math.min(a,f),g=new Array(f),p=new Array(f),v=new Array(a);if(t){var d,m=new c,y=new Array(a);for(r=-1;++r<a;)(u=n[r])&&(m.has(d=t.call(u,u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d);for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<a;)r in y&&m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;a>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,o.push(p),l.push(g),s.push(v)}var r,u,i=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++i<a;)(u=r[i])&&(n[i]=u.__data__);return n}var o=Z([]),l=E([]),s=E([]);if("function"==typeof n)for(;++i<a;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<a;)e(r=this[i],n);return l.enter=function(){return o},l.exit=function(){return s},l},Aa.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},Aa.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;a>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var o=0,l=e.length;l>o;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}return E(u)},Aa.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},Aa.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},Aa.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},Aa.call=function(n){var t=ca(arguments);return n.apply(t[0]=this,t),this},Aa.empty=function(){return!this.node()},Aa.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},Aa.size=function(){var n=0;return Y(this,function(){++n}),n};var La=[];oa.selection.enter=Z,oa.selection.enter.prototype=La,La.append=Aa.append,La.empty=Aa.empty,La.node=Aa.node,La.call=Aa.call,La.size=Aa.size,La.select=function(n){for(var t,e,r,u,i,a=[],o=-1,l=this.length;++o<l;){r=(u=this[o]).update,a.push(t=[]),t.parentNode=u.parentNode;for(var c=-1,s=u.length;++c<s;)(i=u[c])?(t.push(r[c]=e=n.call(u.parentNode,i.__data__,c,o)),e.__data__=i.__data__):t.push(null)}return E(a)},La.insert=function(n,t){return arguments.length<2&&(t=V(this)),Aa.insert.call(this,n,t)},oa.select=function(t){var e;return"string"==typeof t?(e=[ka(t,sa)],e.parentNode=sa.documentElement):(e=[t],e.parentNode=n(t)),E([e])},oa.selectAll=function(n){var t;return"string"==typeof n?(t=ca(Na(n,sa)),t.parentNode=sa.documentElement):(t=ca(n),t.parentNode=null),E([t])},Aa.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var qa=oa.map({mouseenter:"mouseover",mouseleave:"mouseout"});sa&&qa.forEach(function(n){"on"+n in sa&&qa.remove(n)});var Ta,Ra=0;oa.mouse=function(n){return J(n,k())};var Da=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;oa.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},oa.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function e(n,t,e,i,a){return function(){function o(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:n,dy:e}))}function l(){t(h,v)&&(m.on(i+d,null).on(a+d,null),y(p),g({type:"dragend"}))}var c,s=this,f=oa.event.target.correspondingElement||oa.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=oa.select(e(f)).on(i+d,o).on(a+d,l),y=W(f),M=t(h,v);u?(c=u.apply(s,arguments),c=[c.x-M[0],c.y-M[1]]):c=[0,0],g({type:"dragstart"})}}var r=N(n,"drag","dragstart","dragend"),u=null,i=e(b,oa.mouse,t,"mousemove","mouseup"),a=e(G,oa.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},oa.rebind(n,r,"on")},oa.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ca(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Pa=1e-6,Ua=Pa*Pa,ja=Math.PI,Fa=2*ja,Ha=Fa-Pa,Oa=ja/2,Ia=ja/180,Ya=180/ja,Za=Math.SQRT2,Va=2,Xa=4;oa.interpolateZoom=function(n,t){var e,r,u=n[0],i=n[1],a=n[2],o=t[0],l=t[1],c=t[2],s=o-u,f=l-i,h=s*s+f*f;if(Ua>h)r=Math.log(c/a)/Za,e=function(n){return[u+n*s,i+n*f,a*Math.exp(Za*n*r)]};else{var g=Math.sqrt(h),p=(c*c-a*a+Xa*h)/(2*a*Va*g),v=(c*c-a*a-Xa*h)/(2*c*Va*g),d=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-d)/Za,e=function(n){var t=n*r,e=rn(d),o=a/(Va*g)*(e*un(Za*t+d)-en(d));return[u+o*s,i+o*f,a*e/rn(Za*t+d)]}}return e.duration=1e3*r,e},oa.behavior.zoom=function(){function n(n){n.on(L,f).on(Ba+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(A[0],Math.min(A[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function a(t,e,r,a){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,a)),i(d=e,r),t=oa.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function o(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function l(n){z++||n({type:"zoomstart"})}function c(n){o(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||(n({type:"zoomend"}),d=null)}function f(){function n(){o=1,i(oa.mouse(u),h),c(a)}function r(){f.on(q,null).on(T,null),g(o),s(a)}var u=this,a=D.of(u,arguments),o=0,f=oa.select(t(u)).on(q,n).on(T,r),h=e(oa.mouse(u)),g=W(u);Il.call(u),l(a)}function h(){function n(){var n=oa.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=oa.event.target;oa.select(t).on(x,r).on(b,o),_.push(t);for(var e=oa.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var l=n(),c=Date.now();if(1===l.length){if(500>c-M){var s=l[0];a(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=c}else if(l.length>1){var s=l[0],f=l[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,a=oa.touches(p);Il.call(p);for(var o=0,l=a.length;l>o;++o,r=null)if(e=a[o],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),c(v)}function o(){if(oa.event.touches.length){for(var t=oa.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}oa.selectAll(_).on(y,null),w.on(L,f).on(R,h),N(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+oa.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=oa.select(p),N=W(p);t(),l(v),w.on(L,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(Il.call(this),v=e(d=m||oa.mouse(this)),l(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*$a())*k.k),i(d,v),c(n)}function p(){var n=oa.mouse(this),t=Math.log(k.k)/Math.LN2;a(this,n,e(n),oa.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},E=[960,500],A=Wa,C=250,z=0,L="mousedown.zoom",q="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=N(n,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in sa?($a=function(){return-oa.event.deltaY*(oa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in sa?($a=function(){return oa.event.wheelDelta},"mousewheel"):($a=function(){return-oa.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Hl?oa.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],u=d?d[0]:e/2,i=d?d[1]:r/2,a=oa.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=a(t),o=e/r[2];this.__chart__=k={x:u-r[0]*o,y:i-r[1]*o,k:o},c(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,l(n),c(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},o(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},u(+t),o(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Wa:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},oa.rebind(n,D,"on")};var $a,Ba,Wa=[0,1/0];oa.color=on,on.prototype.toString=function(){return this.rgb()+""},oa.hsl=ln;var Ja=ln.prototype=new on;Ja.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,this.l/n)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,n*this.l)},Ja.rgb=function(){return cn(this.h,this.s,this.l)},oa.hcl=sn;var Ga=sn.prototype=new on;Ga.brighter=function(n){return new sn(this.h,this.c,Math.min(100,this.l+Ka*(arguments.length?n:1)))},Ga.darker=function(n){return new sn(this.h,this.c,Math.max(0,this.l-Ka*(arguments.length?n:1)))},Ga.rgb=function(){return fn(this.h,this.c,this.l).rgb()},oa.lab=hn;var Ka=18,Qa=.95047,no=1,to=1.08883,eo=hn.prototype=new on;eo.brighter=function(n){return new hn(Math.min(100,this.l+Ka*(arguments.length?n:1)),this.a,this.b)},eo.darker=function(n){return new hn(Math.max(0,this.l-Ka*(arguments.length?n:1)),this.a,this.b)},eo.rgb=function(){return gn(this.l,this.a,this.b)},oa.rgb=yn;var ro=yn.prototype=new on;ro.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new yn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new yn(u,u,u)},ro.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new yn(n*this.r,n*this.g,n*this.b)},ro.hsl=function(){return wn(this.r,this.g,this.b)},ro.toString=function(){return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var uo=oa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});uo.forEach(function(n,t){uo.set(n,Mn(t))}),oa.functor=En,oa.xhr=An(y),oa.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var a=Cn(n,t,null==e?r:u(e),i);return a.row=function(n){return arguments.length?a.response(null==(e=n)?r:u(n)):e},a}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(a).join(n)}function a(n){return o.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var o=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=c)return a;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;c>s;){var r=n.charCodeAt(s++),o=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++o);else if(r!==l)continue;return n.slice(t,s-o)}return n.slice(t)}for(var r,u,i={},a={},o=[],c=n.length,s=0,f=0;(r=e())!==a;){for(var h=[];r!==i&&r!==a;)h.push(r),r=e();t&&null==(h=t(h,f++))||o.push(h)}return o},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(a).join(n)].concat(t.map(function(t){return u.map(function(n){return a(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},oa.csv=oa.dsv(",","text/csv"),oa.tsv=oa.dsv("	","text/tab-separated-values");var io,ao,oo,lo,co=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};oa.timer=function(){qn.apply(this,arguments)},oa.timer.flush=function(){Rn(),Dn()},oa.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var so=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Un);oa.formatPrefix=function(n,t){var e=0;return(n=+n)&&(0>n&&(n*=-1),t&&(n=oa.round(n,Pn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),so[8+e/3]};var fo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ho=oa.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=oa.round(n,Pn(n,t))).toFixed(Math.max(0,Math.min(20,Pn(n*(1+1e-15),t))))}}),go=oa.time={},po=Date;Hn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){vo.setUTCDate.apply(this._,arguments)},setDay:function(){vo.setUTCDay.apply(this._,arguments)},setFullYear:function(){vo.setUTCFullYear.apply(this._,arguments)},setHours:function(){vo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){vo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){vo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){vo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){vo.setUTCSeconds.apply(this._,arguments)},setTime:function(){vo.setTime.apply(this._,arguments)}};var vo=Date.prototype;go.year=On(function(n){return n=go.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),go.years=go.year.range,go.years.utc=go.year.utc.range,go.day=On(function(n){var t=new po(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),go.days=go.day.range,go.days.utc=go.day.utc.range,go.dayOfYear=function(n){var t=go.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=go[n]=On(function(n){return(n=go.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});go[n+"s"]=e.range,go[n+"s"].utc=e.utc.range,go[n+"OfYear"]=function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)}}),go.week=go.sunday,go.weeks=go.sunday.range,go.weeks.utc=go.sunday.utc.range,go.weekOfYear=go.sundayOfYear;var mo={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,Mo=/^%/;oa.locale=function(n){return{numberFormat:jn(n),timeFormat:Yn(n)}};var xo=oa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});oa.format=xo.numberFormat,oa.geo={},st.prototype={s:0,t:0,add:function(n){ft(n,this.t,bo),ft(bo.s,this.s,this),this.s?this.t+=bo.t:this.s=bo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bo=new st;oa.geo.stream=function(n,t){n&&_o.hasOwnProperty(n.type)?_o[n.type](n,t):ht(n,t)};var _o={Feature:function(n,t){ht(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)ht(e[r].geometry,t)}},wo={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){gt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)gt(e[r],t,0)},Polygon:function(n,t){pt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)pt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)ht(e[r],t)}};oa.geo.area=function(n){return So=0,oa.geo.stream(n,No),So};var So,ko=new st,No={sphere:function(){So+=4*ja},point:b,lineStart:b,lineEnd:b,polygonStart:function(){ko.reset(),No.lineStart=vt},polygonEnd:function(){var n=2*ko;So+=0>n?4*ja+n:n,No.lineStart=No.lineEnd=No.point=b}};oa.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=dt([t*Ia,e*Ia]);if(m){var u=yt(m,r),i=[u[1],-u[0],0],a=yt(i,u);bt(a),a=_t(a);var l=t-p,c=l>0?1:-1,v=a[0]*Ya*c,d=Ma(l)>180;if(d^(v>c*p&&c*t>v)){var y=a[1]*Ya;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>c*p&&c*t>v)){var y=-a[1]*Ya;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=Ma(r)>180?r+(r>0?360:-360):r}else v=n,d=e;No.point(n,e),t(n,e)}function i(){No.lineStart()}function a(){u(v,d),No.lineEnd(),Ma(y)>Pa&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function o(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function c(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=a,y=0,No.polygonStart()},polygonEnd:function(){No.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>ko?(s=-(h=180),f=-(g=90)):y>Pa?g=90:-Pa>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],oa.geo.stream(n,b);var t=M.length;if(t){M.sort(l);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],c(e[0],u)||c(e[1],u)?(o(u[0],e[1])>o(u[0],u[1])&&(u[1]=e[1]),o(e[0],u[1])>o(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var a,e,p=-(1/0),t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(a=o(u[1],e[0]))>p&&(p=a,s=e[0],h=u[1])}return M=x=null,s===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[s,f],[h,g]]}}(),oa.geo.centroid=function(n){Eo=Ao=Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,jo);var t=Do,e=Po,r=Uo,u=t*t+e*e+r*r;return Ua>u&&(t=qo,e=To,r=Ro,Pa>Ao&&(t=Co,e=zo,r=Lo),u=t*t+e*e+r*r,Ua>u)?[NaN,NaN]:[Math.atan2(e,t)*Ya,tn(r/Math.sqrt(u))*Ya]};var Eo,Ao,Co,zo,Lo,qo,To,Ro,Do,Po,Uo,jo={sphere:b,point:St,lineStart:Nt,lineEnd:Et,polygonStart:function(){jo.lineStart=At},polygonEnd:function(){jo.lineStart=Nt}},Fo=Rt(zt,jt,Ht,[-ja,-ja/2]),Ho=1e9;oa.geo.clipExtent=function(){var n,t,e,r,u,i,a={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(o){return arguments.length?(i=Zt(n=+o[0][0],t=+o[0][1],e=+o[1][0],r=+o[1][1]),u&&(u.valid=!1,u=null),a):[[n,t],[e,r]]}};return a.extent([[0,0],[960,500]])},(oa.geo.conicEqualArea=function(){return Vt(Xt)}).raw=Xt,oa.geo.albers=function(){return oa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oa.geo.albersUsa=function(){function n(n){var i=n[0],a=n[1];return t=null,e(i,a),t||(r(i,a),t)||u(i,a),t}var t,e,r,u,i=oa.geo.albers(),a=oa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=oa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?a:u>=.166&&.234>u&&r>=-.214&&-.115>r?o:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=a.stream(n),r=o.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),o.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),o.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var c=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*c,f-.238*c],[s+.455*c,f+.238*c]]).stream(l).point,r=a.translate([s-.307*c,f+.201*c]).clipExtent([[s-.425*c+Pa,f+.12*c+Pa],[s-.214*c-Pa,f+.234*c-Pa]]).stream(l).point,u=o.translate([s-.205*c,f+.212*c]).clipExtent([[s-.214*c+Pa,f+.166*c+Pa],[s-.115*c-Pa,f+.234*c-Pa]]).stream(l).point,n},n.scale(1070)};var Oo,Io,Yo,Zo,Vo,Xo,$o={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Io=0,$o.lineStart=$t},polygonEnd:function(){$o.lineStart=$o.lineEnd=$o.point=b,Oo+=Ma(Io/2)}},Bo={point:Bt,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Wo={point:Gt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){Wo.lineStart=ne},polygonEnd:function(){Wo.point=Gt,Wo.lineStart=Kt,Wo.lineEnd=Qt}};oa.geo.path=function(){function n(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=u(i)),oa.geo.stream(n,a)),i.result()}function t(){return a=null,n}var e,r,u,i,a,o=4.5;return n.area=function(n){return Oo=0,oa.geo.stream(n,u($o)),Oo},n.centroid=function(n){return Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,u(Wo)),Uo?[Do/Uo,Po/Uo]:Ro?[qo/Ro,To/Ro]:Lo?[Co/Lo,zo/Lo]:[NaN,NaN]},n.bounds=function(n){return Vo=Xo=-(Yo=Zo=1/0),oa.geo.stream(n,u(Bo)),[[Yo,Zo],[Vo,Xo]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||re(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new Wt:new te(n),"function"!=typeof o&&i.pointRadius(o),t()):r},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(oa.geo.albersUsa()).context(null)},oa.geo.transform=function(n){return{stream:function(t){var e=new ue(t);for(var r in n)e[r]=n[r];return e}}},ue.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oa.geo.projection=ae,oa.geo.projectionMutator=oe,(oa.geo.equirectangular=function(){return ae(ce)}).raw=ce.invert=ce,oa.geo.rotation=function(n){function t(t){return t=n(t[0]*Ia,t[1]*Ia),t[0]*=Ya,t[1]*=Ya,t}return n=fe(n[0]%360*Ia,n[1]*Ia,n.length>2?n[2]*Ia:0),t.invert=function(t){return t=n.invert(t[0]*Ia,t[1]*Ia),t[0]*=Ya,t[1]*=Ya,t},t},se.invert=ce,oa.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=fe(-n[0]*Ia,-n[1]*Ia,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ya,n[1]*=Ya}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ve((t=+r)*Ia,u*Ia),n):t},n.precision=function(r){return arguments.length?(e=ve(t*Ia,(u=+r)*Ia),n):u},n.angle(90)},oa.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Ia,u=n[1]*Ia,i=t[1]*Ia,a=Math.sin(r),o=Math.cos(r),l=Math.sin(u),c=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*a)*e+(e=c*s-l*f*o)*e),l*s+c*f*o)},oa.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return oa.range(Math.ceil(i/d)*d,u,d).map(h).concat(oa.range(Math.ceil(c/m)*m,l,m).map(g)).concat(oa.range(Math.ceil(r/p)*p,e,p).filter(function(n){return Ma(n%d)>Pa}).map(s)).concat(oa.range(Math.ceil(o/v)*v,a,v).filter(function(n){return Ma(n%m)>Pa}).map(f))}var e,r,u,i,a,o,l,c,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(l).slice(1),h(u).reverse().slice(1),g(c).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],c=+t[0][1],l=+t[1][1],i>u&&(t=i,i=u,u=t),c>l&&(t=c,c=l,l=t),n.precision(y)):[[i,c],[u,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),o>a&&(t=o,o=a,a=t),n.precision(y)):[[r,o],[e,a]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=me(o,a,90),f=ye(r,e,y),h=me(c,l,90),g=ye(i,u,y),n):y},n.majorExtent([[-180,-90+Pa],[180,90-Pa]]).minorExtent([[-180,-80-Pa],[180,80+Pa]])},oa.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=Me,u=xe;return n.distance=function(){return oa.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},oa.geo.interpolate=function(n,t){return be(n[0]*Ia,n[1]*Ia,t[0]*Ia,t[1]*Ia)},oa.geo.length=function(n){return Jo=0,oa.geo.stream(n,Go),Jo};var Jo,Go={sphere:b,point:b,lineStart:_e,lineEnd:b,polygonStart:b,polygonEnd:b},Ko=we(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(oa.geo.azimuthalEqualArea=function(){return ae(Ko)}).raw=Ko;var Qo=we(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(oa.geo.azimuthalEquidistant=function(){return ae(Qo)}).raw=Qo,(oa.geo.conicConformal=function(){return Vt(Se)}).raw=Se,(oa.geo.conicEquidistant=function(){return Vt(ke)}).raw=ke;var nl=we(function(n){return 1/n},Math.atan);(oa.geo.gnomonic=function(){return ae(nl)}).raw=nl,Ne.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Oa]},(oa.geo.mercator=function(){return Ee(Ne)}).raw=Ne;var tl=we(function(){return 1},Math.asin);(oa.geo.orthographic=function(){return ae(tl)}).raw=tl;var el=we(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(oa.geo.stereographic=function(){return ae(el)}).raw=el,Ae.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Oa]},(oa.geo.transverseMercator=function(){var n=Ee(Ae),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Ae,oa.geom={},oa.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=En(e),i=En(r),a=n.length,o=[],l=[];for(t=0;a>t;t++)o.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(o.sort(qe),t=0;a>t;t++)l.push([o[t][0],-o[t][1]]);var c=Le(o),s=Le(l),f=s[0]===c[0],h=s[s.length-1]===c[c.length-1],g=[];for(t=c.length-1;t>=0;--t)g.push(n[o[c[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[o[s[t]][2]]);return g}var e=Ce,r=ze;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},oa.geom.polygon=function(n){return Sa(n,rl),n};var rl=oa.geom.polygon.prototype=[];rl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},rl.centroid=function(n){var t,e,r=-1,u=this.length,i=0,a=0,o=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=o,o=this[r],e=t[0]*o[1]-o[0]*t[1],i+=(t[0]+o[0])*e,a+=(t[1]+o[1])*e;return[i*n,a*n]},rl.clip=function(n){for(var t,e,r,u,i,a,o=De(n),l=-1,c=this.length-De(this),s=this[c-1];++l<c;){for(t=n.slice(),n.length=0,u=this[l],i=t[(r=t.length-o)-1],e=-1;++e<r;)a=t[e],Te(a,s,u)?(Te(i,s,u)||n.push(Re(i,a,s,u)),n.push(a)):Te(i,s,u)&&n.push(Re(i,a,s,u)),i=a;o&&n.push(n[0]),s=u}return n};var ul,il,al,ol,ll,cl=[],sl=[];Ye.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ve),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=ar(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(ur(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ir(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ir(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ur(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,a=n.R;if(e=i?a?ar(a):i:a,u?u.L===n?u.L=e:u.R=e:this._=e,i&&a?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==a?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=a,a.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,ur(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ir(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,ur(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ir(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ur(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ir(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},oa.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=o[0][0],u=o[0][1],i=o[1][0],a=o[1][1];return or(e(n),o).cells.forEach(function(e,o){var l=e.edges,c=e.site,s=t[o]=l.length?l.map(function(n){var t=n.start();return[t.x,t.y]}):c.x>=r&&c.x<=i&&c.y>=u&&c.y<=a?[[r,a],[i,a],[i,u],[r,u]]:[];s.point=n[o]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Pa)*Pa,y:Math.round(a(n,t)/Pa)*Pa,i:t}})}var r=Ce,u=ze,i=r,a=u,o=fl;return n?t(n):(t.links=function(n){return or(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return or(e(n)).cells.forEach(function(e,r){for(var u,i,a=e.site,o=e.edges.sort(Ve),l=-1,c=o.length,s=o[c-1].edge,f=s.l===a?s.r:s.l;++l<c;)u=s,i=f,s=o[l].edge,f=s.l===a?s.r:s.l,r<i.i&&r<f.i&&cr(a,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=En(r=n),t):r},t.y=function(n){return arguments.length?(a=En(u=n),t):u},t.clipExtent=function(n){return arguments.length?(o=null==n?fl:n,t):o===fl?null:o},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):o===fl?null:o&&o[1]},t)};var fl=[[-1e6,-1e6],[1e6,1e6]];oa.geom.delaunay=function(n){return oa.geom.voronoi().triangles(n)},oa.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,a,o){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var l=n.x,s=n.y;if(null!=l)if(Ma(l-e)+Ma(s-r)<.01)c(n,t,e,r,u,i,a,o);else{var f=n.point;n.x=n.y=n.point=null,c(n,f,l,s,u,i,a,o),c(n,t,e,r,u,i,a,o)}else n.x=e,n.y=r,n.point=t}else c(n,t,e,r,u,i,a,o)}function c(n,t,e,r,u,a,o,l){var c=.5*(u+o),s=.5*(a+l),f=e>=c,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=hr()),f?u=c:o=c,h?a=s:l=s,i(n,t,e,r,u,a,o,l)}var s,f,h,g,p,v,d,m,y,M=En(o),x=En(l);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,a)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=hr();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){gr(n,k,v,d,m,y)},k.find=function(n){return pr(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var a,o=Ce,l=ze;return(a=arguments.length)?(o=sr,l=fr,3===a&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(o=n,i):o},i.y=function(n){return arguments.length?(l=n,i):l},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},oa.interpolateRgb=vr,oa.interpolateObject=dr,oa.interpolateNumber=mr,oa.interpolateString=yr;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(hl.source,"g");oa.interpolate=Mr,oa.interpolators=[function(n,t){var e=typeof t;return("string"===e?uo.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:yr:t instanceof on?vr:Array.isArray(t)?xr:"object"===e&&isNaN(t)?dr:mr)(n,t)}],oa.interpolateArray=xr;var pl=function(){return y},vl=oa.map({linear:pl,poly:Er,quad:function(){return Sr},cubic:function(){return kr},sin:function(){return Ar},exp:function(){return Cr},circle:function(){return zr},elastic:Lr,back:qr,bounce:function(){return Tr}}),dl=oa.map({"in":y,out:_r,"in-out":wr,"out-in":function(n){return wr(_r(n))}});oa.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=vl.get(e)||pl,r=dl.get(r)||y,br(r(e.apply(null,la.call(arguments,1))))},oa.interpolateHcl=Rr,oa.interpolateHsl=Dr,oa.interpolateLab=Pr,oa.interpolateRound=Ur,oa.transform=function(n){var t=sa.createElementNS(oa.ns.prefix.svg,"g");return(oa.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new jr(e?e.matrix:ml)})(n)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ml={a:1,b:0,c:0,d:1,e:0,f:0};oa.interpolateTransform=$r,oa.layout={},oa.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Jr(n[e]));return t}},oa.layout.chord=function(){function n(){var n,c,f,h,g,p={},v=[],d=oa.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(c=0,g=-1;++g<i;)c+=u[h][g];v.push(c),m.push(oa.range(i)),n+=c}for(a&&d.sort(function(n,t){return a(v[n],v[t])}),o&&m.forEach(function(n,t){n.sort(function(n,e){return o(u[t][n],u[t][e])})}),n=(Fa-s*i)/n,c=0,h=-1;++h<i;){for(f=c,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=c,_=c+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:c,value:v[y]},c+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){e.sort(function(n,t){return l((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,a,o,l,c={},s=0;return c.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,c):u},c.padding=function(n){return arguments.length?(s=n,e=r=null,c):s},c.sortGroups=function(n){return arguments.length?(a=n,e=r=null,c):a},c.sortSubgroups=function(n){return arguments.length?(o=n,e=null,c):o},c.sortChords=function(n){return arguments.length?(l=n,e&&t(),c):l},c.chords=function(){return e||n(),e},c.groups=function(){return r||n(),r},c},oa.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,a=t.cy-n.y,o=u-e,l=i*i+a*a;if(l>o*o/m){if(v>l){var c=t.charge/l;n.px-=i*c,n.py-=a*c}return!0}if(t.point&&l&&v>l){var c=t.pointCharge/l;n.px-=i*c,n.py-=a*c}}return!t.charge}}function t(n){n.px=oa.event.x,n.py=oa.event.y,l.resume()}var e,r,u,i,a,o,l={},c=oa.dispatch("start","tick","end"),s=[1,1],f=.9,h=yl,g=Ml,p=-30,v=xl,d=.1,m=.64,M=[],x=[];return l.tick=function(){if((u*=.99)<.005)return e=null,c.end({type:"end",alpha:u=0}),!0;var t,r,l,h,g,v,m,y,b,_=M.length,w=x.length;for(r=0;w>r;++r)l=x[r],h=l.source,g=l.target,y=g.x-h.x,b=g.y-h.y,(v=y*y+b*b)&&(v=u*a[r]*((v=Math.sqrt(v))-i[r])/v,y*=v,b*=v,g.x-=y*(m=h.weight+g.weight?h.weight/(h.weight+g.weight):.5),g.y-=b*m,h.x+=y*(m=1-m),h.y+=b*m);if((m=u*d)&&(y=s[0]/2,b=s[1]/2,r=-1,m))for(;++r<_;)l=M[r],l.x+=(y-l.x)*m,l.y+=(b-l.y)*m;if(p)for(ru(t=oa.geom.quadtree(M),u,o),r=-1;++r<_;)(l=M[r]).fixed||t.visit(n(l));for(r=-1;++r<_;)l=M[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);c.tick({type:"tick",alpha:u})},l.nodes=function(n){return arguments.length?(M=n,l):M},l.links=function(n){return arguments.length?(x=n,l):x},l.size=function(n){return arguments.length?(s=n,l):s},l.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,l):h},l.distance=l.linkDistance,l.linkStrength=function(n){return arguments.length?(g="function"==typeof n?n:+n,l):g},l.friction=function(n){return arguments.length?(f=+n,l):f},l.charge=function(n){return arguments.length?(p="function"==typeof n?n:+n,l):p},l.chargeDistance=function(n){return arguments.length?(v=n*n,l):Math.sqrt(v)},l.gravity=function(n){return arguments.length?(d=+n,l):d},l.theta=function(n){return arguments.length?(m=n*n,l):Math.sqrt(m)},l.alpha=function(n){return arguments.length?(n=+n,u?n>0?u=n:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:u=0})):n>0&&(c.start({type:"start",alpha:u=n}),e=qn(l.tick)),l):u},l.start=function(){function n(n,r){if(!e){for(e=new Array(u),l=0;u>l;++l)e[l]=[];for(l=0;c>l;++l){var i=x[l];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,o=e[t],l=-1,s=o.length;++l<s;)if(!isNaN(a=o[l][n]))return a;return Math.random()*r}var t,e,r,u=M.length,c=x.length,f=s[0],v=s[1];for(t=0;u>t;++t)(r=M[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=x[t],"number"==typeof r.source&&(r.source=M[r.source]),"number"==typeof r.target&&(r.target=M[r.target]),++r.source.weight,++r.target.weight;for(t=0;u>t;++t)r=M[t],isNaN(r.x)&&(r.x=n("x",f)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(t=0;c>t;++t)i[t]=+h.call(this,x[t],t);else for(t=0;c>t;++t)i[t]=h;if(a=[],"function"==typeof g)for(t=0;c>t;++t)a[t]=+g.call(this,x[t],t);else for(t=0;c>t;++t)a[t]=g;if(o=[],"function"==typeof p)for(t=0;u>t;++t)o[t]=+p.call(this,M[t],t);else for(t=0;u>t;++t)o[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=oa.behavior.drag().origin(y).on("dragstart.force",Qr).on("drag.force",t).on("dragend.force",nu)),arguments.length?void this.on("mouseover.force",tu).on("mouseout.force",eu).call(r):r},oa.rebind(l,c,"on")};var yl=20,Ml=1,xl=1/0;oa.layout.hierarchy=function(){function n(u){var i,a=[u],o=[];for(u.depth=0;null!=(i=a.pop());)if(o.push(i),(c=e.call(n,i,i.depth))&&(l=c.length)){for(var l,c,s;--l>=0;)a.push(s=c[l]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=c}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return au(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),o}var t=cu,e=ou,r=lu;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(iu(t,function(n){n.children&&(n.value=0)}),au(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},oa.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(a=i.length)){var a,o,l,c=-1;for(r=t.value?r/t.value:0;++c<a;)n(o=i[c],e,l=o.value*r,u),e+=l}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var a=r.call(this,e,i);return n(a[0],0,u[0],u[1]/t(a[0])),a}var r=oa.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},uu(e,r)},oa.layout.pie=function(){function n(a){var o,l=a.length,c=a.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/l,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=oa.sum(c),v=p?(f-l*g)/p:0,d=oa.range(l),m=[];return null!=e&&d.sort(e===bl?function(n,t){return c[t]-c[n]}:function(n,t){return e(a[n],a[t])}),d.forEach(function(n){m[n]={data:a[n],value:o=c[n],startAngle:s,endAngle:s+=o*v+g,padAngle:h}}),m}var t=Number,e=bl,r=0,u=Fa,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var bl={};oa.layout.stack=function(){function n(o,l){if(!(h=o.length))return o;var c=o.map(function(e,r){return t.call(n,e,r)}),s=c.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),a.call(n,t,e)]})}),f=e.call(n,s,l);c=oa.permute(c,f),s=oa.permute(s,f);var h,g,p,v,d=r.call(n,s,l),m=c[0].length;for(p=0;m>p;++p)for(u.call(n,c[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,c[g][p],v+=s[g-1][p][1],s[g][p][1]);return o}var t=y,e=pu,r=vu,u=gu,i=fu,a=hu;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:_l.get(t)||pu,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:wl.get(t)||vu,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(a=t,n):a},n.out=function(t){return arguments.length?(u=t,n):u},n};var _l=oa.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(du),i=n.map(mu),a=oa.range(r).sort(function(n,t){return u[n]-u[t]}),o=0,l=0,c=[],s=[];for(t=0;r>t;++t)e=a[t],l>o?(o+=i[e],c.push(e)):(l+=i[e],s.push(e));return s.reverse().concat(c)},reverse:function(n){return oa.range(n.length).reverse()},"default":pu}),wl=oa.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,a=[],o=0,l=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>o&&(o=r),a.push(r)}for(e=0;i>e;++e)l[e]=(o-a[e])/2;return l},wiggle:function(n){var t,e,r,u,i,a,o,l,c,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=l=c=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,o=f[e][0]-f[e-1][0];s>t;++t){for(r=0,a=(n[t][e][1]-n[t][e-1][1])/(2*o);t>r;++r)a+=(n[r][e][1]-n[r][e-1][1])/o;i+=a*n[t][e][1]}g[e]=l-=u?i/u*o:0,c>l&&(c=l)}for(e=0;h>e;++e)g[e]-=c;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,a=1/u,o=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=a}for(e=0;i>e;++e)o[e]=0;return o},zero:vu});oa.layout.histogram=function(){function n(n,i){for(var a,o,l=[],c=n.map(e,this),s=r.call(this,c,i),f=u.call(this,s,c,i),i=-1,h=c.length,g=f.length-1,p=t?1:1/h;++i<g;)a=l[i]=[],a.dx=f[i+1]-(a.x=f[i]),a.y=0;if(g>0)for(i=-1;++i<h;)o=c[i],o>=s[0]&&o<=s[1]&&(a=l[oa.bisect(f,o,1,g)-1],a.y+=p,a.push(n[i]));return l}var t=!0,e=Number,r=bu,u=Mu;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=En(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return xu(n,t)}:En(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},oa.layout.pack=function(){function n(n,i){var a=e.call(this,n,i),o=a[0],l=u[0],c=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(o.x=o.y=0,au(o,function(n){n.r=+s(n.value)}),au(o,Nu),r){var f=r*(t?1:Math.max(2*o.r/l,2*o.r/c))/2;au(o,function(n){n.r+=f}),au(o,Nu),au(o,function(n){n.r-=f})}return Cu(o,l/2,c/2,t?1:1/Math.max(2*o.r/l,2*o.r/c)),a}var t,e=oa.layout.hierarchy().sort(_u),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},uu(n,e)},oa.layout.tree=function(){function n(n,u){var s=a.call(this,n,u),f=s[0],h=t(f);if(au(h,e),h.parent.m=-h.z,iu(h,r),c)iu(f,i);else{var g=f,p=f,v=f;iu(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=o(g,p)/2-g.x,m=l[0]/(p.x+o(p,g)/2+d),y=l[1]/(v.depth||1);iu(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,a=0,o=i.length;o>a;++a)r.push((i[a]=u={_:i[a],parent:t,children:(u=i[a].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Du(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+o(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+o(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,a=t,l=u.parent.children[0],c=u.m,s=i.m,f=a.m,h=l.m;a=Tu(a),u=qu(u),a&&u;)l=qu(l),i=Tu(i),i.a=n,r=a.z+f-u.z-c+o(a._,u._),r>0&&(Ru(Pu(a,n,e),n,r),c+=r,s+=r),f+=a.m,c+=u.m,h+=l.m,s+=i.m;a&&!Tu(i)&&(i.t=a,i.m+=f-s),u&&!qu(l)&&(l.t=u,l.m+=c-h,e=n)}return e}function i(n){n.x*=l[0],n.y=n.depth*l[1]}var a=oa.layout.hierarchy().sort(null).value(null),o=Lu,l=[1,1],c=null;return n.separation=function(t){return arguments.length?(o=t,n):o},n.size=function(t){return arguments.length?(c=null==(l=t)?i:null,n):c?null:l},n.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:i,n):c?l:null},uu(n,a)},oa.layout.cluster=function(){function n(n,i){var a,o=t.call(this,n,i),l=o[0],c=0;au(l,function(n){var t=n.children;t&&t.length?(n.x=ju(t),n.y=Uu(t)):(n.x=a?c+=e(n,a):0,n.y=0,a=n)});var s=Fu(l),f=Hu(l),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return au(l,u?function(n){n.x=(n.x-l.x)*r[0],n.y=(l.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(l.y?n.y/l.y:1))*r[1]}),o}var t=oa.layout.hierarchy().sort(null).value(null),e=Lu,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},uu(n,t)},oa.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var a,o,l,c=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?c.dx:"dice"===g?c.dy:"slice-dice"===g?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(n(h,c.dx*c.dy/e.value),s.area=0;(l=h.length)>0;)s.push(a=h[l-1]),s.area+=a.area,"squarify"!==g||(o=r(s,v))<=p?(h.pop(),p=o):(s.area-=s.pop().area,u(s,v,c,!1),v=Math.min(c.dx,c.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,c,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,a=f(t),o=r.slice(),l=[];for(n(o,a.dx*a.dy/t.value),l.area=0;i=o.pop();)l.push(i),l.area+=i.area,null!=i.z&&(u(l,i.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,a=-1,o=n.length;++a<o;)(e=n[a].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,a=n.length,o=e.x,c=e.y,s=t?l(n.area/t):0;
if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<a;)u=n[i],u.x=o,u.y=c,u.dy=s,o+=u.dx=Math.min(e.x+e.dx-o,s?l(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-o,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<a;)u=n[i],u.x=o,u.y=c,u.dx=s,c+=u.dy=Math.min(e.y+e.dy-c,s?l(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-c,e.x+=s,e.dx-=s}}function i(r){var u=a||o(r),i=u[0];return i.x=i.y=0,i.value?(i.dx=c[0],i.dy=c[1]):i.dx=i.dy=0,a&&o.revalue(i),n([i],i.dx*i.dy/i.value),(a?e:t)(i),h&&(a=u),u}var a,o=oa.layout.hierarchy(),l=Math.round,c=[1,1],s=null,f=Ou,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(c=n,i):c},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ou(t):Iu(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Iu(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ou:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(l=n?Math.round:Number,i):l!=Number},i.sticky=function(n){return arguments.length?(h=n,a=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},uu(i,o)},oa.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=oa.random.normal.apply(oa,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=oa.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},oa.scale={};var Sl={floor:y,ceil:y};oa.scale.linear=function(){return Wu([0,1],[0,1],Mr,!1)};var kl={s:1,g:1,p:1,r:1,e:1};oa.scale.log=function(){return ri(oa.scale.linear().domain([0,1]),10,!0,[1,10])};var Nl=oa.format(".0e"),El={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};oa.scale.pow=function(){return ui(oa.scale.linear(),1,[0,1])},oa.scale.sqrt=function(){return oa.scale.pow().exponent(.5)},oa.scale.ordinal=function(){return ai([],{t:"range",a:[[]]})},oa.scale.category10=function(){return oa.scale.ordinal().range(Al)},oa.scale.category20=function(){return oa.scale.ordinal().range(Cl)},oa.scale.category20b=function(){return oa.scale.ordinal().range(zl)},oa.scale.category20c=function(){return oa.scale.ordinal().range(Ll)};var Al=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),zl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Ll=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);oa.scale.quantile=function(){return oi([],[])},oa.scale.quantize=function(){return li(0,1,[0,1])},oa.scale.threshold=function(){return ci([.5],[0,1])},oa.scale.identity=function(){return si([0,1])},oa.svg={},oa.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),s=a.apply(this,arguments)-Oa,f=o.apply(this,arguments)-Oa,h=Math.abs(f-s),g=s>f?0:1;if(n>c&&(p=c,c=n,n=p),h>=Ha)return t(c,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,N=0,E=0,A=[];if((m=(+l.apply(this,arguments)||0)/2)&&(d=i===ql?Math.sqrt(n*n+c*c):+i.apply(this,arguments),g||(E*=-1),c&&(E=tn(d/c*Math.sin(m))),n&&(N=tn(d/n*Math.sin(m)))),c){y=c*Math.cos(s+E),M=c*Math.sin(s+E),x=c*Math.cos(f-E),b=c*Math.sin(f-E);var C=Math.abs(f-s-2*E)<=ja?0:1;if(E&&mi(y,M,x,b)===g^C){var z=(s+f)/2;y=c*Math.cos(z),M=c*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-N),w=n*Math.sin(f-N),S=n*Math.cos(s+N),k=n*Math.sin(s+N);var L=Math.abs(s-f+2*N)<=ja?0:1;if(N&&mi(_,w,S,k)===1-g^L){var q=(s+f)/2;_=n*Math.cos(q),w=n*Math.sin(q),S=k=null}}else _=w=0;if(h>Pa&&(p=Math.min(Math.abs(c-n)/2,+u.apply(this,arguments)))>.001){v=c>n^g?0:1;var T=p,R=p;if(ja>h){var D=null==S?[_,w]:null==x?[y,M]:Re([y,M],[S,k],[x,b],[_,w]),P=y-D[0],U=M-D[1],j=x-D[0],F=b-D[1],H=1/Math.sin(Math.acos((P*j+U*F)/(Math.sqrt(P*P+U*U)*Math.sqrt(j*j+F*F)))/2),O=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(p,(n-O)/(H-1)),T=Math.min(p,(c-O)/(H+1))}if(null!=x){var I=yi(null==S?[_,w]:[S,k],[y,M],c,T,g),Y=yi([x,b],[_,w],c,T,g);p===T?A.push("M",I[0],"A",T,",",T," 0 0,",v," ",I[1],"A",c,",",c," 0 ",1-g^mi(I[1][0],I[1][1],Y[1][0],Y[1][1]),",",g," ",Y[1],"A",T,",",T," 0 0,",v," ",Y[0]):A.push("M",I[0],"A",T,",",T," 0 1,",v," ",Y[0])}else A.push("M",y,",",M);if(null!=S){var Z=yi([y,M],[S,k],n,-R,g),V=yi([_,w],null==x?[y,M]:[x,b],n,-R,g);p===R?A.push("L",V[0],"A",R,",",R," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^mi(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",R,",",R," 0 0,",v," ",Z[0]):A.push("L",V[0],"A",R,",",R," 0 0,",v," ",Z[0])}else A.push("L",_,",",w)}else A.push("M",y,",",M),null!=x&&A.push("A",c,",",c," 0 ",C,",",g," ",x,",",b),A.push("L",_,",",w),null!=S&&A.push("A",n,",",n," 0 ",L,",",1-g," ",S,",",k);return A.push("Z"),A.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=hi,r=gi,u=fi,i=ql,a=pi,o=vi,l=di;return n.innerRadius=function(t){return arguments.length?(e=En(t),n):e},n.outerRadius=function(t){return arguments.length?(r=En(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=En(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==ql?ql:En(t),n):i},n.startAngle=function(t){return arguments.length?(a=En(t),n):a},n.endAngle=function(t){return arguments.length?(o=En(t),n):o},n.padAngle=function(t){return arguments.length?(l=En(t),n):l},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Oa;return[Math.cos(t)*n,Math.sin(t)*n]},n};var ql="auto";oa.svg.line=function(){return Mi(y)};var Tl=oa.map({linear:xi,"linear-closed":bi,step:_i,"step-before":wi,"step-after":Si,basis:zi,"basis-open":Li,"basis-closed":qi,bundle:Ti,cardinal:Ei,"cardinal-open":ki,"cardinal-closed":Ni,monotone:Fi});Tl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Rl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];oa.svg.line.radial=function(){var n=Mi(Hi);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},wi.reverse=Si,Si.reverse=wi,oa.svg.area=function(){return Oi(y)},oa.svg.area.radial=function(){var n=Oi(Hi);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},oa.svg.chord=function(){function n(n,o){var l=t(this,i,n,o),c=t(this,a,n,o);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,c)?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=o.call(n,u,r),a=l.call(n,u,r)-Oa,s=c.call(n,u,r)-Oa;return{r:i,a0:a,a1:s,p0:[i*Math.cos(a),i*Math.sin(a)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>ja)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=Me,a=xe,o=Ii,l=pi,c=vi;return n.radius=function(t){return arguments.length?(o=En(t),n):o},n.source=function(t){return arguments.length?(i=En(t),n):i},n.target=function(t){return arguments.length?(a=En(t),n):a},n.startAngle=function(t){return arguments.length?(l=En(t),n):l},n.endAngle=function(t){return arguments.length?(c=En(t),n):c},n},oa.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),a=e.call(this,n,u),o=(i.y+a.y)/2,l=[i,{x:i.x,y:o},{x:a.x,y:o},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Me,e=xe,r=Yi;return n.source=function(e){return arguments.length?(t=En(e),n):t},n.target=function(t){return arguments.length?(e=En(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},oa.svg.diagonal.radial=function(){var n=oa.svg.diagonal(),t=Yi,e=n.projection;return n.projection=function(n){return arguments.length?e(Zi(t=n)):t},n},oa.svg.symbol=function(){function n(n,r){return(Ul.get(t.call(this,n,r))||$i)(e.call(this,n,r))}var t=Xi,e=Vi;return n.type=function(e){return arguments.length?(t=En(e),n):t},n.size=function(t){return arguments.length?(e=En(t),n):e},n};var Ul=oa.map({circle:$i,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Fl)),e=t*Fl;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});oa.svg.symbolTypes=Ul.keys();var jl=Math.sqrt(3),Fl=Math.tan(30*Ia);Aa.transition=function(n){for(var t,e,r=Hl||++Zl,u=Ki(n),i=[],a=Ol||{time:Date.now(),ease:Nr,delay:0,duration:250},o=-1,l=this.length;++o<l;){i.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(e=c[s])&&Qi(e,s,u,r,a),t.push(e)}return Wi(i,u,r)},Aa.interrupt=function(n){return this.each(null==n?Il:Bi(Ki(n)))};var Hl,Ol,Il=Bi(Ki()),Yl=[],Zl=0;Yl.call=Aa.call,Yl.empty=Aa.empty,Yl.node=Aa.node,Yl.size=Aa.size,oa.transition=function(n,t){return n&&n.transition?Hl?n.transition(t):n:oa.selection().transition(n)},oa.transition.prototype=Yl,Yl.select=function(n){var t,e,r,u=this.id,i=this.namespace,a=[];n=A(n);for(var o=-1,l=this.length;++o<l;){a.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(r=c[s])&&(e=n.call(r,r.__data__,s,o))?("__data__"in r&&(e.__data__=r.__data__),Qi(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Wi(a,i,u)},Yl.selectAll=function(n){var t,e,r,u,i,a=this.id,o=this.namespace,l=[];n=C(n);for(var c=-1,s=this.length;++c<s;)for(var f=this[c],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[o][a],e=n.call(r,r.__data__,h,c),l.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&Qi(u,p,o,a,i),t.push(u)}return Wi(l,o,a)},Yl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;a>i;i++){u.push(t=[]);for(var e=this[i],o=0,l=e.length;l>o;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}return Wi(u,this.namespace,this.id)},Yl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Yl.attr=function(n,t){function e(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(o);return e!==n&&(t=a(e,n),function(n){this.setAttribute(o,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(o.space,o.local);return e!==n&&(t=a(e,n),function(n){this.setAttributeNS(o.space,o.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var a="transform"==n?$r:Mr,o=oa.ns.qualify(n);return Ji(this,"attr."+n,t,o.local?i:u)},Yl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=oa.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Yl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=Mr(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof n){2>a&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Ji(this,"style."+n,e,i)},Yl.styleTween=function(n,e,r){function u(u,i){var a=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return a&&function(t){this.style.setProperty(n,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Yl.text=function(n){return Ji(this,"text",n,Gi)},Yl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=oa.ease.apply(oa,arguments)),Y(this,function(r){r[e][t].ease=n}))},Yl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Yl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Yl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Ol,i=Hl;try{Hl=e,Y(this,function(t,u,i){Ol=t[r][e],n.call(t,t.__data__,u,i)})}finally{Ol=u,Hl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=oa.dispatch("start","end","interrupt"))).on(n,t)});return this},Yl.transition=function(){for(var n,t,e,r,u=this.id,i=++Zl,a=this.namespace,o=[],l=0,c=this.length;c>l;l++){o.push(n=[]);for(var t=this[l],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[a][u],Qi(e,s,a,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Wi(o,a,i)},oa.svg.axis=function(){function n(n){n.each(function(){var n,c=oa.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,o):f.domain():l,g=null==t?f.tickFormat?f.tickFormat.apply(f,o):y:t,p=c.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Pa),d=oa.transition(p.exit()).style("opacity",Pa).remove(),m=oa.transition(p.order()).style("opacity",1),M=Math.max(u,0)+a,x=Zu(f),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),oa.transition(b));v.append("line"),v.append("text");var w,S,k,N,E=v.select("line"),A=m.select("line"),C=p.select("text").text(g),z=v.select("text"),L=m.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=na,w="x",k="y",S="x2",N="y2",C.attr("dy",0>q?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+q*i+"V0H"+x[1]+"V"+q*i)):(n=ta,w="y",k="x",S="y2",N="x2",C.attr("dy",".32em").style("text-anchor",0>q?"end":"start"),_.attr("d","M"+q*i+","+x[0]+"H0V"+x[1]+"H"+q*i)),E.attr(N,q*u),z.attr(k,q*M),A.attr(S,0).attr(N,q*u),L.attr(w,0).attr(k,q*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=oa.scale.linear(),r=Vl,u=6,i=6,a=3,o=[10],l=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Xl?t+"":Vl,n):r},n.ticks=function(){return arguments.length?(o=ca(arguments),n):o},n.tickValues=function(t){return arguments.length?(l=t,n):l},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(a=+t,n):a},n.tickSubdivide=function(){return arguments.length&&n},n};var Vl="bottom",Xl={top:1,right:1,bottom:1,left:1};oa.svg.brush=function(){function n(t){t.each(function(){var t=oa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=t.selectAll(".resize").data(v,y);o.exit().remove(),o.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return $l[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",n.empty()?"none":null);var l,f=oa.transition(t),h=oa.transition(a);c&&(l=Zu(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),s&&(l=Zu(s),h.attr("y",l[0]).attr("height",l[1]-l[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==oa.event.keyCode&&(C||(M=null,L[0]-=f[1],L[1]-=h[1],C=2),S())}function v(){32==oa.event.keyCode&&2==C&&(L[0]+=f[1],L[1]+=h[1],C=0,S())}function d(){var n=oa.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(oa.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(n[0]<M[0])],L[1]=h[+(n[1]<M[1])]):M=null),E&&m(n,c,0)&&(r(k),t=!0),A&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Zu(t),l=i[0],c=i[1],s=L[e],v=e?h:f,d=v[1]-v[0];return C&&(l-=s,c-=d+s),r=(e?p:g)?Math.max(l,Math.min(c,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(l,Math.min(c,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?o=null:a=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),oa.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=oa.select(oa.event.target),w=l.of(b,arguments),k=oa.select(b),N=_.datum(),E=!/^(n|s)$/.test(N)&&c,A=!/^(e|w)$/.test(N)&&s,C=_.classed("extent"),z=W(b),L=oa.mouse(b),q=oa.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(oa.event.changedTouches?q.on("touchmove.brush",d).on("touchend.brush",y):q.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(N){var T=+/w$/.test(N),R=+/^n/.test(N);x=[f[1-T]-L[0],h[1-R]-L[1]],L[0]=f[T],L[1]=h[R]}else oa.event.altKey&&(M=L.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),oa.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var a,o,l=N(n,"brushstart","brush","brushend"),c=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Bl[0];return n.event=function(n){n.each(function(){var n=l.of(this,arguments),t={x:f,y:h,i:a,j:o},e=this.__chart__||t;this.__chart__=t,Hl?oa.select(this).transition().each("start.brush",function(){a=e.i,o=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(f,t.x),r=xr(h,t.y);return a=o=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,v=Bl[!c<<1|!s],n):c},n.y=function(t){return arguments.length?(s=t,v=Bl[!c<<1|!s],n):s},n.clamp=function(t){return arguments.length?(c&&s?(g=!!t[0],p=!!t[1]):c?g=!!t:s&&(p=!!t),n):c&&s?[g,p]:c?g:s?p:null},n.extent=function(t){var e,r,u,i,l;return arguments.length?(c&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),a=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(l=e,e=r,r=l),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],c&&(u=u[1],i=i[1]),o=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(l=u,u=i,i=l),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(c&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(l=e,e=r,r=l))),s&&(o?(u=o[0],i=o[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(l=u,u=i,i=l))),c&&s?[[e,u],[r,i]]:c?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],a=o=null),n},n.empty=function(){return!!c&&f[0]==f[1]||!!s&&h[0]==h[1]},oa.rebind(n,l,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=go.format=xo.timeFormat,Jl=Wl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ea:Gl,ea.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},ea.toString=Gl.toString,go.second=On(function(n){return new po(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),go.seconds=go.second.range,go.seconds.utc=go.second.utc.range,go.minute=On(function(n){return new po(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),go.minutes=go.minute.range,go.minutes.utc=go.minute.utc.range,go.hour=On(function(n){var t=n.getTimezoneOffset()/60;return new po(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),go.hours=go.hour.range,go.hours.utc=go.hour.utc.range,go.month=On(function(n){return n=go.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),go.months=go.month.range,go.months.utc=go.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[go.second,1],[go.second,5],[go.second,15],[go.second,30],[go.minute,1],[go.minute,5],[go.minute,15],[go.minute,30],[go.hour,1],[go.hour,3],[go.hour,6],[go.hour,12],[go.day,1],[go.day,2],[go.week,1],[go.month,1],[go.month,3],[go.year,1]],nc=Wl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",zt]]),tc={range:function(n,t,e){return oa.range(Math.ceil(n/e)*e,+t,e).map(ua)},floor:y,ceil:y};Ql.year=go.year,go.scale=function(){return ra(oa.scale.linear(),Ql,nc)};var ec=Ql.map(function(n){return[n[0].utc,n[1]]}),rc=Jl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",zt]]);ec.year=go.year.utc,go.scale.utc=function(){return ra(oa.scale.linear(),ec,rc)},oa.text=An(function(n){return n.responseText}),oa.json=function(n,t){return Cn(n,"application/json",ia,t)},oa.html=function(n,t){return Cn(n,"text/html",aa,t)},oa.xml=An(function(n){return n.responseXML}),"function"==typeof define&&define.amd?(this.d3=oa,define(oa)):"object"==typeof module&&module.exports?module.exports=oa:this.d3=oa}();
/*! nouislider - 12.0.0 - 9/14/2018 */

!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";var et="12.0.0";function s(t){return null!=t}function rt(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function nt(t,e,r){0<r&&(at(t,e),setTimeout(function(){st(t,e)},r))}function it(t){return Math.max(Math.min(t,100),0)}function ot(t){return Array.isArray(t)?t:[t]}function e(t){var e=(t=String(t)).split(".");return 1<e.length?e[1].length:0}function at(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function st(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function lt(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function c(t,e){return 100/(e-t)}function p(t,e){return 100*e/(t[1]-t[0])}function f(t,e){for(var r=1;t>=e[r];)r+=1;return r}function r(t,e,r){if(r>=t.slice(-1)[0])return 100;var n,i,o=f(r,t),a=t[o-1],s=t[o],l=e[o-1],u=e[o];return l+(i=r,p(n=[a,s],n[0]<0?i+Math.abs(n[0]):i-n[0])/c(l,u))}function n(t,e,r,n){if(100===n)return n;var i,o,a=f(n,t),s=t[a-1],l=t[a];return r?(l-s)/2<n-s?l:s:e[a-1]?t[a-1]+(i=n-t[a-1],o=e[a-1],Math.round(i/o)*o):n}function o(t,e,r){var n;if("number"==typeof e&&(e=[e]),!Array.isArray(e))throw new Error("noUiSlider ("+et+"): 'range' contains invalid value.");if(!i(n="min"===t?0:"max"===t?100:parseFloat(t))||!i(e[0]))throw new Error("noUiSlider ("+et+"): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(e[0]),n?r.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(r.xSteps[0]=e[1]),r.xHighestCompleteStep.push(0)}function a(t,e,r){if(!e)return!0;r.xSteps[t]=p([r.xVal[t],r.xVal[t+1]],e)/c(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}function l(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),n=0;n<i.length;n++)o(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)a(n,this.xNumSteps[n],this)}l.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error("noUiSlider ("+et+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&p(this.xVal,t)},l.prototype.toStepping=function(t){return t=r(this.xVal,this.xPct,t)},l.prototype.fromStepping=function(t){return function(t,e,r){if(100<=r)return t.slice(-1)[0];var n,i=f(r,e),o=t[i-1],a=t[i],s=e[i-1],l=e[i];return n=[o,a],(r-s)*c(s,l)*(n[1]-n[0])/100+n[0]}(this.xVal,this.xPct,t)},l.prototype.getStep=function(t){return t=n(this.xPct,this.xSteps,this.snap,t)},l.prototype.getNearbySteps=function(t){var e=f(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},l.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(e);return Math.max.apply(null,t)},l.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var u={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function d(t){if("object"==typeof(e=t)&&"function"==typeof e.to&&"function"==typeof e.from)return!0;var e;throw new Error("noUiSlider ("+et+"): 'format' requires 'to' and 'from' methods.")}function h(t,e){if(!i(e))throw new Error("noUiSlider ("+et+"): 'step' is not numeric.");t.singleStep=e}function m(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider ("+et+"): 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider ("+et+"): Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider ("+et+"): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new l(e,t.snap,t.singleStep)}function g(t,e){if(e=ot(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider ("+et+"): 'start' option is incorrect.");t.handles=e.length,t.start=e}function v(t,e){if("boolean"!=typeof(t.snap=e))throw new Error("noUiSlider ("+et+"): 'snap' option must be a boolean.")}function b(t,e){if("boolean"!=typeof(t.animate=e))throw new Error("noUiSlider ("+et+"): 'animate' option must be a boolean.")}function S(t,e){if("number"!=typeof(t.animationDuration=e))throw new Error("noUiSlider ("+et+"): 'animationDuration' option must be a number.")}function w(t,e){var r,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider ("+et+"): 'connect' option doesn't match handle count.");n=e}t.connect=n}function x(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider ("+et+"): 'orientation' option is invalid.")}}function y(t,e){if(!i(e))throw new Error("noUiSlider ("+et+"): 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider ("+et+"): 'margin' option is only supported on linear sliders.")}function E(t,e){if(!i(e))throw new Error("noUiSlider ("+et+"): 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider ("+et+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function C(t,e){if(!i(e)&&!Array.isArray(e))throw new Error("noUiSlider ("+et+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!i(e[0])&&!i(e[1]))throw new Error("noUiSlider ("+et+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){if(Array.isArray(e)||(e=[e,e]),!(t.padding=[t.spectrum.getMargin(e[0]),t.spectrum.getMargin(e[1])])===t.padding[0]||!1===t.padding[1])throw new Error("noUiSlider ("+et+"): 'padding' option is only supported on linear sliders.");if(t.padding[0]<0||t.padding[1]<0)throw new Error("noUiSlider ("+et+"): 'padding' option must be a positive number(s).");if(100<=t.padding[0]+t.padding[1])throw new Error("noUiSlider ("+et+"): 'padding' option must not exceed 100% of the range.")}}function N(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider ("+et+"): 'direction' option was not recognized.")}}function U(t,e){if("string"!=typeof e)throw new Error("noUiSlider ("+et+"): 'behaviour' must be a string containing options.");var r=0<=e.indexOf("tap"),n=0<=e.indexOf("drag"),i=0<=e.indexOf("fixed"),o=0<=e.indexOf("snap"),a=0<=e.indexOf("hover");if(i){if(2!==t.handles)throw new Error("noUiSlider ("+et+"): 'fixed' behaviour must be used with 2 handles");y(t,t.start[1]-t.start[0])}t.events={tap:r||o,drag:n,fixed:i,snap:o,hover:a}}function k(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=ot(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider ("+et+"): must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider ("+et+"): 'tooltips' must be passed a formatter or 'false'.")})}}function P(t,e){d(t.ariaFormat=e)}function A(t,e){d(t.format=e)}function M(t,e){if("boolean"!=typeof(t.keyboardSupport=e))throw new Error("noUiSlider ("+et+"): 'keyboardSupport' option must be a boolean.")}function V(t,e){t.documentElement=e}function O(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider ("+et+"): 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function L(t,e){if("object"!=typeof e)throw new Error("noUiSlider ("+et+"): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},e)e.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+e[r]);else t.cssClasses=e}function ut(e){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:u,format:u},n={step:{r:!1,t:h},start:{r:!0,t:g},connect:{r:!0,t:w},direction:{r:!0,t:N},snap:{r:!1,t:v},animate:{r:!1,t:b},animationDuration:{r:!1,t:S},range:{r:!0,t:m},orientation:{r:!1,t:x},margin:{r:!1,t:y},limit:{r:!1,t:E},padding:{r:!1,t:C},behaviour:{r:!0,t:U},ariaFormat:{r:!1,t:P},format:{r:!1,t:A},tooltips:{r:!1,t:k},keyboardSupport:{r:!0,t:M},documentElement:{r:!1,t:V},cssPrefix:{r:!0,t:O},cssClasses:{r:!0,t:L}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach(function(t){if(!s(e[t])&&void 0===i[t]){if(n[t].r)throw new Error("noUiSlider ("+et+"): '"+t+"' is required.");return!0}n[t].t(r,s(e[t])?e[t]:i[t])}),r.pips=e.pips;var t=document.createElement("div"),o=void 0!==t.style.msTransform,a=void 0!==t.style.transform;r.transformRule=a?"transform":o?"msTransform":"webkitTransform";return r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}function z(t,f,o){var l,u,s,a,c,e,p,i,d=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},h=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),y=t,m=[],g=[],v=0,E=f.spectrum,b=[],S={},w=t.ownerDocument,x=f.documentElement||w.documentElement,C=w.body,N=-1,U=0,k=1,P=2,A="rtl"===w.dir||1===f.ort?0:100;function M(t,e){var r=w.createElement("div");return e&&at(r,e),t.appendChild(r),r}function V(t,e){return!!e&&M(t,f.cssClasses.connect)}function r(t,e){return!!f.tooltips[e]&&M(t.firstChild,f.cssClasses.tooltip)}function O(e,i,o){var a=w.createElement("div"),s=[];s[U]=f.cssClasses.valueNormal,s[k]=f.cssClasses.valueLarge,s[P]=f.cssClasses.valueSub;var l=[];l[U]=f.cssClasses.markerNormal,l[k]=f.cssClasses.markerLarge,l[P]=f.cssClasses.markerSub;var u=[f.cssClasses.valueHorizontal,f.cssClasses.valueVertical],c=[f.cssClasses.markerHorizontal,f.cssClasses.markerVertical];function p(t,e){var r=e===f.cssClasses.value,n=r?s:l;return e+" "+(r?u:c)[f.ort]+" "+n[t]}return at(a,f.cssClasses.pips),at(a,0===f.ort?f.cssClasses.pipsHorizontal:f.cssClasses.pipsVertical),Object.keys(e).forEach(function(t){!function(t,e,r){if((r=i?i(e,r):r)!==N){var n=M(a,!1);n.className=p(r,f.cssClasses.marker),n.style[f.style]=t+"%",U<r&&((n=M(a,!1)).className=p(r,f.cssClasses.value),n.setAttribute("data-value",e),n.style[f.style]=t+"%",n.innerHTML=o.to(e))}}(t,e[t][0],e[t][1])}),a}function L(){var t;c&&((t=c).parentElement.removeChild(t),c=null)}function z(t){L();var m,g,v,b,e,r,S,w,x,n=t.mode,i=t.density||1,o=t.filter||!1,a=function(t,e,r){if("range"===t||"steps"===t)return E.xVal;if("count"===t){if(e<2)throw new Error("noUiSlider ("+et+"): 'values' (>= 2) required for mode 'count'.");var n=e-1,i=100/n;for(e=[];n--;)e[n]=n*i;e.push(100),t="positions"}return"positions"===t?e.map(function(t){return E.fromStepping(r?E.getStep(t):t)}):"values"===t?r?e.map(function(t){return E.fromStepping(E.getStep(E.toStepping(t)))}):e:void 0}(n,t.values||!1,t.stepped||!1),s=(m=i,g=n,v=a,b={},e=E.xVal[0],r=E.xVal[E.xVal.length-1],w=S=!1,x=0,(v=v.slice().sort(function(t,e){return t-e}).filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==e&&(v.unshift(e),S=!0),v[v.length-1]!==r&&(v.push(r),w=!0),v.forEach(function(t,e){var r,n,i,o,a,s,l,u,c,p,f=t,d=v[e+1],h="steps"===g;if(h&&(r=E.xNumSteps[e]),r||(r=d-f),!1!==f&&void 0!==d)for(r=Math.max(r,1e-7),n=f;n<=d;n=(n+r).toFixed(7)/1){for(u=(a=(o=E.toStepping(n))-x)/m,p=a/(c=Math.round(u)),i=1;i<=c;i+=1)b[(s=x+i*p).toFixed(5)]=[E.fromStepping(s),0];l=-1<v.indexOf(n)?k:h?P:U,!e&&S&&(l=0),n===d&&w||(b[o.toFixed(5)]=[n,l]),x=o}}),b),l=t.format||{to:Math.round};return c=y.appendChild(O(s,o,l))}function j(){var t=l.getBoundingClientRect(),e="offset"+["Width","Height"][f.ort];return 0===f.ort?t.width||l[e]:t.height||l[e]}function F(n,i,o,a){var e=function(t){return!!(t=function(t,e,r){var n,i,o=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");0===t.type.indexOf("MSPointer")&&(s=!0);if(o){var l=function(t){return t.target===r||r.contains(t.target)};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,l);if(1<u.length)return!1;n=u[0].pageX,i=u[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,l);if(!c)return!1;n=c.pageX,i=c.pageY}}e=e||lt(w),(a||s)&&(n=t.clientX+e.x,i=t.clientY+e.y);return t.pageOffset=e,t.points=[n,i],t.cursor=a||s,t}(t,a.pageOffset,a.target||i))&&(!(y.hasAttribute("disabled")&&!a.doNotReject)&&(e=y,r=f.cssClasses.tap,!((e.classList?e.classList.contains(r):new RegExp("\\b"+r+"\\b").test(e.className))&&!a.doNotReject)&&(!(n===d.start&&void 0!==t.buttons&&1<t.buttons)&&((!a.hover||!t.buttons)&&(h||t.preventDefault(),t.calcPoint=t.points[f.ort],void o(t,a))))));var e,r},r=[];return n.split(" ").forEach(function(t){i.addEventListener(t,e,!!h&&{passive:!0}),r.push([t,e])}),r}function H(t){var e,r,n,i,o,a,s=100*(t-(e=l,r=f.ort,n=e.getBoundingClientRect(),i=e.ownerDocument,o=i.documentElement,a=lt(i),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),r?n.top+a.y-o.clientTop:n.left+a.x-o.clientLeft))/j();return s=it(s),f.dir?100-s:s}function D(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&R(t,e)}function T(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return R(t,e);var r=(f.dir?-1:1)*(t.calcPoint-e.startCalcPoint);$(0<r,100*r/e.baseSize,e.locations,e.handleNumbers)}function R(t,e){e.handle&&(st(e.handle,f.cssClasses.active),v-=1),e.listeners.forEach(function(t){x.removeEventListener(t[0],t[1])}),0===v&&(st(y,f.cssClasses.drag),J(),t.cursor&&(C.style.cursor="",C.removeEventListener("selectstart",rt))),e.handleNumbers.forEach(function(t){Y("change",t),Y("set",t),Y("end",t)})}function q(t,e){var r;if(1===e.handleNumbers.length){var n=u[e.handleNumbers[0]];if(n.hasAttribute("disabled"))return!1;r=n.children[0],v+=1,at(r,f.cssClasses.active)}t.stopPropagation();var i=[],o=F(d.move,x,T,{target:t.target,handle:r,listeners:i,startCalcPoint:t.calcPoint,baseSize:j(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:m.slice()}),a=F(d.end,x,R,{target:t.target,handle:r,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers}),s=F("mouseout",x,D,{target:t.target,handle:r,listeners:i,doNotReject:!0,handleNumbers:e.handleNumbers});i.push.apply(i,o.concat(a,s)),t.cursor&&(C.style.cursor=getComputedStyle(t.target).cursor,1<u.length&&at(y,f.cssClasses.drag),C.addEventListener("selectstart",rt,!1)),e.handleNumbers.forEach(function(t){Y("start",t)})}function n(t){t.stopPropagation();var n,i,o,e=H(t.calcPoint),r=(n=e,o=!(i=100),u.forEach(function(t,e){if(!t.hasAttribute("disabled")){var r=Math.abs(m[e]-n);(r<i||100===r&&100===i)&&(o=e,i=r)}}),o);if(!1===r)return!1;f.events.snap||nt(y,f.cssClasses.tap,f.animationDuration),K(r,e,!0,!0),J(),Y("slide",r,!0),Y("update",r,!0),Y("change",r,!0),Y("set",r,!0),f.events.snap&&q(t,{handleNumbers:[r]})}function B(t){var e=H(t.calcPoint),r=E.getStep(e),n=E.fromStepping(r);Object.keys(S).forEach(function(t){"hover"===t.split(".")[0]&&S[t].forEach(function(t){t.call(a,n)})})}function X(t,e){S[t]=S[t]||[],S[t].push(e),"update"===t.split(".")[0]&&u.forEach(function(t,e){Y("update",e)})}function Y(r,n,i){Object.keys(S).forEach(function(t){var e=t.split(".")[0];r===e&&S[t].forEach(function(t){t.call(a,b.map(f.format.to),n,b.slice(),i||!1,m.slice())})})}function _(t){return t+"%"}function I(t,e,r,n,i,o){return 1<u.length&&(n&&0<e&&(r=Math.max(r,t[e-1]+f.margin)),i&&e<u.length-1&&(r=Math.min(r,t[e+1]-f.margin))),1<u.length&&f.limit&&(n&&0<e&&(r=Math.min(r,t[e-1]+f.limit)),i&&e<u.length-1&&(r=Math.max(r,t[e+1]-f.limit))),f.padding&&(0===e&&(r=Math.max(r,f.padding[0])),e===u.length-1&&(r=Math.min(r,100-f.padding[1]))),!((r=it(r=E.getStep(r)))===t[e]&&!o)&&r}function W(t,e){var r=f.ort;return(r?e:t)+", "+(r?t:e)}function $(t,n,r,e){var i=r.slice(),o=[!t,t],a=[t,!t];e=e.slice(),t&&e.reverse(),1<e.length?e.forEach(function(t,e){var r=I(i,t,i[t]+n,o[e],a[e],!1);!1===r?n=0:(n=r-i[t],i[t]=r)}):o=a=[!0];var s=!1;e.forEach(function(t,e){s=K(t,r[t]+n,o[e],a[e])||s}),s&&e.forEach(function(t){Y("update",t),Y("slide",t)})}function G(t,e){return f.dir?100-t-e:t}function J(){g.forEach(function(t){var e=50<m[t]?-1:1,r=3+(u.length+e*t);u[t].style.zIndex=r})}function K(t,e,r,n){return!1!==(e=I(m,t,e,r,n,!1))&&(function(t,e){m[t]=e,b[t]=E.fromStepping(e);var r="translate("+W(_(G(e,0)-A),"0")+")";u[t].style[f.transformRule]=r,Q(t),Q(t+1)}(t,e),!0)}function Q(t){if(s[t]){var e=0,r=100;0!==t&&(e=m[t-1]),t!==s.length-1&&(r=m[t]);var n=r-e,i="translate("+W(_(G(e,n)),"0")+")",o="scale("+W(n/100,"1")+")";s[t].style[f.transformRule]=i+" "+o}}function Z(t,e){var n=ot(t),r=void 0===m[0];e=void 0===e||!!e,f.animate&&!r&&nt(y,f.cssClasses.tap,f.animationDuration),g.forEach(function(t){var e,r;K(t,(e=n[t],r=t,null===e||!1===e||void 0===e?m[r]:("number"==typeof e&&(e=String(e)),e=f.format.from(e),!1===(e=E.toStepping(e))||isNaN(e)?m[r]:e)),!0,!1)}),g.forEach(function(t){K(t,m[t],!0,!0)}),J(),g.forEach(function(t){Y("update",t),null!==n[t]&&e&&Y("set",t)})}function tt(){var t=b.map(f.format.to);return 1===t.length?t[0]:t}return at(e=y,f.cssClasses.target),0===f.dir?at(e,f.cssClasses.ltr):at(e,f.cssClasses.rtl),0===f.ort?at(e,f.cssClasses.horizontal):at(e,f.cssClasses.vertical),l=M(e,f.cssClasses.base),function(t,e){var r,n,i,o=M(e,f.cssClasses.connects);u=[],(s=[]).push(V(o,t[0]));for(var a=0;a<f.handles;a++)u.push((r=a,i=void 0,n=M(e,f.cssClasses.origin),(i=M(n,f.cssClasses.handle)).setAttribute("data-handle",r),f.keyboardSupport&&i.setAttribute("tabindex","0"),i.setAttribute("role","slider"),i.setAttribute("aria-orientation",f.ort?"vertical":"horizontal"),0===r?at(i,f.cssClasses.handleLower):r===f.handles-1&&at(i,f.cssClasses.handleUpper),n)),g[a]=a,s.push(V(o,t[a+1]))}(f.connect,l),(p=f.events).fixed||u.forEach(function(t,e){F(d.start,t.children[0],q,{handleNumbers:[e]})}),p.tap&&F(d.start,l,n,{}),p.hover&&F(d.move,l,B,{hover:!0}),p.drag&&s.forEach(function(t,e){if(!1!==t&&0!==e&&e!==s.length-1){var r=u[e-1],n=u[e],i=[t];at(t,f.cssClasses.draggable),p.fixed&&(i.push(r.children[0]),i.push(n.children[0])),i.forEach(function(t){F(d.start,t,q,{handles:[r,n],handleNumbers:[e-1,e]})})}}),Z(f.start),a={destroy:function(){for(var t in f.cssClasses)f.cssClasses.hasOwnProperty(t)&&st(y,f.cssClasses[t]);for(;y.firstChild;)y.removeChild(y.firstChild);delete y.noUiSlider},steps:function(){return m.map(function(t,e){var r=E.getNearbySteps(t),n=b[e],i=r.thisStep.step,o=null;!1!==i&&n+i>r.stepAfter.startValue&&(i=r.stepAfter.startValue-n),o=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===t?i=null:0===t&&(o=null);var a=E.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(a))),null!==o&&!1!==o&&(o=Number(o.toFixed(a))),[o,i]})},on:X,off:function(t){var n=t&&t.split(".")[0],i=n&&t.substring(n.length);Object.keys(S).forEach(function(t){var e=t.split(".")[0],r=t.substring(e.length);n&&n!==e||i&&i!==r||delete S[t]})},get:tt,set:Z,reset:function(t){Z(f.start,t)},__moveHandles:function(t,e,r){$(t,e,m,r)},options:o,updateOptions:function(e,t){var r=tt(),n=["margin","limit","padding","range","animate","snap","step","format"];n.forEach(function(t){void 0!==e[t]&&(o[t]=e[t])});var i=ut(o);n.forEach(function(t){void 0!==e[t]&&(f[t]=i[t])}),E=i.spectrum,f.margin=i.margin,f.limit=i.limit,f.padding=i.padding,f.pips&&z(f.pips),m=[],Z(e.start||r,t)},target:y,removePips:L,pips:z},f.pips&&z(f.pips),f.tooltips&&(i=u.map(r),X("update",function(t,e,r){if(i[e]){var n=t[e];!0!==f.tooltips[e]&&(n=f.tooltips[e].to(r[e])),i[e].innerHTML=n}})),X("update",function(t,e,a,r,s){g.forEach(function(t){var e=u[t],r=I(m,t,0,!0,!0,!0),n=I(m,t,100,!0,!0,!0),i=s[t],o=f.ariaFormat.to(a[t]);r=E.fromStepping(r).toFixed(1),n=E.fromStepping(n).toFixed(1),i=E.fromStepping(i).toFixed(1),e.children[0].setAttribute("aria-valuemin",r),e.children[0].setAttribute("aria-valuemax",n),e.children[0].setAttribute("aria-valuenow",i),e.children[0].setAttribute("aria-valuetext",o)})}),a}return{__spectrum:l,version:et,create:function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider ("+et+"): create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider ("+et+"): Slider was already initialized.");var r=z(t,ut(e),e);return t.noUiSlider=r}}});
/**
 * jQuery Plugin for creating AJAX auto-suggest textfield
 * @version 2.1
 * @requires jQuery 1.4 or later
 *
 * Copyright (c) 2011 Lucky
 * Licensed under the GPL license:
 *   http://www.gnu.org/licenses/gpl.html
 *
 *   MODIFIED:
 *   changed alerts to log functions - RK
 */


(function(a){function b(f,d){this.divId="suggestions_holder";this.hovered=false;this.arrData=null;this.textField=d;this.callBackUrl=f;var c=this.textField.width()+3;var g=1;var l=0;var k="suggest_row";var e="suggest_item";this.idField=null;this.submitOnSelect=false;this.thumbnail=false;this.description=false;this.textField.after('<div class="suggestions" id="'+this.divId+'"></div>');this.textField.attr("autocomplete","off");this.holder=this.textField.next("#"+this.divId);this.holder.hide();this.onSelected=null;var h=this;this.textField.keyup(function(m){if(m.keyCode!=37&&m.keyCode!=38&&m.keyCode!=39&&m.keyCode!=40&&m.keyCode!=13){if(a(this).val().length>=g){a.ajax({url:h.callBackUrl+encodeURI(a(this).val()),success:function(q){try{h.arrData=a.parseJSON(q);var s=h.arrData;var r="";l=0;if(s==null){h.hide()}else{if(s.length>0){for(i=0;i<s.length;i++){cssClass=e;if(i==0){cssClass+=" first"}if(i==(s.length-1)){cssClass+=" last"}var p="";if(h.idField!=null){p=' id_field="'+s[i].id+'"'}var n="";if(h.thumbnail==true){var o="";if(s[i].thumbnail!=undefined){o=' style="background-image:url('+s[i].thumbnail+');"'}n='<div class="thumbnail"'+o+"></div>"}var t="";if(h.description==true){if(s[i].description!=undefined){t='<div class="description">'+s[i].description+"</div>"}}r+='<div id="'+k+(i+1)+'" class="'+cssClass+'"'+p+' seq_id="'+i+'" >'+n+'<div class="suggestion_title">'+s[i].data.replace(new RegExp("("+h.textField.val()+")","gi"),"<b>$1</b>")+"</div>"+t+"</div>"}h.holder.html(r);for(i=1;i<=s.length;i++){var v=h.holder.find("#"+k+i);v.mouseover(function(w){h.hovered=true;h.unSelectAll(this);a(this).addClass("selected")});v.mouseout(function(w){h.hovered=false;a(this).removeClass("selected")});v.click(function(w){h.textField.val(a(this).find(".suggestion_title").text());if(h.idField!=null){h.idField.val(a(this).attr("id_field"))}if(h.onSelected!=null){h.onSelected.call(this,h.arrData[a(this).attr("seq_id")])}if(h.submitOnSelect==true){a("form").has(h.textField).submit()}h.hide()})}h.show(h.holder.find("."+e).height()*s.length)}else{h.hide()}}}catch(u){console.log("JQuery.Coolautosuggest ERROR:" + u.message)}},error:function(p,n,o){console.log("JQuery.Coolautosuggest ERROR:" + u.message)}})}else{h.hide()}}else{if(h.holder.css("display")!="none"){j(m)}else{if(h.onSelected!=null){h.onSelected.call(this,null)}}}});this.textField.bind("blur",function(m){if(h.idField!=null){if(h.checkSelected(h.textField.val())==false){h.textField.val("");h.idField.val("")}}if(h.hovered==false){h.hide()}else{h.hovered=false}});this.show=function(m){this.holder.css({position:"absolute",left:this.textField.position().left+"px",top:this.textField.position().top+this.textField.height()+5+"px",height:m+"px"});this.holder.css({width:c+"px"});this.holder.find("."+e).css({width:c+"px",overflow:"hidden"});this.holder.show()};this.hide=function(){this.holder.hide()};this.unSelectAll=function(p){var o=a(p).attr("id");var n=this.holder.find("."+e).get().length;for(i=1;i<=n;i++){this.holder.find("#"+k+i).removeClass("selected")}l=parseInt(o.replace(k,""));var m=/^[0-9]+$/;if(!m.test(l)){l=0}};this.setWidth=function(m){c=m};this.setMinChars=function(m){g=m};this.preventEnter=function(){this.textField.keypress(function(m){if(m.keyCode==13){return false}return true})};this.checkSelected=function(n){if(this.arrData!=null){for(var m=0;m<this.arrData.length;m++){if(this.arrData[m].data==n){return true}}}return false};function j(o){if(h.holder.css("display")!="none"){var m=h.holder.find("."+e).get().length;if(o.keyCode==40){l++;if(l<=m){if(l>0){h.holder.find("#"+k+(l-1)).removeClass("selected")}var n=h.holder.find("#"+k+l);n.addClass("selected");h.textField.val(n.find(".suggestion_title").text());if(h.idField!=null){h.idField.val(n.attr("id_field"))}}else{l=m}}else{if(o.keyCode==38){l--;if(l>0){if(l<m){h.holder.find("#"+k+(l+1)).removeClass("selected")}var n=h.holder.find("#"+k+l);n.addClass("selected");h.textField.val(n.find(".suggestion_title").text());if(h.idField!=null){h.idField.val(n.attr("id_field"))}}else{l=1}}else{if(o.keyCode==13){if(h.idField!=null){if(h.checkSelected(h.textField.val())==false){h.textField.val("");h.idField.val("")}}if(h.onSelected!=null){if(l>0){h.onSelected.call(this,h.arrData[l-1])}else{h.onSelected.call(this,null)}}h.hide()}}}}else{if(h.onSelected!=null){h.onSelected.call(this,null)}}return true}}a.fn.coolautosuggest=function(c){var d={width:null,minChars:null,idField:null,submitOnSelect:false,showThumbnail:false,showDescription:false,onSelected:null};a.extend(d,c);return this.each(function(){var e=new b(d.url,a(this));if(d.width!=null){e.setWidth(d.width)}if(d.minChars!=null){e.setMinChars(d.minChars)}if(d.idField!=null){e.idField=d.idField;e.preventEnter()}if(d.submitOnSelect==true){e.submitOnSelect=true}else{e.preventEnter()}if(d.showThumbnail==true){e.thumbnail=d.showThumbnail}if(d.showDescription==true){e.description=d.showDescription}if(a.isFunction(d.onSelected)==true){e.onSelected=d.onSelected}})}})(jQuery);
/*!
 * Isotope PACKAGED v2.2.2
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * http://isotope.metafizzy.co
 * Copyright 2015 Metafizzy
 */


!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c("object"==typeof exports?require("jquery"):a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(window),function(){"use strict";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a,b){function c(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function d(){}function e(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=h.length;c>b;b++){var d=h[b];a[d]=0}return a}function f(b){function d(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||g("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),c}}(),k=b("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[k]="border-box";var f=document.body||document.documentElement;f.appendChild(e);var h=j(e);l=200===c(h.width),f.removeChild(e)}}}function f(a){if(d(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var b=j(a);if("none"===b.display)return e();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var g=f.isBorderBox=!(!k||!b[k]||"border-box"!==b[k]),m=0,n=h.length;n>m;m++){var o=h[m],p=b[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=g&&l,y=c(b.width);y!==!1&&(f.width=y+(x?0:r+v));var z=c(b.height);return z!==!1&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf("%"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return f}var g="undefined"==typeof console?d:function(a){console.error(a)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],f):"object"==typeof exports?module.exports=f(require("desandro-get-style-property")):a.getSize=f(a.getStyleProperty)}(window),function(a){function b(a){"function"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){var d=g[a];d()}}function e(e){return"complete"===f.readyState?d():(e.bind(f,"DOMContentLoaded",c),e.bind(f,"readystatechange",c),e.bind(a,"load",c)),b}var f=a.document,g=[];b.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)}(window),function(a){"use strict";function b(a,b){return a[g](b)}function c(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matches)return"matches";if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var e=b[c],f=e+"MatchesSelector";if(a[f])return f}}();if(g){var h=document.createElement("div"),i=b(h,"div");f=i?b:e}else f=d;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(a,b){"use strict";"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("doc-ready"),require("desandro-matches-selector")):a.fizzyUIUtils=b(a,a.docReady,a.matchesSelector)}(window,function(a,b,c){var d={};d.extend=function(a,b){for(var c in b)a[c]=b[c];return a},d.modulo=function(a,b){return(a%b+b)%b};var e=Object.prototype.toString;d.isArray=function(a){return"[object Array]"==e.call(a)},d.makeArray=function(a){var b=[];if(d.isArray(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b},d.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},d.removeFrom=function(a,b){var c=d.indexOf(a,b);-1!=c&&a.splice(c,1)},d.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1==a.nodeType&&"string"==typeof a.nodeName},d.setText=function(){function a(a,c){b=b||(void 0!==document.documentElement.textContent?"textContent":"innerText"),a[b]=c}var b;return a}(),d.getParent=function(a,b){for(;a!=document.body;)if(a=a.parentNode,c(a,b))return a},d.getQueryElement=function(a){return"string"==typeof a?document.querySelector(a):a},d.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},d.filterFindElements=function(a,b){a=d.makeArray(a);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f];if(d.isElement(h))if(b){c(h,b)&&e.push(h);for(var i=h.querySelectorAll(b),j=0,k=i.length;k>j;j++)e.push(i[j])}else e.push(h)}return e},d.debounceMethod=function(a,b,c){var d=a.prototype[b],e=b+"Timeout";a.prototype[b]=function(){var a=this[e];a&&clearTimeout(a);var b=arguments,f=this;this[e]=setTimeout(function(){d.apply(f,b),delete f[e]},c||100)}},d.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()};var f=a.console;return d.htmlInit=function(c,e){b(function(){for(var b=d.toDashed(e),g=document.querySelectorAll(".js-"+b),h="data-"+b+"-options",i=0,j=g.length;j>i;i++){var k,l=g[i],m=l.getAttribute(h);try{k=m&&JSON.parse(m)}catch(n){f&&f.error("Error parsing "+h+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+n);continue}var o=new c(l,k),p=a.jQuery;p&&p.data(l,e,o)}})},d}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(c,d,e,f){return b(a,c,d,e,f)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(a.Outlayer={},a.Outlayer.Item=b(a,a.EventEmitter,a.getSize,a.getStyleProperty,a.fizzyUIUtils))}(window,function(a,b,c,d,e){"use strict";function f(a){for(var b in a)return!1;return b=null,!0}function g(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}function h(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}var i=a.getComputedStyle,j=i?function(a){return i(a,null)}:function(a){return a.currentStyle},k=d("transition"),l=d("transform"),m=k&&l,n=!!d("perspective"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[k],p=["transform","transition","transitionDuration","transitionProperty"],q=function(){for(var a={},b=0,c=p.length;c>b;b++){var e=p[b],f=d(e);f&&f!==e&&(a[e]=f)}return a}();e.extend(g.prototype,b.prototype),g.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.getSize=function(){this.size=c(this.element)},g.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=q[c]||c;b[d]=a[c]}},g.prototype.getPosition=function(){var a=j(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=a[c?"left":"right"],f=a[d?"top":"bottom"],g=this.layout.size,h=-1!=e.indexOf("%")?parseFloat(e)/100*g.width:parseInt(e,10),i=-1!=f.indexOf("%")?parseFloat(f)/100*g.height:parseInt(f,10);h=isNaN(h)?0:h,i=isNaN(i)?0:i,h-=c?g.paddingLeft:g.paddingRight,i-=d?g.paddingTop:g.paddingBottom,this.position.x=h,this.position.y=i},g.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={},d=b.isOriginLeft?"paddingLeft":"paddingRight",e=b.isOriginLeft?"left":"right",f=b.isOriginLeft?"right":"left",g=this.position.x+a[d];c[e]=this.getXValue(g),c[f]="";var h=b.isOriginTop?"paddingTop":"paddingBottom",i=b.isOriginTop?"top":"bottom",j=b.isOriginTop?"bottom":"top",k=this.position.y+a[h];c[i]=this.getYValue(k),c[j]="",this.css(c),this.emitEvent("layout",[this])},g.prototype.getXValue=function(a){var b=this.layout.options;return b.percentPosition&&!b.isHorizontal?a/this.layout.size.width*100+"%":a+"px"},g.prototype.getYValue=function(a){var b=this.layout.options;return b.percentPosition&&b.isHorizontal?a/this.layout.size.height*100+"%":a+"px"},g.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={};j.transform=this.getTranslate(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},g.prototype.getTranslate=function(a,b){var c=this.layout.options;return a=c.isOriginLeft?a:-a,b=c.isOriginTop?b:-b,n?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px, "+b+"px)"},g.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},g.prototype.moveTo=m?g.prototype._transitionTo:g.prototype.goTo,g.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},g.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},g.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var r="opacity,"+h(q.transform||"transform");g.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:r,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(o,this,!1))},g.prototype.transition=g.prototype[k?"_transition":"_nonTransition"],g.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},g.prototype.onotransitionend=function(a){this.ontransitionend(a)};var s={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};g.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,c=s[a.propertyName]||a.propertyName;if(delete b.ingProperties[c],f(b.ingProperties)&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd){var d=b.onEnd[c];d.call(this),delete b.onEnd[c]}this.emitEvent("transitionEnd",[this])}},g.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},g.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var t={transitionProperty:"",transitionDuration:""};return g.prototype.removeTransitionStyles=function(){this.css(t)},g.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},g.prototype.remove=function(){if(!k||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.once("transitionEnd",function(){a.removeElem()}),this.hide()},g.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("visibleStyle");b[c]=this.onRevealTransitionEnd,this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},g.prototype.getHideRevealTransitionEndProperty=function(a){var b=this.layout.options[a];if(b.opacity)return"opacity";for(var c in b)return c},g.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("hiddenStyle");b[c]=this.onHideTransitionEnd,this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},g.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},g}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):"object"==typeof exports?module.exports=b(a,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=b(a,a.eventie,a.EventEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(a,b,c,d,e,f){"use strict";function g(a,b){var c=e.getQueryElement(a);if(!c)return void(h&&h.error("Bad element for "+this.constructor.namespace+": "+(c||a)));this.element=c,i&&(this.$element=i(this.element)),this.options=e.extend({},this.constructor.defaults),this.option(b);var d=++k;this.element.outlayerGUID=d,l[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var h=a.console,i=a.jQuery,j=function(){},k=0,l={};return g.namespace="outlayer",g.Item=f,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e.extend(g.prototype,c.prototype),g.prototype.option=function(a){e.extend(this.options,a)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},g.prototype._filterFindItemElements=function(a){return e.filterFindElements(a,this.options.itemSelector)},g.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=d(this.element)},g.prototype._getMeasurement=function(a,b){var c,f=this.options[a];f?("string"==typeof f?c=this.element.querySelector(f):e.isElement(f)&&(c=f),this[a]=c?d(c)[b]:f):this[a]=0},g.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},g.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},g.prototype._layoutItems=function(a,b){if(this._emitCompleteOnItems("layout",a),a&&a.length){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this._getItemLayoutPosition(f);g.item=f,g.isInstant=b||f.isLayoutInstant,c.push(g)}this._processLayoutQueue(c)}},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},g.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},g.prototype._getContainerSize=j,g.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},g.prototype._emitCompleteOnItems=function(a,b){function c(){e.dispatchEvent(a+"Complete",null,[b])}function d(){g++,g===f&&c()}var e=this,f=b.length;if(!b||!f)return void c();for(var g=0,h=0,i=b.length;i>h;h++){var j=b[h];j.once(a,d)}},g.prototype.dispatchEvent=function(a,b,c){var d=b?[b].concat(c):c;if(this.emitEvent(a,d),i)if(this.$element=this.$element||i(this.element),b){var e=i.Event(b);e.type=a,this.$element.trigger(e,c)}else this.$element.trigger(a,c)},g.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},g.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},g.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},g.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e.removeFrom(this.stamps,d),this.unignore(d)}},g.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=e.makeArray(a)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},g.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},g.prototype._manageStamp=j,g.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,e=d(a),f={left:b.left-c.left-e.marginLeft,top:b.top-c.top-e.marginTop,right:c.right-b.right-e.marginRight,bottom:c.bottom-b.bottom-e.marginBottom};return f},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.bindResize=function(){this.isResizeBound||(b.bind(a,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&b.unbind(a,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var a=d(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},g.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},g.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},g.prototype.reveal=function(a){this._emitCompleteOnItems("reveal",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.reveal()}},g.prototype.hide=function(a){this._emitCompleteOnItems("hide",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.hide()}},g.prototype.revealItemElements=function(a){var b=this.getItems(a);this.reveal(b)},g.prototype.hideItemElements=function(a){var b=this.getItems(a);this.hide(b)},g.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},g.prototype.getItems=function(a){a=e.makeArray(a);for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c],g=this.getItem(f);g&&b.push(g)}return b},g.prototype.remove=function(a){var b=this.getItems(a);if(this._emitCompleteOnItems("remove",b),b&&b.length)for(var c=0,d=b.length;d>c;c++){var f=b[c];f.remove(),e.removeFrom(this.items,f)}},g.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete l[e],delete this.element.outlayerGUID,i&&i.removeData(this.element,this.constructor.namespace)},g.data=function(a){a=e.getQueryElement(a);var b=a&&a.outlayerGUID;return b&&l[b]},g.create=function(a,b){function c(){g.apply(this,arguments)}return Object.create?c.prototype=Object.create(g.prototype):e.extend(c.prototype,g.prototype),c.prototype.constructor=c,c.defaults=e.extend({},g.defaults),e.extend(c.defaults,b),c.prototype.settings={},c.namespace=a,c.data=g.data,c.Item=function(){f.apply(this,arguments)},c.Item.prototype=new f,e.htmlInit(c,a),i&&i.bridget&&i.bridget(a,c),c},g.Item=f,g}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],b):"object"==typeof exports?module.exports=b(require("outlayer")):(a.Isotope=a.Isotope||{},a.Isotope.Item=b(a.Outlayer))}(window,function(a){"use strict";function b(){a.Item.apply(this,arguments)}b.prototype=new a.Item,b.prototype._create=function(){this.id=this.layout.itemGUID++,a.Item.prototype._create.call(this),this.sortData={}},b.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var a=this.layout.options.getSortData,b=this.layout._sorters;for(var c in a){var d=b[c];this.sortData[c]=d(this.element,this)}}};var c=b.prototype.destroy;return b.prototype.destroy=function(){c.apply(this,arguments),this.css({display:""})},b}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],b):"object"==typeof exports?module.exports=b(require("get-size"),require("outlayer")):(a.Isotope=a.Isotope||{},a.Isotope.LayoutMode=b(a.getSize,a.Outlayer))}(window,function(a,b){"use strict";function c(a){this.isotope=a,a&&(this.options=a.options[this.namespace],this.element=a.element,this.items=a.filteredItems,this.size=a.size)}return function(){function a(a){return function(){return b.prototype[a].apply(this.isotope,arguments)}}for(var d=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],e=0,f=d.length;f>e;e++){var g=d[e];c.prototype[g]=a(g)}}(),c.prototype.needsVerticalResizeLayout=function(){var b=a(this.isotope.element),c=this.isotope.size&&b;return c&&b.innerHeight!=this.isotope.size.innerHeight},c.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},c.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},c.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},c.prototype.getSegmentSize=function(a,b){var c=a+b,d="outer"+b;if(this._getMeasurement(c,d),!this[c]){var e=this.getFirstItemSize();this[c]=e&&e[d]||this.isotope.size["inner"+b]}},c.prototype.getFirstItemSize=function(){var b=this.isotope.filteredItems[0];return b&&b.element&&a(b.element)},c.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},c.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},c.modes={},c.create=function(a,b){function d(){c.apply(this,arguments)}return d.prototype=new c,b&&(d.options=b),d.prototype.namespace=a,c.modes[a]=d,d},c}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],b):"object"==typeof exports?module.exports=b(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):a.Masonry=b(a.Outlayer,a.getSize,a.fizzyUIUtils)}(window,function(a,b,c){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}var d=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,f=e/d,g=d-e%d,h=g&&1>g?"round":"floor";f=Math[h](f),this.cols=Math.max(f,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c.indexOf(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],b):"object"==typeof exports?module.exports=b(require("../layout-mode"),require("masonry-layout")):b(a.Isotope.LayoutMode,a.Masonry)}(window,function(a,b){"use strict";function c(a,b){for(var c in b)a[c]=b[c];return a}var d=a.create("masonry"),e=d.prototype._getElementOffset,f=d.prototype.layout,g=d.prototype._getMeasurement;
	c(d.prototype,b.prototype),d.prototype._getElementOffset=e,d.prototype.layout=f,d.prototype._getMeasurement=g;var h=d.prototype.measureColumns;d.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,h.call(this)};var i=d.prototype._manageStamp;return d.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,i.apply(this,arguments)},d}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],b):"object"==typeof exports?module.exports=b(require("../layout-mode")):b(a.Isotope.LayoutMode)}(window,function(a){"use strict";var b=a.create("fitRows");return b.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth+this.gutter,c=this.isotope.size.innerWidth+this.gutter;0!==this.x&&b+this.x>c&&(this.x=0,this.y=this.maxY);var d={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+a.size.outerHeight),this.x+=b,d},b.prototype._getContainerSize=function(){return{height:this.maxY}},b}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],b):"object"==typeof exports?module.exports=b(require("../layout-mode")):b(a.Isotope.LayoutMode)}(window,function(a){"use strict";var b=a.create("vertical",{horizontalAlignment:0});return b.prototype._resetLayout=function(){this.y=0},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=(this.isotope.size.innerWidth-a.size.outerWidth)*this.options.horizontalAlignment,c=this.y;return this.y+=a.size.outerHeight,{x:b,y:c}},b.prototype._getContainerSize=function(){return{height:this.y}},b}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(c,d,e,f,g,h){return b(a,c,d,e,f,g,h)}):"object"==typeof exports?module.exports=b(a,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical")):a.Isotope=b(a,a.Outlayer,a.getSize,a.matchesSelector,a.fizzyUIUtils,a.Isotope.Item,a.Isotope.LayoutMode)}(window,function(a,b,c,d,e,f,g){function h(a,b){return function(c,d){for(var e=0,f=a.length;f>e;e++){var g=a[e],h=c.sortData[g],i=d.sortData[g];if(h>i||i>h){var j=void 0!==b[g]?b[g]:b,k=j?1:-1;return(h>i?1:-1)*k}}return 0}}var i=a.jQuery,j=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s+|\s+$/g,"")},k=document.documentElement,l=k.textContent?function(a){return a.textContent}:function(a){return a.innerText},m=b.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});m.Item=f,m.LayoutMode=g,m.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),b.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var a in g.modes)this._initLayoutMode(a)},m.prototype.reloadItems=function(){this.itemGUID=0,b.prototype.reloadItems.call(this)},m.prototype._itemize=function(){for(var a=b.prototype._itemize.apply(this,arguments),c=0,d=a.length;d>c;c++){var e=a[c];e.id=this.itemGUID++}return this._updateItemsSortData(a),a},m.prototype._initLayoutMode=function(a){var b=g.modes[a],c=this.options[a]||{};this.options[a]=b.options?e.extend(b.options,c):c,this.modes[a]=new b(this)},m.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},m.prototype._layout=function(){var a=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,a),this._isLayoutInited=!0},m.prototype.arrange=function(a){function b(){d.reveal(c.needReveal),d.hide(c.needHide)}this.option(a),this._getIsInstant();var c=this._filter(this.items);this.filteredItems=c.matches;var d=this;this._bindArrangeComplete(),this._isInstant?this._noTransition(b):b(),this._sort(),this._layout()},m.prototype._init=m.prototype.arrange,m.prototype._getIsInstant=function(){var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=a,a},m.prototype._bindArrangeComplete=function(){function a(){b&&c&&d&&e.dispatchEvent("arrangeComplete",null,[e.filteredItems])}var b,c,d,e=this;this.once("layoutComplete",function(){b=!0,a()}),this.once("hideComplete",function(){c=!0,a()}),this.once("revealComplete",function(){d=!0,a()})},m.prototype._filter=function(a){var b=this.options.filter;b=b||"*";for(var c=[],d=[],e=[],f=this._getFilterTest(b),g=0,h=a.length;h>g;g++){var i=a[g];if(!i.isIgnored){var j=f(i);j&&c.push(i),j&&i.isHidden?d.push(i):j||i.isHidden||e.push(i)}}return{matches:c,needReveal:d,needHide:e}},m.prototype._getFilterTest=function(a){return i&&this.options.isJQueryFiltering?function(b){return i(b.element).is(a)}:"function"==typeof a?function(b){return a(b.element)}:function(b){return d(b.element,a)}},m.prototype.updateSortData=function(a){var b;a?(a=e.makeArray(a),b=this.getItems(a)):b=this.items,this._getSorters(),this._updateItemsSortData(b)},m.prototype._getSorters=function(){var a=this.options.getSortData;for(var b in a){var c=a[b];this._sorters[b]=n(c)}},m.prototype._updateItemsSortData=function(a){for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.updateSortData()}};var n=function(){function a(a){if("string"!=typeof a)return a;var c=j(a).split(" "),d=c[0],e=d.match(/^\[(.+)\]$/),f=e&&e[1],g=b(f,d),h=m.sortDataParsers[c[1]];return a=h?function(a){return a&&h(g(a))}:function(a){return a&&g(a)}}function b(a,b){var c;return c=a?function(b){return b.getAttribute(a)}:function(a){var c=a.querySelector(b);return c&&l(c)}}return a}();m.sortDataParsers={parseInt:function(a){return parseInt(a,10)},parseFloat:function(a){return parseFloat(a)}},m.prototype._sort=function(){var a=this.options.sortBy;if(a){var b=[].concat.apply(a,this.sortHistory),c=h(b,this.options.sortAscending);this.filteredItems.sort(c),a!=this.sortHistory[0]&&this.sortHistory.unshift(a)}},m.prototype._mode=function(){var a=this.options.layoutMode,b=this.modes[a];if(!b)throw new Error("No layout mode: "+a);return b.options=this.options[a],b},m.prototype._resetLayout=function(){b.prototype._resetLayout.call(this),this._mode()._resetLayout()},m.prototype._getItemLayoutPosition=function(a){return this._mode()._getItemLayoutPosition(a)},m.prototype._manageStamp=function(a){this._mode()._manageStamp(a)},m.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},m.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},m.prototype.appended=function(a){var b=this.addItems(a);if(b.length){var c=this._filterRevealAdded(b);this.filteredItems=this.filteredItems.concat(c)}},m.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){this._resetLayout(),this._manageStamps();var c=this._filterRevealAdded(b);this.layoutItems(this.filteredItems),this.filteredItems=c.concat(this.filteredItems),this.items=b.concat(this.items)}},m.prototype._filterRevealAdded=function(a){var b=this._filter(a);return this.hide(b.needHide),this.reveal(b.matches),this.layoutItems(b.matches,!0),b.matches},m.prototype.insert=function(a){var b=this.addItems(a);if(b.length){var c,d,e=b.length;for(c=0;e>c;c++)d=b[c],this.element.appendChild(d.element);var f=this._filter(b).matches;for(c=0;e>c;c++)b[c].isLayoutInstant=!0;for(this.arrange(),c=0;e>c;c++)delete b[c].isLayoutInstant;this.reveal(f)}};var o=m.prototype.remove;return m.prototype.remove=function(a){a=e.makeArray(a);var b=this.getItems(a);o.call(this,a);var c=b&&b.length;if(c)for(var d=0;c>d;d++){var f=b[d];e.removeFrom(this.filteredItems,f)}},m.prototype.shuffle=function(){for(var a=0,b=this.items.length;b>a;a++){var c=this.items[a];c.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},m.prototype._noTransition=function(a){var b=this.options.transitionDuration;this.options.transitionDuration=0;var c=a.call(this);return this.options.transitionDuration=b,c},m.prototype.getFilteredItemElements=function(){for(var a=[],b=0,c=this.filteredItems.length;c>b;b++)a.push(this.filteredItems[b].element);return a},m});
/*!
 * Packery layout mode PACKAGED v1.1.3
 * sub-classes Packery
 * http://packery.metafizzy.co
 */


!function(a){function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define("classie/classie",g):"object"==typeof exports?module.exports=g:a.classie=g}(window),function(a,b){"function"==typeof define&&define.amd?define("packery/js/rect",b):"object"==typeof exports?module.exports=b():(a.Packery=a.Packery||{},a.Packery.Rect=b())}(window,function(){function a(b){for(var c in a.defaults)this[c]=a.defaults[c];for(c in b)this[c]=b[c]}var b=window.Packery=function(){};return b.Rect=a,a.defaults={x:0,y:0,width:0,height:0},a.prototype.contains=function(a){var b=a.width||0,c=a.height||0;return this.x<=a.x&&this.y<=a.y&&this.x+this.width>=a.x+b&&this.y+this.height>=a.y+c},a.prototype.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return this.x<d&&b>a.x&&this.y<e&&c>a.y},a.prototype.getMaximalFreeRects=function(b){if(!this.overlaps(b))return!1;var c,d=[],e=this.x+this.width,f=this.y+this.height,g=b.x+b.width,h=b.y+b.height;return this.y<b.y&&(c=new a({x:this.x,y:this.y,width:this.width,height:b.y-this.y}),d.push(c)),e>g&&(c=new a({x:g,y:this.y,width:e-g,height:this.height}),d.push(c)),f>h&&(c=new a({x:this.x,y:h,width:this.width,height:f-h}),d.push(c)),this.x<b.x&&(c=new a({x:this.x,y:this.y,width:b.x-this.x,height:this.height}),d.push(c)),d},a.prototype.canFit=function(a){return this.width>=a.width&&this.height>=a.height},a}),function(a,b){if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],b);else if("object"==typeof exports)module.exports=b(require("./rect"));else{var c=a.Packery=a.Packery||{};c.Packer=b(c.Rect)}}(window,function(a){function b(a,b,c){this.width=a||0,this.height=b||0,this.sortDirection=c||"downwardLeftToRight",this.reset()}b.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var b=new a({x:0,y:0,width:this.width,height:this.height});this.spaces.push(b),this.sorter=c[this.sortDirection]||c.downwardLeftToRight},b.prototype.pack=function(a){for(var b=0,c=this.spaces.length;c>b;b++){var d=this.spaces[b];if(d.canFit(a)){this.placeInSpace(a,d);break}}},b.prototype.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},b.prototype.placed=function(a){for(var b=[],c=0,d=this.spaces.length;d>c;c++){var e=this.spaces[c],f=e.getMaximalFreeRects(a);f?b.push.apply(b,f):b.push(e)}this.spaces=b,this.mergeSortSpaces()},b.prototype.mergeSortSpaces=function(){b.mergeRects(this.spaces),this.spaces.sort(this.sorter)},b.prototype.addSpace=function(a){this.spaces.push(a),this.mergeSortSpaces()},b.mergeRects=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d){var e=a.slice(0);e.splice(b,1);for(var f=0,g=0,h=e.length;h>g;g++){var i=e[g],j=b>g?0:1;d.contains(i)&&(a.splice(g+j-f,1),f++)}}}return a};var c={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return b}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],b):"object"==typeof exports?module.exports=b(require("desandro-get-style-property"),require("outlayer"),require("./rect")):a.Packery.Item=b(a.getStyleProperty,a.Outlayer,a.Packery.Rect)}(window,function(a,b,c){var d=a("transform"),e=function(){b.Item.apply(this,arguments)};e.prototype=new b.Item;var f=e.prototype._create;return e.prototype._create=function(){f.call(this),this.rect=new c,this.placeRect=new c},e.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&d&&(this.element.style[d]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},e.prototype.dragMove=function(a,b){this.didDrag=!0;var c=this.layout.size;a-=c.paddingLeft,b-=c.paddingTop,this.positionPlaceRect(a,b)},e.prototype.dragStop=function(){this.getPosition();var a=this.position.x!=this.placeRect.x,b=this.position.y!=this.placeRect.y;this.needsPositioning=a||b,this.didDrag=!1},e.prototype.positionPlaceRect=function(a,b,c){this.placeRect.x=this.getPlaceRectCoord(a,!0),this.placeRect.y=this.getPlaceRectCoord(b,!1,c)},e.prototype.getPlaceRectCoord=function(a,b,c){var d=b?"Width":"Height",e=this.size["outer"+d],f=this.layout[b?"columnWidth":"rowHeight"],g=this.layout.size["inner"+d];b||(g=Math.max(g,this.layout.maxY),this.layout.rowHeight||(g-=this.layout.gutter));var h;if(f){f+=this.layout.gutter,g+=b?this.layout.gutter:0,a=Math.round(a/f);var i;i=this.layout.options.isHorizontal?b?"ceil":"floor":b?"floor":"ceil";var j=Math[i](g/f);j-=Math.ceil(e/f),h=j}else h=g-e;return a=c?a:Math.min(a,h),a*=f||1,Math.max(0,a)},e.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},e.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},e}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/packery",["classie/classie","get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],b):"object"==typeof exports?module.exports=b(require("desandro-classie"),require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):a.Packery=b(a.classie,a.getSize,a.Outlayer,a.Packery.Rect,a.Packery.Packer,a.Packery.Item)}(window,function(a,b,c,d,e,f){function g(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function h(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}d.prototype.canFit=function(a){return this.width>=a.width-1&&this.height>=a.height-1};var i=c.create("packery");return i.Item=f,i.prototype._create=function(){c.prototype._create.call(this),this.packer=new e,this.stamp(this.options.stamped);var a=this;this.handleDraggabilly={dragStart:function(){a.itemDragStart(this.element)},dragMove:function(){a.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){a.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(b){a.itemDragStart(b.currentTarget)},drag:function(b,c){a.itemDragMove(b.currentTarget,c.position.left,c.position.top)},stop:function(b){a.itemDragEnd(b.currentTarget)}}},i.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var a=this.packer;this.options.isHorizontal?(a.width=Number.POSITIVE_INFINITY,a.height=this.size.innerHeight+this.gutter,a.sortDirection="rightwardTopToBottom"):(a.width=this.size.innerWidth+this.gutter,a.height=Number.POSITIVE_INFINITY,a.sortDirection="downwardLeftToRight"),a.reset(),this.maxY=0,this.maxX=0},i.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},i.prototype._getItemLayoutPosition=function(a){return this._packItem(a),a.rect},i.prototype._packItem=function(a){this._setRectSize(a.element,a.rect),this.packer.pack(a.rect),this._setMaxXY(a.rect)},i.prototype._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX),this.maxY=Math.max(a.y+a.height,this.maxY)},i.prototype._setRectSize=function(a,c){var d=b(a),e=d.outerWidth,f=d.outerHeight;(e||f)&&(e=this._applyGridGutter(e,this.columnWidth),f=this._applyGridGutter(f,this.rowHeight)),c.width=Math.min(e,this.packer.width),c.height=Math.min(f,this.packer.height)},i.prototype._applyGridGutter=function(a,b){if(!b)return a+this.gutter;b+=this.gutter;var c=a%b,d=c&&1>c?"round":"ceil";return a=Math[d](a/b)*b},i.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},i.prototype._manageStamp=function(a){var b,c=this.getItem(a);if(c&&c.isPlacing)b=c.placeRect;else{var e=this._getElementOffset(a);b=new d({x:this.options.isOriginLeft?e.left:e.right,y:this.options.isOriginTop?e.top:e.bottom})}this._setRectSize(a,b),this.packer.placed(b),this._setMaxXY(b)},i.prototype.sortItemsByPosition=function(){var a=this.options.isHorizontal?h:g;this.items.sort(a)},i.prototype.fit=function(a,b,c){var d=this.getItem(a);d&&(this._getMeasurements(),this.stamp(d.element),d.getSize(),d.isPlacing=!0,b=void 0===b?d.rect.x:b,c=void 0===c?d.rect.y:c,d.positionPlaceRect(b,c,!0),this._bindFitEvents(d),d.moveTo(d.placeRect.x,d.placeRect.y),this.layout(),this.unstamp(d.element),this.sortItemsByPosition(),d.isPlacing=!1,d.copyPlaceRectPosition())},i.prototype._bindFitEvents=function(a){function b(){d++,2==d&&c.emitEvent("fitComplete",[a])}var c=this,d=0;a.on("layout",function(){return b(),!0}),this.on("layoutComplete",function(){return b(),!0})},i.prototype.resize=function(){var a=b(this.element),c=this.size&&a,d=this.options.isHorizontal?"innerHeight":"innerWidth";c&&a[d]==this.size[d]||this.layout()},i.prototype.itemDragStart=function(a){this.stamp(a);var b=this.getItem(a);b&&b.dragStart()},i.prototype.itemDragMove=function(a,b,c){function d(){f.layout(),delete f.dragTimeout}var e=this.getItem(a);e&&e.dragMove(b,c);var f=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(d,40)},i.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},i.prototype.itemDragEnd=function(b){var c,d=this.getItem(b);if(d&&(c=d.didDrag,d.dragStop()),!d||!c&&!d.needsPositioning)return void this.unstamp(b);a.add(d.element,"is-positioning-post-drag");var e=this._getDragEndLayoutComplete(b,d);d.needsPositioning?(d.on("layout",e),d.moveTo(d.placeRect.x,d.placeRect.y)):d&&d.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",e),this.layout()},i.prototype._getDragEndLayoutComplete=function(b,c){var d=c&&c.needsPositioning,e=0,f=d?2:1,g=this;return function(){return e++,e!=f?!0:(c&&(a.remove(c.element,"is-positioning-post-drag"),c.isPlacing=!1,c.copyPlaceRectPosition()),g.unstamp(b),g.sortItemsByPosition(),d&&g.emitEvent("dragItemPositioned",[c]),!0)}},i.prototype.bindDraggabillyEvents=function(a){a.on("dragStart",this.handleDraggabilly.dragStart),a.on("dragMove",this.handleDraggabilly.dragMove),a.on("dragEnd",this.handleDraggabilly.dragEnd)},i.prototype.bindUIDraggableEvents=function(a){a.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},i.Rect=d,i.Packer=e,i}),function(a,b){"function"==typeof define&&define.amd?define(["isotope/js/layout-mode","packery/js/packery","get-size/get-size"],b):"object"==typeof exports?module.exports=b(require("isotope-layout/js/layout-mode"),require("packery"),require("get-size")):b(a.Isotope.LayoutMode,a.Packery,a.getSize)}(window,function(a,b,c){function d(a,b){for(var c in b)a[c]=b[c];return a}var e=a.create("packery"),f=e.prototype._getElementOffset,g=e.prototype._getMeasurement;d(e.prototype,b.prototype),e.prototype._getElementOffset=f,e.prototype._getMeasurement=g;var h=e.prototype._resetLayout;e.prototype._resetLayout=function(){this.packer=this.packer||new b.Packer,h.apply(this,arguments)};var i=e.prototype._getItemLayoutPosition;e.prototype._getItemLayoutPosition=function(a){return a.rect=a.rect||new b.Rect,i.call(this,a)};var j=e.prototype._manageStamp;return e.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,j.apply(this,arguments)},e.prototype.needsResizeLayout=function(){var a=c(this.element),b=this.size&&a,d=this.options.isHorizontal?"innerHeight":"innerWidth";return b&&a[d]!=this.size[d]},e});
/* 
*   Save & restore scroll position
*
*   This will save and restore a users scroll position. Its useful for things like 
*   returning a user to where they were before they opened the explore_overlay.
*
*/


window.mb_scroll_position = window.mb_scroll_position || {};

(function(){

  var position;

  function saveScrollPosition(){
    // If we dont already have a saved scroll position
    if (position == null || position <= 0) {
      position = window.scrollY;
    }
  }

  function restoreScrollPosition(){
    // If we have a saved scroll position, and if were at the top of the page
    if(position != null && position > 0 && window.scrollY <= 0){
      window.scrollTo(0, position);

      // Reset the saved scroll position      
      position = null;
    }
  }

  window.mb_scroll_position.save    = saveScrollPosition;
  window.mb_scroll_position.restore = restoreScrollPosition;

})()
;
var explore_overlay = {
	callback: null,
  fadeTime: 600,
  onLoad: null,

  init: function(url, callback, specialClass, onLoad){
    console.log("explore_overlay.init");

    if(callback){
      // probably these should be separated onload, onclose, but for now leaving it so it functions the same. -RK
      callback.call();

      explore_overlay.callback = callback;
    } else {
      this.callback = null;
    }

    if(onLoad){
      this.onLoad = onLoad;
    }

    // Explore overlay gets appended the #page element
    if ($('#explore_overlay').length == 0){

      // Determine loading image w/ fallback for IE
      var ie_version =  mb_utils.getIEVersion();
      var isIE = ie_version.major > 1;
      console.log("isIE: " + isIE);
      var loadingImage = 'ring-alt.svg';
      // IE not handling this SVG animation, so providing a fallback
      if (isIE) loadingImage = 'ring-alt.gif';

      // Append the overlay
      $('#page').append("<div id='explore_overlay'><div class='loading'><img src='/assets/public/" + loadingImage +"'><p>LOADING</p></div><div class='content'></div></div> ");
    }

    console.log("open modal!");
    $('#explore_overlay .content').empty();

    url += (url.indexOf("?") >= 0) ? '&' : '?';
    url += "layout=overlay&override_preview=true&overlay=true";
    var url_parts = url.split("?");
    if (!(/\/$/.test(url_parts[0]))){
      url_parts[0] += "/"
    }
    url = url_parts.join("?");
    $('#explore_overlay .content')
			.append('<iframe src="' + url + '" frameborder=0 width=100% allowfullscreen="true" allow="fullscreen" />')
      .addClass('visible')

		var h = $(window).height()
    $('#explore_overlay .content iframe').css({height: h}); // changed from 100vh, for now at least
    explore_overlay.loadModal('',callback);

    // this is to handle passing in classes to be added to the container
    if (specialClass) {
      console.log('specialClass: ' + specialClass);
      $('#explore_overlay').addClass(specialClass);
      $('.overlay_close_button').addClass(specialClass);
    }

    // Fade in the loading message
    $('#explore_overlay .loading').delay(200).fadeIn();

    $('#explore_overlay .content iframe').on('load', function(){
      console.log('load the iframe');
      explore_overlay.afterLoad(url);
    });

    // Fade in the Explore overlay
    $('#explore_overlay').addClass('visible').animate({
      opacity: 1
    }, explore_overlay.fadeTime );

  },



	//run stuff here that you need to run after the new page has loaded. Will be used in the near future I think -RK
	afterLoad: function(path){
    $('#explore_overlay .loading').fadeOut();

    $('.overlay_close_button').addClass('visible').animate({
      opacity: 1
    }, explore_overlay.fadeTime/2
    );

    $('#explore_overlay .content').addClass('visible').animate({
      opacity: 1
    }, explore_overlay.fadeTime, function(){

      if(typeof(mb_parallax) != 'undefined'){
        mb_parallax.init(true);
      }
      if(typeof(mb_utils) != 'undefined'){
        mb_utils.initExpandableElement();
      }

      if ( typeof ReactRailsUJS === 'object' ) {
    		ReactRailsUJS.mountComponents();
      }

      $('body').addClass('overlay_loaded');

      // Google Analytics - register a pageview
      var title = $('#explore_overlay title').text();
      var base_path = path.split("?")[0];
      // console.log("Original path: " + path);
      // console.log("Base path: " + base_path);
      console.log ("Explore overlay title: " + title);

      // // Standard GA
      // ga('set', { page: base_path, title: title });
      // ga('send', 'pageview');

      // Universal Federated Analytics
      if ( typeof _sendPageview != 'undefined' ) {
        _sendPageview( base_path, title );
      }
    });

    $(window).on('resize.explore_overlay', function(){
      var h = $(window).height()
      $('#explore_overlay .content iframe').css('height', h)
    })

	},

  loadFbFromResources: function(category_id){
    var data = {category: category_id};
    $.getJSON('/api/v1/resources/', data, function(data){
       var arr = [];
      $.each(data.items, function(k,v){
        var obj = {
          href: v.detail_image,
          title: v.title,
          type: 'image',
          resource_id: v.id,
          description: v.short_description
        };
        arr.push(obj)
      });
      $.fancybox(arr, {
        padding: 10,
        openEffect  : 'fade',
        closeEffect : 'fade',
        mouseWheel: false,
        theme : 'dark',
        helpers : {
          thumbs: {
            // This allows for the user to specify which thumbnail to be displayed
            source : function (item) {
              return $(item.element).attr("data-thumbnail"); //get the image url for thumbnail
            }
          }
        },
        beforeLoad: function(){
          // var strVar = $(this.element).attr("data-title") + ' <a href="' + $(this.element).attr('data-link') + '">More Info</a>';
          var strVar = this.title;
          var url = "/resources/" + this.resource_id + "/"
          strVar += "<div class='addthis_toolbox addthis_default_style' " +
              " addthis:url='" + url + "'" +
              " addthis:title='"  + this.title + "'" +
              " addthis:description='" + this.description + "'" +
              ">";

          strVar += "   <div class=\"buttons\">";
          strVar += "     <a class=\"addthis_button_compact\">";
          strVar += "       <img src=\"\/assets\/share.png\">";
          strVar += "     <\/a>";
          strVar += "     <a class=\"button\" href=\"" + url + " \" target=\"_top\">";
          strVar +=         "more info";
          strVar += "     <\/a>";
          strVar += "   <\/div>";
          strVar += "<\/div>";

          this.title = strVar;
        },

        afterShow: function(){
          if(typeof addthis != "undefined"){
            addthis.toolbox( $(".addthis_toolbox").get() );
          }
        }
      })
    });
  },

  loadModal: function( content, callback ){

    console.log("explore overlay: loadModal()");

    try {
      if (window.mb_scroll_position) window.mb_scroll_position.save();
    } catch(e) {}

    $('#explore_overlay').scrollTop(0); // firefox

    // add "X" button if it does not already exist
    if ($('.overlay_close_button').length == 0) {
      $('#explore_overlay').before("<a class='overlay_close_button' href='javascript:void(0)'><div class='close_icon'></div></a>");
    }
    // only one click is listened for before the listener is removed ( prevents double click )
    // the listener is added back on every call to loadModal -SMB
    $('.overlay_close_button').one('click touchstart', function(event){
      event.preventDefault();
      event.stopPropagation();
      explore_overlay.closeModal();
    });

    // add background div if it does not already exist
    if ($('#explore_overlay .background_area').length == 0) {
      $('#explore_overlay').append("<div class='background_area'></div>");
    }
    // only one click is listened for before the listener is removed ( prevents double click )
    // the listener is added back on every call to loadModal -SMB
    $('#explore_overlay .background_area').one('click', function(){
      console.log('click background');
      explore_overlay.closeModal();
    });
    $('html').addClass('explore_overlay_open');
    $('body').addClass('explore_overlay_open');

    if (explore_overlay.onLoad && typeof explore_overlay.onLoad == 'function'){
      explore_overlay.onLoad.call();
    }
  },

  closeModal: function(){

    if(explore_overlay.callback){
      explore_overlay.callback.call();
      explore_overlay.callback = null;
    }
		
    $(window).off('resize.explore_overlay');

    $('.overlay_close_button').animate({
      opacity: 0
    }, explore_overlay.fadeTime/2, 'linear', function(){

      $('#explore_overlay').animate({
        opacity: 0
      }, explore_overlay.fadeTime, function(){

        $('#explore_overlay').removeClass('visible');
        $('body').removeClass('explore_overlay_open overlay_loaded');
        $('html').removeClass('explore_overlay_open overlay_loaded');
        $('#explore_overlay .content').removeClass('visible').empty().css('opacity','0');
        $('.overlay_close_button').removeClass('visible');
        if ($('#timeline-embed').length) {
          document.getElementById("timeline-embed").scrollIntoView();

        } else {
          try {
            if (window.mb_scroll_position) window.mb_scroll_position.restore();
          } catch(e) {}
        }
      });
    });

    //

    // $('#explore_overlay').css('opacity', '0');
    // $('#explore_overlay').removeClass('visible');
    // $('body').removeClass('explore_overlay_open overlay_loaded');
    // $('html').removeClass('explore_overlay_open overlay_loaded');
    // $('#explore_overlay .content').removeClass('visible').empty().css('opacity','0');
    // $('.overlay_close_button').removeClass('visible');



  }

}
;
(function(){var h=[].slice;String.prototype.autoLink=function(){var b,f,d,a,e,g;a=1<=arguments.length?h.call(arguments,0):[];e=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi;if(!(0<a.length))return this.replace(e,"$1<a href='$2'>$2</a>");d=a[0];f=function(){var c;c=[];for(b in d)g=d[b],"callback"!==b&&c.push(" "+b+"='"+g+"'");return c}().join("");return this.replace(e,function(c,b,a){c=("function"===typeof d.callback?d.callback(a):void 0)||"<a href='"+
a+"'"+f+">"+a+"</a>";return""+b+c})}}).call(this);
var planet_types = {
  init: function(data){
    this.data = data;

    $('ul.tabs li').click(function(){
      $(this).parents('ul').find('li').removeClass('current');
      $(this).addClass('current');
    });

    $(window).on("mousemove", function(e) {
      planet_types.mouse = e;
    })

    $('.planet_types .panel_description').text(planet_types.data["description"]);

    if (mb_utils.getIEVersion().major != "-1"){
      $('#confirmed a').prop("onclick", "");
      $('#candidate a').prop("onclick", "");

      $('#confirmed').click(function(){
        $('#planet_types_candidate').hide();
        $('#planet_types_confirmed').show();
      });

      $('#candidate').click(function(){
        $('#planet_types_confirmed').hide();
        $('#planet_types_candidate').show();
      });

      setTimeout(function(){
        planet_types.buildGraph('confirmed', '#planet_types_confirmed');
        planet_types.buildGraph('candidate', '#planet_types_candidate');
      }, 600)
    } else {
      setTimeout(function(){
        planet_types.buildGraph('confirmed');
      }, 600)
    }

  },

  buildGraph: function(type, svg){
    if (typeof svg !== 'undefined'){
      var container = svg;
    } else {
      var container = '#planet_types_confirmed';
    }
    var type_data = planet_types.data[type + "_planets"];
    var chartData = { "barCircleWeb":[] };
    var colors = ["#D7440E", "#AE3E10", "#933414", "#683019", "#6B2E19", "#5C271A"];

    // create data object
    var idx = 0;
    for (var item in type_data){
      // convert keys to labels
      var label = Object.keys(type_data)[idx].replace(/_/g, " ")
                  .replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
      chartData.barCircleWeb.push({"index": idx/10 + 0.4, "value": type_data[item], "fill": colors[idx], "label": label});
      idx += 1;
    }



    $(container + ' #circleBar-web-text-count').text(planet_types.data["total_" + type]);
    $(container + " #circleBar-web-text-type").text(type);

    function drawBarCircleChart(data,target,values,labels){
        var w = 400,
            h = 400,
            size = planet_types.data["total_" + type],
            radius = 200,
            sectorWidth = .07,
            radScale = 30,
            sectorScale = 1.1,
            target = d3.select(target),
            valueText = d3.select(values),
            labelText = d3.select(labels);


        var arc = d3.svg.arc()
            .innerRadius(function(d,i){return (d.index/sectorScale) * radius + radScale; })
            .outerRadius(function(d,i){return ((d.index/sectorScale) + (sectorWidth/sectorScale)) * radius + radScale; })
            .startAngle(Math.PI)
            .endAngle(function(d) { return Math.PI + (d.value / size) * 2 * Math.PI; });

        var path = target.html("").selectAll("path")
            .data(data);

        var tooltip = d3.select("body").select(".planet_types")
            .append("div")
            .attr("class", "label_tooltip")
            .style("position", "absolute")
            .style("z-index", "10")
            .style("visibility", "hidden")
            .style("background", "#000")
            .text("a simple tooltip")

        //TODO: seperate color and index from data object, make it a pain to update object order
        path.enter().append("svg:path")
            .attr("fill",function(d,i){return d.fill})
            //.attr("stroke","#D1D3D4")
            .transition()
            .ease("elastic")
            .duration(1600)
            .delay(function(d,i){return i*150})
            .attrTween("d", arcTween);

        valueText.html("").selectAll("tspan").data(data).enter()
            .append("tspan")
            .attr({
                x:12,
                y:function(d,i){return i*18}
            })
            .text(function(d,i){return data[i].value});

        labelText.html("").selectAll("tspan").data(data).enter()
            .append("tspan")
            .attr({
                x:50,
                y:function(d,i){return i*24}
            })
            .text(function(d,i){return data[i].label})
            .on("mouseover", function(d,i){
              if (data[i].label.toLowerCase() != 'unknown') {
                tooltip.html('<h3>'+data[i].label+'</h3>'+planet_types.data["tips"][data[i].label.toLowerCase().replace("-","_").replace(" ","_")]);

                return tooltip.style("visibility", "visible")


              }
            })
              .on("mouseout", function(){return tooltip.style("visibility", "hidden");})
              .on("mousemove", function(){

                // console.log(this)

                return tooltip.style("top", (d3.event.pageY - $('#page').offset().top - 10)+"px").style("left", (d3.event.pageX - $('#page').offset().left - 220+"px"));
              })
              .on("mouseout", function(){return tooltip.style("visibility", "hidden");});

        if (data.length > 5){
          d3.select(container + " #circleBar-web-line5").attr("opacity", "1");
        } else {
          d3.select(container + " #circleBar-web-line5").attr("opacity", "0");
        }

        function arcTween(b) {
            var i = d3.interpolate({value: 0}, b);
            return function(t) {
                return arc(i(t));
            };
        }
    }

    // Animation Queue

    // moving timeout to init function until further notice - PT
    // setTimeout(function(){drawBarCircleChart(chartData.barCircleWeb,"#circleBar-web-chart","#circleBar-web-values","#circleBar-web-labels")},600);
    drawBarCircleChart(chartData.barCircleWeb,container + " #circleBar-web-chart",container + " #circleBar-web-values",container + " #circleBar-web-labels")

    d3.select(container + " #circleBar-web-icon")
        .transition()
        .delay(600)
        .duration(1500)
        .attr("opacity","1");
    d3.select(container + " #circleBar-web-text")
        .transition()
        .delay(850)
        .duration(500)
        .attr("opacity","1");

    d3.select(container + " #circleBar-web-clipLabels")
        .transition()
        .delay(700)
        .duration(1250)
        .attr("height","180");
  }

}
;
/* 
*   lightbox
*
*   This is lightbox for things like images and videos
*   Used on grid/list pages, but could be used elsewhere in future
*
*/


var lightbox = {
  
  init: function () {
    this.initFancybox();
  },
  
  initFancybox: function () {
    if($.fancybox){    //different versions of fb sometimes loaded maybe causing probs here...
			// only init if it is being used
			$("[rel='basic_fancybox']").fancybox({
				padding: 10,
				openEffect  : 'fade',
				closeEffect : 'fade',
				nextEffect  : 'fade',
				prevEffect  : 'fade',
				arrows : false,
				theme : 'light'
			});

			// IMAGES

			$(".fancybox_slideshow").fancybox({
				padding: 10,
				openEffect  : 'fade',
				closeEffect : 'fade',
				mouseWheel: false,
				theme : 'dark',
				helpers : {
					thumbs: {
						// This allows for the user to specify which thumbnail to be displayed
						source : function (item) {
							return $(item.element).attr("data-thumbnail"); //get the image url for thumbnail
						}
					}
				},
				beforeLoad: function(){
					// var strVar = $(this.element).attr("data-title") + ' <a href="' + $(this.element).attr('data-link') + '">More Info</a>';
					var strVar = $(this.element).attr("data-title");
					var origin =  window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');
					strVar += "<div class='addthis_toolbox addthis_default_style' " +
							" addthis:url='" + origin + $(this.element).attr("data-link")+ "'" +
							" addthis:title='"  + $(this.element).attr("data-title") + "'" +
							" addthis:description='" + $(this.element).attr("data-description") + "'>";

					strVar += "   <div class=\"buttons\">";
					strVar += "     <a class=\"addthis_button_compact\">";
					strVar += "       <img src=\"\/assets\/share.png\">";
					strVar += "     <\/a>";
					strVar += "     <a class=\"\" href=\"" + origin + $(this.element).attr('data-link') + " \" target=\"_top\">";
					strVar +=         "more info ";
					strVar += "     <\/a>";
					strVar += "   <\/div>";
					strVar += "<\/div>";

					this.title = strVar;
				},

				afterShow: function(){
					if(typeof addthis != "undefined"){
						addthis.toolbox( $(".addthis_toolbox").get() );
					}
				}
			});
		}
	}
}


$(document).ready(function(){
  lightbox.init();
})
;
var by_method = {
	num_methods: 4,
  init: function(){
    $.get('/planet_methods.json', function(data) {
			$.each(data.slice(0, by_method.num_methods), function (k, v) {
				var li = "<li class='method expandable'>";
				if (v.image) {
					li += "<div class='method_image'><img src='" + v.image + "'></div>";
				}
				li += "<div class='method_value'>" + v.val.toFixed(1) + "%</div>";
				li += "<div class='method_name'>" + v.name + "</div>";
				li += "<div class='arrow_prompt'><span class='icon'></span></div>"
				li += "<div class='method_description'>" + v.description + "</div>";
				li += "</li>";

				$('ul.methods').append(li);
			});
			var other = "";
			$.each(data.slice(by_method.num_methods), function (k, v) {
				other += v.val + "% " + v.name;
				if (k < (data.length - by_method.num_methods - 1)) {
					other += ", ";
				}
			});


			$('ul.methods').after("<p class='caption'>" + other + "</p>");
			by_method.initListeners();
		});
  },

  initListeners: function(){
    $('.expandable').click(function(){
      $(this).toggleClass("expanded");
    })  
  }
}


;

var mb_nav_search = {

  init: function(){
    $('.nav_search .search_submit').click(function() {
      /* Open/Close/Submit via Top Nav search icon */
      if (mb_nav_search.nav_search_orig_size == null) { mb_nav_search.nav_search_orig_size = $('.nav_search .search_field').css('width'); }
      if ($('.nav_search .search_field').css('width') == mb_nav_search.nav_search_orig_size) {
        //console.log('click: opening');
        $('.nav_search .search_field').css('width','100%').addClass('search_open');
        $('.nav_search .search_field').focus();
        mb_nav_search.nav_search_open = true;
      } else {
        if ($('.nav_search .search_field').val()) {
          //console.log('click: submitting');
          $('.nav_search').submit();
        } else {
          //console.log('click: closing');
          $('.nav_search .search_field').css('width', mb_nav_search.nav_search_orig_size).removeClass('search_open'); 
          mb_nav_search.nav_search_open = false;
        }
      }
    });
  }
  
};

$(function() {
  mb_nav_search.init();
});

/*
 * @author  Mudit Ameta
 * @license https://github.com/zeusdeux/isInViewport/blob/master/license.md MIT
 */

!function(a,b){function c(b){var c,d=a("<div></div>").css({width:"100%"});return b.append(d),c=b.width()-d.width(),d.remove(),c}function d(e,f){var g=e.getBoundingClientRect(),h=g.top,i=g.bottom,j=g.left,k=g.right,l=a.extend({tolerance:0,viewport:b},f),m=!1,n=l.viewport.jquery?l.viewport:a(l.viewport);n.length||(console.warn("isInViewport: The viewport selector you have provided matches no element on page."),console.warn("isInViewport: Defaulting to viewport as window"),n=a(b));var o=n.height(),p=n.width(),q=n[0].toString();if(n[0]!==b&&"[object Window]"!==q&&"[object DOMWindow]"!==q){var r=n[0].getBoundingClientRect();h-=r.top,i-=r.top,j-=r.left,k-=r.left,d.scrollBarWidth=d.scrollBarWidth||c(n),p-=d.scrollBarWidth}return l.tolerance=~~Math.round(parseFloat(l.tolerance)),l.tolerance<0&&(l.tolerance=o+l.tolerance),0>=k||j>=p?m:m=l.tolerance?h<=l.tolerance&&i>=l.tolerance:i>0&&o>=h}String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^\s*(.*?)\s*$/,"$1")});var e=function(b){if(1===arguments.length&&"function"==typeof b&&(b=[b]),!(b instanceof Array))throw new SyntaxError("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions");for(var c=0;c<b.length;c++)if("function"==typeof b[c])for(var d=0;d<this.length;d++)b[c].call(a(this[d]));else console.warn("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"),console.warn("isInViewport: Ignoring non-function values in array and moving on");return this};a.fn["do"]=function(a){return console.warn("isInViewport: .do is deprecated as it causes issues in IE and some browsers since it's a reserved word. Use $.fn.run instead i.e., $(el).run(fn)."),e(a)},a.fn.run=e;var f=function(b){if(b){var c=b.split(",");return 1===c.length&&isNaN(c[0])&&(c[1]=c[0],c[0]=void 0),{tolerance:c[0]?c[0].trim():void 0,viewport:c[1]?a(c[1].trim()):void 0}}return{}};a.extend(a.expr[":"],{"in-viewport":a.expr.createPseudo?a.expr.createPseudo(function(a){return function(b){return d(b,f(a))}}):function(a,b,c){return d(a,f(c[3]))}}),a.fn.isInViewport=function(a){return this.filter(function(b,c){return d(c,a)})}}(jQuery,window);
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */

!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");
!function(e){function t(r){if(n[r])return n[r].exports;var l=n[r]={exports:{},id:r,loaded:!1};return e[r].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(2),l=n(13),i=n(4),o=n(8);window.React=r,window.ReactDOM=l,window.createReactClass=i,window.PropTypes=o},function(e,t){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(e){l[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(e){return!1}}var l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,a,u=n(e),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var s in r)i.call(r,s)&&(u[s]=r[s]);if(l){a=l(r);for(var f=0;f<a.length;f++)o.call(r,a[f])&&(u[a[f]]=r[a[f]])}}return u}},function(e,t,n){"use strict";e.exports=n(10)},function(e,t,n){"use strict";function r(e){return e}function l(e,t,n){function l(e,t){var n=g.hasOwnProperty(t)?g[t]:null;x.hasOwnProperty(t)&&u("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&u("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function i(e,n){if(n){u("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),u(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;n.hasOwnProperty(c)&&w.mixins(e,n.mixins);for(var o in n)if(n.hasOwnProperty(o)&&o!==c){var a=n[o],s=r.hasOwnProperty(o);if(l(s,o),w.hasOwnProperty(o))w[o](e,a);else{var f=g.hasOwnProperty(o),h="function"==typeof a,m=h&&!f&&!s&&n.autobind!==!1;if(m)i.push(o,a),r[o]=a;else if(s){var y=g[o];u(f&&("DEFINE_MANY_MERGED"===y||"DEFINE_MANY"===y),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",y,o),"DEFINE_MANY_MERGED"===y?r[o]=d(r[o],a):"DEFINE_MANY"===y&&(r[o]=p(r[o],a))}else r[o]=a}}}}function s(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var l=n in w;u(!l,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in e;if(i){var o=b.hasOwnProperty(n)?b[n]:null;return u("DEFINE_MANY_MERGED"===o,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=d(e[n],r))}e[n]=r}}}function f(e,t){u(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(u(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var l={};return f(l,n),f(l,r),l}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],l=t[n+1];e[r]=h(e,l)}}function y(e){var t=r(function(e,r,l){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=a,this.updater=l||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;u("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new T,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(i.bind(null,t)),i(t,E),i(t,e),i(t,k),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),u(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var l in g)t.prototype[l]||(t.prototype[l]=null);return t}var v=[],g={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},w={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=o({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=o({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=o({},e.propTypes,t)},statics:function(e,t){s(e,t)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},k={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},T=function(){};return o(T.prototype,e.prototype,x),y}var i,o=n(1),a=n(5),u=n(6),c="mixins";i={},e.exports=l},function(e,t,n){"use strict";var r=n(2),l=n(3);if("undefined"==typeof r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;e.exports=l(r.Component,r.isValidElement,i)},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,u){if(l(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,i,o,a,u],f=0;c=new Error(t.replace(/%s/g,function(){return s[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var l=function(e){};e.exports=r},function(e,t,n){"use strict";function r(){}function l(){}var i=n(9);l.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,l,o){if(o!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){e.exports=n(7)()},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,n){/** @license React v16.9.0
	 * react.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function r(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}function l(e,t,n){this.props=e,this.context=t,this.refs=z,this.updater=n||F}function i(){}function o(e,t,n){this.props=e,this.context=t,this.refs=z,this.updater=n||F}function a(e,t,n){var r=void 0,l={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)W.call(t,r)&&!B.hasOwnProperty(r)&&(l[r]=t[r]);var a=arguments.length-2;if(1===a)l.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===l[r]&&(l[r]=a[r]);return{$$typeof:k,type:e,key:i,ref:o,props:l,_owner:j.current}}function u(e,t){return{$$typeof:k,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c(e){return"object"==typeof e&&null!==e&&e.$$typeof===k}function s(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function f(e,t,n,r){if(H.length){var l=H.pop();return l.result=e,l.keyPrefix=t,l.func=n,l.context=r,l.count=0,l}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function d(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>H.length&&H.push(e)}function p(e,t,n,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case k:case x:o=!0}}if(o)return n(l,e,""===t?"."+m(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){i=e[a];var u=t+m(i,a);o+=p(i,u,n,l)}else if(null===e||"object"!=typeof e?u=null:(u=O&&e[O]||e["@@iterator"],u="function"==typeof u?u:null),"function"==typeof u)for(e=u.call(e),a=0;!(i=e.next()).done;)i=i.value,u=t+m(i,a++),o+=p(i,u,n,l);else if("object"===i)throw n=""+e,r(Error(31),"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return o}function h(e,t,n){return null==e?0:p(e,"",t,n)}function m(e,t){return"object"==typeof e&&null!==e&&null!=e.key?s(e.key):t.toString(36)}function y(e,t){e.func.call(e.context,t,e.count++)}function v(e,t,n){var r=e.result,l=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?g(e,r,n,function(e){return e}):null!=e&&(c(e)&&(e=u(e,l+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(V,"$&/")+"/")+n)),r.push(e))}function g(e,t,n,r,l){var i="";null!=n&&(i=(""+n).replace(V,"$&/")+"/"),t=f(t,i,r,l),h(e,v,t),d(t)}function b(){var e=A.current;if(null===e)throw r(Error(321));return e}var w=n(1),E="function"==typeof Symbol&&Symbol.for,k=E?Symbol.for("react.element"):60103,x=E?Symbol.for("react.portal"):60106,T=E?Symbol.for("react.fragment"):60107,_=E?Symbol.for("react.strict_mode"):60108,C=E?Symbol.for("react.profiler"):60114,S=E?Symbol.for("react.provider"):60109,P=E?Symbol.for("react.context"):60110,N=E?Symbol.for("react.forward_ref"):60112,M=E?Symbol.for("react.suspense"):60113,R=E?Symbol.for("react.suspense_list"):60120,D=E?Symbol.for("react.memo"):60115,I=E?Symbol.for("react.lazy"):60116;E&&Symbol.for("react.fundamental"),E&&Symbol.for("react.responder");var O="function"==typeof Symbol&&Symbol.iterator,F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z={};l.prototype.isReactComponent={},l.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw r(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},l.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},i.prototype=l.prototype;var U=o.prototype=new i;U.constructor=o,w(U,l.prototype),U.isPureReactComponent=!0;var A={current:null},L={suspense:null},j={current:null},W=Object.prototype.hasOwnProperty,B={key:!0,ref:!0,__self:!0,__source:!0},V=/\/+/g,H=[],Y={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return g(e,r,null,t,n),r},forEach:function(e,t,n){return null==e?e:(t=f(null,null,t,n),h(e,y,t),void d(t))},count:function(e){return h(e,function(){return null},null)},toArray:function(e){var t=[];return g(e,t,null,function(e){return e}),t},only:function(e){if(!c(e))throw r(Error(143));return e}},createRef:function(){return{current:null}},Component:l,PureComponent:o,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:P,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:S,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:N,render:e}},lazy:function(e){return{$$typeof:I,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:D,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return b().useCallback(e,t)},useContext:function(e,t){return b().useContext(e,t)},useEffect:function(e,t){return b().useEffect(e,t)},useImperativeHandle:function(e,t,n){return b().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return b().useLayoutEffect(e,t)},useMemo:function(e,t){return b().useMemo(e,t)},useReducer:function(e,t,n){return b().useReducer(e,t,n)},useRef:function(e){return b().useRef(e)},useState:function(e){return b().useState(e)},Fragment:T,Profiler:C,StrictMode:_,Suspense:M,unstable_SuspenseList:R,createElement:a,cloneElement:function(e,t,n){if(null===e||void 0===e)throw r(Error(267),e);var l=void 0,i=w({},e.props),o=e.key,a=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,u=j.current),void 0!==t.key&&(o=""+t.key);var c=void 0;e.type&&e.type.defaultProps&&(c=e.type.defaultProps);for(l in t)W.call(t,l)&&!B.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}if(l=arguments.length-2,1===l)i.children=n;else if(1<l){c=Array(l);for(var s=0;s<l;s++)c[s]=arguments[s+2];i.children=c}return{$$typeof:k,type:e.type,key:o,ref:a,props:i,_owner:u}},createFactory:function(e){var t=a.bind(null,e);return t.type=e,t},isValidElement:c,version:"16.9.0",unstable_withSuspenseConfig:function(e,t){var n=L.suspense;L.suspense=void 0===t?null:t;try{e()}finally{L.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:A,ReactCurrentBatchConfig:L,ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:w}},Q={default:Y},$=Q&&Y||Q;e.exports=$.default||$},,function(e,t,n){/** @license React v16.9.0
	 * react-dom.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function r(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}function l(){if(al)for(var e in ul){var t=ul[e],n=al.indexOf(e);if(!(-1<n))throw r(Error(96),e);if(!cl[n]){if(!t.extractEvents)throw r(Error(97),e);cl[n]=t,n=t.eventTypes;for(var l in n){var o=void 0,a=n[l],u=t,c=l;if(sl.hasOwnProperty(c))throw r(Error(99),c);sl[c]=a;var s=a.phasedRegistrationNames;if(s){for(o in s)s.hasOwnProperty(o)&&i(s[o],u,c);o=!0}else a.registrationName?(i(a.registrationName,u,c),o=!0):o=!1;if(!o)throw r(Error(98),l,e)}}}}function i(e,t,n){if(fl[e])throw r(Error(100),e);fl[e]=t,dl[e]=t.eventTypes[n].dependencies}function o(e,t,n,r,l,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}function a(e,t,n,r,l,i,a,u,c){pl=!1,hl=null,o.apply(vl,arguments)}function u(e,t,n,l,i,o,u,c,s){if(a.apply(this,arguments),pl){if(!pl)throw r(Error(198));var f=hl;pl=!1,hl=null,ml||(ml=!0,yl=f)}}function c(e,t,n){var r=e.type||"unknown-event";e.currentTarget=wl(n),u(r,t,void 0,e),e.currentTarget=null}function s(e,t){if(null==t)throw r(Error(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function f(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function d(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)c(e,t[r],n[r]);else t&&c(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function p(e){if(null!==e&&(El=s(El,e)),e=El,El=null,e){if(f(e,d),El)throw r(Error(95));if(ml)throw e=yl,ml=!1,yl=null,e}}function h(e,t){var n=e.stateNode;if(!n)return null;var l=gl(n);if(!l)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(l=!l.disabled)||(e=e.type,l=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!l;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw r(Error(231),t,typeof n);return n}function m(e){if(e[Tl])return e[Tl];for(;!e[Tl];){if(!e.parentNode)return null;e=e.parentNode}return e=e[Tl],5===e.tag||6===e.tag?e:null}function y(e){return e=e[Tl],!e||5!==e.tag&&6!==e.tag?null:e}function v(e){if(5===e.tag||6===e.tag)return e.stateNode;throw r(Error(33))}function g(e){return e[_l]||null}function b(e){do e=e.return;while(e&&5!==e.tag);return e?e:null}function w(e,t,n){(t=h(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=s(n._dispatchListeners,t),n._dispatchInstances=s(n._dispatchInstances,e))}function E(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=b(t);for(t=n.length;0<t--;)w(n[t],"captured",e);for(t=0;t<n.length;t++)w(n[t],"bubbled",e)}}function k(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=h(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=s(n._dispatchListeners,t),n._dispatchInstances=s(n._dispatchInstances,e))}function x(e){e&&e.dispatchConfig.registrationName&&k(e._targetInst,null,e)}function T(e){f(e,E)}function _(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function C(e){if(Pl[e])return Pl[e];if(!Sl[e])return e;var t,n=Sl[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nl)return Pl[e]=n[t];return e}function S(){if(Ul)return Ul;var e,t,n=zl,r=n.length,l="value"in Fl?Fl.value:Fl.textContent,i=l.length;for(e=0;e<r&&n[e]===l[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===l[i-t];t++);return Ul=l.slice(e,1<t?1-t:void 0)}function P(){return!0}function N(){return!1}function M(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var l in e)e.hasOwnProperty(l)&&((t=e[l])?this[l]=t(n):"target"===l?this.target=r:this[l]=n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?P:N,this.isPropagationStopped=N,this}function R(e,t,n,r){if(this.eventPool.length){var l=this.eventPool.pop();return this.call(l,e,t,n,r),l}return new this(e,t,n,r)}function D(e){if(!(e instanceof this))throw r(Error(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function I(e){e.eventPool=[],e.getPooled=R,e.release=D}function O(e,t){switch(e){case"keyup":return-1!==jl.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function F(e){return e=e.detail,"object"==typeof e&&"data"in e?e.data:null}function z(e,t){switch(e){case"compositionend":return F(t);case"keypress":return 32!==t.which?null:($l=!0,Yl);case"textInput":return e=t.data,e===Yl&&$l?null:e;default:return null}}function U(e,t){if(ql)return"compositionend"===e||!Wl&&O(e,t)?(e=S(),Ul=zl=Fl=null,ql=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hl&&"ko"!==t.locale?null:t.data;default:return null}}function A(e){if(e=bl(e)){if("function"!=typeof Gl)throw r(Error(280));var t=gl(e.stateNode);Gl(e.stateNode,e.type,t)}}function L(e){Xl?Zl?Zl.push(e):Zl=[e]:Xl=e}function j(){if(Xl){var e=Xl,t=Zl;if(Zl=Xl=null,A(e),t)for(e=0;e<t.length;e++)A(t[e])}}function W(e,t){return e(t)}function B(e,t,n,r){return e(t,n,r)}function V(){}function H(){null===Xl&&null===Zl||(V(),j())}function Y(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ti[e.type]:"textarea"===t}function Q(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function $(e){if(!Cl)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"==typeof t[e]),t}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!=typeof n&&"function"==typeof n.get&&"function"==typeof n.set){var l=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function G(e){e._valueTracker||(e._valueTracker=K(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),e=r,e!==n&&(t.setValue(e),!0)}function Z(e){return null===e||"object"!=typeof e?null:(e=gi&&e[gi]||e["@@iterator"],"function"==typeof e?e:null)}function J(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ai:return"Fragment";case oi:return"Portal";case ci:return"Profiler";case ui:return"StrictMode";case hi:return"Suspense";case mi:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case fi:return"Context.Consumer";case si:return"Context.Provider";case pi:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case yi:return J(e.type);case vi:if(e=1===e._status?e._result:null)return J(e)}return null}function ee(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,l=e._debugSource,i=J(e.type);n=null,r&&(n=J(r.type)),r=i,i="",l?i=" (at "+l.fileName.replace(ri,"")+":"+l.lineNumber+")":n&&(i=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+i}t+=n,e=e.return}while(e);return t}function te(e){return!!wi.call(ki,e)||!wi.call(Ei,e)&&(bi.test(e)?ki[e]=!0:(Ei[e]=!0,!1))}function ne(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),"data-"!==e&&"aria-"!==e));default:return!1}}function re(e,t,n,r){if(null===t||"undefined"==typeof t||ne(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function le(e,t,n,r,l,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i}function ie(e){return e[1].toUpperCase()}function oe(e,t,n,r){var l=xi.hasOwnProperty(t)?xi[t]:null,i=null!==l?0===l.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]);i||(re(t,n,l,r)&&(n=null),r||null===l?te(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=null===n?3!==l.type&&"":n:(t=l.attributeName,r=l.attributeNamespace,null===n?e.removeAttribute(t):(l=l.type,n=3===l||4===l&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function ae(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ue(e,t){var n=t.checked;return il({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ce(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ae(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function se(e,t){t=t.checked,null!=t&&oe(e,"checked",t,!1)}function fe(e,t){se(e,t);var n=ae(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?pe(e,t.type,n):t.hasOwnProperty("defaultValue")&&pe(e,t.type,ae(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function de(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function pe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function he(e,t,n){return e=M.getPooled(_i.change,e,t,n),e.type="change",L(n),T(e),e}function me(e){p(e)}function ye(e){var t=v(e);if(X(t))return e}function ve(e,t){if("change"===e)return t}function ge(){Ci&&(Ci.detachEvent("onpropertychange",be),Si=Ci=null)}function be(e){if("value"===e.propertyName&&ye(Si))if(e=he(Si,e,Q(e)),ei)p(e);else{ei=!0;try{W(me,e)}finally{ei=!1,H()}}}function we(e,t,n){"focus"===e?(ge(),Ci=t,Si=n,Ci.attachEvent("onpropertychange",be)):"blur"===e&&ge()}function Ee(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ye(Si)}function ke(e,t){if("click"===e)return ye(t)}function xe(e,t){if("input"===e||"change"===e)return ye(t)}function Te(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ri[e])&&!!t[e]}function _e(){return Te}function Ce(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}function Se(e,t){if(Ce(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ji.call(t,n[r])||!Ce(e[n[r]],t[n[r]]))return!1;return!0}function Pe(e,t){return{responder:e,props:t}}function Ne(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Me(e){if(2!==Ne(e))throw r(Error(188))}function Re(e){var t=e.alternate;if(!t){if(t=Ne(e),3===t)throw r(Error(188));return 1===t?null:e}for(var n=e,l=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(l=i.return,null!==l){n=l;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Me(i),e;if(o===l)return Me(i),t;o=o.sibling}throw r(Error(188))}if(n.return!==l.return)n=i,l=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,l=o;break}if(u===l){a=!0,l=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,l=i;break}if(u===l){a=!0,l=o,n=i;break}u=u.sibling}if(!a)throw r(Error(189))}}if(n.alternate!==l)throw r(Error(190))}if(3!==n.tag)throw r(Error(188));return n.stateNode.current===n?e:t}function De(e){if(e=Re(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ie(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,0===e&&13===t&&(e=13)):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Oe(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(r=3!==r.tag?null:r.stateNode.containerInfo,!r)break;e.ancestors.push(n),n=m(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var l=Q(e.nativeEvent);r=e.topLevelType;for(var i=e.nativeEvent,o=null,a=0;a<cl.length;a++){var u=cl[a];u&&(u=u.extractEvents(r,t,i,l))&&(o=s(o,u))}p(o)}}function Fe(e,t){ze(t,e,!1)}function ze(e,t,n){switch(uo(t)){case 0:var r=Ue.bind(null,t,1);break;case 1:r=Ae.bind(null,t,1);break;default:r=Le.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Ue(e,t,n){ei||V();var r=Le,l=ei;ei=!0;try{B(r,e,t,n)}finally{(ei=l)||H()}}function Ae(e,t,n){Le(e,t,n)}function Le(e,t,n){if(so){if(t=Q(n),t=m(t),null===t||"number"!=typeof t.tag||2===Ne(t)||(t=null),co.length){var r=co.pop();r.topLevelType=e,r.nativeEvent=n,r.targetInst=t,e=r}else e={topLevelType:e,nativeEvent:n,targetInst:t,ancestors:[]};try{if(n=e,ei)Oe(n,void 0);else{ei=!0;try{Jl(Oe,n,void 0)}finally{ei=!1,H()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>co.length&&co.push(e)}}}function je(e){var t=fo.get(e);return void 0===t&&(t=new Set,fo.set(e,t)),t}function We(e){if(e=e||("undefined"!=typeof document?document:void 0),"undefined"==typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Be(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ve(e,t){var n=Be(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Be(n)}}function He(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?He(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ye(){for(var e=window,t=We();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;e=t.contentWindow,t=We(e.document)}return t}function Qe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function $e(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return go||null==mo||mo!==We(n)?null:(n=mo,"selectionStart"in n&&Qe(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),vo&&Se(vo,n)?null:(vo=n,e=M.getPooled(ho.select,yo,e,t),e.type="select",e.target=mo,T(e),e))}function qe(e){var t="";return ll.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function Ke(e,t){return e=il({children:void 0},t),(t=qe(t.children))&&(e.children=t),e}function Ge(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ae(n),t=null,l=0;l<e.length;l++){if(e[l].value===n)return e[l].selected=!0,void(r&&(e[l].defaultSelected=!0));null!==t||e[l].disabled||(t=e[l])}null!==t&&(t.selected=!0)}}function Xe(e,t){if(null!=t.dangerouslySetInnerHTML)throw r(Error(91));return il({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ze(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,t=t.children,null!=t){if(null!=n)throw r(Error(92));if(Array.isArray(t)){if(!(1>=t.length))throw r(Error(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:ae(n)}}function Je(e,t){var n=ae(t.value),r=ae(t.defaultValue);null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function et(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function tt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?tt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function rt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function lt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||xo.hasOwnProperty(e)&&xo[e]?(""+t).trim():t+"px"}function it(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),l=lt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}function ot(e,t){if(t){if(_o[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw r(Error(137),e,"");if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw r(Error(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw r(Error(61))}if(null!=t.style&&"object"!=typeof t.style)throw r(Error(62),"")}}function at(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ut(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=je(e);t=dl[t];for(var r=0;r<t.length;r++){var l=t[r];if(!n.has(l)){switch(l){case"scroll":ze(e,"scroll",!0);break;case"focus":case"blur":ze(e,"focus",!0),ze(e,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":$(l)&&ze(e,l,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ol.indexOf(l)&&Fe(l,e)}n.add(l)}}}function ct(){}function st(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ft(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function dt(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function pt(e){0>Ro||(e.current=Mo[Ro],Mo[Ro]=null,Ro--)}function ht(e,t){Ro++,Mo[Ro]=e.current,e.current=t}function mt(e,t){var n=e.type.contextTypes;if(!n)return Do;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l,i={};for(l in n)i[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function yt(e){return e=e.childContextTypes,null!==e&&void 0!==e}function vt(e){pt(Oo,e),pt(Io,e)}function gt(e){pt(Oo,e),pt(Io,e)}function bt(e,t,n){if(Io.current!==Do)throw r(Error(168));ht(Io,t,e),ht(Oo,n,e)}function wt(e,t,n){var l=e.stateNode;if(e=t.childContextTypes,"function"!=typeof l.getChildContext)return n;l=l.getChildContext();for(var i in l)if(!(i in e))throw r(Error(108),J(t)||"Unknown",i);return il({},n,l)}function Et(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Do,Fo=Io.current,ht(Io,t,e),ht(Oo,Oo.current,e),!0}function kt(e,t,n){var l=e.stateNode;if(!l)throw r(Error(169));n?(t=wt(e,t,Fo),l.__reactInternalMemoizedMergedChildContext=t,pt(Oo,e),pt(Io,e),ht(Io,t,e)):pt(Oo,e),ht(Oo,n,e)}function xt(){switch(Bo()){case Vo:return 99;case Ho:return 98;case Yo:return 97;case Qo:return 96;case $o:return 95;default:throw r(Error(332))}}function Tt(e){switch(e){case 99:return Vo;case 98:return Ho;case 97:return Yo;case 96:return Qo;case 95:return $o;default:throw r(Error(332))}}function _t(e,t){return e=Tt(e),zo(e,t)}function Ct(e,t,n){return e=Tt(e),Uo(e,t,n)}function St(e){return null===Go?(Go=[e],Xo=Uo(Vo,Nt)):Go.push(e),qo}function Pt(){null!==Xo&&Ao(Xo),Nt()}function Nt(){if(!Zo&&null!==Go){Zo=!0;var e=0;try{var t=Go;_t(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(null!==n)}}),Go=null}catch(t){throw null!==Go&&(Go=Go.slice(e+1)),Uo(Vo,Pt),t}finally{Zo=!1}}}function Mt(e,t){return 1073741823===t?99:1===t?95:(e=10*(1073741821-t)-10*(1073741821-e),0>=e?99:250>=e?98:5250>=e?97:95)}function Rt(e,t){if(e&&e.defaultProps){t=il({},t),e=e.defaultProps;for(var n in e)void 0===t[n]&&(t[n]=e[n])}return t}function Dt(e){var t=e._result;switch(e._status){case 1:return t;case 2:throw t;case 0:throw t;default:switch(e._status=0,t=e._ctor,t=t(),t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}function It(){la=ra=na=null}function Ot(e,t){var n=e.type._context;ht(ta,n._currentValue,e),n._currentValue=t}function Ft(e){var t=ta.current;pt(ta,e),e.type._context._currentValue=t}function zt(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function Ut(e,t){na=e,la=ra=null,e=e.dependencies,null!==e&&null!==e.firstContext&&(e.expirationTime>=t&&(Ka=!0),e.firstContext=null)}function At(e,t){if(la!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(la=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ra){if(null===na)throw r(Error(308));ra=t,na.dependencies={expirationTime:0,firstContext:t,responders:null}}else ra=ra.next=t;return e._currentValue}function Lt(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function jt(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Wt(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Bt(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Vt(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,l=null;null===r&&(r=e.updateQueue=Lt(e.memoizedState))}else r=e.updateQueue,l=n.updateQueue,null===r?null===l?(r=e.updateQueue=Lt(e.memoizedState),l=n.updateQueue=Lt(n.memoizedState)):r=e.updateQueue=jt(l):null===l&&(l=n.updateQueue=jt(r));null===l||r===l?Bt(r,t):null===r.lastUpdate||null===l.lastUpdate?(Bt(r,t),Bt(l,t)):(Bt(r,t),l.lastUpdate=t)}function Ht(e,t){var n=e.updateQueue;n=null===n?e.updateQueue=Lt(e.memoizedState):Yt(e,n),null===n.lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Yt(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=jt(t)),t}function Qt(e,t,n,r,l,i){switch(n.tag){case 1:return e=n.payload,"function"==typeof e?e.call(i,r,l):e;case 3:e.effectTag=e.effectTag&-2049|64;case 0:if(e=n.payload,l="function"==typeof e?e.call(i,r,l):e,null===l||void 0===l)break;return il({},r,l);case 2:ia=!0}return r}function $t(e,t,n,r,l){ia=!1,t=Yt(e,t);for(var i=t.baseState,o=null,a=0,u=t.firstUpdate,c=i;null!==u;){var s=u.expirationTime;s<l?(null===o&&(o=u,i=c),a<s&&(a=s)):(Er(s,u.suspenseConfig),c=Qt(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(s=null,u=t.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<l?(null===s&&(s=u,null===o&&(i=c)),a<f&&(a=f)):(c=Qt(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===o&&(t.lastUpdate=null),null===s?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===s&&(i=c),t.baseState=i,t.firstUpdate=o,t.firstCapturedUpdate=s,e.expirationTime=a,e.memoizedState=c}function qt(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Kt(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Kt(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Kt(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var l=t;if("function"!=typeof n)throw r(Error(191),n);n.call(l)}e=e.nextEffect}}function Gt(e,t,n,r){t=e.memoizedState,n=n(r,t),n=null===n||void 0===n?t:il({},t,n),e.memoizedState=n,r=e.updateQueue,null!==r&&0===e.expirationTime&&(r.baseState=n)}function Xt(e,t,n,r,l,i,o){return e=e.stateNode,"function"==typeof e.shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!(t.prototype&&t.prototype.isPureReactComponent&&Se(n,r)&&Se(l,i))}function Zt(e,t,n){var r=!1,l=Do,i=t.contextType;return"object"==typeof i&&null!==i?i=At(i):(l=yt(t)?Fo:Io.current,r=t.contextTypes,i=(r=null!==r&&void 0!==r)?mt(e,l):Do),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ua,e.stateNode=t,t._reactInternalFiber=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function Jt(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ua.enqueueReplaceState(t,t.state,null)}function en(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=aa;var i=t.contextType;"object"==typeof i&&null!==i?l.context=At(i):(i=yt(t)?Fo:Io.current,l.context=mt(e,i)),i=e.updateQueue,null!==i&&($t(e,i,n,l,r),l.state=e.memoizedState),i=t.getDerivedStateFromProps,"function"==typeof i&&(Gt(e,t,i,n),l.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(t=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),t!==l.state&&ua.enqueueReplaceState(l,l.state,null),i=e.updateQueue,null!==i&&($t(e,i,n,l,r),l.state=e.memoizedState)),"function"==typeof l.componentDidMount&&(e.effectTag|=4)}function tn(e,t,n){if(e=n.ref,null!==e&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var l=void 0;if(n){if(1!==n.tag)throw r(Error(309));l=n.stateNode}if(!l)throw r(Error(147),e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=l.refs;t===aa&&(t=l.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw r(Error(284));if(!n._owner)throw r(Error(290),e)}return e}function nn(e,t){if("textarea"!==e.type)throw r(Error(31),"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function rn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function l(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return e=Ur(e,t,n),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,null!==r?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n)):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=jr(n,e.mode,r),t.return=e,t):(t=i(t,n,r),t.return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?(r=i(t,n.props,r),r.ref=tn(e,t,n),r.return=e,r):(r=Ar(n.type,n.key,n.props,null,e.mode,r),r.ref=tn(e,t,n),r.return=e,r)}function s(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Wr(n,e.mode,r),t.return=e,t):(t=i(t,n.children||[],r),t.return=e,t)}function f(e,t,n,r,l){return null===t||7!==t.tag?(t=Lr(n,e.mode,r,l),t.return=e,t):(t=i(t,n,r),t.return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return t=jr(""+t,e.mode,n),t.return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ii:return n=Ar(t.type,t.key,t.props,null,e.mode,n),n.ref=tn(e,null,t),n.return=e,n;case oi:return t=Wr(t,e.mode,n),t.return=e,t}if(ca(t)||Z(t))return t=Lr(t,e.mode,n,null),t.return=e,t;nn(e,t)}return null}function p(e,t,n,r){var l=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==l?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ii:return n.key===l?n.type===ai?f(e,t,n.props.children,r,l):c(e,t,n,r):null;case oi:return n.key===l?s(e,t,n,r):null}if(ca(n)||Z(n))return null!==l?null:f(e,t,n,r,null);nn(e,n)}return null}function h(e,t,n,r,l){if("string"==typeof r||"number"==typeof r)return e=e.get(n)||null,u(t,e,""+r,l);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ii:return e=e.get(null===r.key?n:r.key)||null,r.type===ai?f(t,e,r.props.children,l,r.key):c(t,e,r,l);case oi:return e=e.get(null===r.key?n:r.key)||null,s(t,e,r,l)}if(ca(r)||Z(r))return e=e.get(n)||null,f(t,e,r,l,null);nn(t,r)}return null}function m(r,i,a,u){for(var c=null,s=null,f=i,m=i=0,y=null;null!==f&&m<a.length;m++){f.index>m?(y=f,f=null):y=f.sibling;var v=p(r,f,a[m],u);if(null===v){null===f&&(f=y);break}e&&f&&null===v.alternate&&t(r,f),i=o(v,i,m),null===s?c=v:s.sibling=v,s=v,f=y}if(m===a.length)return n(r,f),c;if(null===f){for(;m<a.length;m++)f=d(r,a[m],u),null!==f&&(i=o(f,i,m),null===s?c=f:s.sibling=f,s=f);return c}for(f=l(r,f);m<a.length;m++)y=h(f,r,m,a[m],u),null!==y&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),i=o(y,i,m),null===s?c=y:s.sibling=y,s=y);return e&&f.forEach(function(e){return t(r,e)}),c}function y(i,a,u,c){var s=Z(u);if("function"!=typeof s)throw r(Error(150));if(u=s.call(u),null==u)throw r(Error(151));for(var f=s=null,m=a,y=a=0,v=null,g=u.next();null!==m&&!g.done;y++,g=u.next()){m.index>y?(v=m,m=null):v=m.sibling;var b=p(i,m,g.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,y),null===f?s=b:f.sibling=b,f=b,m=v}if(g.done)return n(i,m),s;if(null===m){for(;!g.done;y++,g=u.next())g=d(i,g.value,c),
null!==g&&(a=o(g,a,y),null===f?s=g:f.sibling=g,f=g);return s}for(m=l(i,m);!g.done;y++,g=u.next())g=h(m,i,y,g.value,c),null!==g&&(e&&null!==g.alternate&&m.delete(null===g.key?y:g.key),a=o(g,a,y),null===f?s=g:f.sibling=g,f=g);return e&&m.forEach(function(e){return t(i,e)}),s}return function(e,l,o,u){var c="object"==typeof o&&null!==o&&o.type===ai&&null===o.key;c&&(o=o.props.children);var s="object"==typeof o&&null!==o;if(s)switch(o.$$typeof){case ii:e:{for(s=o.key,c=l;null!==c;){if(c.key===s){if(7===c.tag?o.type===ai:c.elementType===o.type){n(e,c.sibling),l=i(c,o.type===ai?o.props.children:o.props,u),l.ref=tn(e,c,o),l.return=e,e=l;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===ai?(l=Lr(o.props.children,e.mode,u,o.key),l.return=e,e=l):(u=Ar(o.type,o.key,o.props,null,e.mode,u),u.ref=tn(e,l,o),u.return=e,e=u)}return a(e);case oi:e:{for(c=o.key;null!==l;){if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===o.containerInfo&&l.stateNode.implementation===o.implementation){n(e,l.sibling),l=i(l,o.children||[],u),l.return=e,e=l;break e}n(e,l);break}t(e,l),l=l.sibling}l=Wr(o,e.mode,u),l.return=e,e=l}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==l&&6===l.tag?(n(e,l.sibling),l=i(l,o,u),l.return=e,e=l):(n(e,l),l=jr(o,e.mode,u),l.return=e,e=l),a(e);if(ca(o))return m(e,l,o,u);if(Z(o))return y(e,l,o,u);if(s&&nn(e,o),"undefined"==typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,r(Error(152),e.displayName||e.name||"Component")}return n(e,l)}}function ln(e){if(e===da)throw r(Error(174));return e}function on(e,t){ht(ma,t,e),ht(ha,e,e),ht(pa,da,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nt(null,"");break;default:n=8===n?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=nt(t,n)}pt(pa,e),ht(pa,t,e)}function an(e){pt(pa,e),pt(ha,e),pt(ma,e)}function un(e){ln(ma.current);var t=ln(pa.current),n=nt(t,e.type);t!==n&&(ht(ha,e,e),ht(pa,n,e))}function cn(e){ha.current===e&&(pt(pa,e),pt(ha,e))}function sn(e){for(var t=e;null!==t;){if(13===t.tag){if(null!==t.memoizedState)return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fn(){throw r(Error(321))}function dn(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ce(e[n],t[n]))return!1;return!0}function pn(e,t,n,l,i,o){if(Na=o,Ma=t,Da=null!==e?e.memoizedState:null,Pa.current=null===Da?Va:Ha,t=n(l,i),La){do La=!1,Wa+=1,Da=null!==e?e.memoizedState:null,Fa=Ia,Ua=Oa=Ra=null,Pa.current=Ha,t=n(l,i);while(La);ja=null,Wa=0}if(Pa.current=Ba,e=Ma,e.memoizedState=Ia,e.expirationTime=za,e.updateQueue=Ua,e.effectTag|=Aa,e=null!==Ra&&null!==Ra.next,Na=0,Fa=Oa=Ia=Da=Ra=Ma=null,za=0,Ua=null,Aa=0,e)throw r(Error(300));return t}function hn(){Pa.current=Ba,Na=0,Fa=Oa=Ia=Da=Ra=Ma=null,za=0,Ua=null,Aa=0,La=!1,ja=null,Wa=0}function mn(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Oa?Ia=Oa=e:Oa=Oa.next=e,Oa}function yn(){if(null!==Fa)Oa=Fa,Fa=Oa.next,Ra=Da,Da=null!==Ra?Ra.next:null;else{if(null===Da)throw r(Error(310));Ra=Da;var e={memoizedState:Ra.memoizedState,baseState:Ra.baseState,queue:Ra.queue,baseUpdate:Ra.baseUpdate,next:null};Oa=null===Oa?Ia=e:Oa.next=e,Da=Ra.next}return Oa}function vn(e,t){return"function"==typeof t?t(e):t}function gn(e){var t=yn(),n=t.queue;if(null===n)throw r(Error(311));if(n.lastRenderedReducer=e,0<Wa){var l=n.dispatch;if(null!==ja){var i=ja.get(n);if(void 0!==i){ja.delete(n);var o=t.memoizedState;do o=e(o,i.action),i=i.next;while(null!==i);return Ce(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,l]}}return[t.memoizedState,l]}l=n.last;var a=t.baseUpdate;if(o=t.baseState,null!==a?(null!==l&&(l.next=null),l=a.next):l=null!==l?l.next:null,null!==l){var u=i=null,c=l,s=!1;do{var f=c.expirationTime;f<Na?(s||(s=!0,u=a,i=o),f>za&&(za=f)):(Er(f,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),a=c,c=c.next}while(null!==c&&c!==l);s||(u=a,i=o),Ce(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function bn(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Ua?(Ua={lastEffect:null},Ua.lastEffect=e.next=e):(t=Ua.lastEffect,null===t?Ua.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Ua.lastEffect=e)),e}function wn(e,t,n,r){var l=mn();Aa|=e,l.memoizedState=bn(t,n,void 0,void 0===r?null:r)}function En(e,t,n,r){var l=yn();r=void 0===r?null:r;var i=void 0;if(null!==Ra){var o=Ra.memoizedState;if(i=o.destroy,null!==r&&dn(r,o.deps))return void bn(wa,n,i,r)}Aa|=e,l.memoizedState=bn(t,n,i,r)}function kn(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function xn(){}function Tn(e,t,n){if(!(25>Wa))throw r(Error(301));var l=e.alternate;if(e===Ma||null!==l&&l===Ma)if(La=!0,e={expirationTime:Na,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===ja&&(ja=new Map),n=ja.get(t),void 0===n)ja.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=ar(),o=oa.suspense;i=ur(i,e,o),o={expirationTime:i,suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.last;if(null===a)o.next=o;else{var u=a.next;null!==u&&(o.next=u),a.next=o}if(t.last=o,0===e.expirationTime&&(null===l||0===l.expirationTime)&&(l=t.lastRenderedReducer,null!==l))try{var c=t.lastRenderedState,s=l(c,n);if(o.eagerReducer=l,o.eagerState=s,Ce(s,c))return}catch(e){}finally{}cr(e,i)}}function _n(e,t){var n=Or(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Cn(e,t){switch(e.tag){case 5:var n=e.type;return t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,null!==t&&(e.stateNode=t,!0);case 6:return t=""===e.pendingProps||3!==t.nodeType?null:t,null!==t&&(e.stateNode=t,!0);case 13:return!1;default:return!1}}function Sn(e){if($a){var t=Qa;if(t){var n=t;if(!Cn(e,t)){if(t=dt(n.nextSibling),!t||!Cn(e,t))return e.effectTag|=2,$a=!1,void(Ya=e);_n(Ya,n)}Ya=e,Qa=dt(t.firstChild)}else e.effectTag|=2,$a=!1,Ya=e}}function Pn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;Ya=e}function Nn(e){if(e!==Ya)return!1;if(!$a)return Pn(e),$a=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ft(t,e.memoizedProps))for(t=Qa;t;)_n(e,t),t=dt(t.nextSibling);return Pn(e),Qa=Ya?dt(e.stateNode.nextSibling):null,!0}function Mn(){Qa=Ya=null,$a=!1}function Rn(e,t,n,r){t.child=null===e?fa(t,null,n,r):sa(t,e.child,n,r)}function Dn(e,t,n,r,l){n=n.render;var i=t.ref;return Ut(t,l),r=pn(e,t,n,r,i,l),null===e||Ka?(t.effectTag|=1,Rn(e,t,r,l),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=l&&(e.expirationTime=0),Vn(e,t,l))}function In(e,t,n,r,l,i){if(null===e){var o=n.type;return"function"!=typeof o||Fr(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?(e=Ar(n.type,null,r,null,t.mode,i),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,On(e,t,o,r,l,i))}return o=e.child,l<i&&(l=o.memoizedProps,n=n.compare,n=null!==n?n:Se,n(l,r)&&e.ref===t.ref)?Vn(e,t,i):(t.effectTag|=1,e=Ur(o,r,i),e.ref=t.ref,e.return=t,t.child=e)}function On(e,t,n,r,l,i){return null!==e&&Se(e.memoizedProps,r)&&e.ref===t.ref&&(Ka=!1,l<i)?Vn(e,t,i):zn(e,t,n,r,i)}function Fn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function zn(e,t,n,r,l){var i=yt(n)?Fo:Io.current;return i=mt(t,i),Ut(t,l),n=pn(e,t,n,r,i,l),null===e||Ka?(t.effectTag|=1,Rn(e,t,n,l),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=l&&(e.expirationTime=0),Vn(e,t,l))}function Un(e,t,n,r,l){if(yt(n)){var i=!0;Et(t)}else i=!1;if(Ut(t,l),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Zt(t,n,r,l),en(t,n,r,l),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=At(c):(c=yt(n)?Fo:Io.current,c=mt(t,c));var s=n.getDerivedStateFromProps,f="function"==typeof s||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||u!==c)&&Jt(t,o,r,c),ia=!1;var d=t.memoizedState;u=o.state=d;var p=t.updateQueue;null!==p&&($t(t,p,r,o,l),u=t.memoizedState),a!==r||d!==u||Oo.current||ia?("function"==typeof s&&(Gt(t,n,s,r),u=t.memoizedState),(a=ia||Xt(t,n,a,r,d,u,c))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,a=t.memoizedProps,o.props=t.type===t.elementType?a:Rt(t.type,a),u=o.context,c=n.contextType,"object"==typeof c&&null!==c?c=At(c):(c=yt(n)?Fo:Io.current,c=mt(t,c)),s=n.getDerivedStateFromProps,(f="function"==typeof s||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||u!==c)&&Jt(t,o,r,c),ia=!1,u=t.memoizedState,d=o.state=u,p=t.updateQueue,null!==p&&($t(t,p,r,o,l),d=t.memoizedState),a!==r||u!==d||Oo.current||ia?("function"==typeof s&&(Gt(t,n,s,r),d=t.memoizedState),(s=ia||Xt(t,n,a,r,u,d,c))?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,c)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=c,r=s):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return An(e,t,n,r,i,l)}function An(e,t,n,r,l,i){Fn(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return l&&kt(t,n,!1),Vn(e,t,i);r=t.stateNode,qa.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=sa(t,e.child,null,i),t.child=sa(t,null,a,i)):Rn(e,t,a,i),t.memoizedState=r.state,l&&kt(t,n,!0),t.child}function Ln(e){var t=e.stateNode;t.pendingContext?bt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bt(e,t.context,!1),on(e,t.containerInfo)}function jn(e,t,n){var r,l=t.mode,i=t.pendingProps,o=ba.current,a=null,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(o&ga)&&(null===e||null!==e.memoizedState)),r?(a=Ga,u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=va),o&=ya,ht(ba,o,t),null===e)if(u){if(i=i.fallback,e=Lr(null,l,0,null),e.return=t,0===(2&t.mode))for(u=null!==t.memoizedState?t.child.child:t.child,e.child=u;null!==u;)u.return=e,u=u.sibling;n=Lr(i,l,n,null),n.return=t,e.sibling=n,l=e}else l=n=fa(t,null,i.children,n);else{if(null!==e.memoizedState)if(o=e.child,l=o.sibling,u){if(i=i.fallback,n=Ur(o,o.pendingProps,0),n.return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child,u!==o.child))for(n.child=u;null!==u;)u.return=n,u=u.sibling;i=Ur(l,i,l.expirationTime),i.return=t,n.sibling=i,l=n,n.childExpirationTime=0,n=i}else l=n=sa(t,o.child,i.children,n);else if(o=e.child,u){if(u=i.fallback,i=Lr(null,l,0,null),i.return=t,i.child=o,null!==o&&(o.return=i),0===(2&t.mode))for(o=null!==t.memoizedState?t.child.child:t.child,i.child=o;null!==o;)o.return=i,o=o.sibling;n=Lr(u,l,n,null),n.return=t,i.sibling=n,n.effectTag|=2,l=i,i.childExpirationTime=0}else n=l=sa(t,o,i.children,n);t.stateNode=e.stateNode}return t.memoizedState=a,t.child=l,n}function Wn(e,t,n,r,l){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.last=r,i.tail=n,i.tailExpiration=0,i.tailMode=l)}function Bn(e,t,n){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(Rn(e,t,r.children,n),r=ba.current,0!==(r&ga))r=r&ya|ga,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag){if(null!==e.memoizedState){e.expirationTime<n&&(e.expirationTime=n);var o=e.alternate;null!==o&&o.expirationTime<n&&(o.expirationTime=n),zt(e.return,n)}}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=ya}if(ht(ba,r,t),0===(2&t.mode))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;null!==n;)r=n.alternate,null!==r&&null===sn(r)&&(l=n),n=n.sibling;n=l,null===n?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Wn(t,!1,l,n,i);break;case"backwards":for(n=null,l=t.child,t.child=null;null!==l;){if(r=l.alternate,null!==r&&null===sn(r)){t.child=l;break}r=l.sibling,l.sibling=n,n=l,l=r}Wn(t,!0,n,null,i);break;case"together":Wn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw r(Error(153));if(null!==t.child){for(e=t.child,n=Ur(e,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Ur(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function Hn(e){e.effectTag|=4}function Yn(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qn(e){switch(e.tag){case 1:yt(e.type)&&vt(e);var t=e.effectTag;return 2048&t?(e.effectTag=t&-2049|64,e):null;case 3:if(an(e),gt(e),t=e.effectTag,0!==(64&t))throw r(Error(285));return e.effectTag=t&-2049|64,e;case 5:return cn(e),null;case 13:return pt(ba,e),t=e.effectTag,2048&t?(e.effectTag=t&-2049|64,e):null;case 18:return null;case 19:return pt(ba,e),null;case 4:return an(e),null;case 10:return Ft(e),null;default:return null}}function $n(e,t){return{value:e,source:t,stack:ee(t)}}function qn(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ee(n)),null!==n&&J(n.type),t=t.value,null!==e&&1===e.tag&&J(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function Kn(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Nr(e,t)}}function Gn(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Nr(e,t)}else t.current=null}function Xn(e,t,n){if(n=n.updateQueue,n=null!==n?n.lastEffect:null,null!==n){var r=n=n.next;do{if((r.tag&e)!==wa){var l=r.destroy;r.destroy=void 0,void 0!==l&&l()}(r.tag&t)!==wa&&(l=r.create,r.destroy=l()),r=r.next}while(r!==n)}}function Zn(e,t){switch("function"==typeof Wu&&Wu(e),e.tag){case 0:case 11:case 14:case 15:var n=e.updateQueue;if(null!==n&&(n=n.lastEffect,null!==n)){var r=n.next;_t(97<t?97:t,function(){var t=r;do{var n=t.destroy;if(void 0!==n){var l=e;try{n()}catch(e){Nr(l,e)}}t=t.next}while(t!==r)})}break;case 1:Gn(e),t=e.stateNode,"function"==typeof t.componentWillUnmount&&Kn(e,t);break;case 5:Gn(e);break;case 4:nr(e,t)}}function Jn(e,t){for(var n=e;;)if(Zn(n,t),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function er(e){return 5===e.tag||3===e.tag||4===e.tag}function tr(e){e:{for(var t=e.return;null!==t;){if(er(t)){var n=t;break e}t=t.return}throw r(Error(160))}switch(t=n.stateNode,n.tag){case 5:var l=!1;break;case 3:t=t.containerInfo,l=!0;break;case 4:t=t.containerInfo,l=!0;break;default:throw r(Error(161))}16&n.effectTag&&(rt(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||er(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o||20===i.tag){var a=o?i.stateNode:i.stateNode.instance;if(n)if(l){o=t;var u=a;a=n,8===o.nodeType?o.parentNode.insertBefore(u,a):o.insertBefore(u,a)}else t.insertBefore(a,n);else l?(u=t,8===u.nodeType?(o=u.parentNode,o.insertBefore(a,u)):(o=u,o.appendChild(a)),u=u._reactRootContainer,null!==u&&void 0!==u||null!==o.onclick||(o.onclick=ct)):t.appendChild(a)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function nr(e,t){for(var n=e,l=!1,i=void 0,o=void 0;;){if(!l){l=n.return;e:for(;;){if(null===l)throw r(Error(160));switch(i=l.stateNode,l.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}l=l.return}l=!0}if(5===n.tag||6===n.tag)if(Jn(n,t),o){var a=i,u=n.stateNode;8===a.nodeType?a.parentNode.removeChild(u):a.removeChild(u)}else i.removeChild(n.stateNode);else if(20===n.tag)u=n.stateNode.instance,Jn(n,t),o?(a=i,8===a.nodeType?a.parentNode.removeChild(u):a.removeChild(u)):i.removeChild(u);else if(4===n.tag){if(null!==n.child){i=n.stateNode.containerInfo,o=!0,n.child.return=n,n=n.child;continue}}else if(Zn(n,t),null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return,4===n.tag&&(l=!1)}n.sibling.return=n.return,n=n.sibling}}function rr(e,t){switch(t.tag){case 0:case 11:case 14:case 15:Xn(ka,xa,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var l=t.memoizedProps,i=null!==e?e.memoizedProps:l;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[_l]=l,"input"===e&&"radio"===l.type&&null!=l.name&&se(n,l),at(e,i),t=at(e,l),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?it(n,u):"dangerouslySetInnerHTML"===a?ko(n,u):"children"===a?rt(n,u):oe(n,a,u,t)}switch(e){case"input":fe(n,l);break;case"textarea":Je(n,l);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!l.multiple,e=l.value,null!=e?Ge(n,!!l.multiple,e,!1):t!==!!l.multiple&&(null!=l.defaultValue?Ge(n,!!l.multiple,l.defaultValue,!0):Ge(n,!!l.multiple,l.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw r(Error(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:break;case 12:break;case 13:if(n=t,null===t.memoizedState?l=!1:(l=!0,n=t.child,Tu=ea()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,l?(o=o.style,"function"==typeof o.setProperty?o.setProperty("display","none","important"):o.display="none"):(o=e.stateNode,i=e.memoizedProps.style,i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=lt("display",i));else if(6===e.tag)e.stateNode.nodeValue=l?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){o=e.child.sibling,o.return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}lr(t);break;case 19:lr(t);break;case 17:break;case 20:break;default:throw r(Error(163))}}function lr(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tu),t.forEach(function(t){var r=Rr.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ir(e,t,n){n=Wt(n,null),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Su||(Su=!0,Pu=r),qn(e,t)},n}function or(e,t,n){n=Wt(n,null),n.tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var l=t.value;n.payload=function(){return qn(e,t),r(l)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Nu?Nu=new Set([this]):Nu.add(this),qn(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function ar(){return(mu&(uu|cu))!==ou?1073741821-(ea()/10|0):0!==Uu?Uu:Uu=1073741821-(ea()/10|0)}function ur(e,t,n){if(t=t.mode,0===(2&t))return 1073741823;var l=xt();if(0===(4&t))return 99===l?1073741823:1073741822;if((mu&uu)!==ou)return gu;if(null!==n)e=1073741821-25*(((1073741821-e+(0|n.timeoutMs||5e3)/10)/25|0)+1);else switch(l){case 99:e=1073741823;break;case 98:e=1073741821-10*(((1073741821-e+15)/10|0)+1);break;case 97:case 96:e=1073741821-25*(((1073741821-e+500)/25|0)+1);break;case 95:e=1;break;default:throw r(Error(326))}return null!==yu&&e===gu&&--e,e}function cr(e,t){if(50<Fu)throw Fu=0,zu=null,r(Error(185));if(e=sr(e,t),null!==e){e.pingTime=0;var n=xt();if(1073741823===t)if((mu&au)!==ou&&(mu&(uu|cu))===ou)for(var l=wr(e,1073741823,!0);null!==l;)l=l(!0);else fr(e,99,1073741823),mu===ou&&Pt();else fr(e,n,t);(4&mu)===ou||98!==n&&99!==n||(null===Ou?Ou=new Map([[e,t]]):(n=Ou.get(e),(void 0===n||n>t)&&Ou.set(e,t)))}}function sr(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,l=null;if(null===r&&3===e.tag)l=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){l=r.stateNode;break}r=r.return}return null!==l&&(t>l.firstPendingTime&&(l.firstPendingTime=t),e=l.lastPendingTime,0===e||t<e)&&(l.lastPendingTime=t),l}function fr(e,t,n){if(e.callbackExpirationTime<n){var r=e.callbackNode;null!==r&&r!==qo&&Ao(r),e.callbackExpirationTime=n,1073741823===n?e.callbackNode=St(dr.bind(null,e,wr.bind(null,e,n))):(r=null,1!==n&&(r={timeout:10*(1073741821-n)-ea()}),e.callbackNode=Ct(t,dr.bind(null,e,wr.bind(null,e,n)),r))}}function dr(e,t,n){var r=e.callbackNode,l=null;try{return l=t(n),null!==l?dr.bind(null,e,l):null}finally{null===l&&r===e.callbackNode&&(e.callbackNode=null,e.callbackExpirationTime=0)}}function pr(){(mu&(1|uu|cu))===ou&&(mr(),Cr())}function hr(e,t){var n=e.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=t)&&(Ct(97,function(){return n._onComplete(),null}),!0)}function mr(){if(null!==Ou){var e=Ou;Ou=null,e.forEach(function(e,t){St(wr.bind(null,t,e))}),Pt()}}function yr(e,t){var n=mu;mu|=1;try{return e(t)}finally{mu=n,mu===ou&&Pt()}}function vr(e,t,n,r){var l=mu;mu|=4;try{return _t(98,e.bind(null,t,n,r))}finally{mu=l,mu===ou&&Pt()}}function gr(e,t){var n=mu;mu&=-2,mu|=au;try{return e(t)}finally{mu=n,mu===ou&&Pt()}}function br(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,No(n)),null!==vu)for(n=vu.return;null!==n;){var r=n;switch(r.tag){case 1:var l=r.type.childContextTypes;null!==l&&void 0!==l&&vt(r);break;case 3:an(r),gt(r);break;case 5:cn(r);break;case 4:an(r);break;case 13:pt(ba,r);break;case 19:pt(ba,r);break;case 10:Ft(r)}n=n.return}yu=e,vu=Ur(e.current,null,t),gu=t,bu=su,Eu=wu=1073741823,ku=null,xu=!1}function wr(e,t,n){if((mu&(uu|cu))!==ou)throw r(Error(327));if(e.firstPendingTime<t)return null;if(n&&e.finishedExpirationTime===t)return Tr.bind(null,e);if(Cr(),e!==yu||t!==gu)br(e,t);else if(bu===pu)if(xu)br(e,t);else{var l=e.lastPendingTime;if(l<t)return wr.bind(null,e,l)}if(null!==vu){l=mu,mu|=uu;var i=lu.current;if(null===i&&(i=Ba),lu.current=Ba,n){if(1073741823!==t){var o=ar();if(o<t)return mu=l,It(),lu.current=i,wr.bind(null,e,o)}}else Uu=0;for(;;)try{if(n)for(;null!==vu;)vu=kr(vu);else for(;null!==vu&&!Lo();)vu=kr(vu);break}catch(n){if(It(),hn(),o=vu,null===o||null===o.return)throw br(e,t),mu=l,n;e:{var a=e,u=o.return,c=o,s=n,f=gu;if(c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var d=s,p=0!==(ba.current&va);s=u;do{var h;if((h=13===s.tag)&&(null!==s.memoizedState?h=!1:(h=s.memoizedProps,h=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!p))),h){if(u=s.updateQueue,null===u?(u=new Set,u.add(d),s.updateQueue=u):u.add(d),0===(2&s.mode)){s.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:(f=Wt(1073741823,null),f.tag=2,Vt(c,f))),c.expirationTime=1073741823;break e}c=a,a=f,p=c.pingCache,null===p?(p=c.pingCache=new nu,u=new Set,p.set(d,u)):(u=p.get(d),void 0===u&&(u=new Set,p.set(d,u))),u.has(a)||(u.add(a),c=Mr.bind(null,c,d,a),d.then(c,c)),s.effectTag|=2048,s.expirationTime=f;break e}s=s.return}while(null!==s);s=Error((J(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ee(c))}bu!==hu&&(bu=fu),s=$n(s,c),c=u;do{switch(c.tag){case 3:c.effectTag|=2048,c.expirationTime=f,f=ir(c,s,f),Ht(c,f);break e;case 1:if(d=s,a=c.type,u=c.stateNode,0===(64&c.effectTag)&&("function"==typeof a.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===Nu||!Nu.has(u)))){c.effectTag|=2048,c.expirationTime=f,f=or(c,d,f),Ht(c,f);break e}}c=c.return}while(null!==c)}vu=xr(o)}if(mu=l,It(),lu.current=i,null!==vu)return wr.bind(null,e,t)}if(e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,hr(e,t))return null;switch(yu=null,bu){case su:throw r(Error(328));case fu:return l=e.lastPendingTime,l<t?wr.bind(null,e,l):n?Tr.bind(null,e):(br(e,t),St(wr.bind(null,e,t)),null);case du:return 1073741823===wu&&!n&&(n=Tu+_u-ea(),10<n)?xu?(br(e,t),wr.bind(null,e,t)):(l=e.lastPendingTime,l<t?wr.bind(null,e,l):(e.timeoutHandle=Po(Tr.bind(null,e),n),null)):Tr.bind(null,e);case pu:if(!n){if(xu)return br(e,t),wr.bind(null,e,t);if(n=e.lastPendingTime,n<t)return wr.bind(null,e,n);if(1073741823!==Eu?n=10*(1073741821-Eu)-ea():1073741823===wu?n=0:(n=10*(1073741821-wu)-5e3,l=ea(),t=10*(1073741821-t)-l,n=l-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ru(n/1960))-n,t<n&&(n=t)),10<n)return e.timeoutHandle=Po(Tr.bind(null,e),n),null}return Tr.bind(null,e);case hu:return!n&&1073741823!==wu&&null!==ku&&(l=wu,i=ku,t=0|i.busyMinDurationMs,0>=t?t=0:(n=0|i.busyDelayMs,l=ea()-(10*(1073741821-l)-(0|i.timeoutMs||5e3)),t=l<=n?0:n+t-l),10<t)?(e.timeoutHandle=Po(Tr.bind(null,e),t),null):Tr.bind(null,e);default:throw r(Error(329))}}function Er(e,t){e<wu&&1<e&&(wu=e),null!==t&&e<Eu&&1<e&&(Eu=e,ku=t)}function kr(e){var t=Lu(e.alternate,e,gu);return e.memoizedProps=e.pendingProps,null===t&&(t=xr(e)),iu.current=null,t}function xr(e){vu=e;do{var t=vu.alternate;if(e=vu.return,0===(1024&vu.effectTag)){e:{var n=t;t=vu;var l=gu,i=t.pendingProps;switch(t.tag){case 2:break;case 16:break;case 15:case 0:break;case 1:yt(t.type)&&vt(t);break;case 3:an(t),gt(t),l=t.stateNode,l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==n&&null!==n.child||(Nn(t),t.effectTag&=-3),Za(t);break;case 5:cn(t),l=ln(ma.current);var o=t.type;if(null!==n&&null!=t.stateNode)Ja(n,t,o,i,l),n.ref!==t.ref&&(t.effectTag|=128);else if(i){var a=ln(pa.current);if(Nn(t)){n=t,i=void 0,o=n.stateNode;var u=n.type,c=n.memoizedProps;switch(o[Tl]=n,o[_l]=c,u){case"iframe":case"object":case"embed":Fe("load",o);break;case"video":case"audio":for(var s=0;s<Ol.length;s++)Fe(Ol[s],o);break;case"source":Fe("error",o);break;case"img":case"image":case"link":Fe("error",o),Fe("load",o);break;case"form":Fe("reset",o),Fe("submit",o);break;case"details":Fe("toggle",o);break;case"input":ce(o,c),Fe("invalid",o),ut(l,"onChange");break;case"select":o._wrapperState={wasMultiple:!!c.multiple},Fe("invalid",o),ut(l,"onChange");break;case"textarea":Ze(o,c),Fe("invalid",o),ut(l,"onChange")}ot(u,c),s=null;for(i in c)c.hasOwnProperty(i)&&(a=c[i],"children"===i?"string"==typeof a?o.textContent!==a&&(s=["children",a]):"number"==typeof a&&o.textContent!==""+a&&(s=["children",""+a]):fl.hasOwnProperty(i)&&null!=a&&ut(l,i));switch(u){case"input":G(o),de(o,c,!0);break;case"textarea":G(o),et(o,c);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(o.onclick=ct)}l=s,n.updateQueue=l,null!==l&&Hn(t)}else{c=o,n=i,u=t,s=9===l.nodeType?l:l.ownerDocument,a===wo.html&&(a=tt(c)),a===wo.html?"script"===c?(c=s.createElement("div"),c.innerHTML="<script></script>",s=c.removeChild(c.firstChild)):"string"==typeof n.is?s=s.createElement(c,{is:n.is}):(s=s.createElement(c),"select"===c&&(c=s,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):s=s.createElementNS(a,c),c=s,c[Tl]=u,c[_l]=n,n=c,Xa(n,t,!1,!1),u=n;var f=l,d=at(o,i);switch(o){case"iframe":case"object":case"embed":Fe("load",u),l=i;break;case"video":case"audio":for(l=0;l<Ol.length;l++)Fe(Ol[l],u);l=i;break;case"source":Fe("error",u),l=i;break;case"img":case"image":case"link":Fe("error",u),Fe("load",u),l=i;break;case"form":Fe("reset",u),Fe("submit",u),l=i;break;case"details":Fe("toggle",u),l=i;break;case"input":ce(u,i),l=ue(u,i),Fe("invalid",u),ut(f,"onChange");break;case"option":l=Ke(u,i);break;case"select":u._wrapperState={wasMultiple:!!i.multiple},l=il({},i,{value:void 0}),Fe("invalid",u),ut(f,"onChange");break;case"textarea":Ze(u,i),l=Xe(u,i),Fe("invalid",u),ut(f,"onChange");break;default:l=i}ot(o,l),c=void 0,s=o,a=u;var p=l;for(c in p)if(p.hasOwnProperty(c)){var h=p[c];"style"===c?it(a,h):"dangerouslySetInnerHTML"===c?(h=h?h.__html:void 0,null!=h&&ko(a,h)):"children"===c?"string"==typeof h?("textarea"!==s||""!==h)&&rt(a,h):"number"==typeof h&&rt(a,""+h):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(fl.hasOwnProperty(c)?null!=h&&ut(f,c):null!=h&&oe(a,c,h,d))}switch(o){case"input":G(u),de(u,i,!1);break;case"textarea":G(u),et(u,i);break;case"option":null!=i.value&&u.setAttribute("value",""+ae(i.value));break;case"select":l=u,u=i,l.multiple=!!u.multiple,c=u.value,null!=c?Ge(l,!!u.multiple,c,!1):null!=u.defaultValue&&Ge(l,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof l.onClick&&(u.onclick=ct)}st(o,i)&&Hn(t),t.stateNode=n}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw r(Error(166));break;case 6:if(n&&null!=t.stateNode)eu(n,t,n.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw r(Error(166));n=ln(ma.current),ln(pa.current),Nn(t)?(l=t.stateNode,n=t.memoizedProps,l[Tl]=t,l.nodeValue!==n&&Hn(t)):(l=t,n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i),n[Tl]=t,l.stateNode=n)}break;case 11:break;case 13:if(pt(ba,t),i=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=l;break e}l=null!==i,i=!1,null===n?Nn(t):(o=n.memoizedState,i=null!==o,l||null===o||(o=n.child.sibling,null!==o&&(u=t.firstEffect,null!==u?(t.firstEffect=o,o.nextEffect=u):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8))),l&&!i&&0!==(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(ba.current&va)?bu===su&&(bu=du):bu!==su&&bu!==du||(bu=pu)),(l||i)&&(t.effectTag|=4);break;case 7:break;case 8:break;case 12:break;case 4:an(t),Za(t);break;case 10:Ft(t);break;case 9:break;case 14:break;case 17:yt(t.type)&&vt(t);break;case 18:break;case 19:if(pt(ba,t),i=t.memoizedState,null===i)break;if(o=0!==(64&t.effectTag),u=i.rendering,null===u){if(o)Yn(i,!1);else if(bu!==su||null!==n&&0!==(64&n.effectTag))for(n=t.child;null!==n;){
if(u=sn(n),null!==u){for(t.effectTag|=64,Yn(i,!1),n=u.updateQueue,null!==n&&(t.updateQueue=n,t.effectTag|=4),t.firstEffect=t.lastEffect=null,n=t.child;null!==n;)i=n,o=l,i.effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,u=i.alternate,null===u?(i.childExpirationTime=0,i.expirationTime=o,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=u.childExpirationTime,i.expirationTime=u.expirationTime,i.child=u.child,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,o=u.dependencies,i.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),n=n.sibling;ht(ba,ba.current&ya|ga,t),t=t.child;break e}n=n.sibling}}else{if(!o)if(n=sn(u),null!==n){if(t.effectTag|=64,o=!0,Yn(i,!0),null===i.tail&&"hidden"===i.tailMode){l=n.updateQueue,null!==l&&(t.updateQueue=l,t.effectTag|=4),t=t.lastEffect=i.lastEffect,null!==t&&(t.nextEffect=null);break}}else ea()>i.tailExpiration&&1<l&&(t.effectTag|=64,o=!0,Yn(i,!1),t.expirationTime=t.childExpirationTime=l-1);i.isBackwards?(u.sibling=t.child,t.child=u):(l=i.last,null!==l?l.sibling=u:t.child=u,i.last=u)}if(null!==i.tail){0===i.tailExpiration&&(i.tailExpiration=ea()+500),l=i.tail,i.rendering=l,i.tail=l.sibling,i.lastEffect=t.lastEffect,l.sibling=null,n=ba.current,n=o?n&ya|ga:n&ya,ht(ba,n,t),t=l;break e}break;case 20:break;default:throw r(Error(156))}t=null}if(l=vu,1===gu||1!==l.childExpirationTime){for(n=0,i=l.child;null!==i;)o=i.expirationTime,u=i.childExpirationTime,o>n&&(n=o),u>n&&(n=u),i=i.sibling;l.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(1024&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=vu.firstEffect),null!==vu.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=vu.firstEffect),e.lastEffect=vu.lastEffect),1<vu.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=vu:e.firstEffect=vu,e.lastEffect=vu))}else{if(t=Qn(vu,gu),null!==t)return t.effectTag&=1023,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=1024)}if(t=vu.sibling,null!==t)return t;vu=e}while(null!==vu);return bu===su&&(bu=hu),null}function Tr(e){var t=xt();return _t(99,_r.bind(null,e,t)),null!==Ru&&Ct(97,function(){return Cr(),null}),null}function _r(e,t){if(Cr(),(mu&(uu|cu))!==ou)throw r(Error(327));var n=e.finishedWork,l=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw r(Error(177));e.callbackNode=null,e.callbackExpirationTime=0;var i=n.expirationTime,o=n.childExpirationTime;if(i=o>i?o:i,e.firstPendingTime=i,i<e.lastPendingTime&&(e.lastPendingTime=i),e===yu&&(vu=yu=null,gu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){o=mu,mu|=cu,iu.current=null,Co=so;var a=Ye();if(Qe(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var s=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(e){u=null;break e}var d=0,p=-1,h=-1,m=0,y=0,v=a,g=null;t:for(;;){for(var b;v!==u||0!==s&&3!==v.nodeType||(p=d+s),v!==f||0!==c&&3!==v.nodeType||(h=d+c),3===v.nodeType&&(d+=v.nodeValue.length),null!==(b=v.firstChild);)g=v,v=b;for(;;){if(v===a)break t;if(g===u&&++m===s&&(p=d),g===f&&++y===c&&(h=d),null!==(b=v.nextSibling))break;v=g,g=v.parentNode}v=b}u=-1===p||-1===h?null:{start:p,end:h}}else u=null}u=u||{start:0,end:0}}else u=null;So={focusedElem:a,selectionRange:u},so=!1,Cu=i;do try{for(;null!==Cu;){if(0!==(256&Cu.effectTag)){var w=Cu.alternate;switch(a=Cu,a.tag){case 0:case 11:case 15:Xn(Ea,wa,a);break;case 1:if(256&a.effectTag&&null!==w){var E=w.memoizedProps,k=w.memoizedState,x=a.stateNode,T=x.getSnapshotBeforeUpdate(a.elementType===a.type?E:Rt(a.type,E),k);x.__reactInternalSnapshotBeforeUpdate=T}break;case 3:case 5:case 6:case 4:case 17:break;default:throw r(Error(163))}}Cu=Cu.nextEffect}}catch(e){if(null===Cu)throw r(Error(330));Nr(Cu,e),Cu=Cu.nextEffect}while(null!==Cu);Cu=i;do try{for(w=t;null!==Cu;){var _=Cu.effectTag;if(16&_&&rt(Cu.stateNode,""),128&_){var C=Cu.alternate;if(null!==C){var S=C.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(14&_){case 2:tr(Cu),Cu.effectTag&=-3;break;case 6:tr(Cu),Cu.effectTag&=-3,rr(Cu.alternate,Cu);break;case 4:rr(Cu.alternate,Cu);break;case 8:E=Cu,nr(E,w),E.return=null,E.child=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null;var P=E.alternate;null!==P&&(P.return=null,P.child=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null)}Cu=Cu.nextEffect}}catch(e){if(null===Cu)throw r(Error(330));Nr(Cu,e),Cu=Cu.nextEffect}while(null!==Cu);if(S=So,C=Ye(),_=S.focusedElem,w=S.selectionRange,C!==_&&_&&_.ownerDocument&&He(_.ownerDocument.documentElement,_)){null!==w&&Qe(_)&&(C=w.start,S=w.end,void 0===S&&(S=C),"selectionStart"in _?(_.selectionStart=C,_.selectionEnd=Math.min(S,_.value.length)):(S=(C=_.ownerDocument||document)&&C.defaultView||window,S.getSelection&&(S=S.getSelection(),E=_.textContent.length,P=Math.min(w.start,E),w=void 0===w.end?P:Math.min(w.end,E),!S.extend&&P>w&&(E=w,w=P,P=E),E=Ve(_,P),k=Ve(_,w),E&&k&&(1!==S.rangeCount||S.anchorNode!==E.node||S.anchorOffset!==E.offset||S.focusNode!==k.node||S.focusOffset!==k.offset)&&(C=C.createRange(),C.setStart(E.node,E.offset),S.removeAllRanges(),P>w?(S.addRange(C),S.extend(k.node,k.offset)):(C.setEnd(k.node,k.offset),S.addRange(C)))))),C=[];for(S=_;S=S.parentNode;)1===S.nodeType&&C.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<C.length;_++)S=C[_],S.element.scrollLeft=S.left,S.element.scrollTop=S.top}So=null,so=!!Co,Co=null,e.current=n,Cu=i;do try{for(_=l;null!==Cu;){var N=Cu.effectTag;if(36&N){var M=Cu.alternate;switch(C=Cu,S=_,C.tag){case 0:case 11:case 15:Xn(Ta,_a,C);break;case 1:var R=C.stateNode;if(4&C.effectTag)if(null===M)R.componentDidMount();else{var D=C.elementType===C.type?M.memoizedProps:Rt(C.type,M.memoizedProps);R.componentDidUpdate(D,M.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var I=C.updateQueue;null!==I&&qt(C,I,R,S);break;case 3:var O=C.updateQueue;if(null!==O){if(P=null,null!==C.child)switch(C.child.tag){case 5:P=C.child.stateNode;break;case 1:P=C.child.stateNode}qt(C,O,P,S)}break;case 5:var F=C.stateNode;null===M&&4&C.effectTag&&(S=F,st(C.type,C.memoizedProps)&&S.focus());break;case 6:break;case 4:break;case 12:break;case 13:case 19:case 17:case 20:break;default:throw r(Error(163))}}if(128&N){var z=Cu.ref;if(null!==z){var U=Cu.stateNode;switch(Cu.tag){case 5:var A=U;break;default:A=U}"function"==typeof z?z(A):z.current=A}}512&N&&(Mu=!0),Cu=Cu.nextEffect}}catch(e){if(null===Cu)throw r(Error(330));Nr(Cu,e),Cu=Cu.nextEffect}while(null!==Cu);Cu=null,Ko(),mu=o}else e.current=n;if(Mu)Mu=!1,Ru=e,Iu=l,Du=t;else for(Cu=i;null!==Cu;)t=Cu.nextEffect,Cu.nextEffect=null,Cu=t;if(t=e.firstPendingTime,0!==t?(N=ar(),N=Mt(N,t),fr(e,N,t)):Nu=null,"function"==typeof ju&&ju(n.stateNode,l),1073741823===t?e===zu?Fu++:(Fu=0,zu=e):Fu=0,Su)throw Su=!1,e=Pu,Pu=null,e;return(mu&au)!==ou?null:(Pt(),null)}function Cr(){if(null===Ru)return!1;var e=Ru,t=Iu,n=Du;return Ru=null,Iu=0,Du=90,_t(97<n?97:n,Sr.bind(null,e,t))}function Sr(e){if((mu&(uu|cu))!==ou)throw r(Error(331));var t=mu;for(mu|=cu,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:Xn(Sa,wa,n),Xn(wa,Ca,n)}}catch(t){if(null===e)throw r(Error(330));Nr(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return mu=t,Pt(),!0}function Pr(e,t,n){t=$n(n,t),t=ir(e,t,1073741823),Vt(e,t),e=sr(e,1073741823),null!==e&&fr(e,99,1073741823)}function Nr(e,t){if(3===e.tag)Pr(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Pr(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Nu||!Nu.has(r))){e=$n(t,e),e=or(n,e,1073741823),Vt(n,e),n=sr(n,1073741823),null!==n&&fr(n,99,1073741823);break}}n=n.return}}function Mr(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),yu===e&&gu===n?bu===pu||bu===du&&1073741823===wu&&ea()-Tu<_u?br(e,gu):xu=!0:e.lastPendingTime<n||(t=e.pingTime,0!==t&&t<n||(e.pingTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),t=ar(),t=Mt(t,n),fr(e,t,n)))}function Rr(e,t){var n=e.stateNode;null!==n&&n.delete(t),n=ar(),t=ur(n,e,null),n=Mt(n,t),e=sr(e,t),null!==e&&fr(e,n,t)}function Dr(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);ju=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(e){}},Wu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}return!0}function Ir(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Or(e,t,n,r){return new Ir(e,t,n,r)}function Fr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zr(e){if("function"==typeof e)return Fr(e)?1:0;if(void 0!==e&&null!==e){if(e=e.$$typeof,e===pi)return 11;if(e===yi)return 14}return 2}function Ur(e,t){var n=e.alternate;return null===n?(n=Or(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ar(e,t,n,l,i,o){var a=2;if(l=e,"function"==typeof e)Fr(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ai:return Lr(n.children,i,o,t);case di:a=8,i|=7;break;case ui:a=8,i|=1;break;case ci:return e=Or(12,n,t,8|i),e.elementType=ci,e.type=ci,e.expirationTime=o,e;case hi:return e=Or(13,n,t,i),e.type=hi,e.elementType=hi,e.expirationTime=o,e;case mi:return e=Or(19,n,t,i),e.elementType=mi,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case si:a=10;break e;case fi:a=9;break e;case pi:a=11;break e;case yi:a=14;break e;case vi:a=16,l=null;break e}throw r(Error(130),null==e?e:typeof e,"")}return t=Or(a,n,t,i),t.elementType=e,t.type=l,t.expirationTime=o,t}function Lr(e,t,n,r){return e=Or(7,e,r,t),e.expirationTime=n,e}function jr(e,t,n){return e=Or(6,e,null,t),e.expirationTime=n,e}function Wr(e,t,n){return t=Or(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Br(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function Vr(e,t,n){return e=new Br(e,t,n),t=Or(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e}function Hr(e,t,n,l,i,o){var a=t.current;e:if(n){n=n._reactInternalFiber;t:{if(2!==Ne(n)||1!==n.tag)throw r(Error(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yt(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw r(Error(171))}if(1===n.tag){var c=n.type;if(yt(c)){n=wt(n,c,u);break e}}n=u}else n=Do;return null===t.context?t.context=n:t.pendingContext=n,t=o,i=Wt(l,i),i.payload={element:e},t=void 0===t?null:t,null!==t&&(i.callback=t),Vt(a,i),cr(a,l),l}function Yr(e,t,n,r){var l=t.current,i=ar(),o=oa.suspense;return l=ur(i,l,o),Hr(e,t,n,l,o,r)}function Qr(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $r(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:oi,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qr(e){var t=1073741821-25*(((1073741821-ar()+500)/25|0)+1);t<=Au&&--t,this._expirationTime=Au=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Kr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Gr(e,t,n){this._internalRoot=Vr(e,t,n)}function Xr(e,t){this._internalRoot=Vr(e,2,t)}function Zr(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jr(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Gr(e,0,t)}function el(e,t,n,r,l){var i=n._reactRootContainer,o=void 0;if(i){if(o=i._internalRoot,"function"==typeof l){var a=l;l=function(){var e=Qr(o);a.call(e)}}Yr(t,o,e,l)}else{if(i=n._reactRootContainer=Jr(n,r),o=i._internalRoot,"function"==typeof l){var u=l;l=function(){var e=Qr(o);u.call(e)}}gr(function(){Yr(t,o,e,l)})}return Qr(o)}function tl(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zr(t))throw r(Error(200));return $r(e,t,null,n)}function nl(e,t){if(!Zr(e))throw r(Error(299),"unstable_createRoot");return new Xr(e,null!=t&&!0===t.hydrate)}function rl(e,t){if(!Zr(e))throw r(Error(299),"unstable_createRoot");return new Gr(e,1,null!=t&&!0===t.hydrate)}var ll=n(2),il=n(1),ol=n(16);if(!ll)throw r(Error(227));var al=null,ul={},cl=[],sl={},fl={},dl={},pl=!1,hl=null,ml=!1,yl=null,vl={onError:function(e){pl=!0,hl=e}},gl=null,bl=null,wl=null,El=null,kl={injectEventPluginOrder:function(e){if(al)throw r(Error(101));al=Array.prototype.slice.call(e),l()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!ul.hasOwnProperty(t)||ul[t]!==i){if(ul[t])throw r(Error(102),t);ul[t]=i,n=!0}}n&&l()}},xl=Math.random().toString(36).slice(2),Tl="__reactInternalInstance$"+xl,_l="__reactEventHandlers$"+xl,Cl=!("undefined"==typeof window||"undefined"==typeof window.document||"undefined"==typeof window.document.createElement),Sl={animationend:_("Animation","AnimationEnd"),animationiteration:_("Animation","AnimationIteration"),animationstart:_("Animation","AnimationStart"),transitionend:_("Transition","TransitionEnd")},Pl={},Nl={};Cl&&(Nl=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);var Ml=C("animationend"),Rl=C("animationiteration"),Dl=C("animationstart"),Il=C("transitionend"),Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fl=null,zl=null,Ul=null;il(M.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=P)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=P)},persist:function(){this.isPersistent=P},isPersistent:N,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=N,this._dispatchInstances=this._dispatchListeners=null}}),M.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},M.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var l=new t;return il(l,n.prototype),n.prototype=l,n.prototype.constructor=n,n.Interface=il({},r.Interface,e),n.extend=r.extend,I(n),n},I(M);var Al=M.extend({data:null}),Ll=M.extend({data:null}),jl=[9,13,27,32],Wl=Cl&&"CompositionEvent"in window,Bl=null;Cl&&"documentMode"in document&&(Bl=document.documentMode);var Vl=Cl&&"TextEvent"in window&&!Bl,Hl=Cl&&(!Wl||Bl&&8<Bl&&11>=Bl),Yl=String.fromCharCode(32),Ql={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},$l=!1,ql=!1,Kl={eventTypes:Ql,extractEvents:function(e,t,n,r){var l=void 0,i=void 0;if(Wl)e:{switch(e){case"compositionstart":l=Ql.compositionStart;break e;case"compositionend":l=Ql.compositionEnd;break e;case"compositionupdate":l=Ql.compositionUpdate;break e}l=void 0}else ql?O(e,n)&&(l=Ql.compositionEnd):"keydown"===e&&229===n.keyCode&&(l=Ql.compositionStart);return l?(Hl&&"ko"!==n.locale&&(ql||l!==Ql.compositionStart?l===Ql.compositionEnd&&ql&&(i=S()):(Fl=r,zl="value"in Fl?Fl.value:Fl.textContent,ql=!0)),l=Al.getPooled(l,t,n,r),i?l.data=i:(i=F(n),null!==i&&(l.data=i)),T(l),i=l):i=null,(e=Vl?z(e,n):U(e,n))?(t=Ll.getPooled(Ql.beforeInput,t,n,r),t.data=e,T(t)):t=null,null===i?t:null===t?i:[i,t]}},Gl=null,Xl=null,Zl=null,Jl=W,ei=!1,ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ni=ll.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ni.hasOwnProperty("ReactCurrentDispatcher")||(ni.ReactCurrentDispatcher={current:null}),ni.hasOwnProperty("ReactCurrentBatchConfig")||(ni.ReactCurrentBatchConfig={suspense:null});var ri=/^(.*)[\\\/]/,li="function"==typeof Symbol&&Symbol.for,ii=li?Symbol.for("react.element"):60103,oi=li?Symbol.for("react.portal"):60106,ai=li?Symbol.for("react.fragment"):60107,ui=li?Symbol.for("react.strict_mode"):60108,ci=li?Symbol.for("react.profiler"):60114,si=li?Symbol.for("react.provider"):60109,fi=li?Symbol.for("react.context"):60110,di=li?Symbol.for("react.concurrent_mode"):60111,pi=li?Symbol.for("react.forward_ref"):60112,hi=li?Symbol.for("react.suspense"):60113,mi=li?Symbol.for("react.suspense_list"):60120,yi=li?Symbol.for("react.memo"):60115,vi=li?Symbol.for("react.lazy"):60116;li&&Symbol.for("react.fundamental"),li&&Symbol.for("react.responder");var gi="function"==typeof Symbol&&Symbol.iterator,bi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wi=Object.prototype.hasOwnProperty,Ei={},ki={},xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xi[e]=new le(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xi[t]=new le(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){xi[e]=new le(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xi[e]=new le(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xi[e]=new le(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){xi[e]=new le(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){xi[e]=new le(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){xi[e]=new le(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){xi[e]=new le(e,5,!1,e.toLowerCase(),null,!1)});var Ti=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ti,ie);xi[t]=new le(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ti,ie);xi[t]=new le(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ti,ie);xi[t]=new le(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){xi[e]=new le(e,1,!1,e.toLowerCase(),null,!1)}),xi.xlinkHref=new le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){xi[e]=new le(e,1,!1,e.toLowerCase(),null,!0)});var _i={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Ci=null,Si=null,Pi=!1;Cl&&(Pi=$("input")&&(!document.documentMode||9<document.documentMode));var Ni={eventTypes:_i,_isInputEventSupported:Pi,extractEvents:function(e,t,n,r){var l=t?v(t):window,i=void 0,o=void 0,a=l.nodeName&&l.nodeName.toLowerCase();return"select"===a||"input"===a&&"file"===l.type?i=ve:Y(l)?Pi?i=xe:(i=Ee,o=we):(a=l.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(i=ke),i&&(i=i(e,t))?he(i,n,r):(o&&o(e,l,t),void("blur"===e&&(e=l._wrapperState)&&e.controlled&&"number"===l.type&&pe(l,"number",l.value)))}},Mi=M.extend({view:null,detail:null}),Ri={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Di=0,Ii=0,Oi=!1,Fi=!1,zi=Mi.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:_e,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Di;return Di=e.screenX,Oi?"mousemove"===e.type?e.screenX-t:0:(Oi=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Ii;return Ii=e.screenY,Fi?"mousemove"===e.type?e.screenY-t:0:(Fi=!0,0)}}),Ui=zi.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ai={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Li={eventTypes:Ai,extractEvents:function(e,t,n,r){var l="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(l&&(n.relatedTarget||n.fromElement)||!i&&!l)return null;if(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,i?(i=t,t=(t=n.relatedTarget||n.toElement)?m(t):null):i=null,i===t)return null;var o=void 0,a=void 0,u=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(o=zi,a=Ai.mouseLeave,u=Ai.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=Ui,a=Ai.pointerLeave,u=Ai.pointerEnter,c="pointer");var s=null==i?l:v(i);if(l=null==t?l:v(t),e=o.getPooled(a,i,n,r),e.type=c+"leave",e.target=s,e.relatedTarget=l,n=o.getPooled(u,t,n,r),n.type=c+"enter",n.target=l,n.relatedTarget=s,r=t,i&&r)e:{for(t=i,l=r,c=0,o=t;o;o=b(o))c++;for(o=0,u=l;u;u=b(u))o++;for(;0<c-o;)t=b(t),c--;for(;0<o-c;)l=b(l),o--;for(;c--;){if(t===l||t===l.alternate)break e;t=b(t),l=b(l)}t=null}else t=null;for(l=t,t=[];i&&i!==l&&(c=i.alternate,null===c||c!==l);)t.push(i),i=b(i);for(i=[];r&&r!==l&&(c=r.alternate,null===c||c!==l);)i.push(r),r=b(r);for(r=0;r<t.length;r++)k(t[r],"bubbled",e);for(r=i.length;0<r--;)k(i[r],"captured",n);return[e,n]}},ji=Object.prototype.hasOwnProperty;new Map,new Map,new Set,new Map;for(var Wi=M.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Bi=(M.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),Vi=Mi.extend({relatedTarget:null}),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qi=Mi.extend({key:function(e){if(e.key){var t=Hi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ie(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Yi[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:_e,charCode:function(e){return"keypress"===e.type?Ie(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ie(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),$i=zi.extend({dataTransfer:null}),qi=Mi.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:_e}),Ki=M.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Gi=(zi.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null})),Xi=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ml,"animationEnd",2],[Rl,"animationIteration",2],[Dl,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Il,"transitionEnd",2],["waiting","waiting",2]],Zi={},Ji={},eo=0;eo<Xi.length;eo++){var to=Xi[eo],no=to[0],ro=to[1],lo=to[2],io="on"+(ro[0].toUpperCase()+ro.slice(1)),oo={phasedRegistrationNames:{bubbled:io,captured:io+"Capture"},dependencies:[no],eventPriority:lo};Zi[ro]=oo,Ji[no]=oo}var ao={eventTypes:Zi,getEventPriority:function(e){return e=Ji[e],void 0!==e?e.eventPriority:2},extractEvents:function(e,t,n,r){var l=Ji[e];if(!l)return null;switch(e){case"keypress":if(0===Ie(n))return null;case"keydown":case"keyup":e=Qi;break;case"blur":case"focus":e=Vi;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=zi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=$i;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=qi;break;case Ml:case Rl:case Dl:e=Wi;break;case Il:e=Ki;break;case"scroll":e=Mi;break;case"wheel":e=Gi;break;case"copy":case"cut":case"paste":e=Bi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ui;break;default:e=M}return t=e.getPooled(l,t,n,r),T(t),t}},uo=ao.getEventPriority,co=[],so=!0,fo=new("function"==typeof WeakMap?WeakMap:Map),po=Cl&&"documentMode"in document&&11>=document.documentMode,ho={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},mo=null,yo=null,vo=null,go=!1,bo={eventTypes:ho,extractEvents:function(e,t,n,r){var l,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(l=!i)){e:{i=je(i),l=dl.onSelect;for(var o=0;o<l.length;o++)if(!i.has(l[o])){i=!1;break e}i=!0}l=!i}if(l)return null;switch(i=t?v(t):window,e){case"focus":(Y(i)||"true"===i.contentEditable)&&(mo=i,yo=t,vo=null);break;case"blur":vo=yo=mo=null;break;
case"mousedown":go=!0;break;case"contextmenu":case"mouseup":case"dragend":return go=!1,$e(n,r);case"selectionchange":if(po)break;case"keydown":case"keyup":return $e(n,r)}return null}};kl.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),gl=g,bl=y,wl=v,kl.injectEventPluginsByName({SimpleEventPlugin:ao,EnterLeaveEventPlugin:Li,ChangeEventPlugin:Ni,SelectEventPlugin:bo,BeforeInputEventPlugin:Kl});var wo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Eo=void 0,ko=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!==wo.svg||"innerHTML"in e)e.innerHTML=t;else{for(Eo=Eo||document.createElement("div"),Eo.innerHTML="<svg>"+t+"</svg>",t=Eo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),xo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},To=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(e){To.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xo[t]=xo[e]})});var _o=il({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Co=null,So=null,Po="function"==typeof setTimeout?setTimeout:void 0,No="function"==typeof clearTimeout?clearTimeout:void 0;new Set;var Mo=[],Ro=-1,Do={},Io={current:Do},Oo={current:!1},Fo=Do,zo=ol.unstable_runWithPriority,Uo=ol.unstable_scheduleCallback,Ao=ol.unstable_cancelCallback,Lo=ol.unstable_shouldYield,jo=ol.unstable_requestPaint,Wo=ol.unstable_now,Bo=ol.unstable_getCurrentPriorityLevel,Vo=ol.unstable_ImmediatePriority,Ho=ol.unstable_UserBlockingPriority,Yo=ol.unstable_NormalPriority,Qo=ol.unstable_LowPriority,$o=ol.unstable_IdlePriority,qo={},Ko=void 0!==jo?jo:function(){},Go=null,Xo=null,Zo=!1,Jo=Wo(),ea=1e4>Jo?Wo:function(){return Wo()-Jo},ta={current:null},na=null,ra=null,la=null,ia=!1,oa=ni.ReactCurrentBatchConfig,aa=(new ll.Component).refs,ua={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===Ne(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ar(),l=oa.suspense;r=ur(r,e,l),l=Wt(r,l),l.payload=t,void 0!==n&&null!==n&&(l.callback=n),Vt(e,l),cr(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ar(),l=oa.suspense;r=ur(r,e,l),l=Wt(r,l),l.tag=1,l.payload=t,void 0!==n&&null!==n&&(l.callback=n),Vt(e,l),cr(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ar(),r=oa.suspense;n=ur(n,e,r),r=Wt(n,r),r.tag=2,void 0!==t&&null!==t&&(r.callback=t),Vt(e,r),cr(e,n)}},ca=Array.isArray,sa=rn(!0),fa=rn(!1),da={},pa={current:da},ha={current:da},ma={current:da},ya=1,va=1,ga=2,ba={current:0},wa=0,Ea=2,ka=4,xa=8,Ta=16,_a=32,Ca=64,Sa=128,Pa=ni.ReactCurrentDispatcher,Na=0,Ma=null,Ra=null,Da=null,Ia=null,Oa=null,Fa=null,za=0,Ua=null,Aa=0,La=!1,ja=null,Wa=0,Ba={readContext:At,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useResponder:fn},Va={readContext:At,useCallback:function(e,t){return mn().memoizedState=[e,void 0===t?null:t],e},useContext:At,useEffect:function(e,t){return wn(516,Sa|Ca,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wn(4,ka|_a,kn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wn(4,ka|_a,e,t)},useMemo:function(e,t){var n=mn();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Tn.bind(null,Ma,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:function(e){var t=mn();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={last:null,dispatch:null,lastRenderedReducer:vn,lastRenderedState:e},e=e.dispatch=Tn.bind(null,Ma,e),[t.memoizedState,e]},useDebugValue:xn,useResponder:Pe},Ha={readContext:At,useCallback:function(e,t){var n=yn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&dn(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:At,useEffect:function(e,t){return En(516,Sa|Ca,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,En(4,ka|_a,kn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return En(4,ka|_a,e,t)},useMemo:function(e,t){var n=yn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&dn(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:gn,useRef:function(){return yn().memoizedState},useState:function(e){return gn(vn,e)},useDebugValue:xn,useResponder:Pe},Ya=null,Qa=null,$a=!1,qa=ni.ReactCurrentOwner,Ka=!1,Ga={},Xa=void 0,Za=void 0,Ja=void 0,eu=void 0;Xa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(20===n.tag)e.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Za=function(){},Ja=function(e,t,n,r,l){var i=e.memoizedProps;if(i!==r){var o=t.stateNode;switch(ln(pa.current),e=null,n){case"input":i=ue(o,i),r=ue(o,r),e=[];break;case"option":i=Ke(o,i),r=Ke(o,r),e=[];break;case"select":i=il({},i,{value:void 0}),r=il({},r,{value:void 0}),e=[];break;case"textarea":i=Xe(o,i),r=Xe(o,r),e=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(o.onclick=ct)}ot(n,r),o=n=void 0;var a=null;for(n in i)if(!r.hasOwnProperty(n)&&i.hasOwnProperty(n)&&null!=i[n])if("style"===n){var u=i[n];for(o in u)u.hasOwnProperty(o)&&(a||(a={}),a[o]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(fl.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=i?i[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(a||(a={}),a[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(a||(a={}),a[o]=c[o])}else a||(e||(e=[]),e.push(n,a)),a=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(fl.hasOwnProperty(n)?(null!=c&&ut(l,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}a&&(e=e||[]).push("style",a),l=e,(t.updateQueue=l)&&Hn(t)}},eu=function(e,t,n,r){n!==r&&Hn(t)};var tu="function"==typeof WeakSet?WeakSet:Set,nu="function"==typeof WeakMap?WeakMap:Map,ru=Math.ceil,lu=ni.ReactCurrentDispatcher,iu=ni.ReactCurrentOwner,ou=0,au=8,uu=16,cu=32,su=0,fu=1,du=2,pu=3,hu=4,mu=ou,yu=null,vu=null,gu=0,bu=su,wu=1073741823,Eu=1073741823,ku=null,xu=!1,Tu=0,_u=500,Cu=null,Su=!1,Pu=null,Nu=null,Mu=!1,Ru=null,Du=90,Iu=0,Ou=null,Fu=0,zu=null,Uu=0,Au=0,Lu=void 0;Lu=function(e,t,n){var l=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||Oo.current)Ka=!0;else if(l<n){switch(Ka=!1,t.tag){case 3:Ln(t),Mn();break;case 5:if(un(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:yt(t.type)&&Et(t);break;case 4:on(t,t.stateNode.containerInfo);break;case 10:Ot(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return l=t.child.childExpirationTime,0!==l&&l>=n?jn(e,t,n):(ht(ba,ba.current&ya,t),t=Vn(e,t,n),null!==t?t.sibling:null);ht(ba,ba.current&ya,t);break;case 19:if(l=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(l)return Bn(e,t,n);t.effectTag|=64}if(i=t.memoizedState,null!==i&&(i.rendering=null,i.tail=null),ht(ba,ba.current,t),!l)return null}return Vn(e,t,n)}}else Ka=!1;switch(t.expirationTime=0,t.tag){case 2:if(l=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=mt(t,Io.current),Ut(t,n),i=pn(null,t,l,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,hn(),yt(l)){var o=!0;Et(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=l.getDerivedStateFromProps;"function"==typeof a&&Gt(t,l,a,e),i.updater=ua,t.stateNode=i,i._reactInternalFiber=t,en(t,l,e,n),t=An(null,t,l,!0,o,n)}else t.tag=0,Rn(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=Dt(i),t.type=i,o=t.tag=zr(i),e=Rt(i,e),o){case 0:t=zn(null,t,i,e,n);break;case 1:t=Un(null,t,i,e,n);break;case 11:t=Dn(null,t,i,e,n);break;case 14:t=In(null,t,i,Rt(i.type,e),l,n);break;default:throw r(Error(306),i,"")}return t;case 0:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Rt(l,i),zn(e,t,l,i,n);case 1:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Rt(l,i),Un(e,t,l,i,n);case 3:if(Ln(t),l=t.updateQueue,null===l)throw r(Error(282));return i=t.memoizedState,i=null!==i?i.element:null,$t(t,l,t.pendingProps,null,n),l=t.memoizedState.element,l===i?(Mn(),t=Vn(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(Qa=dt(t.stateNode.containerInfo.firstChild),Ya=t,i=$a=!0),i?(t.effectTag|=2,t.child=fa(t,null,l,n)):(Rn(e,t,l,n),Mn()),t=t.child),t;case 5:return un(t),null===e&&Sn(t),l=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ft(l,i)?a=null:null!==o&&ft(l,o)&&(t.effectTag|=16),Fn(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Rn(e,t,a,n),t=t.child),t;case 6:return null===e&&Sn(t),null;case 13:return jn(e,t,n);case 4:return on(t,t.stateNode.containerInfo),l=t.pendingProps,null===e?t.child=sa(t,null,l,n):Rn(e,t,l,n),t.child;case 11:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Rt(l,i),Dn(e,t,l,i,n);case 7:return Rn(e,t,t.pendingProps,n),t.child;case 8:return Rn(e,t,t.pendingProps.children,n),t.child;case 12:return Rn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(l=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ot(t,o),null!==a){var u=a.value;if(o=Ce(u,o)?0:0|("function"==typeof l._calculateChangedBits?l._calculateChangedBits(u,o):1073741823),0===o){if(a.children===i.children&&!Oo.current){t=Vn(e,t,n);break e}}else for(u=t.child,null!==u&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var s=c.firstContext;null!==s;){if(s.context===l&&0!==(s.observedBits&o)){1===u.tag&&(s=Wt(n,null),s.tag=2,Vt(u,s)),u.expirationTime<n&&(u.expirationTime=n),s=u.alternate,null!==s&&s.expirationTime<n&&(s.expirationTime=n),zt(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}s=s.next}}else a=10===u.tag&&u.type===t.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===t){a=null;break}if(u=a.sibling,null!==u){u.return=a.return,a=u;break}a=a.return}u=a}}Rn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps,l=o.children,Ut(t,n),i=At(i,o.unstable_observedBits),l=l(i),t.effectTag|=1,Rn(e,t,l,n),t.child;case 14:return i=t.type,o=Rt(i,t.pendingProps),o=Rt(i.type,o),In(e,t,i,o,l,n);case 15:return On(e,t,t.type,t.pendingProps,l,n);case 17:return l=t.type,i=t.pendingProps,i=t.elementType===l?i:Rt(l,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,yt(l)?(e=!0,Et(t)):e=!1,Ut(t,n),Zt(t,l,i,n),en(t,l,i,n),An(null,t,l,!0,e,n);case 19:return Bn(e,t,n)}throw r(Error(156))};var ju=null,Wu=null;Gl=function(e,t,n){switch(t){case"input":if(fe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var i=g(l);if(!i)throw r(Error(90));X(l),fe(l,i)}}}break;case"textarea":Je(e,n);break;case"select":t=n.value,null!=t&&Ge(e,!!n.multiple,t,!1)}},qr.prototype.render=function(e){if(!this._defer)throw r(Error(250));this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,l=new Kr;return Hr(e,t,null,n,null,l._onCommit),l},qr.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},qr.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(!this._defer||null===t)throw r(Error(251));if(this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var l=null,i=t;i!==this;)l=i,i=i._next;if(null===l)throw r(Error(251));l._next=i._next,this._next=t,e.firstBatch=this}if(this._defer=!1,t=n,(mu&(uu|cu))!==ou)throw r(Error(253));St(wr.bind(null,e,t)),Pt(),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},qr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Kr.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Kr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)throw r(Error(191),n);n()}}},Xr.prototype.render=Gr.prototype.render=function(e,t){var n=this._internalRoot,r=new Kr;return t=void 0===t?null:t,null!==t&&r.then(t),Yr(e,n,null,r._onCommit),r},Xr.prototype.unmount=Gr.prototype.unmount=function(e){var t=this._internalRoot,n=new Kr;return e=void 0===e?null:e,null!==e&&n.then(e),Yr(null,t,null,n._onCommit),n},Xr.prototype.createBatch=function(){var e=new qr(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},W=yr,B=vr,V=pr,Jl=function(e,t){var n=mu;mu|=2;try{return e(t)}finally{mu=n,mu===ou&&Pt()}};var Bu={createPortal:tl,findDOMNode:function(e){if(null==e)e=null;else if(1!==e.nodeType){var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw r(Error(188));throw r(Error(268),Object.keys(e))}e=De(t),e=null===e?null:e.stateNode}return e},hydrate:function(e,t,n){if(!Zr(t))throw r(Error(200));return el(null,e,t,!0,n)},render:function(e,t,n){if(!Zr(t))throw r(Error(200));return el(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,l){if(!Zr(n))throw r(Error(200));if(null==e||void 0===e._reactInternalFiber)throw r(Error(38));return el(e,t,n,!1,l)},unmountComponentAtNode:function(e){if(!Zr(e))throw r(Error(40));return!!e._reactRootContainer&&(gr(function(){el(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return tl.apply(void 0,arguments)},unstable_batchedUpdates:yr,unstable_interactiveUpdates:function(e,t,n,r){return pr(),vr(e,t,n,r)},unstable_discreteUpdates:vr,unstable_flushDiscreteUpdates:pr,flushSync:function(e,t){if((mu&(uu|cu))!==ou)throw r(Error(187));var n=mu;mu|=1;try{return _t(99,e.bind(null,t))}finally{mu=n,Pt()}},unstable_createRoot:nl,unstable_createSyncRoot:rl,unstable_flushControlled:function(e){var t=mu;mu|=1;try{_t(99,e)}finally{mu=t,mu===ou&&Pt()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[y,v,g,kl.injectEventPluginsByName,sl,T,function(e){f(e,x)},L,j,Le,p,Cr,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;return Dr(il({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=De(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:m,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"});var Vu={default:Bu},Hu=Vu&&Bu||Vu;e.exports=Hu.default||Hu},function(e,t,n){"use strict";function r(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(12)},,function(e,t){/** @license React v0.15.0
	 * scheduler.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function n(e,t){var n=e.next;if(n===e)F=null;else{e===F&&(F=n);var r=e.previous;r.next=n,n.previous=r}e.next=e.previous=null,n=e.callback,r=A;var l=U;A=e.priorityLevel,U=e;try{var i=e.expirationTime<=t;switch(A){case 1:var o=n(i);break;case 2:o=n(i);break;case 3:o=n(i);break;case 4:o=n(i);break;case 5:o=n(i)}}catch(e){throw e}finally{A=r,U=l}if("function"==typeof o)if(t=e.expirationTime,e.callback=o,null===F)F=e.next=e.previous=e;else{o=null,i=F;do{if(t<=i.expirationTime){o=i;break}i=i.next}while(i!==F);null===o?o=F:o===F&&(F=e),t=o.previous,t.next=o.previous=e,e.next=o,e.previous=t}}function r(e){if(null!==z&&z.startTime<=e)do{var t=z,n=t.next;if(t===n)z=null;else{z=n;var r=t.previous;r.next=n,n.previous=r}t.next=t.previous=null,a(t,t.expirationTime)}while(null!==z&&z.startTime<=e)}function l(e){W=!1,r(e),j||(null!==F?(j=!0,u(i)):null!==z&&c(l,z.startTime-e))}function i(e,i){j=!1,W&&(W=!1,s()),r(i),L=!0;try{if(e){if(null!==F)do n(F,i),i=t.unstable_now(),r(i);while(null!==F&&!f())}else for(;null!==F&&F.expirationTime<=i;)n(F,i),i=t.unstable_now(),r(i);return null!==F||(null!==z&&c(l,z.startTime-i),!1)}finally{L=!1}}function o(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function a(e,t){if(null===F)F=e.next=e.previous=e;else{var n=null,r=F;do{if(t<r.expirationTime){n=r;break}r=r.next}while(r!==F);null===n?n=F:n===F&&(F=e),t=n.previous,t.next=n.previous=e,e.next=n,e.previous=t}}Object.defineProperty(t,"__esModule",{value:!0});var u=void 0,c=void 0,s=void 0,f=void 0,d=void 0;if(t.unstable_now=void 0,t.unstable_forceFrameRate=void 0,"undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,h=null,m=function(){if(null!==p)try{var e=t.unstable_now();p(!0,e),p=null}catch(e){throw setTimeout(m,0),e}};t.unstable_now=function(){return Date.now()},u=function(e){null!==p?setTimeout(u,0,e):(p=e,setTimeout(m,0))},c=function(e,t){h=setTimeout(e,t)},s=function(){clearTimeout(h)},f=function(){return!1},d=t.unstable_forceFrameRate=function(){}}else{var y=window.performance,v=window.Date,g=window.setTimeout,b=window.clearTimeout,w=window.requestAnimationFrame,E=window.cancelAnimationFrame;"undefined"!=typeof console&&("function"!=typeof w&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof E&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),t.unstable_now="object"==typeof y&&"function"==typeof y.now?function(){return y.now()}:function(){return v.now()};var k=!1,x=null,T=-1,_=-1,C=33.33,S=-1,P=-1,N=0,M=!1;f=function(){return t.unstable_now()>=N},d=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<e?(C=Math.floor(1e3/e),M=!0):(C=33.33,M=!1)};var R=function(){if(null!==x){var e=t.unstable_now(),n=0<N-e;try{x(n,e)||(x=null)}catch(e){throw I.postMessage(null),e}}},D=new MessageChannel,I=D.port2;D.port1.onmessage=R;var O=function(e){if(null===x)P=S=-1,k=!1;else{k=!0,w(function(e){b(T),O(e)});var n=function(){N=t.unstable_now()+C/2,R(),T=g(n,3*C)};if(T=g(n,3*C),-1!==S&&.1<e-S){var r=e-S;!M&&-1!==P&&r<C&&P<C&&(C=r<P?P:r,8.33>C&&(C=8.33)),P=r}S=e,N=e+C,I.postMessage(null)}};u=function(e){x=e,k||(k=!0,w(function(e){O(e)}))},c=function(e,n){_=g(function(){e(t.unstable_now())},n)},s=function(){b(_),_=-1}}var F=null,z=null,U=null,A=3,L=!1,j=!1,W=!1,B=d;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_scheduleCallback=function(e,n,r){var f=t.unstable_now();if("object"==typeof r&&null!==r){var d=r.delay;d="number"==typeof d&&0<d?f+d:f,r="number"==typeof r.timeout?r.timeout:o(e)}else r=o(e),d=f;if(r=d+r,e={callback:n,priorityLevel:e,startTime:d,expirationTime:r,next:null,previous:null},d>f){if(r=d,null===z)z=e.next=e.previous=e;else{n=null;var p=z;do{if(r<p.startTime){n=p;break}p=p.next}while(p!==z);null===n?n=z:n===z&&(z=e),r=n.previous,r.next=n.previous=e,e.next=n,e.previous=r}null===F&&z===e&&(W?s():W=!0,c(l,d-f))}else a(e,r),j||L||(j=!0,u(i));return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(e===t)e===F?F=null:e===z&&(z=null);else{e===F?F=t:e===z&&(z=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_shouldYield=function(){var e=t.unstable_now();return r(e),null!==U&&null!==F&&F.startTime<=e&&F.expirationTime<U.expirationTime||f()},t.unstable_requestPaint=B,t.unstable_continueExecution=function(){j||L||(j=!0,u(i))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return F}},function(e,t,n){"use strict";e.exports=n(15)}]);
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("react"), require("react-dom"), require("react-dom/server"));
	else if(typeof define === 'function' && define.amd)
		define(["react", "react-dom", "react-dom/server"], factory);
	else if(typeof exports === 'object')
		exports["ReactRailsUJS"] = factory(require("react"), require("react-dom"), require("react-dom/server"));
	else
		root["ReactRailsUJS"] = factory(root["React"], root["ReactDOM"], root["ReactDOMServer"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 6);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

// Assume className is simple and can be found at top-level (window).
// Fallback to eval to handle cases like 'My.React.ComponentName'.
// Also, try to gracefully import Babel 6 style default exports
var topLevel = typeof window === "undefined" ? this : window;

module.exports = function(className) {
  var constructor;
  // Try to access the class globally first
  constructor = topLevel[className];

  // If that didn't work, try eval
  if (!constructor) {
    constructor = eval(className);
  }

  // Lastly, if there is a default attribute try that
  if (constructor && constructor['default']) {
    constructor = constructor['default'];
  }

  return constructor;
}


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var nativeEvents = __webpack_require__(7)
var pjaxEvents = __webpack_require__(8)
var turbolinksEvents = __webpack_require__(9)
var turbolinksClassicDeprecatedEvents = __webpack_require__(11)
var turbolinksClassicEvents = __webpack_require__(10)

// see what things are globally available
// and setup event handlers to those things
module.exports = function(ujs) {
  if (ujs.handleEvent) {
    // We're calling this a second time -- remove previous handlers
    if (typeof Turbolinks !== "undefined" && typeof Turbolinks.EVENTS !== "undefined") {
      turbolinksClassicEvents.teardown(ujs);
    }
    turbolinksEvents.teardown(ujs);
    turbolinksClassicDeprecatedEvents.teardown(ujs);
    pjaxEvents.teardown(ujs);
    nativeEvents.teardown(ujs);
  }

  if ('addEventListener' in window) {
    ujs.handleEvent = function(eventName, callback) {
      document.addEventListener(eventName, callback);
    };
    ujs.removeEvent = function(eventName, callback) {
      document.removeEventListener(eventName, callback);
    };
  } else {
    ujs.handleEvent = function(eventName, callback) {
      window.attachEvent(eventName, callback);
    };
    ujs.removeEvent = function(eventName, callback) {
      window.detachEvent(eventName, callback);
    };
  }

  // Detect which kind of events to set up:
  if (typeof Turbolinks !== 'undefined' && Turbolinks.supported) {
    if (typeof Turbolinks.EVENTS !== 'undefined') {
      // Turbolinks.EVENTS is in classic version 2.4.0+
      turbolinksClassicEvents.setup(ujs)
    } else if (typeof Turbolinks.controller !== "undefined") {
      // Turbolinks.controller is in version 5+
      turbolinksEvents.setup(ujs);
    } else {
      turbolinksClassicDeprecatedEvents.setup(ujs);
    }
  } else if (typeof $ !== "undefined" && typeof $.pjax === 'function') {
    pjaxEvents.setup(ujs);
  } else {
    nativeEvents.setup(ujs);
  }
}


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

// Make a function which:
// - First tries to require the name
// - Then falls back to global lookup
var fromGlobal = __webpack_require__(0)
var fromRequireContext = __webpack_require__(12)

module.exports = function(reqctx) {
  var fromCtx = fromRequireContext(reqctx)
  return function(className) {
    var component;
    try {
      // `require` will raise an error if this className isn't found:
      component = fromCtx(className)
    } catch (firstErr) {
      // fallback to global:
      try {
        component = fromGlobal(className)
      } catch (secondErr) {
        console.error(firstErr)
        console.error(secondErr)
      }
    }
    return component
  }
}


/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_4__;

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_5__;

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

var React = __webpack_require__(3)
var ReactDOM = __webpack_require__(4)
var ReactDOMServer = __webpack_require__(5)

var detectEvents = __webpack_require__(1)
var constructorFromGlobal = __webpack_require__(0)
var constructorFromRequireContextWithGlobalFallback = __webpack_require__(2)

var ReactRailsUJS = {
  // This attribute holds the name of component which should be mounted
  // example: `data-react-class="MyApp.Items.EditForm"`
  CLASS_NAME_ATTR: 'data-react-class',

  // This attribute holds JSON stringified props for initializing the component
  // example: `data-react-props="{\"item\": { \"id\": 1, \"name\": \"My Item\"} }"`
  PROPS_ATTR: 'data-react-props',

  // This attribute holds which method to use between: ReactDOM.hydrate, ReactDOM.render
  RENDER_ATTR: 'data-hydrate',

  // A unique identifier to identify a node
  CACHE_ID_ATTR: "data-react-cache-id",

  TURBOLINKS_PERMANENT_ATTR: "data-turbolinks-permanent",

  // If jQuery is detected, save a reference to it for event handlers
  jQuery: (typeof window !== 'undefined') && (typeof window.jQuery !== 'undefined') && window.jQuery,

  components: {},

  // helper method for the mount and unmount methods to find the
  // `data-react-class` DOM elements
  findDOMNodes: function(searchSelector) {
    var classNameAttr = ReactRailsUJS.CLASS_NAME_ATTR
    // we will use fully qualified paths as we do not bind the callbacks
    var selector, parent;

    switch (typeof searchSelector) {
      case 'undefined':
        selector = '[' + classNameAttr + ']';
        parent = document;
        break;
      case 'object':
        selector = '[' + classNameAttr + ']';
        parent = searchSelector;
        break;
      case 'string':
        selector = searchSelector + '[' + classNameAttr + '], ' +
                   searchSelector + ' [' + classNameAttr + ']';
        parent = document;
        break
      default:
        break;
    }

    if (ReactRailsUJS.jQuery) {
      return ReactRailsUJS.jQuery(selector, parent);
    } else {
      return parent.querySelectorAll(selector);
    }
  },

  // Get the constructor for a className (returns a React class)
  // Override this function to lookup classes in a custom way,
  // the default is ReactRailsUJS.ComponentGlobal
  getConstructor: constructorFromGlobal,

  // Given a Webpack `require.context`,
  // try finding components with `require`,
  // then falling back to global lookup.
  useContext: function(requireContext) {
    this.getConstructor = constructorFromRequireContextWithGlobalFallback(requireContext)
  },

  // Render `componentName` with `props` to a string,
  // using the specified `renderFunction` from `react-dom/server`.
  serverRender: function(renderFunction, componentName, props) {
    var componentClass = this.getConstructor(componentName)
    var element = React.createElement(componentClass, props)
    return ReactDOMServer[renderFunction](element)
  },

  // Within `searchSelector`, find nodes which should have React components
  // inside them, and mount them with their props.
  mountComponents: function(searchSelector) {
    var ujs = ReactRailsUJS
    var nodes = ujs.findDOMNodes(searchSelector);

    for (var i = 0; i < nodes.length; ++i) {
      var node = nodes[i];
      var className = node.getAttribute(ujs.CLASS_NAME_ATTR);
      var constructor = ujs.getConstructor(className);
      var propsJson = node.getAttribute(ujs.PROPS_ATTR);
      var props = propsJson && JSON.parse(propsJson);
      var hydrate = node.getAttribute(ujs.RENDER_ATTR);
      var cacheId = node.getAttribute(ujs.CACHE_ID_ATTR);
      var turbolinksPermanent = node.hasAttribute(ujs.TURBOLINKS_PERMANENT_ATTR);

      if (!constructor) {
        var message = "Cannot find component: '" + className + "'"
        if (console && console.log) {
          console.log("%c[react-rails] %c" + message + " for element", "font-weight: bold", "", node)
        }
        throw new Error(message + ". Make sure your component is available to render.")
      } else {
        var component = this.components[cacheId];
        if(component === undefined) {
          component = React.createElement(constructor, props);
          if(turbolinksPermanent) {
            this.components[cacheId] = component;
          }
        }

        if (hydrate && typeof ReactDOM.hydrate === "function") {
          component = ReactDOM.hydrate(component, node);
        } else {
          component = ReactDOM.render(component, node);
        }
      }
    } 
  },

  // Within `searchSelector`, find nodes which have React components
  // inside them, and unmount those components.
  unmountComponents: function(searchSelector) {
    var nodes = ReactRailsUJS.findDOMNodes(searchSelector);

    for (var i = 0; i < nodes.length; ++i) {
      var node = nodes[i];
      ReactDOM.unmountComponentAtNode(node);
    }
  },

  // Check the global context for installed libraries
  // and figure out which library to hook up to (pjax, Turbolinks, jQuery)
  // This is called on load, but you can call it again if needed
  // (It will unmount itself)
  detectEvents: function() {
    detectEvents(this)
  },
}

// These stable references are so that handlers can be added and removed:
ReactRailsUJS.handleMount = function(e) {
  var target = undefined;
  if (e && e.target) {
    target = e.target;
  }
  ReactRailsUJS.mountComponents(target);
}
ReactRailsUJS.handleUnmount = function(e) {
  var target = undefined;
  if (e && e.target) {
    target = e.target;
  }
  ReactRailsUJS.unmountComponents(target);
}


if (typeof window !== "undefined") {
  // Only setup events for browser (not server-rendering)
  ReactRailsUJS.detectEvents()
}

// It's a bit of a no-no to populate the global namespace,
// but we really need it!
// We need access to this object for server rendering, and
// we can't do a dynamic `require`, so we'll grab it from here:
self.ReactRailsUJS = ReactRailsUJS

module.exports = ReactRailsUJS


/***/ }),
/* 7 */
/***/ (function(module, exports) {

module.exports = {
  // Attach handlers to browser events to mount
  // (There are no unmount handlers since the page is destroyed on navigation)
  setup: function(ujs) {
    if ('addEventListener' in window) {
      ujs.handleEvent('DOMContentLoaded', ujs.handleMount);
    } else {
      // add support to IE8 without jQuery
      ujs.handleEvent('onload', ujs.handleMount);
    }
  },

  teardown: function(ujs) {
    ujs.removeEvent('DOMContentLoaded', ujs.handleMount);
    ujs.removeEvent('onload', ujs.handleMount);
  }
}


/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = {
  // pjax support
  setup: function(ujs) {
    ujs.handleEvent('ready', ujs.handleMount);
    ujs.handleEvent('pjax:end', ujs.handleMount);
    ujs.handleEvent('pjax:beforeReplace', ujs.handleUnmount);
  },

  teardown: function(ujs) {
    ujs.removeEvent('ready', ujs.handleMount);
    ujs.removeEvent('pjax:end', ujs.handleMount);
    ujs.removeEvent('pjax:beforeReplace', ujs.handleUnmount);
  },
}


/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = {
  // Turbolinks 5+ got rid of named events (?!)
  setup: function(ujs) {
  	ujs.handleEvent('turbolinks:load', ujs.handleMount);
    ujs.handleEvent('turbolinks:before-render', ujs.handleUnmount);
  },

  teardown: function(ujs) {
  	ujs.removeEvent('turbolinks:load', ujs.handleMount);
    ujs.removeEvent('turbolinks:before-render', ujs.handleUnmount);
  },
}


/***/ }),
/* 10 */
/***/ (function(module, exports) {

module.exports = {
  // Attach handlers to Turbolinks-Classic events
  // for mounting and unmounting components
  setup: function(ujs) {
    ujs.handleEvent(Turbolinks.EVENTS.CHANGE, ujs.handleMount);
    ujs.handleEvent(Turbolinks.EVENTS.BEFORE_UNLOAD, ujs.handleUnmount);
  },
  teardown: function(ujs) {
    ujs.removeEvent(Turbolinks.EVENTS.CHANGE, ujs.handleMount);
    ujs.removeEvent(Turbolinks.EVENTS.BEFORE_UNLOAD, ujs.handleUnmount);
  }
}


/***/ }),
/* 11 */
/***/ (function(module, exports) {

module.exports = {
  // Before Turbolinks 2.4.0, Turbolinks didn't
  // have named events and didn't have a before-unload event.
  // Also, it didn't work with the Turbolinks cache, see
  // https://github.com/reactjs/react-rails/issues/87
  setup: function(ujs) {
    Turbolinks.pagesCached(0)
    ujs.handleEvent('page:change', ujs.handleMount);
    ujs.handleEvent('page:receive', ujs.handleUnmount);
  },
  teardown: function(ujs) {
    ujs.removeEvent('page:change', ujs.handleMount);
    ujs.removeEvent('page:receive', ujs.handleUnmount);
  }
}


/***/ }),
/* 12 */
/***/ (function(module, exports) {

// Load React components by requiring them from "components/", for example:
//
// - "pages/index" -> `require("components/pages/index")`
// - "pages/show.Header" -> `require("components/pages/show").Header`
// - "pages/show.Body.Content" -> `require("components/pages/show").Body.Content`
//
module.exports = function(reqctx) {
  return function(className) {
    var parts = className.split(".")
    var filename = parts.shift()
    var keys = parts
    // Load the module:
    var component = reqctx("./" + filename)
    // Then access each key:
    keys.forEach(function(k) {
      component = component[k]
    })
    // support `export default`
    if (component.__esModule) {
      component = component["default"]
    }
    return component
  }
}


/***/ })
/******/ ]);
});
var react_utils = {
  humanize: function(property){
    return property.toString().toLowerCase()
    .replace(/[_-]/g, ' ')
    .replace(/(?:^|\s)\S/g, function(a) {
      return a.toUpperCase();
    });
  }
}

// Implement array methods so they work in IE
if (!Array.prototype.find) {
  Object.defineProperty(Array.prototype, "find", {
    value: function(predicate) {
      if (this === null) {
        throw new TypeError('Array.prototype.find called on null or undefined');
      }
      if (typeof predicate !== 'function') {
        throw new TypeError('predicate must be a function');
      }
      var list = Object(this);
      var length = list.length >>> 0;
      var thisArg = arguments[1];
      var value;

      for (var i = 0; i < length; i++) {
        value = list[i];
        if (predicate.call(thisArg, value, i, list)) {
          return value;
        }
      }
      return undefined;
    }
  });
}

if (!Array.prototype.findIndex) {
  Object.defineProperty(Array.prototype, 'findIndex', {
    value: function(predicate) {
      'use strict';
      if (this == null) {
        throw new TypeError('Array.prototype.findIndex called on null or undefined');
      }
      if (typeof predicate !== 'function') {
        throw new TypeError('predicate must be a function');
      }
      var list = Object(this);
      var length = list.length >>> 0;
      var thisArg = arguments[1];
      var value;

      for (var i = 0; i < length; i++) {
        value = list[i];
        if (predicate.call(thisArg, value, i, list)) {
          return i;
        }
      }
      return -1;
    },
    enumerable: false,
    configurable: false,
    writable: false
  });
}
;
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ApiCount = (function (_React$Component) {
	_inherits(ApiCount, _React$Component);

	function ApiCount(props) {
		_classCallCheck(this, ApiCount);

		_get(Object.getPrototypeOf(ApiCount.prototype), "constructor", this).call(this, props);
		this.state = {
			data: null
		};
	}

	_createClass(ApiCount, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			if (this.props.url) {
				this.getData();
			}
		}
	}, {
		key: "getData",
		value: function getData() {
			var that = this;
			$.getJSON(this.props.url, null, function (data) {
				that.setState({ data: data });
			});
		}
	}, {
		key: "render",
		value: function render() {
			if (this.state.data) {
				return React.createElement(
					"div",
					null,
					React.createElement(
						"div",
						{ className: "value" },
						this.state.data.total,
						" ",
						this.props.units
					)
				);
			} else {
				return React.createElement(
					"div",
					{ className: "loading value" },
					"Loading..."
				);
			}
		}
	}]);

	return ApiCount;
})(React.Component);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Article Component for Gridlist (SPA-style) [updated from gridlist refactor 6/26/2019] -nmj

var Article = (function (_React$Component) {
	_inherits(Article, _React$Component);

	function Article() {
		_classCallCheck(this, Article);

		_get(Object.getPrototypeOf(Article.prototype), "constructor", this).apply(this, arguments);
	}

	_createClass(Article, [{
		key: "getOptions",
		value: function getOptions() {
			var options = this.props.options;

			if (typeof options != "undefined" && options != null) {
				return options;
			} else {
				return {};
			}
		}
	}, {
		key: "render",
		value: function render() {
			var detail_item_component = window[this.props.list_item + "Detail"];
			var sidebar_component = window[this.props.list_item + "Sidebar"];
			return React.createElement(
				"article",
				{ className: "grid_list_slide" },
				React.createElement(detail_item_component, _extends({ item: this.props.article, hide_detail: this.props.hide_detail,
					change_title: this.props.change_title, options: this.getOptions(), images_loaded: this.props.images_loaded }, this.props)),
				this.props.detail_image_loaded ? React.createElement(sidebar_component, _extends({ item: this.props.article, initial_items: this.props.initial_items, images_loaded: this.props.images_loaded }, this.props, { "class": 'grid_list_sidebar' })) : null
			);
		}
	}]);

	return Article;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// ArticleNav Component for Gridlist (SPA-style) [updated from gridlist refactor 6/26/2019] -nmj
// provies support for a 'custom_scroll' prop

var ArticleNav = (function (_React$Component) {
  _inherits(ArticleNav, _React$Component);

  function ArticleNav(props) {
    _classCallCheck(this, ArticleNav);

    _get(Object.getPrototypeOf(ArticleNav.prototype), 'constructor', this).call(this, props); // get scroll value to use when scrolling to "top" of react component
    var scroll_value = this.getScrollValue();

    this.state = {
      scroll_value: scroll_value,
      detail_centered: true
    };
  }

  // finds height of banner and scrolls down a percentage determined by this.props.options.custom_scroll
  // (0 for no scroll, .5 scrolls 1/2way down banner, 1 scrolls the banner out of view, etc..)

  _createClass(ArticleNav, [{
    key: 'getScrollValue',
    value: function getScrollValue() {
      var banner = $('section.main_feature').length > 0 ? $('section.main_feature') : $('.custom_banner_container');
      var scroll_value = 0;
      var custom_scroll = 0;
      if (this.props.options && this.props.options.custom_scroll != 'undefined') {
        custom_scroll = parseFloat(this.props.options.custom_scroll);
        if (isNaN(custom_scroll)) {
          custom_scroll = .6;
        }
        if (banner.length) {
          scroll_value = (banner[0].offsetHeight - $('nav.site_nav')[0].offsetHeight) * custom_scroll;
        }
      };

      return scroll_value;
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      var that = this;
      // handle resize for scroll to top if custom_scroll is an option
      if (this.props.options.custom_scroll != 'undefined' && this.props.options.custom_scroll == true) {
        window.addEventListener('resize', function () {
          that.setState({ scroll_value: that.getScrollValue() }, function () {
            console.log('resizing');
          });
        });
      }
    }
  }, {
    key: 'onClickPreviousItem',
    value: function onClickPreviousItem(e) {
      var _this = this;

      if (this.state.detail_centered) {
        (function () {
          _this.setState({ detail_centered: false });
          var that = _this;
          e.preventDefault();
          _this.slidePrev(function () {
            that.props.selected_item(that.props.previous_item, function () {
              that.slideFromLeft();
            });
          });
          if (_this.state.scroll_value) {
            // window.scroll(0,this.state.scroll_value);
            $('html, body').animate({ scrollTop: _this.state.scroll_value + 'px' }, 700);
          } else {
            window.scroll(0, 0);
          }
        })();
      }
    }
  }, {
    key: 'onClickNextItem',
    value: function onClickNextItem(e) {
      var _this2 = this;

      if (this.state.detail_centered) {
        (function () {
          _this2.setState({ detail_centered: false });
          var that = _this2;
          e.preventDefault();
          _this2.slideNext(function () {
            that.props.selected_item(that.props.next_item, function () {
              that.slideFromRight();
            });
          });
          if (_this2.state.scroll_value) {
            // window.scroll(0,this.state.scroll_value);
            $('html, body').animate({ scrollTop: _this2.state.scroll_value + 'px' }, 700);
          } else {
            window.scroll(0, 0);
          }
        })();
      }
    }
  }, {
    key: 'slideFromRight',
    value: function slideFromRight() {
      var that = this;
      $('article.grid_list_slide').css({ left: "25%", opacity: 0 });
      var try_slide = setInterval(function () {
        if (that.props.detail_image_loaded) {
          clearInterval(try_slide);
          $('article.grid_list_slide').animate({ left: "0", opacity: 1 }, 200, function () {
            that.setState({ detail_centered: true });
          });
        } else {
          //console.log("waiting for images...")
        }
      }, 20);

      setTimeout(function () {
        var loading = $('.detail_loading');
        if (loading.length > 0) {
          loading.spin(main.spinner_opts);
        }
      }, 2000);
    }
  }, {
    key: 'slideFromLeft',
    value: function slideFromLeft() {
      var that = this;
      $('article.grid_list_slide').css({ left: "-25%", opacity: 0 });
      var try_slide = setInterval(function () {
        if (that.props.detail_image_loaded) {
          clearInterval(try_slide);
          $('article.grid_list_slide').animate({ left: "0", opacity: 1 }, 200, function () {
            that.setState({ detail_centered: true });
          });
        } else {
          //console.log("waiting for images...")
        }
      }, 20);

      setTimeout(function () {
        var loading = $('.detail_loading');
        if (loading.length > 0) {
          loading.spin(main.spinner_opts);
        }
      }, 2000);
    }
  }, {
    key: 'slideNext',
    value: function slideNext(callback) {
      $('article.grid_list_slide').animate({ left: "-25%", opacity: 0 }, 200, callback);
    }
  }, {
    key: 'slidePrev',
    value: function slidePrev(callback) {
      $('article.grid_list_slide').animate({ left: "25%", opacity: 0 }, 200, callback);
    }
  }, {
    key: 'getPreviousHTML',
    value: function getPreviousHTML() {
      var that = this;
      var previous_item = that.props.previous_item;
      if (previous_item) {
        var image_src = previous_item.list_image_src;
        if (typeof that.props.options != 'undefined' && that.props.options.external_asset_url) {
          image_src = that.props.options.external_asset_url + image_src;
        }
        return React.createElement(
          'a',
          { onClick: function (e) {
              that.onClickPreviousItem(e);
            }, href: '#', className: 'article_nav_block prev' },
          React.createElement(
            'div',
            { className: 'link_box' },
            React.createElement('img', { src: '/assets/arrow_left.jpg', alt: 'Previous Article' })
          ),
          React.createElement(
            'div',
            { className: 'article_details', id: 'prev_details' },
            React.createElement(
              'div',
              { className: 'preview_image' },
              React.createElement('img', { alt: previous_item.job_title, src: image_src })
            ),
            React.createElement(
              'div',
              { className: 'title' },
              previous_item.name
            )
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getNextHTML',
    value: function getNextHTML() {
      var that = this;
      var next_item = that.props.next_item;
      if (next_item) {
        var image_src = next_item.list_image_src;
        if (typeof that.props.options != 'undefined' && that.props.options.external_asset_url) {
          image_src = that.props.options.external_asset_url + image_src;
        }
        return React.createElement(
          'a',
          { onClick: function (e) {
              that.onClickNextItem(e);
            }, href: '#', className: 'article_nav_block next' },
          React.createElement(
            'div',
            { className: 'link_box' },
            React.createElement('img', { src: '/assets/arrow_right.jpg', alt: 'Next Article' })
          ),
          React.createElement(
            'div',
            { className: 'article_details', id: 'next_details' },
            React.createElement(
              'div',
              { className: 'preview_image' },
              React.createElement('img', { alt: next_item.job_title, src: image_src })
            ),
            React.createElement(
              'div',
              { className: 'title' },
              next_item.name
            )
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'render',
    value: function render() {
      return React.createElement(
        'div',
        { className: 'article_nav' },
        this.getNextHTML(),
        this.getPreviousHTML()
      );
    }
  }]);

  return ArticleNav;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BrowseHappier = (function (_React$Component) {
    _inherits(BrowseHappier, _React$Component);

    function BrowseHappier() {
        _classCallCheck(this, BrowseHappier);

        _get(Object.getPrototypeOf(BrowseHappier.prototype), 'constructor', this).apply(this, arguments);
    }

    _createClass(BrowseHappier, [{
        key: 'getIEVersion',
        value: function getIEVersion() {
            var agent = navigator.userAgent;
            var reg = /MSIE\s?(\d+)(?:\.(\d+))?/i;
            var matches = agent.match(reg);
            if (matches != null) {
                return { major: matches[1], minor: matches[2] };
            }

            var trident = agent.indexOf('Trident/');
            if (trident > 0) {
                // IE 11 => return version number
                return { major: 11, minor: 0 };
            }

            var edge = agent.indexOf('Edge/');
            if (edge > 0) {
                // Edge (IE 12+) => return version number
                return { major: 12, minor: 0 };
            }

            return { major: "-1", minor: "-1" };
        }
    }, {
        key: 'shouldBH',
        value: function shouldBH(ie) {
            if (this.props.lt && this.props.gt) {
                return ie.major < this.props.lt && ie.major > this.props.gt;
            } else {
                return false;
            }
        }
    }, {
        key: 'render',
        value: function render() {
            var ie = this.getIEVersion();
            if (this.shouldBH(ie)) {
                return React.createElement(
                    'p',
                    { className: 'browsehappy' },
                    'You are using an ',
                    React.createElement(
                        'strong',
                        null,
                        'outdated'
                    ),
                    ' browser. Please ',
                    React.createElement(
                        'a',
                        { href: 'http://browsehappy.com/' },
                        'upgrade your browser'
                    ),
                    ' to improve your experience.'
                );
            } else {
                return null;
            }
        }
    }]);

    return BrowseHappier;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Carousel = (function (_React$Component) {
  _inherits(Carousel, _React$Component);

  function Carousel(props) {
    _classCallCheck(this, Carousel);

    _get(Object.getPrototypeOf(Carousel.prototype), 'constructor', this).call(this, props);
    this.carousel = null;
  }

  _createClass(Carousel, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var that = this;
      var show = this.props.show ? this.props.show : 1;
      var infinite = this.props.infinite ? this.props.infinite : false;
      var autoplay = this.props.autoplay ? this.props.autoplay : false;
      var scroll = this.props.scroll ? this.props.scroll : 1;
      var center = this.props.center ? this.props.center : false;
      var initial = this.props.initial ? this.props.initial : 0;
      var responsive = this.props.responsive ? this.props.responsive : [{}];
      var arrows = this.props.arrows ? this.props.arrows : false;

      if (this.props.fancybox_yt) {
        // Initialise the fancyBox after the DOM is loaded

        $(document).ready(function () {
          //$(".video_cbx2").colorbox({rel:"peopleprofiles",iframe:true, width:"80%", height:"80%", reposition:true}).resize();
          var cboxOptionsLandscape = {
            rel: 'peopleprofiles',
            current: "",
            iframe: true,
            width: '80%',
            height: '80%',
            maxWidth: '960px',
            maxHeight: '540px',
            reposition: true
          };
          var cboxOptionsPortrait = {
            rel: 'peopleprofiles',
            current: "",
            iframe: true,
            width: '95%',
            height: '53%',
            maxWidth: '960px',
            maxHeight: '540px',
            reposition: true
          };
          if (window.innerHeight > window.innerWidth) {
            $('.video_cbx2').colorbox(cboxOptionsPortrait, function () {
              $("#colorbox").addClass("cboxTransparentTheme");
            });
          } else {
            $('.video_cbx2').colorbox(cboxOptionsLandscape, function () {
              $("#colorbox").addClass("cboxTransparentTheme");
            });
          }
          $(window).resize(function () {
            if (window.innerHeight > window.innerWidth) {
              $.colorbox.resize({
                width: window.innerWidth > parseInt(cboxOptionsPortrait.maxWidth) ? cboxOptionsPortrait.maxWidth : cboxOptionsPortrait.width,
                height: window.innerHeight > parseInt(cboxOptionsPortrait.maxHeight) ? cboxOptionsPortrait.maxHeight : cboxOptionsPortrait.height
              });
            } else {
              $.colorbox.resize({
                width: window.innerWidth > parseInt(cboxOptionsLandscape.maxWidth) ? cboxOptionsLandscape.maxWidth : cboxOptionsLandscape.width,
                height: window.innerHeight > parseInt(cboxOptionsLandscape.maxHeight) ? cboxOptionsLandscape.maxHeight : cboxOptionsLandscape.height
              });
            }
          });
        });
      }

      this.carousel = $('#' + this.props.carousel_id).slick({
        accessibility: true,
        adaptiveHeight: false,
        autoplay: autoplay,
        autoplaySpeed: 5000,
        arrows: arrows,
        centerMode: center,
        centerPadding: "0",
        cssEase: "ease",
        dots: false,
        draggable: true,
        fade: false,
        focusOnSelect: false,
        easing: "linear",
        edgeFriction: 0.15,
        infinite: infinite,
        initialSlide: initial,
        mobileFirst: false,
        pauseOnHover: true,
        pauseOnDotsHover: false,
        respondTo: "window",
        responsive: responsive,
        slide: "",
        slidesToShow: show,
        slidesToScroll: scroll,
        speed: 300,
        swipe: true,
        swipeToSlide: false,
        touchMove: true,
        touchThreshold: 5,
        useCSS: true,
        variableWidth: true,
        vertical: false,
        verticalSwiping: false,
        rtl: false
      });

      $(window).resize();
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      this.carousel.slick('unslick');
    }
  }, {
    key: 'buildSlide',
    value: function buildSlide(slide) {
      if (this.props.fancybox_yt) {
        //super custom for mars insight
        return React.createElement(
          'div',
          { key: slide.id, className: 'slide' },
          React.createElement(
            'a',
            { href: slide.embed_video, className: 'video_cbx2',
              'data-fancybox-group': 'videos', title: slide.title + ': ' + slide.body, rel: 'peopleprofiles'
            },
            React.createElement(
              'div',
              { className: 'image_container' },
              React.createElement('img', { src: slide.image_src, alt: slide.alt_text }),
              React.createElement('img', { src: '/assets/yt_play_button.png', alt: '', className: 'youtube_play_button' })
            )
          ),
          React.createElement(
            'div',
            { className: 'slide_description' },
            React.createElement('h3', { dangerouslySetInnerHTML: { __html: slide.title } }),
            React.createElement('p', { className: 'description_body', dangerouslySetInnerHTML: { __html: slide.body } })
          )
        );
      } else {
        return React.createElement(
          'div',
          { key: slide.id, className: 'slide' },
          React.createElement(
            'a',
            { href: slide.link },
            React.createElement(
              'div',
              { className: 'image_and_description_container' },
              React.createElement(
                'div',
                { className: 'rollover_description' },
                slide.body,
                React.createElement(
                  'div',
                  { className: 'overlay_arrow' },
                  React.createElement('img', { alt: 'More', src: '/assets/overlay-arrow.png' })
                )
              ),
              React.createElement('img', { src: slide.image_src, alt: slide.alt_text })
            )
          ),
          React.createElement(
            'div',
            { className: 'content_title' },
            React.createElement(
              'a',
              { href: slide.link },
              slide.title
            )
          )
        );
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var slides = this.props.slides;
      var that = this;

      return React.createElement(
        'div',
        { id: this.props.carousel_id, className: 'detail_carousel' },
        this.props.slides.map(function (s) {
          return that.buildSlide(s);
        })
      );
    }
  }]);

  return Carousel;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CheckboxList = (function (_React$Component) {
  _inherits(CheckboxList, _React$Component);

  function CheckboxList(props) {
    _classCallCheck(this, CheckboxList);

    _get(Object.getPrototypeOf(CheckboxList.prototype), "constructor", this).call(this, props);
    this.state = {
      truncation: this.props.more_less,
      items: this.props.items,
      search_regex: null
    };
  }

  _createClass(CheckboxList, [{
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      var that = this;
      if (nextProps.items !== this.state.items) {
        var items = nextProps.items;
        if (this.props.filterable && this.state.search_regex != null) {
          items = items.filter(function (element) {
            if (typeof element.value !== "string") {
              return that.state.search_regex.test(element.label);
            } else {
              return that.state.search_regex.test(element.value);
            }
          });
        }
        this.setState({ items: items });
      }
    }
  }, {
    key: "makeId",
    value: function makeId(str) {
      var delimiter = this.props.delimiter ? this.props.delimiter : "-";
      var prefix = this.props.form_section;
      var id = str.toLowerCase().replace(/\W/g, delimiter);
      return prefix + delimiter + id;
    }
  }, {
    key: "formatText",
    value: function formatText(str) {
      if (this.props.text_format == "sentence") {
        return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
      } else if (this.props.text_format == "none") {
        return str;
      } else {
        // titlecase, the default
        return this.titleize(str);
      }
    }
  }, {
    key: "blurOnEnter",
    value: function blurOnEnter(e) {
      if (e.keyCode === 13) {
        e.preventDefault();
        $(e.target).blur();
      }
    }
  }, {
    key: "titleize",
    value: function titleize(str) {
      var words = str.split(/[\W^-]/g);
      words = words.map(function (word) {
        return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
      });

      return words.join(" ");
    }
  }, {
    key: "changeTruncation",
    value: function changeTruncation(e) {
      if (e) e.preventDefault();
      if (!this.state.truncation && this.state.items.length > 20) {
        var element = document.getElementById("form_section_" + this.props.form_section);
        element.scrollIntoView(true);
      }
      this.setState({ truncation: !this.state.truncation });
    }
  }, {
    key: "filterCheckboxes",
    value: function filterCheckboxes(e) {
      var search = e.target.value;
      if (search == "") {
        this.setState({ items: this.props.items, search_regex: null });
      } else {
        var search_regex = new RegExp(search, 'i');
        var filtered_items = this.props.items.filter(function (element) {
          if (typeof element.value !== "string") {
            return search_regex.test(element.label);
          } else {
            return search_regex.test(element.value);
          }
        });
        this.setState({ items: filtered_items, search_regex: search_regex });
      }
    }
  }, {
    key: "getShowAll",
    value: function getShowAll() {
      var _this = this;

      if (this.props.show_all) {
        return React.createElement(
          "li",
          null,
          React.createElement(
            "label",
            null,
            React.createElement("input", { className: "facet_checkbox", type: "checkbox", checked: this.props.checked_items.length == 0, name: "show_all", value: "", onChange: function (e) {
                _this.clearItems(e.target);
              } }),
            React.createElement(
              "span",
              { className: "label_text" },
              "Show all"
            )
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: "clearItems",
    value: function clearItems() {
      var target = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];

      this.props.clear_items(this.props.form_section);
      if (this.props.filterable && target != null) {
        var that = this;
        this.setState({ search_regex: null }, function () {
          $(target).parents('fieldset').find('input[type="text"]').val('');
        });
      }
    }
  }, {
    key: "whenClicked",
    value: function whenClicked(e) {
      if (this.props.when_clicked) {
        this.props.when_clicked(e);
      }
    }
  }, {
    key: "isChecked",
    value: function isChecked(v) {
      return this.props.checked_items.indexOf(v) > -1;
    }
  }, {
    key: "render",
    value: function render() {
      var that = this;
      var fieldset_class = this.props.form_section;
      fieldset_class += this.state.truncation ? " truncated" : " expanded";
      var show_min = that.props.show_min ? that.props.show_min : 7;
      return React.createElement(
        "fieldset",
        { className: fieldset_class + " facet_section", id: "form_section_" + that.props.form_section },
        that.props.filterable ? React.createElement("input", { className: "search_field wide filter_" + that.props.form_section, onChange: function (e) {
            that.filterCheckboxes(e);
          }, type: "text", placeholder: this.props.placeholder ? this.props.placeholder : "filter targets", onKeyUp: this.blurOnEnter }) : "",
        React.createElement(
          "ul",
          null,
          this.getShowAll(),
          that.state.items.map(function (item, i) {
            if (item.value == "**") {
              // KICKERS have a 'value' of "**" - these will be list items without checkboxes (just the label)
              return React.createElement(
                "li",
                { className: i >= show_min ? "truncatable " : "", key: "li_" + i },
                React.createElement(
                  "h5",
                  { className: "facet_kicker", key: that.makeId(item.label) },
                  item.label
                )
              );
            } else {
              // Split on parentheses to move part of label into a tooltip
              var label_parts = item.label.split(/[\(\)]/);
              var checkbox_class = that.props.checkbox_class ? that.props.checkbox_class : "";
              return React.createElement(
                "li",
                { className: "facetitem " + (i >= show_min ? "truncatable " : "") + checkbox_class, key: "li_" + i, id: that.makeId(item.label) },
                React.createElement(
                  "label",
                  null,
                  React.createElement("input", { className: "facet_checkbox", type: "checkbox", checked: that.isChecked(item.value), name: that.makeId(item.label), value: item.value, onChange: function (e) {
                      that.whenClicked(e);
                    } }),
                  React.createElement(
                    "span",
                    null,
                    that.formatText(label_parts[0])
                  ),
                  item.targetCount && that.props.show_count ? React.createElement(
                    "span",
                    { className: "facetitemcount target_count" },
                    "\t(" + (that.props.formatNumber ? that.props.formatNumber(item.targetCount) : item.targetCount) + ")"
                  ) : "",
                  label_parts.length > 1 ? React.createElement("div", { className: "has_tooltip", title: that.titleize(label_parts[1]) }) : ""
                )
              );
            }
          })
        ),
        this.props.more_less && this.state.items.length > (this.props.show_min ? this.props.show_min : 7) ? React.createElement("a", { href: "#more-options", className: "truncation_toggle", onClick: function (e) {
            that.changeTruncation(e);
          } }) : ""
      );
    }
  }]);

  return CheckboxList;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*
  Share and follow tools
  props:
    follow: [['follow_klass','follow-url', follow-img],...]
    share: [['ShareVia']...]  //currently only Facebook, Twitter, Pinterest
    title: string
 */

var CherTools = (function (_React$Component) {
  _inherits(CherTools, _React$Component);

  function CherTools(props) {
    _classCallCheck(this, CherTools);

    _get(Object.getPrototypeOf(CherTools.prototype), "constructor", this).call(this, props);
    this.state = {
      open: true,
      visible: false
    };
    this.scroll_fn = null;
  }

  _createClass(CherTools, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this = this;

      if (this.props.share) {
        (function () {
          var that = _this;

          _this.scroll_fn = $(window).scroll(function (e) {
            if (!that.state.visible) {
              var scrollTop = $(window).scrollTop();
              var docHeight = $(document).height();
              var winHeight = $(window).height();
              var scrollPercent = scrollTop / (docHeight - winHeight);

              if (scrollPercent > 0.2) {
                that.setState({ visible: true }, function () {
                  $('.wasnt_it_good').show(500);
                });
              }
            }
          });
        })();
      }
    }
  }, {
    key: "openWindow",
    value: function openWindow(url) {
      var w = undefined,
          h = undefined,
          l = undefined,
          t = undefined;
      w = window.innerWidth / 2;
      h = window.innerHeight / 2;
      l = w / 2;
      t = h / 2;
      window.open(url, "pop", "width=" + w + ", height=" + h + ", left=" + l + ", top=" + t + ", scrollbars=no");
    }
  }, {
    key: "getShareOption",
    value: function getShareOption(val, idx) {
      var _this2 = this;

      var share = "";
      if (val[0] == "Facebook") {
        return React.createElement("div", { key: idx, className: "facebook", onClick: function () {
            _this2.shareFb();
          } });
      } else if (val[0] == "Twitter") {
        return React.createElement("div", { key: idx, className: "twitter", onClick: function () {
            _this2.shareTwitter();
          } });
      } else if (val[0] == "Pinterest") {
        return React.createElement("div", { key: idx, className: "pinterest", onClick: function () {
            _this2.sharePinterest();
          } });
      } else if (val[0] == "Email") {
        return React.createElement("div", { key: idx, className: "email", onClick: function () {
            _this2.shareEmail();
          } });
      } else {
        console.log("Share not implemented.", val);
      }
    }
  }, {
    key: "shareFb",
    value: function shareFb() {
      var share_arr = this.getShareDetails();
      if (typeof gas != "undefined") {
        gas('send', 'event', 'share', "facebook", share_arr[0]);
      }
      var fb_app_id = document.head.querySelector("meta[property='fb:app_id']").getAttribute("content");
      if (fb_app_id) {
        var fb_url = 'https://www.facebook.com/dialog/share?app_id=' + fb_app_id + '&display=popup&href=' + encodeURIComponent(share_arr[0]);
        this.openWindow(fb_url);
      } else {
        this.openWindow("https://www.facebook.com/sharer/sharer.php?u=" + share_arr[0]);
      }
    }
  }, {
    key: "shareTwitter",
    value: function shareTwitter() {
      var share_arr = this.getShareDetails();
      if (typeof gas != "undefined") {
        gas('send', 'event', 'share', "twitter", share_arr[0]);
      }
      var url_params = { text: share_arr[1] + " -> " + share_arr[2], url: share_arr[0] };
      this.openWindow("https://twitter.com/intent/tweet?" + $.param(url_params));
    }
  }, {
    key: "sharePinterest",
    value: function sharePinterest() {
      var share_arr = this.getShareDetails();
      if (typeof gas != "undefined") {
        gas('send', 'event', 'share', "pinterest", share_arr[0]);
      }
      var image = this.props.share_image ? this.props.share_image : document.head.querySelector("meta[property='og:image']").getAttribute("content");
      var url = "http://pinterest.com/pin/create/button/?url=" + share_arr[0] + "&media=" + encodeURIComponent(image) + "&description=" + encodeURIComponent(share_arr[1]);
      this.openWindow(url);
    }
  }, {
    key: "shareEmail",
    value: function shareEmail() {
      var share_arr = this.getShareDetails();
      var subject = encodeURIComponent(share_arr[1]);
      var body = "" + encodeURIComponent(share_arr[0]);
      document.location = "mailto:?subject=" + subject + "&body=" + body;
    }
  }, {
    key: "getShareDetails",
    value: function getShareDetails() {
      var url = undefined;
      var og_url = document.head.querySelector("meta[property='og:url']");
      if (this.props.url) {
        url = this.props.url;
      } else if (og_url) {
        url = og_url.getAttribute("content");
      } else {
        url = window.location.protocol + "//" + window.location.host + "/" + window.location.pathname + window.location.search;
      }
      var share_title = undefined;
      var og_title = document.head.querySelector("meta[property='og:title']");
      if (this.props.share_text) {
        share_title = this.props.share_text;
      } else if (og_title) {
        share_title = og_title.getAttribute("content");
      } else {
        share_title = document.title;
      }

      var share_desc = undefined;
      var desc = document.head.querySelector("meta[name='description']");
      if (desc) {
        share_desc = desc.getAttribute("content");
      }

      return [url, share_title, share_desc];
    }
  }, {
    key: "follow",
    value: function follow(item) {
      if (typeof gas != "undefined") {
        gas('send', 'event', 'follow', item[0].toLowerCase());
      }

      var win = window.open(item[1], '_blank');
    }
  }, {
    key: "getFollowOption",
    value: function getFollowOption(val, idx) {
      var that = this;
      return React.createElement(
        "div",
        { key: idx, className: val[0].toLowerCase() + " icon", onClick: function () {
            that.follow(val);
          }, style: { cursor: "pointer" } },
        val[2] ? React.createElement("img", { src: val[2], alt: "Follow on " + val[0] }) : val[0]
      );
    }
  }, {
    key: "getNavTitle",
    value: function getNavTitle() {
      if (this.props.title && this.props.title !== '') {
        return React.createElement(
          "div",
          { className: "nav_title" },
          this.props.title
        );
      }
    }
  }, {
    key: "toggleOpen",
    value: function toggleOpen() {
      this.setState({ open: !this.state.open });
      $('.i_found_someone').toggle(300);
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var that = this;
      if (this.props.share) {
        return React.createElement(
          "div",
          { className: "wasnt_it_good " + (this.state.open ? 'all' : 'nothing') },
          React.createElement(
            "div",
            { className: "i_found_someone" },
            this.props.share.map(function (v, i) {
              return that.getShareOption(v, i);
            })
          ),
          React.createElement(
            "div",
            { className: "where_do_you_go " + (this.state.open ? 'open' : 'closed'), onClick: function () {
                return _this3.toggleOpen();
              } },
            React.createElement("span", { className: "icon arrow_down" })
          )
        );
      } else if (this.props.follow) {
        return React.createElement(
          "div",
          { className: "social_icons paradise_is_here" },
          that.getNavTitle(),
          this.props.follow.map(function (v, i) {
            return that.getFollowOption(v, i);
          })
        );
      }
    }
  }]);

  return CherTools;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*
  props:
    items = code segments
    responsive = whether component is responsive or not
*/

var ComponentGallery = (function (_React$Component) {
  _inherits(ComponentGallery, _React$Component);

  function ComponentGallery(props) {
    _classCallCheck(this, ComponentGallery);

    _get(Object.getPrototypeOf(ComponentGallery.prototype), "constructor", this).call(this, props);
    this.state = this.getInitialState();
  }

  _createClass(ComponentGallery, [{
    key: "getInitialState",
    value: function getInitialState() {
      this.responsive_options = [{ title: "mobile", width: "360px" }, { title: "tablet", width: "800px" }, { title: "desktop", width: "1200px" }];
      this.template_options = [{ title: "Content Page", url_param: "template=content_page" }, { title: "Feature", url_param: "template=feature" }, { title: "Grid List", url_param: "template=grid_list_page" }, { title: "Homepage", url_param: "template=homepage" }, { title: "Overlay", url_param: "template=overlay" }, { title: "Full Width", url_param: "template=full_width" }];

      return {
        iframe_w: this.props.responsive ? this.responsive_options[2].width : "100%",
        iframe_src: this.props.items.length > 0 ? this.formatSrc(this.props.items[0]["id"]) : null,
        code: this.props.items.length > 0 ? this.props.items[0]["code"] : null,
        id: this.props.items.length > 0 ? this.props.items[0]["id"] : null,
        responsive_input: ""
      };
    }
  }, {
    key: "changeWidth",
    value: function changeWidth(e, w) {
      this.setState({ iframe_w: w });
    }
  }, {
    key: "changeResponsive",
    value: function changeResponsive(e) {
      var v = e.currentTarget.value;
      this.setState({ iframe_w: v + "px", responsive_input: v });
    }
  }, {
    key: "getResponsiveOptions",
    value: function getResponsiveOptions() {
      var _this = this;

      if (this.props.responsive) {
        var _ret = (function () {
          var that = _this;
          return {
            v: React.createElement(
              "div",
              { className: "responsive" },
              React.createElement(
                "h2",
                null,
                " Responsive options "
              ),
              React.createElement(
                "div",
                { className: "responsive_options" },
                _this.responsive_options.map(function (v, i) {
                  return React.createElement(
                    "a",
                    { key: "ro_" + i, onClick: function (e) {
                        that.changeWidth(e, v.width);
                      } },
                    v.title
                  );
                }),
                React.createElement("input", { type: "number", value: _this.state.responsive_input, min: 320, onChange: function (e) {
                    _this.changeResponsive(e);
                  } })
              )
            )
          };
        })();

        if (typeof _ret === "object") return _ret.v;
      } else {
        return null;
      }
    }
  }, {
    key: "formatSrc",
    value: function formatSrc(id) {
      return "/mbcms/component_gallery_items/" + this.props.parent_id + "/" + id;
    }
  }, {
    key: "changeSrc",
    value: function changeSrc(e, id, code) {
      this.setState({ iframe_src: this.formatSrc(id), code: code, id: id });
    }
  }, {
    key: "changeTemplate",
    value: function changeTemplate(e, url_param) {
      var url = this.formatSrc(this.state.id) + "?" + url_param;
      this.setState({ iframe_src: url });
    }
  }, {
    key: "getTemplateOptions",
    value: function getTemplateOptions() {
      var that = this;
      return React.createElement(
        "div",
        { className: "templates" },
        React.createElement(
          "h2",
          null,
          "Templates"
        ),
        React.createElement(
          "div",
          { className: "variation_options" },
          this.template_options.map(function (v, i) {
            return React.createElement(
              "a",
              { key: "t_" + i, onClick: function (e) {
                  that.changeTemplate(e, v.url_param);
                } },
              v.title
            );
          })
        )
      );
    }
  }, {
    key: "getVariations",
    value: function getVariations() {
      var _this2 = this;

      if (this.props.items.length > 0) {
        var _ret2 = (function () {
          var that = _this2;
          return {
            v: React.createElement(
              "div",
              { className: "variations" },
              React.createElement(
                "h2",
                null,
                "Variations"
              ),
              React.createElement(
                "div",
                { className: "variation_options" },
                _this2.props.items.map(function (v, i) {
                  return React.createElement(
                    "a",
                    { key: "v_" + i, onClick: function (e) {
                        that.changeSrc(e, v.id, v.code);
                      } },
                    v.title
                  );
                })
              )
            )
          };
        })();

        if (typeof _ret2 === "object") return _ret2.v;
      } else {
        return null;
      }
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement(
        "div",
        { className: "component_gallery" },
        this.getResponsiveOptions(),
        this.getTemplateOptions(),
        this.getVariations(),
        React.createElement(
          "div",
          { className: "demo" },
          React.createElement("iframe", { src: this.state.iframe_src, width: this.state.iframe_w, scrolling: "true" })
        ),
        React.createElement(
          "div",
          { className: "code" },
          React.createElement(
            "h2",
            null,
            "Code"
          ),
          React.createElement("textarea", { readOnly: true, value: this.state.code, rows: 5, style: { width: "50%" } })
        )
      );
    }
  }]);

  return ComponentGallery;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*
  Counter Componenet used for Countdowns and Historic Clocks
  Requires moment and moment-precise-range
   & props.date
*/

var Countdown = (function (_React$Component) {
  _inherits(Countdown, _React$Component);

  function Countdown(props) {
    _classCallCheck(this, Countdown);

    _get(Object.getPrototypeOf(Countdown.prototype), "constructor", this).call(this, props);
    this.state = {
      countdown_html: "",
      completed: false
    };
  }

  _createClass(Countdown, [{
    key: "componentWillMount",
    value: function componentWillMount() {
      if (this.props.date) {
        this.startCounting();
      }
    }
  }, {
    key: "getDateLabel",
    value: function getDateLabel() {
      if (this.props.date && this.props.show_date && this.props.date_label) {
        return React.createElement(
          "div",
          { className: "date_label_container" },
          React.createElement("span", { className: "countdown_date_label", dangerouslySetInnerHTML: { __html: this.props.date_label + ":" } }),
          React.createElement(
            "span",
            { className: "countdown_end" },
            this.props.formatted_date
          )
        );
      } else if (this.props.date_start && this.props.show_date) {
        var date_start = moment(this.props.date_start).utc();
        var date_end = moment(this.props.date_end).utc();
        var date_start_formatted = date_start.format("MMM. D, YYYY");
        var date_end_formatted = date_end.format("MMM. D, YYYY");
        return React.createElement(
          "div",
          { className: "date_label_container" },
          React.createElement(
            "span",
            { className: "historic_clock_date_start" },
            date_start_formatted
          ),
          "",
          React.createElement(
            "span",
            { className: "historic_clock_date_end" },
            date_end_formatted
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: "getDate",
    value: function getDate() {
      if (this.props.show_date && this.props.date) {
        return null;
      } else if (this.props.date_start) {
        var start = moment(this.props.date_start).utc();
        var end = moment(this.props.date_end).utc();
        var duration = moment.duration(end.diff(start));
        var years = this.pad2(duration.get('years'));
        var months = this.pad2(duration.get('months'));
        var days = this.pad2(duration.get('days'));
        var hours = this.pad2(duration.get('hours'));
        var minutes = this.pad2(duration.get('minutes'));
        var seconds = this.pad2(duration.get('seconds'));
        console.log(years);
        return React.createElement(
          "div",
          { className: "clock_time" },
          years ? React.createElement(
            "div",
            { className: "time_years unit" },
            years,
            React.createElement(
              "span",
              { className: "time_label" },
              "yrs"
            )
          ) : null,
          years || months ? React.createElement(
            "div",
            { className: "time_years unit" },
            months,
            React.createElement(
              "span",
              { className: "time_label" },
              "mos"
            )
          ) : null,
          years || months || days ? React.createElement(
            "div",
            { className: "time_years unit" },
            days,
            React.createElement(
              "span",
              { className: "time_label" },
              "days"
            )
          ) : null,
          years || months || days || hours ? React.createElement(
            "div",
            { className: "time_years unit" },
            hours,
            React.createElement(
              "span",
              { className: "time_label" },
              "hrs"
            )
          ) : null,
          years || months || days || hours || minutes ? React.createElement(
            "div",
            { className: "time_years unit" },
            minutes,
            React.createElement(
              "span",
              { className: "time_label" },
              "mins"
            )
          ) : null,
          React.createElement(
            "div",
            { className: "time_years unit" },
            seconds,
            React.createElement(
              "span",
              { className: "time_label" },
              "secs"
            )
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: "startCounting",
    value: function startCounting() {
      var that = this;
      setInterval(function () {
        try {
          if (!that.state.completed) {
            var launch = new Date(that.props.date);
            var count_up = that.props.count_up;
            var now = new Date();
            if (now < launch || count_up) {
              var diff;
              var timespan = Math.abs(launch.getTime() - now.getTime());
              if (count_up) {
                diff = moment.preciseDiff(now, launch, true);
              } else {
                diff = moment.preciseDiff(launch, now, true);
              }
              // var year_day = "";
              // if(diff.years != 0){
              year_day = "<div class='time_years unit'>" + that.pad2(diff.years) + "<span class='time_label'>yrs</span></div>";
              // }
              // if(diff.months != 0){
              year_day += "<div class='time_months unit'>" + that.pad2(diff.months) + "<span class='time_label'>mos</span></div>";
              // }
              year_day += "<div class='time_days unit'>" + that.pad2(diff.days) + "<span class='time_label'>days</span></div>";

              that.setState({ countdown_html: year_day + "<div class='time_hours unit'>" + that.pad2(diff.hours) + "<span class='time_label'>hrs</span></div><div class='time_minutes unit'>" + that.pad2(diff.minutes) + "<span class='time_label'>mins</span></div><div class='time_seconds unit'>" + that.pad2(diff.seconds) + "<span class='time_label'>secs</span></div></div>" });
            } else {
              that.setState({ countdown_html: "<div class='completed'>COMPLETED</div>", completed: true });
            }
          }
        } catch (e) {
          console.log("error in countdown: " + e.message);
        }
      }, 1000);
    }
  }, {
    key: "pad2",
    value: function pad2(n) {
      return n < 10 ? '0' + n : n;
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement(
        "div",
        { className: this.props.date ? "countdown" : "historic_clock" },
        React.createElement(
          "div",
          { className: "dividing_line_container line_top" },
          this.props.subtitle ? React.createElement(
            "div",
            { className: "counter_subtitle" },
            React.createElement("span", { dangerouslySetInnerHTML: { __html: this.props.subtitle } })
          ) : React.createElement("hr", null)
        ),
        React.createElement(
          "span",
          { className: "time_and_label_container" },
          React.createElement(
            "div",
            { className: "countdown_header" },
            React.createElement(
              "div",
              { className: "countdown_title" },
              this.props.title
            ),
            this.getDateLabel()
          ),
          this.getDate(),
          React.createElement("div", { className: "countdown_time", dangerouslySetInnerHTML: { __html: this.state.countdown_html } })
        ),
        React.createElement(
          "div",
          { className: "dividing_line_container line_bottom" },
          React.createElement("hr", null)
        )
      );
    }
  }]);

  return Countdown;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DateFilter = (function (_React$Component) {
  _inherits(DateFilter, _React$Component);

  function DateFilter() {
    _classCallCheck(this, DateFilter);

    _get(Object.getPrototypeOf(DateFilter.prototype), "constructor", this).apply(this, arguments);
  }

  _createClass(DateFilter, [{
    key: "initListeners",
    value: function initListeners(is_mobile) {
      var klass = this.props.datepicker_class;
      var that = this;
      $('input.' + klass).datepicker({
        dateFormat: "yy-mm-dd",
        showButtonPanel: true,
        showOn: is_mobile || this.props.readonly ? "both" : "button",
        buttonImage: "/assets/calendar_icon.png",
        buttonImageOnly: false,
        buttonText: "calendar",
        beforeShow: function (input) {
          $('#ui-datepicker-div').wrap("<div class='datepicker_mask'></div>");
          that.attachClickOutsideCloser();
          return that.onBeforeDatepickerShow(klass, input);
        },
        onChangeMonthYear: function (year, month, instance) {
          setTimeout(function () {
            var buttonPane = $(instance).datepicker("widget").find(".ui-datepicker-buttonpane");
            $("<button>", {
              text: "Clear",
              click: function () {
                // that.props.clear()
                $.datepicker._clearDate(instance.input);
              }
            }).appendTo(buttonPane).addClass("ui-datepicker-clear ui-state-default ui-priority-primary ui-corner-all");
          }, 1);
        },
        onClose: function (d, i) {
          $('#ui-datepicker-div').unwrap();
          if (this.value == '') {
            this.setAttribute('placeholder', that.props.placeholder);
          } else {
            this.setAttribute('placeholder', '');
          }
          if (that.props.closeDatePicker) {
            that.props.closeDatePicker(d, i, this);
          }
        }
      });
    }
  }, {
    key: "updateMinMaxValue",
    value: function updateMinMaxValue(klass) {
      console.log(klass, this.props.min_date, this.props.max_date);
      return { minDate: this.props.min_date, maxDate: this.props.max_date };
    }
  }, {
    key: "onBeforeDatepickerShow",
    value: function onBeforeDatepickerShow(klass, input) {
      var that = this;
      if (this.props.clear) {
        setTimeout(function () {
          var buttonPane = $(input).datepicker("widget").find(".ui-datepicker-buttonpane");
          $("<button>", {
            text: "Clear",
            click: that.props.clear
          }).appendTo(buttonPane).addClass("ui-datepicker-clear ui-state-default ui-priority-primary ui-corner-all");
        }, 1);
      }
      return this.updateMinMaxValue(klass);
    }
  }, {
    key: "attachClickOutsideCloser",
    value: function attachClickOutsideCloser() {
      if (this.props.onBlur) {
        var that = this;
        $(document).off('**').on('click touchstart', function (e) {
          var elem = $(e.target);
          if (!elem.hasClass("hasDatepicker") && !elem.hasClass("ui-datepicker") && !elem.hasClass("ui-icon") && !elem.hasClass("ui-datepicker-current") && !elem.hasClass("ui-datepicker-next") && !elem.hasClass("ui-datepicker-prev") && !$(elem).parents(".ui-datepicker").length) {
            $('.hasDatepicker').datepicker('hide');
            that.props.onBlur();
          }
        });
      }
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      var is_mobile = mb_utils.mobileAndTabletCheck();
      this.initListeners(is_mobile);
      this.disableKeyboard(is_mobile);
    }
  }, {
    key: "disableKeyboard",
    value: function disableKeyboard(is_mobile) {
      if (is_mobile) {
        $('.calendar_input_binder input').attr('readonly', true);
      }
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement(
        "div",
        { className: "date_option_wrapper" },
        React.createElement(
          "div",
          { className: "calendar_input_binder" },
          React.createElement(
            "label",
            { className: "preposition" },
            this.props.preposition
          ),
          React.createElement(
            "label",
            { className: "preposition_small" },
            this.props.preposition_small
          ),
          React.createElement("input", { className: this.props.datepicker_class, name: this.props.input_name, type: "text", placeholder: this.props.date_value == '' ? this.props.placeholder : '', value: this.props.date_value, onChange: this.props.changeValue, onKeyPress: this.props.onKeyPress, readOnly: this.props.readonly })
        )
      );
    }
  }]);

  return DateFilter;
})(React.Component);
var DocumentListItem = function (props) {
  var item = props.item;
  var item_date = new Date(item.date);
  var item_url = item.url;
  var target = item.link || item.file && item.file_content_type == "application/pdf" ? "_blank" : "_self";

  item_url += props.options && props.options.href_query_params != undefined ? "?" + props.options.href_query_params : '';

  // true mimetypes for documents can be really ugly and long so just grab extension and pair w/ filesize
  var file_name_parts = item && item.file_file_name ? item.file_file_name.split('.') : null;
  var file_size = item && item.file_info ? ", (" + item.file_info.match(/\(([^)]*)\)[^(]*$/)[1] + ")" : '';
  var file_link_text = file_name_parts ? "" + file_name_parts[file_name_parts.length - 1].toUpperCase() + file_size : '';

  return React.createElement(
    "div",
    { className: "image_and_description_container document_list_container" },
    React.createElement(
      "a",
      { href: item_url ? item_url : "", target: target, style: item_url ? {} : { cursor: "default" } },
      item.list_image != null ? React.createElement(
        "div",
        { className: "list_image" },
        React.createElement("img", { src: item.list_image })
      ) : null,
      React.createElement(
        "div",
        { className: "bottom_gradient" },
        React.createElement(
          "div",
          null,
          React.createElement(
            "h3",
            null,
            item.title
          )
        )
      )
    ),
    React.createElement(
      "div",
      { className: "list_text " + (item.list_image == null ? "full_width_text" : "") },
      item_date ? React.createElement(
        "div",
        { className: "document_date" },
        item_date.getUTCMonth() + 1 + "/" + item_date.getUTCDate() + "/" + item_date.getUTCFullYear()
      ) : null,
      React.createElement(
        "div",
        { className: "content_title" },
        item_url ? React.createElement(
          "a",
          { href: item_url, target: item.body && !item.link ? "_self" : target },
          item.title
        ) : React.createElement(
          "div",
          null,
          item.title
        )
      ),
      React.createElement(
        "div",
        { className: "article_teaser_body" },
        React.createElement(
          "div",
          { className: "document_description" },
          item.authors.length > 0 ? React.createElement(
            "span",
            { className: "document_authors" },
            "PI: ",
            item.authors.map(function (author, i) {
              return React.createElement(
                "span",
                { key: author.name },
                i > 0 ? ", " : null,
                React.createElement(
                  "a",
                  { className: "document_author", href: author.link },
                  author.name
                )
              );
            })
          ) : null,
          React.createElement(
            "div",
            { className: "document_summary" },
            item.short_description,
            " "
          ),
          item.file && !item.body ? React.createElement(
            "a",
            { className: "document_file_link", href: item.file, target: target },
            file_link_text
          ) : null
        )
      )
    )
  );
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ESPublicationListItem = (function (_React$Component) {
  _inherits(ESPublicationListItem, _React$Component);

  function ESPublicationListItem() {
    _classCallCheck(this, ESPublicationListItem);

    _get(Object.getPrototypeOf(ESPublicationListItem.prototype), "constructor", this).apply(this, arguments);
  }

  _createClass(ESPublicationListItem, [{
    key: "render",
    value: function render() {
      var item = this.props.item;
      var citation = item.citation ? item.citation.autoLink() : "";
      var use_publication_year = this.props.options && this.props.options.use_publication_year ? this.props.options.use_publication_year : false;
      return React.createElement(
        "div",
        { className: "image_and_description_container" },
        React.createElement(
          "div",
          { className: "list_text full_width_text" },
          use_publication_year ? React.createElement(
            "div",
            { className: "content_year" },
            item.publication_year
          ) : null,
          item.link ? React.createElement(
            "div",
            { className: "content_title" },
            React.createElement(
              "a",
              { href: item.link, target: "_blank" },
              item.title
            )
          ) : React.createElement(
            "div",
            { className: "content_title" },
            item.title
          ),
          React.createElement(
            "div",
            { className: "article_teaser_body" },
            React.createElement(
              "div",
              { className: "citation" },
              React.createElement("span", { dangerouslySetInnerHTML: { __html: citation } })
            ),
            item.file_src ? React.createElement(
              "a",
              { className: "list_link", href: item.file_src, download: item.file_file_name },
              "download article"
            ) : ""
          )
        )
      );
    }
  }]);

  return ESPublicationListItem;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var EventDetail = (function (_React$Component) {
	_inherits(EventDetail, _React$Component);

	function EventDetail(props) {
		_classCallCheck(this, EventDetail);

		_get(Object.getPrototypeOf(EventDetail.prototype), "constructor", this).call(this, props);
		var presentations = [];
		var documents = [];
		if (this.props.item.documents) {
			this.props.item.documents.map(function (v) {
				if (v.type == "Presentations" || v.type == "Posters" || v.type == "Discussions") {
					presentations.push(v);
				} else if (v.type == "Downloads") {
					documents.push(v);
				}
			});
		}

		this.tabs = [];
		if (documents.length > 0 || this.props.item.body != null && this.props.item.body != "") {
			this.tabs.push("Details");
		}
		if (presentations.length > 0) {
			this.tabs.push("Presentations");
		}
		if (this.props.item.registration_status == 1) {
			this.tabs.push("Register");
		}
		this.state = {
			tab_name: this.tabs[0],
			presentations: presentations,
			documents: documents
		};
	}

	_createClass(EventDetail, [{
		key: "changeTab",
		value: function changeTab(name) {
			this.setState({ tab_name: name });
		}
	}, {
		key: "changeSelectTab",
		value: function changeSelectTab(e) {
			this.setState({ tab_name: e.currentTarget.value });
		}
	}, {
		key: "getNav",
		value: function getNav() {
			var _this = this;

			var that = this;
			if (this.tabs.length > 1) {
				return React.createElement(
					"nav",
					{ className: "event_detail_nav" },
					React.createElement(
						"div",
						{ className: "desktop_event_detail_nav" },
						this.tabs.map(function (v, i) {
							return React.createElement(
								"li",
								{ key: "tab_" + i, onClick: function (e) {
										_this.changeTab(v);
									}, className: v == _this.state.tab_name ? 'current' : '' },
								that.getNavTitle(v)
							);
						})
					),
					React.createElement(
						"div",
						{ className: "mobile_event_detail_nav" },
						React.createElement(
							"select",
							{ className: "nav_list", onChange: function (e) {
									_this.changeSelectTab(e);
								}, value: that.state.tab_name },
							that.tabs.map(function (v, i) {
								return React.createElement(
									"option",
									{ key: "tab_" + i, value: v, className: v == that.state.tab_name ? 'current' : '' },
									v
								);
							})
						)
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getNavTitle",
		value: function getNavTitle(title) {
			if (title == "Presentations") {
				return title + " (" + this.state.presentations.length + ")";
			} else {
				return title;
			}
		}
	}, {
		key: "getDocuments",
		value: function getDocuments() {
			var that = this;
			if (this.state.documents.length > 0) {
				return React.createElement(
					React.Fragment,
					null,
					this.state.documents.map(function (v, i) {
						return React.createElement(
							"li",
							{ key: i },
							React.createElement(
								"a",
								{ href: v.url, download: that.props.item.title + " - " + v.title },
								v.title
							),
							React.createElement(
								"p",
								{ className: "document_description" },
								v.short_description
							)
						);
					})
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getDocumentsSidebar",
		value: function getDocumentsSidebar() {
			if (this.state.documents.length > 0 || this.props.agenda || this.props.report) {
				return React.createElement(
					"aside",
					{ className: "boxed" },
					React.createElement(
						"h2",
						{ className: "sidebar_title" },
						"Downloads"
					),
					React.createElement(
						"ul",
						null,
						this.props.agenda ? React.createElement(
							"li",
							null,
							React.createElement(
								"a",
								{ href: this.props.agenda, download: this.props.item.title + " - Agenda" },
								"Agenda"
							),
							React.createElement("p", null)
						) : null,
						this.props.report ? React.createElement(
							"li",
							null,
							React.createElement(
								"a",
								{ href: this.props.report, download: this.props.item.title + " - Report" },
								"Meeting Report"
							),
							React.createElement("p", null)
						) : null,
						this.getDocuments()
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getDetail",
		value: function getDetail() {
			return React.createElement(
				"div",
				{ className: "event_detail_container" },
				React.createElement(
					"h2",
					{ className: "event_detail_header" },
					"About the Meeting"
				),
				React.createElement(
					"div",
					{ className: "clearfix", id: "primary_column" },
					React.createElement(
						"div",
						{ className: "wysiwyg_content" },
						React.createElement("div", { className: "event_body", dangerouslySetInnerHTML: { __html: this.props.detail.body } })
					)
				),
				React.createElement(
					"div",
					{ className: "", id: "secondary_column" },
					this.getDetailSidebar(),
					this.getDocumentsSidebar()
				)
			);
		}
	}, {
		key: "getPresentations",
		value: function getPresentations() {
			return React.createElement(
				"div",
				{ className: "event_detail_container" },
				React.createElement(
					"h2",
					{ className: "event_detail_header" },
					"Presentations"
				),
				React.createElement(
					"div",
					{ className: "clearfix", id: "primary_column" },
					React.createElement(EventPresentations, { items: this.state.presentations })
				),
				React.createElement(
					"div",
					{ className: "", id: "secondary_column" },
					this.getDetailSidebar(),
					this.getDocumentsSidebar()
				)
			);
		}
	}, {
		key: "getRegister",
		value: function getRegister() {
			return React.createElement(
				"div",
				{ className: "event_detail_container" },
				React.createElement(
					"h2",
					{ className: "event_detail_header" },
					"Register"
				),
				React.createElement(
					"div",
					{ className: "clearfix", id: "primary_column" },
					React.createElement(EventRegistration, { event_id: this.props.item.id, authenticity_token: this.props.authenticity_token, recaptcha: this.props.recaptcha, item: this.props.item })
				),
				React.createElement(
					"div",
					{ className: "", id: "secondary_column" },
					this.getDetailSidebar(),
					this.getDocumentsSidebar()
				)
			);
		}
	}, {
		key: "getDetailSidebar",
		value: function getDetailSidebar() {
			if (this.props.detail.sidebar) {
				return React.createElement("div", { className: "event_wysiwyg_sidebar", dangerouslySetInnerHTML: { __html: this.props.detail.sidebar } });
			}
		}
	}, {
		key: "getDetailsForTab",
		value: function getDetailsForTab() {
			console.log("get details for tab", this.state.tab_name);
			switch (this.state.tab_name) {
				case "Details":
					return this.getDetail();
				case "Presentations":
					return this.getPresentations();
				case "Register":
					return this.getRegister();
				default:
					console.error("Unexpected state of tabs. ", this.state.tab_name);
					return null;
			}
		}
	}, {
		key: "render",
		value: function render() {
			return React.createElement(
				"div",
				{ className: "event_detail" },
				this.getNav(),
				this.getDetailsForTab()
			);
		}
	}]);

	return EventDetail;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var EventListItem = (function (_React$Component) {
  _inherits(EventListItem, _React$Component);

  function EventListItem(props) {
    _classCallCheck(this, EventListItem);

    _get(Object.getPrototypeOf(EventListItem.prototype), 'constructor', this).call(this, props);
    if (typeof this.props.options != 'undefined') {
      this.options = this.props.options;
    } else {
      this.options = null;
    }
  }

  _createClass(EventListItem, [{
    key: 'dateRange',
    value: function dateRange(start_date, end_date) {
      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      var start_date = new Date(Date.parse(start_date));
      var end_date = new Date(Date.parse(end_date));
      start_date = months[start_date.getUTCMonth()] + " " + start_date.getUTCDate() + ", " + start_date.getUTCFullYear();
      end_date = months[end_date.getUTCMonth()] + " " + end_date.getUTCDate() + ", " + end_date.getUTCFullYear();
      return start_date == end_date ? start_date : start_date + " - " + end_date;
    }
  }, {
    key: 'getListLink',
    value: function getListLink(item, asset_url) {
      if (this.options && typeof this.options.no_list_link != 'undefined' && this.options.no_list_link) {
        return null;
      } else {
        return React.createElement(
          'a',
          { className: 'list_link', href: asset_url + item.link, target: asset_url.length > 0 ? "_blank" : "_self" },
          asset_url.length > 0 ? React.createElement(
            React.Fragment,
            null,
            'view details',
            React.createElement(
              'span',
              { className: 'external_link_icon' },
              React.createElement(
                'svg',
                { display: 'inline-block', height: '11', viewBox: '0 0 11 11', width: '11', xmlns: 'http://www.w3.org/2000/svg' },
                React.createElement('path', { d: 'm5.335 4.125 1.485 1.485 2.75-2.75 1.43 1.43v-4.29h-4.29l1.375 1.375zm5.61 1.87-1.045-1.045v4.95h-8.8v-8.8h4.95l-1.1-1.1h-3.85c-.605 0-1.1.495-1.1 1.1v8.8c0 .605.495 1.1 1.1 1.1h8.8c.605 0 1.1-.495 1.1-1.1z', fill: '#388fda', transform: '' })
              )
            )
          ) : "view details "
        );
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var item = this.props.item;
      var asset_url = '';
      if (this.options && this.options.external_asset_url) {
        asset_url = this.options.external_asset_url;
      }

      return React.createElement(
        'div',
        { className: 'list_content event_list_item image_and_description_container' },
        React.createElement(
          'a',
          { href: asset_url + item.link, target: asset_url.length > 0 ? "_blank" : "_self" },
          item.list_image_url ? React.createElement(
            'div',
            { className: 'list_image' },
            React.createElement('img', { src: asset_url + item.list_image_url, alt: item.title })
          ) : null,
          React.createElement(
            'div',
            { className: 'bottom_gradient' },
            React.createElement(
              'div',
              null,
              React.createElement(
                'h3',
                null,
                item.title
              )
            )
          )
        ),
        React.createElement(
          'div',
          { className: 'list_text' + (item.list_image_url ? '' : ' full_width_text') },
          React.createElement(
            'div',
            { className: 'date' },
            this.dateRange(item.start_date, item.end_date)
          ),
          React.createElement(
            'h3',
            { className: 'list_title' },
            React.createElement(
              'a',
              { href: asset_url + item.link, target: asset_url.length > 0 ? "_blank" : "_self" },
              item.title
            )
          ),
          item.location ? React.createElement(
            'p',
            null,
            'Location: ',
            item.location
          ) : null,
          this.getListLink(item, asset_url)
        )
      );
    }
  }]);

  return EventListItem;
})(React.Component);
var EventPresentationListItem = function (props) {
  var item = props.item;
  var item_date = new Date(item.date);
  var url = item.file && !item.body || item.link ? item.url : item.url + "?list=events";
  if ((item.body == "" || item.body == null) && item.link == "" && item.has_slides == 0 && item.file == null) {
    url = null;
  }
  return React.createElement(
    "li",
    { className: "slide" },
    React.createElement(
      "div",
      { className: "image_and_description_container" },
      React.createElement(
        "a",
        { href: url ? url : "javascript:void(0)", style: url ? {} : { cursor: "default" }, target: item.link || item.file ? "_blank" : "" },
        item.list_image != null ? React.createElement(
          "div",
          { className: "list_image" },
          React.createElement("img", { src: item.list_image, alt: item.title })
        ) : null,
        React.createElement(
          "div",
          { className: "bottom_gradient" },
          React.createElement(
            "div",
            null,
            React.createElement(
              "h3",
              null,
              item.title
            )
          )
        )
      ),
      React.createElement(
        "div",
        { className: "list_text " + (item.list_image == null ? "full_width_text" : "") },
        React.createElement(
          "div",
          { className: "document_date" },
          item_date.getUTCMonth() + 1 + "/" + item_date.getUTCDate() + "/" + item_date.getUTCFullYear()
        ),
        React.createElement(
          "div",
          { className: "content_title" },
          url ? React.createElement(
            "a",
            { href: url, target: item.link || item.file && !item.body ? "_blank" : "" },
            item.title
          ) : React.createElement(
            "div",
            null,
            item.title
          )
        ),
        React.createElement(
          "div",
          { className: "article_teaser_body" },
          React.createElement(
            "div",
            { className: "document_description" },
            React.createElement(
              "div",
              { className: "document_authors" },
              item.authors.length > 0 ? React.createElement(
                "span",
                { className: "document_authors" },
                "PI: ",
                item.authors.map(function (author, i) {
                  return React.createElement(
                    "span",
                    { key: i + "-" + author.name },
                    i > 0 ? ", " : null,
                    React.createElement(
                      "a",
                      { className: "document_author", href: author.link },
                      author.name
                    )
                  );
                })
              ) : null
            ),
            React.createElement(
              "div",
              { className: "document_contributors" },
              item.contributors
            ),
            item.file && !item.body ? React.createElement(
              "a",
              { className: "document_file_link", href: item.file, target: "_blank" },
              item.file_info
            ) : null
          )
        )
      )
    )
  );
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*
 */

var EventPresentations = (function (_React$Component) {
	_inherits(EventPresentations, _React$Component);

	function EventPresentations(props) {
		_classCallCheck(this, EventPresentations);

		_get(Object.getPrototypeOf(EventPresentations.prototype), "constructor", this).call(this, props);
		this.state = {
			search: "",
			filtered_items: this.props.items,
			sort: "date_asc"
		};
	}

	_createClass(EventPresentations, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			this.filterItems();
		}
	}, {
		key: "filterItems",
		value: function filterItems() {
			var filtered_items = this.filterBySearch();
			filtered_items = this.sortFilteredItems(filtered_items);
			this.setState({ filtered_items: filtered_items });
		}
	}, {
		key: "sortFilteredItems",
		value: function sortFilteredItems(filtered_items) {
			var _this = this;

			return filtered_items.sort(function (a, b) {
				if (_this.state.sort == "date_asc") {
					if (Date.parse(a.date) > Date.parse(b.date)) {
						return 1;
					}
					if (Date.parse(a.date) < Date.parse(b.date)) {
						return -1;
					}
				} else if (_this.state.sort == "date_desc") {
					if (Date.parse(a.date) > Date.parse(b.date)) {
						return -1;
					}
					if (Date.parse(a.date) < Date.parse(b.date)) {
						return 1;
					}
				} else if (_this.state.sort == "title_asc") {
					if (a.title > b.title) {
						return 1;
					}
					if (a.title < b.title) {
						return -1;
					}
					return 0;
				} else if (_this.state.sort == "author_asc") {
					if (a.contributors > b.contributors) {
						return 1;
					}
					if (a.contributors < b.contributors) {
						return -1;
					}
					return 0;
				} else {
					console.error("SORT undefined for ", _this.state.sort);
					return 0;
				}
			});
		}
	}, {
		key: "filterBySearch",
		value: function filterBySearch() {
			var filtered_items = [];
			var search = this.state.search.toLowerCase();
			if (search == "") {
				filtered_items = this.props.items;
			} else {
				filtered_items = this.props.items.filter(function (v) {
					var in_title = v.title.toLowerCase().indexOf(search) > -1;
					var in_author = v.contributors.toLowerCase().indexOf(search) > -1;
					var in_short = v.short_description.toLowerCase().indexOf(search) > -1;
					return in_title || in_author || in_short;
				});
			}
			return filtered_items;
		}
	}, {
		key: "search",
		value: function search(e) {
			var _this2 = this;

			console.log("search", e.currentTarget.value);
			this.setState({ search: e.currentTarget.value }, function () {
				_this2.filterItems();
			});
		}
	}, {
		key: "sort",
		value: function sort(e) {
			var _this3 = this;

			console.log("sort", e.currentTarget.value);
			this.setState({ sort: e.currentTarget.value }, function () {
				_this3.filterItems();
			});
		}
	}, {
		key: "submitSearch",
		value: function submitSearch(e) {
			e.preventDefault();
			console.log("search");
		}
	}, {
		key: "getFilterBar",
		value: function getFilterBar() {
			var _this4 = this;

			return React.createElement(
				"div",
				{ className: 'filter_bar_with_sort' },
				React.createElement(
					"section",
					{ className: "filter_bar" },
					React.createElement(
						"div",
						{ className: "section_search" },
						React.createElement(
							"div",
							{ className: "search_binder" },
							React.createElement("input", { className: "search_field", name: "search", placeholder: "search", type: "text",
								value: this.state.search, onKeyDown: function (e) {
									_this4.search(e);
								}, onChange: function (e) {
									_this4.search(e);
								} }),
							React.createElement("input", { className: "search_submit", type: "submit", value: "", onClick: function (e) {
									_this4.submitSearch(e);
								} })
						)
					)
				),
				React.createElement(
					"div",
					{ className: "sort_container" },
					React.createElement(
						"span",
						{ className: "sort_by_label" },
						"Sort by"
					),
					React.createElement(
						"select",
						{ id: "sort", name: "sort", className: "", onChange: function (e) {
								_this4.sort(e);
							}, value: this.state.sort },
						React.createElement(
							"option",
							{ value: "date_asc" },
							"Time (Earliest to Latest)"
						),
						React.createElement(
							"option",
							{ value: "title_asc" },
							"Title A-Z"
						)
					)
				)
			);
		}
	}, {
		key: "render",
		value: function render() {
			return React.createElement(
				"section",
				{ className: "list_view" },
				this.getFilterBar(),
				React.createElement(
					"ul",
					{ className: "item_list" },
					this.state.filtered_items.map(function (v, i) {
						return React.createElement(EventPresentationListItem, { item: v, key: "presentation_" + v.id });
					})
				),
				this.state.filtered_items.length == 0 ? "No results" : ""
			);
		}
	}]);

	return EventPresentations;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*
<section class="filter_bar"><div class="section_search"><div class="search_binder"><input class="search_field" name="search" placeholder="search" type="text" value=""><input class="search_submit" type="submit" value=""></div><select id="type" name="type" class="filter"><option value="">All types</option><option value="98">Feature</option><option value="19">News</option></select></div></section>
 */

function recaptchaLoaded() {
	console.log("loaded recaptcha");
}

var EventRegistration = (function (_React$Component) {
	_inherits(EventRegistration, _React$Component);

	function EventRegistration(props) {
		_classCallCheck(this, EventRegistration);

		_get(Object.getPrototypeOf(EventRegistration.prototype), "constructor", this).call(this, props);
		this.state = {
			error: ""
		};
		this.months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
	}

	_createClass(EventRegistration, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			$.getScript("https://www.google.com/recaptcha/api.js?onload=recaptchaLoaded&render=onload");
		}
	}, {
		key: "onSubmit",
		value: function onSubmit(e) {
			var _this = this;

			e.preventDefault();
			console.log("submit form");
			var check = this.checkFeedbackForm();
			var ok = check[0];
			var fields_in_error = check[1];
			if (!ok) {
				var errorString = "<div id='result'><strong>Please fill in the following fields: </strong><ul class ='error_list'>";
				for (var i = 0; i < fields_in_error.length; i++) {
					errorString += "<li class = 'error_list_item'>" + mb_utils.humanize(fields_in_error[i]) + "</li>";
				}
				errorString += "</ul><br/></div>";
				this.setState({ error: errorString }, function () {
					$('body, html').animate({ scrollTop: 0 });
				});
			} else {

				this.setState({ error: "" }, function () {
					_this.submitEventForm();
				});
			}
		}
	}, {
		key: "checkFeedbackForm",
		value: function checkFeedbackForm() {
			console.log("Submit button pressed");
			var form = document.forms["new_event_registration"];
			var fields = ["first_name", "last_name", "phone", "email", "address", "affiliation"];
			var fields_in_error = [];
			var ok = true;
			try {
				for (var i = 0; i < fields.length; i++) {
					if (form['event_registration_' + fields[i]].value == null || form['event_registration_' + fields[i]].value == "") {
						ok = false;
						$("label[for=event_registration_" + fields[i] + "]").addClass("error");
						fields_in_error.push(fields[i]);
					} else {
						$("label[for=event_registration_" + fields[i] + "]").removeClass("error");
					}
				}

				if (!$("input:radio[name='event_registration[citizenship]']").is(":checked")) {
					ok = false;
					fields_in_error.push("citizenship");
				}

				if ($('.registration_days').exists()) {
					if (!$('input.registration_day').is(':checked')) {
						ok = false;
						fields_in_error.push("dates attending");
					}
				}
				var recaptcha = grecaptcha.getResponse();
				if (recaptcha == undefined || recaptcha == "") {
					ok = false;
					fields_in_error.push("recaptcha");
				}
				return [ok, fields_in_error];
			} catch (e) {
				console.error("Error checking fields.", e.message);
			}
		}
	}, {
		key: "submitEventForm",
		value: function submitEventForm() {
			var form = document.forms["new_event_registration"];
			var recaptcha = grecaptcha.getResponse();

			var data = {
				event_registration: {
					first_name: form["event_registration_first_name"].value,
					last_name: form["event_registration_last_name"].value,
					phone: form["event_registration_phone"].value,
					email: form["event_registration_email"].value,
					address: form["event_registration_address"].value,
					affiliation: form["event_registration_affiliation"].value,
					event_id: form["event_registration_event_id"].value
				},
				"g-recaptcha-response": recaptcha
			};
			try {
				form.submit(data, function () {
					console.log("Submitting form...");
				});
			} catch (e) {
				console.log("EVENT REGISTRATION ERROR: " + e);
			}
		}
	}, {
		key: "getRegistrationDays",
		value: function getRegistrationDays() {
			var _this2 = this;

			if (this.props.item.start_date == this.props.item.end_date) {
				return null;
			} else {
				var current = new Date(this.props.item.start_date);
				var end = new Date(this.props.item.end_date);
				var days = [];
				while (current <= end) {
					days.push(new Date(current.getTime()));
					current.setDate(current.getDate() + 1);
				}
				return React.createElement(
					"li",
					null,
					React.createElement(
						"div",
						{ className: "registration_day_title radio_title" },
						"Date(s) Attending ",
						React.createElement(
							"span",
							{
								className: "required" },
							"*"
						)
					),
					React.createElement(
						"fieldset",
						{ className: "registration_days radio_buttons" },
						days.map(function (v, i) {
							return React.createElement(
								"div",
								{ className: "option", key: "option_" + i },
								React.createElement("input", { type: "checkbox", name: "event_registration[attending][]", id: _this2.formatDate(v), value: _this2.formatDate(v),
									className: "registration_day" }),
								React.createElement(
									"label",
									{ htmlFor: _this2.formatDate(v) },
									_this2.formatDate(v, true)
								)
							);
						})
					)
				);
			}
		}
	}, {
		key: "formatDate",
		value: function formatDate(current, readable) {
			if (readable) {
				return this.months[current.getMonth()] + " " + current.getDate() + ", " + current.getFullYear();
			} else {
				return current.getFullYear() + "-" + (current.getMonth() + 1) + "-" + current.getDate();
			}
		}
	}, {
		key: "render",
		value: function render() {
			var _this3 = this;

			return React.createElement(
				"div",
				null,
				React.createElement("div", { className: "error", dangerouslySetInnerHTML: { __html: this.state.error } }),
				React.createElement(
					"form",
					{ className: "body_form", id: "new_event_registration", action: "/events/" + this.props.event_id + "/submit_registration",
						acceptCharset: "UTF-8", method: "post" },
					React.createElement("input", { name: "utf8", type: "hidden", value: "" }),
					React.createElement("input", { type: "hidden",
						name: "authenticity_token",
						value: this.props.authenticity_token }),
					React.createElement("input", { value: this.props.event_id, type: "hidden", name: "event_registration[event_id]", id: "event_registration_event_id" }),
					React.createElement(
						"p",
						null,
						"Fields with an asterisk (",
						React.createElement(
							"span",
							{ className: "required" },
							"*"
						),
						") are required. Registration confirmation will be sent to your email address."
					),
					React.createElement(
						"ul",
						null,
						React.createElement(
							"li",
							null,
							React.createElement(
								"label",
								{ htmlFor: "event_registration_first_name" },
								"First name ",
								React.createElement(
									"span",
									{ className: "required" },
									"*"
								)
							),
							React.createElement("input", { type: "text", name: "event_registration[first_name]", id: "event_registration_first_name" })
						),
						React.createElement(
							"li",
							null,
							React.createElement(
								"label",
								{ htmlFor: "event_registration_last_name" },
								"Last name ",
								React.createElement(
									"span",
									{ className: "required" },
									"*"
								)
							),
							React.createElement("input", { type: "text", name: "event_registration[last_name]", id: "event_registration_last_name" })
						),
						React.createElement(
							"li",
							null,
							React.createElement(
								"label",
								{ htmlFor: "event_registration_affiliation" },
								"Affiliation ",
								React.createElement(
									"span",
									{ className: "required" },
									"*"
								)
							),
							React.createElement("input", { type: "text", name: "event_registration[affiliation]", id: "event_registration_affiliation" })
						),
						React.createElement(
							"li",
							null,
							React.createElement(
								"label",
								{ htmlFor: "event_registration_address" },
								"Address ",
								React.createElement(
									"span",
									{ className: "required" },
									"*"
								)
							),
							React.createElement("input", { type: "text", name: "event_registration[address]", id: "event_registration_address" })
						),
						React.createElement(
							"li",
							null,
							React.createElement(
								"label",
								{ htmlFor: "event_registration_email" },
								"Email ",
								React.createElement(
									"span",
									{ className: "required" },
									"*"
								)
							),
							React.createElement("input", { type: "email", name: "event_registration[email]", id: "event_registration_email" })
						),
						React.createElement(
							"li",
							null,
							React.createElement(
								"label",
								{ htmlFor: "event_registration_phone" },
								"Phone ",
								React.createElement(
									"span",
									{ className: "required" },
									"*"
								)
							),
							React.createElement("input", { type: "tel", name: "event_registration[phone]", id: "event_registration_phone" })
						),
						React.createElement(
							"li",
							null,
							React.createElement(
								"div",
								{ className: "radio_title" },
								"US Citizen or foreign national? ",
								React.createElement(
									"span",
									{ className: "required" },
									"*"
								)
							),
							React.createElement(
								"fieldset",
								{ className: "radio_buttons" },
								React.createElement(
									"div",
									{ className: "option" },
									React.createElement("input", { type: "radio", value: "us_citizen", name: "event_registration[citizenship]",
										id: "event_registration_citizenship_us_citizen" }),
									React.createElement(
										"label",
										{ htmlFor: "event_registration_citizenship_us_citizen" },
										"US Citizen"
									)
								),
								React.createElement(
									"div",
									{ className: "option" },
									React.createElement("input", { type: "radio", value: "permanent_resident", name: "event_registration[citizenship]",
										id: "event_registration_citizenship_permanent_resident" }),
									React.createElement(
										"label",
										{ htmlFor: "event_registration_citizenship_permanent_resident" },
										"Permanent Resident"
									)
								),
								React.createElement(
									"div",
									{ className: "option" },
									React.createElement("input", { type: "radio", value: "foreign_national", name: "event_registration[citizenship]",
										id: "event_registration_citizenship_foreign_national" }),
									React.createElement(
										"label",
										{ htmlFor: "event_registration_citizenship_foreign_national" },
										"Foreign National"
									)
								)
							)
						),
						this.getRegistrationDays(),
						React.createElement(
							"li",
							null,
							React.createElement(
								"label",
								{ htmlFor: "event_registration_comments" },
								"Comments"
							),
							React.createElement("textarea", { rows: "5", name: "event_registration[comments]", id: "event_registration_comments" })
						),
						React.createElement("div", { className: "g-recaptcha", "data-sitekey": this.props.recaptcha }),
						React.createElement(
							"fieldset",
							{ className: "centered" },
							React.createElement("input", { className: "inline_button button", name: "registration_submit",
								onClick: function (e) {
									_this3.onSubmit(e);
								}, type: "submit", value: "Submit" }),
							React.createElement("input", { className: "inline_button button", name: "registration_reset", type: "reset", value: "Reset" })
						)
					)
				)
			);
		}
	}]);

	return EventRegistration;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function titleize(str) {
  var words = str.split(/[\s_-]/g);
  words = words.map(function (word) {
    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
  });

  return words.join(" ");
}

function singularize(plural) {
  if (/s$/.test(plural)) {
    return plural.replace(/s$/, "");
  } else {
    return plural;
  }
}

var FacetedSearch = (function (_React$Component) {
  _inherits(FacetedSearch, _React$Component);

  function FacetedSearch(props) {
    _classCallCheck(this, FacetedSearch);

    _get(Object.getPrototypeOf(FacetedSearch.prototype), "constructor", this).call(this, props);
    this.filters = null;
    this.facets = null;
    var that = this;
    // Create the filtering object based on passed in filters
    if (this.props.filters) {
      this.filters = JSON.parse(this.props.filters);
      var filtering = this.filters.filter(function (f) {
        return f[2][1] != "";
      }).map(function (f) {
        return { name: f[0], value: f[2][1] };
      });
    } else {
      var filtering = [];
    }

    //check if any items are initially selected
    if (this.filters) {
      this.filters.map(function (f) {
        console.log("checking param", f[0]);
        if (/^field/.test(f[0])) {
          var field = f[0].match(/^field_(.+)/)[1];
          var q = location.search.substr(1).split("&").filter(function (p) {
            var re = new RegExp(field);
            return re.test(p);
          });
          if (q.length > 0) {
            var match = q[0].match("condition_\\d+=(.+)(%3A|:)" + field);
            var param = match ? match[1] : null;
          } else {
            var param = null;
          }
        } else {
          var param = mb_utils.getParam(f[0]);
        }
        if (param && param != "") {
          console.log("found param", param);
          var in_already = false;
          filtering.map(function (g) {
            if (g.name == f[0]) {
              in_already = true;
              g.value = Array.isArray(param) ? param[0] : param;
            }
          });
          if (!in_already) {
            filtering.push({ name: f[0], value: Array.isArray(param) ? param[0] : param });
          }
        }
      });
    }

    var per_page = mb_utils.getParam('per_page');
    var page = mb_utils.getParam('page');

    var search = mb_utils.getParam('search');

    this.facets = {};

    var facet_array_object = {};
    var fs, ft, fc, current_version;

    if (mb_utils.getParam('fs') || mb_utils.getParam('ft') || mb_utils.getParam('fc')) {
      // v3 Params
      fs = mb_utils.getParam('fs');
      ft = mb_utils.getParam('ft');
      fc = mb_utils.getParam('fc');
      current_version = true;
    } else if (mb_utils.getParam('tags') || mb_utils.getParam('facet_categories')) {
      // v2.1 Params
      fs = mb_utils.getParam('facet_search');
      ft = mb_utils.getParam('tags');
      fc = mb_utils.getParam('facet_categories');
      current_version = true;
    } else {
      // v2.0 Params
      fs = mb_utils.getParam('facet_search');
      ft = mb_utils.getParam('facet_tags%5B%5D');
      fc = this._getFacetCategoriesParam();
      current_version = false;
    };
    //can pass in default query params that will get set if actual query params not passed in. (currently only fc/ft/fs unsure if more desired...)
    if (this.props.options && this.props.options.default_query_params) {
      this.props.options.default_query_params.map(function (v, i) {
        if (fc == "" && v["fc"]) {
          fc = v["fc"];
        } else if (fs == "" && v["fs"]) {
          fs = v["fs"];
        } else if (ft == "" && v["ft"]) {
          ft = f[ft];
        }
      });
    }

    facet_array_object = this._populateFacets(fs, ft, fc, current_version);

    // Get datepickers
    var datepicker_array_object = {};
    var datepicker_values = {};
    this.datepickers = {};
    var dp = mb_utils.getParam('dp');
    if (dp) {
      datepicker_array_object = this._populateDatepickers(dp);
      datepicker_values = $.extend(true, {}, datepicker_array_object);
    }

    // Get sort
    var sort_options = this.getSortOptions();
    var order = this.getOrder(sort_options);

    // Get view and other options
    var opts = this.getOptions();
    var default_view = opts.default_view ? opts.default_view : "grid_view";

    // Set the React state
    this.state = {
      // filters
      filtering: filtering,
      searching: search ? search[0].replace("+", " ") : "",
      active_search: search ? search[0] : "",
      filters_opened: null, // Show filters button was pressed by the user
      filters_hidden: null, // Hide filters button was pressed by the user
      grid_list_view: default_view,
      //pagination
      total: 0,
      start_index: 0,
      end_index: 0,
      first_load: true,
      page: page ? parseInt(page[0]) : 0,
      per_page: per_page ? parseInt(per_page[0]) : 50,
      order: order,
      page_count: 0,
      sort_options: sort_options,
      // facets
      active_facets: facet_array_object,
      //datepickers
      active_datepickers: datepicker_array_object,
      datepicker_values: datepicker_values,
      //results
      items: [],
      loading: false,
      current_request: null
    };
  }

  _createClass(FacetedSearch, [{
    key: "_getFacetCategoriesParam",
    value: function _getFacetCategoriesParam() {
      var fc_param = [];
      for (var i = 0; i < this.props.facet_sections.length; i++) {
        var indexed_param = mb_utils.getParam("facet_categories%5B" + i + "%5D%5B%5D");
        if (indexed_param) {
          fc_param.push(indexed_param[0]);
        }
      }
      return fc_param;
    }
  }, {
    key: "_populateFacets",
    value: function _populateFacets(_fs, _ft, _fc, current_version) {
      var facet_array_object = {};
      var that = this;
      if (!current_version) {
        // transform params to be more usable
        if (_ft && _ft.length > 1) {
          var _ft_not_empty = _ft.filter(function (x) {
            return x != "";
          });
          _ft = _ft_not_empty.length > 0 ? [_ft_not_empty.join(",")] : null;
        }
        if (_fc && _fc.length > 1) {
          var _fc_not_empty = _fc.filter(function (x) {
            return x != "";
          });
          _fc = _fc_not_empty.length > 0 ? [_fc_not_empty.join(",")] : null;
        }
      }

      $.each(this.props.facet_sections, function (i, section) {
        that.facets[section.name] = [];
        facet_array_object[section.name] = [];

        if (section.search_field && _fs && _fs[0] != "") {
          var search_facets = _fs[0].match(/\.\*\((.+)\)\.\*/)[1].split("|");
          $.each(search_facets, function (j, f) {
            f = f.replace(/\+/g, " ");
            if (section.checkboxes.some(function (c) {
              return c.value == f;
            })) {
              facet_array_object[section.name].push(f);
            }
          });
        } else if (section.tags && _ft && _ft.length > 0 && _ft[0] != "") {
          var tag_facets = _ft[0].split(/[,:]/g);
          $.each(tag_facets, function (j, f) {
            f = f.replace(/\+/g, " ");
            if (section.checkboxes.some(function (c) {
              return c.value == f;
            })) {
              facet_array_object[section.name].push(f);
            }
          });
        } else if (_fc && _fc.length > 0 && _fc[0] != "") {
          var cat_facets = _fc[0].split(",");
          $.each(cat_facets, function (j, f) {
            if (section.checkboxes.some(function (c) {
              return c.value == parseInt(f);
            })) {
              facet_array_object[section.name].push(parseInt(f));
            }
          });
        } else {
          // Ignore, but log
          console.log("No params found for facet section '" + section.name + "'");
        }
      });

      return facet_array_object;
    }
  }, {
    key: "_populateDatepickers",
    value: function _populateDatepickers(_dp) {
      var datepicker_array_object = {};
      var that = this;
      var fs = this.props.facet_sections.filter(function (s) {
        return typeof s.datepicker !== 'undefined';
      });
      var dps = _dp[0].split(",").filter(function (d) {
        return d != "";
      });

      $.each(dps, function (i, dp_param) {
        var dp_name = dp_param.match(/^([^_]+)_/)[1];
        var dp_value = dp_param.match(/_([^_]+)$/)[1];
        if (fs.some(function (f) {
          return f.name == dp_name;
        })) {
          datepicker_array_object[dp_name] = dp_value;
        }
      });

      return datepicker_array_object;
    }
  }, {
    key: "componentWillMount",
    value: function componentWillMount() {
      this.getData(null, this.state.page > 0);
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      var that = this;
      $("body").on("show_list_view", function () {
        that.setState({ grid_list_view: "list_view" });
      });
      $("body").on("show_grid_view", function () {
        that.setState({ grid_list_view: "grid_view" });
      });

      // if Contact list module exists, move it into Secondary Column under Filters
      if ($('.contact_list_module').length) {
        this.appendContactList();
        this.setState({ has_contact_list: true });
      }
      $(window).resize(this.appendContactList);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (this.props.facet_sections !== prevProps.facet_sections) {
        console.log("updating with new props");
        this.getData();
      }
    }
  }, {
    key: "appendContactList",
    value: function appendContactList() {
      // if Contact list module exists, move it into Secondary Column under Filters
      if (window.innerWidth < 600) {
        $('.contact_list_module').appendTo($('#secondary_column').children('.facets_sidebar')).css('display', 'block');
      } else {
        $('.contact_list_module').appendTo($('#secondary_column')).css('display', 'block');
      }
    }
  }, {
    key: "getData",
    value: function getData(callback, maintain_current_page) {

      if (this.state.loading) {
        this.state.current_request.abort();
      }

      var that = this;
      var items = [];
      var params = this.getParams(maintain_current_page);

      var current_request = $.ajax({
        url: "/api/v1/" + that.props.model + "/",
        data: params,
        method: "GET",
        dataType: "json",
        success: (function (data) {
          console.log("Got items successfully.... ");
          var d = $.extend(data, { first_load: false, active_search: that.state.searching, loading: false });
          that.setState(d);
          this.updateIndices();
          if (typeof callback == "function") callback.call();
        }).bind(this),
        error: (function (xhr, status, err) {
          if (status == "abort") {
            that.setState({ loading: false, current_request: null });
          } else {
            console.error(status, err.toString());
          }
        }).bind(this)
      });

      this.setState({ current_request: current_request, loading: true });
    }
  }, {
    key: "getParams",
    value: function getParams(maintain_current_page) {
      var page_number = maintain_current_page ? this.state.page : 0; // always go back to page 1 unless we're paginating or coming in via url

      var params = {
        order: this.state.order,
        per_page: this.state.per_page,
        page: page_number,
        search: this.state.searching
      };

      $.extend(params, this.getFilters());
      $.extend(params, this.getFacets());

      var facet_search = params.fs;
      var facet_search_str = "";
      $.each(facet_search, function (key, value) {
        if (facet_search_str.length > 0) facet_search_str += "+";

        facet_search_str += ".*(" + value + ").*:" + key + ":regex";
      });
      params.fs = facet_search_str;

      var dp_param = "";
      $.each(params.datepickers, function (i, dp) {
        params["condition_" + dp.idx] = dp.value + ":" + dp.field + ":" + dp.condition;

        var val = dp.name + "_" + dp.value;
        dp_param += dp_param.length > 0 ? "," + val : val;
      });
      params.dp = dp_param;
      delete params.datepickers;

      params.category = this.getCategoryParam(params);

      var ft = params.ft ? params.ft.filter(function (t) {
        return t != "";
      }).join(":") : null;
      params.ft = ft;

      // For url params, we can just comma-separate all tags
      var facet_cats = params.fc.map(function (fc) {
        return fc.filter(function (c) {
          return c != "";
        }).join(",");
      }).filter(function (c) {
        return c != "";
      }).join(",");
      params.fc = facet_cats;

      // we must put the query string in place at this point in order for it to be properly decoded on load
      mb_utils.createCookie('faceted_search_filter', $.param(params), 365);
      window.history.replaceState(params, null, "?" + $.param(params));
      ////

      delete params.ft;
      delete params.fs;
      delete params.fc;
      delete params.dp;
      delete params.filter_categories;

      if (params.tags) {
        params.tags += ft ? ":" + ft : "";
      } else {
        params.tags = ft;
      }

      var search_str = params.search || "";
      if (facet_search_str) {
        params.search += search_str.length > 0 ? "+" + facet_search_str : facet_search_str;
      }

      return params;
    }
  }, {
    key: "updateIndices",
    value: function updateIndices() {
      var start_index = this.state.page * this.state.per_page;
      var end_index = Math.min(this.state.total, start_index + this.state.per_page);
      var page_count = Math.ceil(this.state.total / this.state.per_page);

      this.setState({ start_index: start_index, end_index: end_index, page_count: page_count });
    }
  }, {
    key: "getOptions",
    value: function getOptions() {
      var options = this.props.options;

      if (typeof options != "undefined" && options != null) {
        return options;
      } else {
        return {};
      }
    }
  }, {
    key: "getCategoryParam",
    value: function getCategoryParam(params) {
      var category = "";

      var filter_cats = params.filter_categories.join(":");

      // facet_categories is an array of arrays. This gets rid of empty values and splices
      // the contents into a comma and colon separated string
      var facet_cats = params.fc.map(function (fc) {
        return fc.filter(function (c) {
          return c != "";
        }).join(",");
      }).filter(function (c) {
        return c != "";
      }).join(":");

      if (filter_cats.length > 0 && facet_cats.length > 0) {
        category = filter_cats + ":" + facet_cats;
      } else if (filter_cats.length == 0 && facet_cats.length > 0) {
        category = facet_cats;
      } else if (facet_cats.length == 0 && filter_cats.length > 0) {
        category = filter_cats;
      }
      return category;
    }
  }, {
    key: "getFilters",
    value: function getFilters() {
      var that = this;
      var filtering = this.state.filtering;
      var params = {};
      // var categories = that.props.categories ? that.props.categories.slice() : []; //copy categories array //don't think this is getting used currently...
      var categories = [];
      if (this.getOptions().must_cat) {
        categories.push(this.getOptions().must_cat.split(','));
      }
      if (this.getOptions().except_cat) {
        var except = this.getOptions().except_cat.split(",").map(function (c) {
          return "-" + c;
        });
        categories.push(except);
      }
      var conditions_count = that.props.conditions ? that.props.conditions.length + 1 : 1;
      $.each(filtering, function (i, param) {
        console.log("param " + param.name + ": " + param.value);
        if (param.value != "") {
          if (param.name == "date") {
            if (that.props.model == "publications") {
              params["condition_" + conditions_count] = param.value + ":publication_year";
              conditions_count += 1;
            } else if (that.props.model == "events") {
              // Upcoming events
              if (param.value == "upcoming") {
                var d = new Date();
                params["condition_" + conditions_count] = d.getFullYear().toString() + '-' + (d.getMonth() + 1).toString() + '-' + d.getDate().toString() + ':start_date:gte';
                conditions_count += 1;
              } else {
                params.year = param.value + ":start_date";
              }
            } else if (that.props.model == "documents") {
              params.year = param.value + ":date";
            } else {
              params.year = param.value + ":publish_date";
            }
          } else if (param.name == "scope" && param.value.toLowerCase() == "featured") {
            params["condition_" + conditions_count] = "1:featured";
            conditions_count += 1;
          } else if (param.name == "scope" && param.value.toLowerCase() == "all") {
            // this is not a condition we want to add
          } else if (/^field/.test(param.name)) {
              // To add select box for any field name; i.e. field_author to select the "author" field
              var field_name = param.name.match(/^field_(.+)/)[1];
              params["condition_" + conditions_count] = param.value + ":" + field_name;
              conditions_count += 1;
            } else {
              //this used to be limiting to if (/^(type|topic|category)$/.test(param.name)) but list seemed arbitrary, pulling for now so we can have select boxes named topics,foo etc.
              categories.push(param.value);
            }
        }
      });

      params.filter_categories = categories;

      return params;
    }
  }, {
    key: "changeOrder",
    value: function changeOrder(order) {
      this.setState({ order: order }, this.getData);
    }
  }, {
    key: "changePageNumber",
    value: function changePageNumber(page, callback, maintain_scroll_position) {
      console.log('faceted_search.changePageNumber page, maintain_scroll_position', page, maintain_scroll_position);
      if (page.toString() != page) {
        console.log("changePageNumber: page is NaN"); // Not sure why we would set the state if page is NaN ....
        this.setState({ page: page });
      } else {
        var z_page = page - 1;
        console.log("page", page, z_page);
        this.setState({ page: z_page }, function () {
          this.getData(callback, true);
        });
        if (!maintain_scroll_position) {
          var top = document.documentElement && document.documentElement.scrollTop || document.body.scrollTop;
          if (top > $('.faceted_search').offset().top) {
            var iev = mb_utils.getIEVersion();
            if (iev.major > 0 && iev.major < 12) {
              document.documentElement.scrollTop = $('.faceted_search').offset().top;
            } else {
              window.scrollTo(0, $('.faceted_search').offset().top);
            }
          }
        }
      }
    }
  }, {
    key: "changePerPage",
    value: function changePerPage(per_page) {
      this.setState({ per_page: per_page }, this.getData);
    }
  }, {
    key: "activeFilters",
    value: function activeFilters() {
      var that = this,
          active = [];
      if (this.state.active_search != "") {
        active.push({
          id: 'search',
          text: "Searching: " + this.state.active_search
        });
      }
      $.each(this.state.filtering, function (i, f) {
        var n = that.getFilterName(f.name, f.value);
        if (n) {
          active.push({
            id: 'filter_' + f.name,
            text: n
          });
        }
      });
      $.each(this.state.active_facets, function (key, val) {
        var n = that.getActiveFacetsArray(key, val);
        active = active.concat(n);
      });
      $.each(this.state.active_datepickers, function (key, val) {
        active.push({ id: 'datepicker_' + key, text: key + ": " + val });
      });
      return active;
    }
  }, {
    key: "getFilterName",
    value: function getFilterName(name, value) {
      var f_arr = this.filters;
      var sel = f_arr.filter(function (s) {
        return s[0] == name;
      })[0];
      if (sel) {
        var opt = sel[1].filter(function (o) {
          return o[1].toString() == value;
        })[0];
      }

      if (opt) {
        var f_name = name.replace("field_", "").replace("_", " ");
        return titleize(singularize(f_name)) + ": " + opt[0];
      } else {
        return "";
      }
    }
  }, {
    key: "getActiveFacetsArray",
    value: function getActiveFacetsArray(name, value) {
      var fs = this.props.facet_sections;
      var section = fs.filter(function (s) {
        return s.name == name;
      })[0];
      if (section && section.checkboxes) {
        var facets = section.checkboxes.filter(function (f) {
          return value.indexOf(f.value) > -1;
        }).map(function (f) {
          return { id: 'facet_' + section.name + "_" + f.value, text: titleize(name) + ": " + f.label };
        });
      }

      if (facets && facets.length > 0) {
        return facets;
      } else {
        return [];
      }
    }
  }, {
    key: "applyFilters",
    value: function applyFilters(e) {
      e.preventDefault();
      e.stopPropagation();
      var params = this.state.filtering;
      var name, value;
      if ($(e.currentTarget).is('a')) {
        name = $(e.currentTarget).data("for-select");
        value = $(e.currentTarget).data("select-val");
      } else {
        name = e.target.name;
        value = e.target.value;
      }
      var current_filter = params.findIndex(function (p) {
        return p.name == name;
      });
      if (current_filter == -1) {
        params.push({ name: name, value: value });
      } else {
        params[current_filter].value = value;
      }
      console.log('FORM PARAMS: ', params);
      this.setState({ filtering: params }, function () {
        console.log('FILTERING: ', this.state.filtering);

        this.getData(false);
      });
    }
  }, {
    key: "removeFilter",
    value: function removeFilter(e) {
      var filter = e.target.getAttribute("data-filter-id");
      if (filter) {
        var fm = filter.match(/^([^_]+)_/);
        var _f = fm ? fm[1] : filter;
        switch (_f) {
          case "search":
            this.setState({ searching: "" }, this.getData);
            break;
          case "filter":
            var current_filters = this.state.filtering.slice();
            for (var i = 0; i < current_filters.length; i++) {
              if (current_filters[i].name == filter.match(/filter_(.+)$/)[1]) {
                current_filters.splice(i, 1);
                break;
              }
            }
            this.setState({ filtering: current_filters }, this.getData);
            break;
          case "facet":
            var current_facets = $.extend(true, {}, this.state.active_facets);
            var facet_name = filter.match(/facet_([^_]+)_.+$/)[1];
            var curr_facet_arr = current_facets[facet_name];
            for (var i = 0; i < curr_facet_arr.length; i++) {
              if (curr_facet_arr[i].toString() == filter.match(/facet_[^_]+_(.+)$/)[1]) {
                curr_facet_arr.splice(i, 1);
                break;
              }
            }
            current_facets[facet_name] = curr_facet_arr;
            this.setState({ active_facets: current_facets }, this.getData);
            break;
          case "datepicker":
            var current_datepickers = $.extend(true, {}, this.state.active_datepickers);
            var dp_name = filter.match(/datepicker_([^_]+)$/)[1];
            delete current_datepickers[dp_name];
            this.setState({ active_datepickers: current_datepickers, datepicker_values: current_datepickers }, this.getData);
            break;
          default:
            break;
        }
      }
    }
  }, {
    key: "applySearch",
    value: function applySearch(e, callback) {
      this.setState({ searching: e.target.value }, function () {
        if (callback) {
          callback.call();
        }
      });
    }
  }, {
    key: "clearFilters",
    value: function clearFilters() {
      this.setState({
        active_facets: $.extend(true, {}, this.facets),
        active_datepickers: $.extend(true, {}, this.datepickers),
        datepicker_values: {},
        filtering: [],
        searching: ""
      }, this.getData);
    }
  }, {
    key: "clearSearch",
    value: function clearSearch() {
      this.setState({ searching: "" }, function () {
        this.getData(false);
      });
    }
  }, {
    key: "setSearch",
    value: function setSearch() {
      this.setState({}, this.getData(false));
    }
  }, {
    key: "getFacets",
    value: function getFacets() {
      var that = this,
          facets_obj = {},
          i = 51;
      var categories = [],
          tags = [],
          search = {},
          datepickers = [];

      $.each(this.props.facet_sections, function (i, fs) {
        if (fs.datepicker) {
          // Get props for datepickers
          var active = that.state.active_datepickers[fs.name];
          if (active) {
            datepickers.push({ name: fs.name, idx: 50 + i, field: fs.datepicker.field, condition: fs.datepicker.condition, value: active });
          }
        } else {
          (function () {
            // Get props for checkboxes
            var active = that.state.active_facets[fs.name];
            var section_categories = [];
            var section_tags = "";
            $.each(active, function (j, facet) {
              if (fs.search_field) {
                // use search field specified in json blob
                if (search[fs.search_field]) {
                  search[fs.search_field] += "|" + facet;
                } else {
                  search[fs.search_field] = facet.toString();
                }
              } else if (fs.tags) {
                section_tags += section_tags.length > 0 ? "," + facet : facet;
              } else {
                // assume it's a category filter
                section_categories.push(facet);
              }
            });
            tags.push(section_tags);
            categories.push(section_categories);
          })();
        }
      });
      facets_obj.fs = search;
      facets_obj.fc = categories;
      facets_obj.ft = tags;
      facets_obj.datepickers = datepickers;
      return facets_obj;
    }
  }, {
    key: "getFacetCounts",
    value: function getFacetCounts() {
      var _this = this;

      if (this.props.facet_sections) {
        var _ret2 = (function () {
          var that = _this;
          var sections = _this.props.facet_sections.slice();
          $.each(sections, function (i, fs) {
            if (!that.state.first_load && fs.show_count) {
              $.each(fs.checkboxes, function (j, box) {
                box.targetCount = that.getCountForFacetSection(fs, box);
              });
            }
          });

          return {
            v: sections
          };
        })();

        if (typeof _ret2 === "object") return _ret2.v;
      } else {
        return [];
      }
    }
  }, {
    key: "getCountForFacetSection",
    value: function getCountForFacetSection(fs, box) {
      var _this2 = this;

      if (fs.search_field) {
        var _ret3 = (function () {
          var items_for_facet = _this2.state.items;
          var search_regex = new RegExp(box.value, "i");
          return {
            v: items_for_facet.filter(function (item) {
              return search_regex.test(item[fs.search_field]);
            }).length
          };
        })();

        if (typeof _ret3 === "object") return _ret3.v;
      } else {
        return null;
      }
    }
  }, {
    key: "formatNumber",
    value: function formatNumber(num) {
      if (num.toString() != num) {
        // return empty string if num is NaN
        return "";
      } else {
        var numString = num.toString();
        var formatted = "";
        for (var i = 0; i < numString.length; i++) {
          if ((numString.length - i) % 3 == 0 && i > 0) {
            formatted += ",";
          }
          formatted += numString.charAt(i);
        }
        return formatted;
      }
    }
  }, {
    key: "clearItems",
    value: function clearItems(section_name) {
      var current_active_facets = $.extend(this.state.active_facets, {});
      current_active_facets[section_name] = [];
      this.setState({ active_facets: current_active_facets }, this.getData);
    }
  }, {
    key: "onCheckBoxChange",
    value: function onCheckBoxChange(e) {
      var el = e.target;
      var label = el.name.split("_")[0];
      var value = /^\d+$/g.test(el.value) ? parseInt(el.value) : el.value;
      this.addRemoveCheckboxItemFromActiveFacets(label, value, el.checked);
    }
  }, {
    key: "addRemoveCheckboxItemFromActiveFacets",
    value: function addRemoveCheckboxItemFromActiveFacets(label, value, checked) {
      var current_active_facets = $.extend(this.state.active_facets, {});
      var value_idx = current_active_facets[label].indexOf(value);
      if (value_idx > -1) {
        current_active_facets[label].splice(value_idx, 1);
      } else {
        current_active_facets[label].push(value);
      }
      this.setState({ active_facets: current_active_facets }, this.getData);
    }
  }, {
    key: "updateActiveDatepickers",
    value: function updateActiveDatepickers() {
      // let current_active_datepickers = $.extend(this.state.active_datepickers, {});
      // current_active_datepickers[label] = value;
      this.setState({ active_datepickers: this.state.datepicker_values }, this.getData);
    }
  }, {
    key: "clearDatepicker",
    value: function clearDatepicker(name) {
      console.log("clearDatepicker");
      this.changeDatepickerValue(name, null, this.updateActiveDatepickers);
    }
  }, {
    key: "changeDatepickerValue",
    value: function changeDatepickerValue(name, value) {
      var callback = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

      console.log("changeDatepickerValue");
      var datepicker_values = $.extend(this.state.datepicker_values, {});
      if (value) {
        datepicker_values[name] = value;
      } else {
        delete datepicker_values[name];
      }
      this.setState({ datepicker_values: datepicker_values }, function () {
        if (typeof callback == "function") {
          callback.call();
        }
      });
    }
  }, {
    key: "datePickerClose",
    value: function datePickerClose(d, i, foo) {
      if (d != "") {
        console.log(d, i, foo);
        // this.changeDatepickerValue(i.input.context.name, d);

        var datepicker_values = $.extend(this.state.datepicker_values, {});
        datepicker_values[i.input.context.name] = d;
        this.setState({ datepicker_values: datepicker_values }, this.updateActiveDatepickers());
      }
    }
  }, {
    key: "changeDatepickerOnEnter",
    value: function changeDatepickerOnEnter(e) {
      if (!e) e = window.event;
      var keyCode = e.keyCode || e.which;
      if (keyCode == '13') {
        console.log('changeOnEnter: enter pressed in date field');
        // Enter pressed
        this.updateActiveDatepickers();
      }
    }
  }, {
    key: "openMobileFilters",
    value: function openMobileFilters(e) {
      this.setState({ filters_opened: true });
      this.setState({ filters_hidden: false });
      // $('#secondary_column').addClass('open');
    }
  }, {
    key: "closeMobileFilters",
    value: function closeMobileFilters(e) {
      this.setState({ filters_opened: false });
      this.setState({ filters_hidden: true });
      // $('#secondary_column').removeClass('open');
    }
  }, {
    key: "toggleSection",
    value: function toggleSection(e) {
      $(e.target).parents('.form_section').toggleClass('open');
    }
  }, {
    key: "scrollToTop",
    value: function scrollToTop() {}
  }, {
    key: "renderFilters",
    value: function renderFilters() {
      var _this3 = this;

      var opts = this.getOptions();
      if (this.filters || this.props.search) {
        return React.createElement(FilterBar, { select_boxes: this.filters,
          search: this.props.search,
          placeholder: opts.placeholder,
          changeFilters: function (e) {
            _this3.applyFilters(e);
          },
          clearSearch: function () {
            _this3.clearSearch();
          },
          changeSearch: function () {
            _this3.setSearch();
          },
          filtering: this.state.filtering,
          searching: this.state.searching,
          searchFn: function (e, c) {
            _this3.applySearch(e, c);
          } });
      } else {
        return null;
      }
    }
  }, {
    key: "renderHeader",
    value: function renderHeader() {
      var opts = this.getOptions();
      return React.createElement(
        "header",
        { className: opts.view_toggle ? "gallery_header" : "gallery_header view_toggle_hidden", id: "faceted_search_header" },
        React.createElement(
          "h2",
          { className: "article_title" },
          this.props.title
        ),
        this.renderFilters(),
        opts.view_toggle ? React.createElement(ViewToggle, null) : ""
      );
    }
  }, {
    key: "renderFacetsColumn",
    value: function renderFacetsColumn() {
      var that = this;
      //let facet_sections = this.getFacetCounts();
      var facet_sections = this.props.facet_sections;
      return React.createElement(
        "div",
        { id: 'secondary_column', className: (this.state.filters_opened ? 'open' : '') + " " + (this.state.has_contact_list ? ' has_contact_list' : '') },
        React.createElement(
          "aside",
          { className: "boxed facets_sidebar" },
          React.createElement(
            "header",
            null,
            React.createElement(
              "h2",
              null,
              "Filters"
            ),
            React.createElement(
              "div",
              { className: "mobile_filter_controls" },
              React.createElement(
                "a",
                { className: "clear_filter", href: "javascript:void(0)", "data-submit-form": "true", onClick: function (e) {
                    that.clearFilters(e);
                  } },
                "Clear all"
              ),
              React.createElement(
                "a",
                { className: "button done", href: "javascript:void(0)", onClick: function (e) {
                    that.closeMobileFilters(e);
                  } },
                "Done"
              )
            )
          ),
          facet_sections.map(function (fs, i) {
            if (fs.datepicker) {
              var min_date = fs.datepicker["min_date"] ? fs.datepicker["min_date"] : null,
                  max_date = fs.datepicker["max_date"] ? fs.datepicker["max_date"] : null;

              if (min_date && /datepicker/.test(min_date)) {
                var mindf = min_date.match(/datepicker_(.+)/)[1];
                min_date = that.state.active_datepickers[mindf];
              }
              if (max_date && /datepicker/.test(max_date)) {
                var maxdf = max_date.match(/datepicker_(.+)/)[1];
                max_date = that.state.active_datepickers[maxdf];
              }
              return React.createElement(
                "div",
                { className: "datepicker_section", key: i },
                React.createElement(DateFilter, {
                  clear: function () {
                    that.clearDatepicker(fs.name);
                  },
                  min_date: min_date,
                  max_date: max_date,
                  closeDatePicker: function () {
                    that.datePickerClose(e);
                  },
                  placeholder: fs.placeholder ? fs.placeholder : "yyyy-mm-dd",
                  preposition: fs.name,
                  preposition_small: fs.name,
                  datepicker_class: fs.datepicker.datepicker_class ? fs.datepicker.datepicker_class : "fs_datepicker",
                  input_name: fs.name,
                  date_value: that.state.datepicker_values[fs.name] ? that.state.datepicker_values[fs.name] : '',
                  changeValue: function (e) {
                    that.changeDatepickerValue(fs.name, e.target.value);
                  },
                  onKeyPress: function () {
                    that.changeDatepickerOnEnter(e);
                  } })
              );
            } else {
              return React.createElement(
                "div",
                { className: "form_section", id: fs.id, key: i },
                React.createElement("hr", null),
                React.createElement(
                  "div",
                  { className: "form_section_header", onClick: that.toggleSection },
                  React.createElement(
                    "h4",
                    null,
                    fs.name
                  ),
                  React.createElement(
                    "div",
                    { className: "expand_section" },
                    React.createElement("div", { className: "arrow_down" })
                  )
                ),
                React.createElement(CheckboxList, {
                  key: i,
                  items: fs.checkboxes,
                  checked_items: that.state.active_facets[fs.name] ? that.state.active_facets[fs.name] : [],
                  when_clicked: function (e) {
                    that.onCheckBoxChange(e);
                  },
                  show_count: fs.show_count,
                  show_min: fs.show_min,
                  filterable: fs.filterable,
                  placeholder: fs.placeholder,
                  formatNumber: that.formatNumber,
                  more_less: fs.more_less,
                  form_section: fs.name,
                  show_all: fs.show_all,
                  clear_items: function (s) {
                    that.clearItems(s);
                  },
                  text_format: "none",
                  delimiter: "_" })
              );
            }
          })
        ),
        this.getAfterFilter()
      );
    }
  }, {
    key: "getAfterFilter",
    value: function getAfterFilter() {
      if (this.props.options && this.props.options.after_filter) {
        return React.createElement("div", { className: "after_filter", dangerouslySetInnerHTML: { __html: unescape(unescape(this.props.options.after_filter)) } });
      } else {
        return null;
      }
    }
  }, {
    key: "getNoItemsText",
    value: function getNoItemsText() {
      if (this.props.no_items_text) {
        return this.props.no_items_text;
      } else if (this.props.options.no_items_text) {
        return this.props.options.no_items_text;
      } else {
        return "There are no items matching these criteria.";
      }
    }
  }, {
    key: "renderItemList",
    value: function renderItemList() {
      var no_items_text = this.getNoItemsText();
      var that = this;
      var list_item_component = window[that.props.list_item + "ListItem"]; // safer alternative to eval
      if (this.state.items.length > 0) {
        return React.createElement(
          "ul",
          { className: "item_list" },
          that.state.items.map(function (item) {
            return React.createElement(
              "li",
              { key: item.id, className: "slide" },
              React.createElement(list_item_component, { item: item, options: that.getOptions() })
            );
          })
        );
      } else if (this.state.first_load) {
        return "Loading...";
      } else {
        return React.createElement("div", { className: "no_items", dangerouslySetInnerHTML: { __html: no_items_text } });
      }
    }
  }, {
    key: "getSortOptions",
    value: function getSortOptions() {
      if (this.getOptions().sort) {
        return this.getOptions().sort;
      } else {
        return [{ label: 'Date (newest)', value: "created_at desc" }, { label: 'Date (oldest)', value: "created_at asc" }];
      }
    }
  }, {
    key: "getOrder",
    value: function getOrder(sort_options) {
      var order = mb_utils.getParam('order');
      if (order) {
        return order[0].replace('+', ' ');
      } else if (this.getOptions().order) {
        return this.getOptions().order;
      } else if (sort_options.length > 0) {
        return sort_options[0]['value'];
      } else {
        return "";
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var that = this;
      var per_page_options = [];
      if (this.getOptions().per_page_options) {
        per_page_options = this.getOptions().per_page_options;
      } else {
        per_page_options = [{ label: '10', value: 10 }, { label: '25', value: 25 }, { label: '50', value: 50 }];
      }
      return React.createElement(
        "section",
        { className: "faceted_search grid_layout " + this.state.grid_list_view + " " + (this.state.filters_hidden ? 'faceted_search_hidden_filters' : '') + " " + (this.props.page_class ? this.props.page_class : '') + " " + (this.getOptions().klass ? this.getOptions().klass : '') },
        React.createElement(
          "article",
          null,
          this.renderHeader(),
          React.createElement(
            "div",
            { id: "primary_column" },
            React.createElement(PaginationCount, {
              count: this.state.total,
              start_index: this.state.start_index,
              end_index: this.state.end_index,
              first_load: this.state.first_load,
              formatNumber: this.formatNumber
            }),
            React.createElement(PageSort, {
              per_page_options: per_page_options,
              initial_pp: this.state.per_page,
              sort_options: this.state.sort_options,
              initial_sort: this.state.order,
              page: this.state.page + 1,
              count: this.state.total,
              changeSort: function (o) {
                _this4.changeOrder(o);
              },
              changePage: function (page, callback, maintain_scroll_position) {
                _this4.changePageNumber(page, callback, maintain_scroll_position);
              },
              changePerPage: function (p) {
                _this4.changePerPage(p);
              },
              page_count: this.state.page_count,
              formatNumber: this.formatNumber
            }),
            React.createElement(
              "div",
              { className: "mobile_filter_btn " + (this.state.total <= 0 ? 'no_results_filter' : '') + " " },
              that.activeFilters().length > 0 ? React.createElement(
                "a",
                { className: "mobile_clear_filters", onClick: function (e) {
                    that.clearFilters(e);
                  } },
                "Clear all filters"
              ) : null,
              React.createElement(
                "a",
                { className: "button", onClick: function (e) {
                    _this4.openMobileFilters(e);
                  } },
                "Filters"
              )
            ),
            that.activeFilters().length > 0 ? React.createElement(
              "div",
              { className: "filtering_results" },
              "Filtering:",
              React.createElement(
                "span",
                { className: "applied_filters" },
                that.activeFilters().map(function (item) {
                  //var filter_name = /^(distance|date)/i.test(item) ? item : titleize(that.handleSpecialNames(item));
                  return React.createElement(
                    "div",
                    { key: item.id, className: "applied_filter" },
                    React.createElement("a", { className: "filter_remove", href: "javascript:void(0)", "data-filter-id": item.id, onClick: function (e) {
                        that.removeFilter(e);
                      } }),
                    item.text
                  );
                })
              ),
              React.createElement(
                "a",
                { className: "clear_filter", onClick: function (e) {
                    that.clearFilters(e);
                  } },
                "Clear filters"
              )
            ) : React.createElement("div", { className: "filtering_results" }),
            React.createElement(
              "section",
              { className: "faceted_search_results grid_gallery" },
              this.renderItemList()
            ),
            React.createElement("div", { className: "errors" }),
            React.createElement(
              "footer",
              { className: "search_footer" },
              React.createElement(
                "div",
                { className: "pagination_options" },
                React.createElement(PageSortPagination, {
                  initial_pp: that.state.per_page,
                  page: this.state.page + 1,
                  changePage: function (e) {
                    that.changePageNumber(e);
                  },
                  page_count: this.state.page_count,
                  formatNumber: this.formatNumber
                }),
                React.createElement(
                  "span",
                  { className: "scroll_to_top" },
                  React.createElement(
                    "a",
                    { href: "#faceted_search_header", onClick: function () {
                        _this4.scrollToTop();
                      } },
                    "Back to top"
                  )
                )
              )
            )
          ),
          this.renderFacetsColumn()
        )
      );
    }
  }]);

  return FacetedSearch;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// FABIO - Fancy Audio Boxed Interactive [Object]
// parts based on https://codepen.io/mdf/pen/ZWbvBv

var FancyAudio = (function (_React$Component) {
  _inherits(FancyAudio, _React$Component);

  function FancyAudio(props) {
    _classCallCheck(this, FancyAudio);

    _get(Object.getPrototypeOf(FancyAudio.prototype), 'constructor', this).call(this, props);
    this.state = {
      clip: null,
      playing: false
    };
  }

  _createClass(FancyAudio, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var that = this;
      var audio = document.getElementById(that.props.audio_div).querySelector('audio');
      this.processAudio(audio);
      this.setState({ clip: audio }, function () {
        that.processProgressBar(audio);
        that.resetTextReadout(audio);
      });
    }
  }, {
    key: 'resetTextReadout',
    value: function resetTextReadout(clip) {
      var elapsed = document.getElementById(this.props.audio_div).querySelector('.controls .duration_elapsed');
      var remaining = document.getElementById(this.props.audio_div).querySelector('.controls .duration_remaining');
      elapsed.innerHTML = this.convertDecToTime(0);
      remaining.innerHTML = this.convertDecToTime(clip.duration);
    }
  }, {
    key: 'updateTextReadout',
    value: function updateTextReadout(clip) {
      var elapsed = document.getElementById(this.props.audio_div).querySelector('.controls .duration_elapsed');
      var remaining = document.getElementById(this.props.audio_div).querySelector('.controls .duration_remaining');
      if (typeof clip.currentTime === "undefined" || clip.currentTime == 0) {
        remaining = clip.duration;
        elapsed = 0;
      }
      elapsed.innerHTML = this.convertDecToTime(clip.currentTime);
      remaining.innerHTML = this.convertDecToTime(clip.duration);
    }
  }, {
    key: 'convertDecToTime',
    value: function convertDecToTime(value) {
      if (!isNaN(value)) {
        return String(parseFloat(value / 60).toFixed(2)).replace('.', ':');
      } else {
        return '';
      }
    }
  }, {
    key: 'processAudio',
    value: function processAudio(audio) {
      var that = this;
      var timer;
      var percent = 0;

      audio.addEventListener("playing", function (_event) {
        var duration = _event.target.duration;
        advance(duration, audio);
      });

      audio.addEventListener("pause", function (_event) {
        clearTimeout(timer);
      });

      audio.ontimeupdate = function () {
        var id = this.id;
        var progress_amt = this.currentTime / this.duration * 100;
        var progress = document.getElementById(that.props.audio_div).querySelector('.progress');

        progress.style.width = progress_amt + '%';
        if (this.currentTime == this.duration) {
          this.currentTime = 0;
          progress.style.width = "0%";
          var play_button = document.getElementById(that.props.audio_div).querySelector('.play_button');
          play_button.classList.remove('active');
          that.resetTextReadout(audio);
          that.setState({ playing: false });
        }
      };

      var advance = function (duration, element) {
        var progress = document.getElementById(that.props.audio_div).querySelector('.progress');

        that.updateTextReadout(audio);

        increment = 10 / duration;
        percent = Math.min(increment * element.currentTime * 10, 100);
        progress.style.width = percent + '%';
        startTimer(duration, element);
      };
      var startTimer = function (duration, element) {
        if (percent < 100) {
          timer = setTimeout(function () {
            advance(duration, element);
          }, 100);
        }
      };
    }
  }, {
    key: 'processProgressBar',
    value: function processProgressBar(clip) {
      var that = this;
      var progress = document.getElementById(that.props.audio_div).querySelector('.controls .progress_bar');
      progress.rect = progress.getBoundingClientRect();
      progress.clip = clip;

      var timeDrag = false;
      progress.onmousedown = function (xy) {
        timeDrag = true;
        processClickTouch(xy, this);
      };

      progress.onmousemove = function (xy) {
        if (timeDrag) {
          processClickTouch(xy, this);
        }
      };

      progress.onmouseup = function (xy) {
        if (timeDrag) {
          timeDrag = false;
          processClickTouch(xy, this);
        }
      };

      progress.ontouchstart = function (xy) {
        processClickTouch(xy, this);
      };

      function processClickTouch(mouseEvent, progressBar) {
        console.log(mouseEvent, progressBar);
        var clip = that.state.clip;
        clip.currentTime = clip.duration * ((mouseEvent.clientX - progressBar.rect.left) / (progressBar.rect.right - progressBar.rect.left));

        that.updateTextReadout(clip);
      }
    }
  }, {
    key: 'togglePlay',
    value: function togglePlay(e) {
      e = e || window.event;
      var btn = e.target;
      var audio = document.getElementById(this.props.audio_div).querySelector('audio');

      if (!audio.paused) {
        this.setState({ playing: false }, function () {
          btn.classList.remove('active');
          audio.pause();
        });
      } else {
        this.setState({ playing: true }, function () {
          btn.classList.add('active');
          audio.play();
        });
      }
    }
  }, {
    key: 'getControls',
    value: function getControls(resource) {
      var _this = this;

      return React.createElement(
        'div',
        { className: 'controls' },
        React.createElement(
          'div',
          { className: 'play_button', onClick: function (e) {
              _this.togglePlay(e);
            } },
          this.getCorrectButton()
        ),
        React.createElement('div', { className: 'duration_elapsed' }),
        React.createElement(
          'div',
          { className: 'progress_bar' },
          React.createElement('div', { className: 'progress' })
        ),
        React.createElement('div', { className: 'duration_remaining' })
      );
    }
  }, {
    key: 'getButtons',
    value: function getButtons(resource) {
      var download = React.createElement(
        'a',
        { className: 'button download', href: this.props.file },
        'DOWNLOAD'
      );
      var link = resource.external_url.length > 0 ? React.createElement(
        'a',
        { className: 'button link', href: resource.external_url },
        resource.link_text ? resource.link_text : 'SUBSCRIBE'
      ) : null;
      return React.createElement(
        'footer',
        { className: 'fancy_audio_footer' },
        download,
        link
      );
    }
  }, {
    key: 'getHeader',
    value: function getHeader(resource) {
      return React.createElement(
        'header',
        null,
        React.createElement(
          'h3',
          { className: 'category_title' },
          React.createElement(
            'span',
            { className: 'fancy_audio_subtitle' },
            resource.subtitle
          )
        ),
        React.createElement(
          'h2',
          { className: 'fancy_audio_title' },
          resource.title
        )
      );
    }
  }, {
    key: 'getDesc',
    value: function getDesc(resource) {
      return React.createElement('div', { className: 'fancy_audio_short_description', dangerouslySetInnerHTML: { __html: resource.short_description } });
    }
  }, {
    key: 'getCorrectButton',
    value: function getCorrectButton() {
      if (this.state.playing) {
        return React.createElement(
          'svg',
          { className: 'svg_icon_container', id: 'pause_circle' },
          React.createElement(
            'g',
            { fill: 'none', fillRule: 'evenodd' },
            React.createElement('path', { d: 'M0 0h39v39H0z' }),
            React.createElement('circle', {
              cx: '19.5',
              cy: '19.5',
              r: '17.5',
              stroke: 'var(--play-stroke)',
              strokeWidth: '2'
            }),
            React.createElement('path', {
              fill: '#b9d4f0',
              fillRule: 'nonzero',
              d: 'M2.487 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H.43l-.086-.008C.148 10.91 0 10.752 0 10.562V.395L.01.315A.423.423 0 01.43 0zm5.88 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H6.31l-.086-.008c-.196-.037-.344-.196-.344-.386V.395l.009-.08A.423.423 0 016.31 0z',
              transform: 'translate(15 14)'
            })
          )
        );
      } else {
        return React.createElement(
          'svg',
          { className: 'svg_icon_container', id: 'play_circle' },
          React.createElement(
            'g',
            { fill: 'none', fillRule: 'evenodd' },
            React.createElement('path', { d: 'M0 0h39v39H0z' }),
            React.createElement('circle', {
              cx: '19.5',
              cy: '19.5',
              r: '17.5',
              stroke: 'var(--play-stroke)',
              strokeWidth: '2'
            }),
            React.createElement('path', {
              fill: '#b9d4f0',
              fillRule: 'nonzero',
              d: 'M25 19.5a.403.403 0 00-.195-.35l-8.217-5.078a.355.355 0 00-.214-.072c-.206 0-.374.18-.374.4 0 .016.003.03.004.046L16 24.645c.026.2.182.355.374.355.068 0 .132-.02.187-.055l.003.006 8.251-5.1-.003-.005A.404.404 0 0025 19.5z'
            })
          )
        );
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var that = this;
      var audio_div = this.props.audio_div;
      var klass = this.props.klass;
      var resource = this.props.resource;

      return React.createElement(
        'article',
        { className: 'fancy_audio_container', style: { "backgroundImage": 'url(' + resource.detail_image + ')' } },
        React.createElement(
          'div',
          { className: 'audio_text_area' },
          that.getHeader(resource),
          that.getDesc(resource),
          React.createElement(
            'div',
            { id: this.props.audio_div, className: 'audio_container ' + klass },
            that.getControls(resource),
            React.createElement(
              'audio',
              { controls: false, preload: 'true', muted: this.props.user_muted, loop: this.props.autoloop },
              React.createElement('source', { src: this.props.file, type: /\.mpeg$/.test(this.props.file) ? "audio/mpeg" : null }),
              'Your browser does not support the audio tag.'
            )
          ),
          that.getButtons(resource)
        ),
        React.createElement('div', { className: 'gradient_container_left' })
      );
    }
  }]);

  return FancyAudio;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x3, _x4, _x5) { var _again = true; _function: while (_again) { var object = _x3, property = _x4, receiver = _x5; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x3 = parent; _x4 = property; _x5 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//TODO Remove form submission

var FilterBar = (function (_React$Component) {
  _inherits(FilterBar, _React$Component);

  function FilterBar(props) {
    _classCallCheck(this, FilterBar);

    _get(Object.getPrototypeOf(FilterBar.prototype), "constructor", this).call(this, props);

    this.state = {
      typing: false,
      search_changed: false,
      advanced_filters: this.props.filtering ? this.props.filtering.slice() : []
    };
    this.live_search_fn = null;
  }

  _createClass(FilterBar, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this.props.advanced) {
        // We need to set the values in the array of objects that hold the advanced filters'
        // state so that it can be decoded by the api controller.
        var count = this.props.advanced_rows ? this.props.advanced_rows : 5;
        var all_filters = this.state.advanced_filters.slice();
        for (var i = 0; i < count; i++) {
          // Set the select boxes that choose the field to search
          var search_item = this.props.select_boxes[0][0] + i;
          var si_idx = all_filters.findIndex(function (af) {
            return af.name == search_item;
          });
          if (si_idx == -1) {
            all_filters.push({ name: search_item, value: this.props.select_boxes[0][2][1], advanced: true }); // Sets the value of the select to json blob "option_1"
          }
          // Set the values of the search boxes
          var search_term = "searchTerm" + i;
          var st_idx = all_filters.findIndex(function (af) {
            return af.name == search_term;
          });
          if (st_idx == -1) {
            all_filters.push({ name: search_term, value: "", advanced: true });
          }
          // Set the values of the join terms
          var join_term = "joinTerm" + i;
          var j_idx = all_filters.findIndex(function (af) {
            return af.name == join_term;
          });
          if (j_idx == -1) {
            all_filters.push({ name: join_term, value: "", advanced: true });
          }
        }
        this.setState({ advanced_filters: all_filters });
      }
    }
  }, {
    key: "submitOnEnter",
    value: function submitOnEnter(e) {
      if (e.key === 'Enter') {
        this.props.changeSearch(e);
        $(e.target).blur();
        this.setState({ search_changed: false });
      } else {
        this.setState({ search_changed: true });
      }
    }
  }, {
    key: "liveSearch",
    value: function liveSearch(e) {
      var that = this;
      e.persist();
      if (this.live_search_fn) {
        clearTimeout(that.live_search_fn);
      }
      that.setState({ typing: true }, function () {
        that.live_search_fn = setTimeout(function () {
          that.props.searchFn(e, function () {
            that.props.changeSearch(e);
          });
          that.setState({ typing: false });
        }, 100);
      });
      if (e.key === 'Enter') {
        $(e.target).blur();
      }
    }
  }, {
    key: "changeSearch",
    value: function changeSearch(e) {
      var that = this;
      e.persist();
      this.setState({ search_changed: false }, function () {
        that.props.changeSearch(e);
      });
    }
  }, {
    key: "getFilterLinkHtml",
    value: function getFilterLinkHtml(select, i, selected) {
      var _this = this;

      var options = select[1];
      var selected_val = typeof selected == "object" ? selected.value : select[2][1];
      var that = this;
      return React.createElement(
        "div",
        { key: 99, className: "filter_links" },
        React.createElement(
          "a",
          { key: 1000 + i, onClick: function (e) {
              _this.props.changeFilters(e);
            }, "data-for-select": select[0], "data-select-val": select[2][1], className: select[2][1] == selected_val ? "current" : "" },
          select[2][0]
        ),
        options.map(function (option, j) {
          var option_val = Array.isArray(option) ? option[1] : option;
          if (Array.isArray(option) && option.length == 3) {
            // return a normal link
            return React.createElement(
              "a",
              { key: 2000 + j, href: option[1] },
              option[0]
            );
          } else {
            // return a filter link
            return React.createElement(
              "a",
              { key: 2000 + j, className: option_val == selected_val ? "current" : "", onClick: function (e) {
                  that.props.changeFilters(e);
                }, "data-for-select": select[0], "data-select-val": option_val },
              Array.isArray(option) ? option[0] : option
            );
          }
        })
      );
    }
  }, {
    key: "getFirstOption",
    value: function getFirstOption(select) {
      if (select[2]) {
        return React.createElement(
          "option",
          { value: select[2][1] },
          select[2][0]
        );
      } else {
        return null;
      }
    }
  }, {
    key: "getSelectHtml",
    value: function getSelectHtml(select, i, selected) {
      var _this2 = this;

      var on_change = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];

      var options = select[1];
      return React.createElement(
        "select",
        { key: i,
          id: select[0],
          name: select[0],
          value: typeof selected == "object" ? selected.value : select[2][1],
          className: select[4] ? select[4] : "filter",
          onChange: function (e) {
            typeof on_change == "function" ? on_change(e) : _this2.props.changeFilters(e);
          } },
        this.getFirstOption(select),
        options.map(function (option, j) {
          return React.createElement(
            "option",
            { key: j, value: Array.isArray(option) ? option[1] : option },
            Array.isArray(option) ? option[0] : option
          );
        })
      );
    }
  }, {
    key: "submitAdvanced",
    value: function submitAdvanced(e) {
      e.preventDefault();

      this.props.advanced_submit(this.state.advanced_filters);
    }
  }, {
    key: "setAdvancedFilters",
    value: function setAdvancedFilters(e, i) {
      var filters = this.state.advanced_filters.slice();
      var changed_filter_idx = filters.findIndex(function (f) {
        return f.name == e.target.name;
      });
      if (changed_filter_idx == -1) {
        filters.push({ name: e.target.name, value: e.target.value });
      } else {
        filters[changed_filter_idx].value = e.target.value;
      }

      this.setState({ advanced_filters: filters });
    }
  }, {
    key: "renderAdvanced",
    value: function renderAdvanced() {
      var count = arguments.length <= 0 || arguments[0] === undefined ? 5 : arguments[0];

      var rows = [];
      var that = this;
      var filtering = that.state.advanced_filters ? that.state.advanced_filters : [];
      var select_boxes = this.props.select_boxes.filter(function (sb) {
        return sb[4];
      });

      for (var i = 0; i < count; i++) {
        rows.push(select_boxes[0].slice());
        rows[i][0] += i; // Appends index to 'name' and 'id' attributes
        rows[i][4] = "filter1"; // Class for advanced search select box
      }
      return React.createElement(
        "div",
        { className: "section_search" },
        rows.map(function (row, i) {
          var selected = filtering.find(function (f) {
            return f.name == row[0];
          });
          var search_param = filtering.find(function (f) {
            return f.name == "searchTerm" + i;
          });
          var selected_conjunction = filtering.find(function (f) {
            return f.name == "joinItem" + i;
          });
          return React.createElement(
            "div",
            { className: "search_row", key: i },
            that.getSelectHtml(row, i, selected, function (e) {
              that.setAdvancedFilters(e, i);
            }),
            React.createElement(
              "div",
              { className: "search_binder" },
              React.createElement("input", { className: "search_field", name: "searchTerm" + i, id: "searchTerm" + i, type: "text", value: search_param ? search_param.value : "", onChange: function (e) {
                  that.setAdvancedFilters(e, i);
                } })
            ),
            that.getSelectHtml(["joinItem" + i, [["or", "or"]], ["and", "and"], false, "conjunction"], i + rows.length, selected_conjunction, function (e) {
              that.setAdvancedFilters(e, i);
            })
          );
        }),
        React.createElement(
          "footer",
          null,
          React.createElement("input", { className: "button", type: "submit", value: "Submit", onClick: this.submitAdvanced.bind(this) })
        )
      );
    }
  }, {
    key: "renderAdvancedToggle",
    value: function renderAdvancedToggle() {
      if (this.props.advanced) {
        return React.createElement(
          "a",
          { className: "gl_advanced_toggle", href: "#filter_bar", onClick: this.props.toggle_advanced },
          this.props.is_advanced ? ' Basic search' : ' Advanced search'
        );
      }
    }
  }, {
    key: "render",
    value: function render() {
      var that = this;
      var filtering = that.props.filtering ? that.props.filtering : [];
      var onKeyUp = undefined;
      if (that.props.search && that.props.search == "live") {
        var search_type = "live";
        onKeyUp = function (e) {
          that.liveSearch(e);
        };
      } else {
        var search_type = "normal";
        onKeyUp = function (e) {
          that.submitOnEnter(e);
        };
      }

      var select_boxes = null;
      if (that.props.select_boxes) {
        var select_boxes = that.props.select_boxes.filter(function (sb) {
          return sb.length < 5 || !sb[4];
        });
      }

      return React.createElement(
        "section",
        { className: "filter_bar" + (this.props.advanced ? ' advanced_search' : ''), name: "filter_bar" },
        this.props.advanced && this.props.is_advanced ? this.renderAdvanced(this.props.advanced_rows) : React.createElement(
          "div",
          { className: "section_search" },
          that.props.search && (typeof that.props.search == "string" && that.props.search.match(/true|live/) || that.props.search == true) ? React.createElement(
            "div",
            { className: "search_binder" },
            React.createElement("input", { className: "search_field", name: "search", placeholder: this.props.placeholder ? this.props.placeholder : "search", type: "text", value: that.props.searching, onChange: function (e) {
                that.props.searchFn(e);
              }, onKeyUp: onKeyUp }),
            search_type == "normal" && that.state.search_changed || that.props.searching == "" ? React.createElement("input", { className: "search_submit", type: "submit", value: "", onClick: function (e) {
                that.changeSearch(e);
              } }) : React.createElement(
              "div",
              { className: "search_clear", onClick: function (e) {
                  that.props.clearSearch(e);
                } },
              React.createElement("div", { className: "search_clear_icon" })
            )
          ) : null,
          select_boxes ? select_boxes.map(function (select, i) {
            var selected = filtering.find(function (f) {
              return f.name == select[0];
            });
            // console.log("selected value: " + selected);
            var filter_links = select[3];
            if (filter_links) {
              return that.getFilterLinkHtml(select, i, selected);
            } else {
              return that.getSelectHtml(select, i, selected);
            }
          }) : null
        ),
        this.renderAdvancedToggle()
      );
    }
  }]);

  return FilterBar;
})(React.Component);
var FlickrGroupGallery = function (props) {
  var api_url = 'https://api.flickr.com/services/rest/?method=flickr.groups.pools.getPhotos&api_key=' + props.api_key + '&group_id=' + props.group_id + '&per_page=' + props.options.per_page + '&format=json&nojsoncallback=1';
  return React.createElement(PhotoGallery, { title: props.title, api_url: api_url, per_page: props.per_page });
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GlossaryItemListItem = (function (_React$Component) {
	_inherits(GlossaryItemListItem, _React$Component);

	function GlossaryItemListItem(props) {
		_classCallCheck(this, GlossaryItemListItem);

		_get(Object.getPrototypeOf(GlossaryItemListItem.prototype), "constructor", this).call(this, props);
		this.state = { open: false };
	}

	_createClass(GlossaryItemListItem, [{
		key: "getCredit",
		value: function getCredit() {
			if (this.props.item.credit != "") {
				return React.createElement(
					"div",
					{ className: "credit" },
					"Source: ",
					React.createElement("span", { dangerouslySetInnerHTML: { __html: this.props.item.credit } })
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getImageOrVideo",
		value: function getImageOrVideo() {
			if (this.props.item.list_view_image_url) {
				return React.createElement(
					"figure",
					{ className: "glossary_image" },
					React.createElement("img", { src: this.props.item.list_view_image_url, alt: this.props.item.list_view_image_alt }),
					React.createElement("figcaption", { dangerouslySetInnerHTML: { __html: this.props.item.caption } })
				);
			} else if (this.props.item.video_embed_code) {
				return React.createElement(
					"figure",
					{ className: "glossary_image" },
					React.createElement("div", { className: "glossary_embed", dangerouslySetInnerHTML: { __html: this.props.item.video_embed_code } }),
					React.createElement("figcaption", { dangerouslySetInnerHTML: { __html: this.props.item.caption } })
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getDefinition",
		value: function getDefinition() {
			var item = this.props.item;
			if (this.state.open) {
				return React.createElement(
					"div",
					{ className: "definition" },
					this.getImageOrVideo(),
					React.createElement("p", { dangerouslySetInnerHTML: { __html: item.definition } }),
					this.getCredit()
				);
			} else {
				var def = item.short_definition ? item.short_definition : item.definition;
				return React.createElement(
					"div",
					{ className: "short_def" },
					React.createElement("p", { dangerouslySetInnerHTML: { __html: def } })
				);
			}
		}
	}, {
		key: "getToggle",
		value: function getToggle() {
			var _this = this;

			var item = this.props.item;
			if (item.short_definition || item.list_view_image_url || item.video_embed_code) {
				return React.createElement(
					"a",
					{ className: "show_more", onClick: function (e) {
							_this.toggleOpen(e);
						} },
					this.state.open ? '- less' : '+ more'
				);
			} else {
				return null;
			}
		}
	}, {
		key: "toggleOpen",
		value: function toggleOpen(e) {
			this.setState({ open: !this.state.open });
		}
	}, {
		key: "render",
		value: function render() {
			var item = this.props.item;
			return React.createElement(
				"div",
				{ className: "image_and_description_container glossary_item" },
				React.createElement("a", { name: "item_" + item.id }),
				React.createElement(
					"div",
					{ className: "list_text" },
					React.createElement(
						"h3",
						{ className: "title" },
						item.title
					),
					this.getDefinition(),
					this.getToggle()
				)
			);
		}
	}]);

	return GlossaryItemListItem;
})(React.Component);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Gridlist Component (SPA-style included) [updated from gridlist refactor 6/26/2019] -nmj

//This is necessary since some pages don't have GridListPage but do have GridList component

var GridListPage = (function (_React$Component) {
  _inherits(GridListPage, _React$Component);

  function GridListPage(props) {
    _classCallCheck(this, GridListPage);

    _get(Object.getPrototypeOf(GridListPage.prototype), "constructor", this).call(this, props);
    this.state = {
      grid_list_view: this.props.default_view

    };
  }

  _createClass(GridListPage, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var that = this;
      $("body").on("show_list_view", function () {
        that.setState({ grid_list_view: "list_view" });
      });
      $("body").on("show_grid_view", function () {
        that.setState({ grid_list_view: "grid_view" });
      });

      if (this.props.options) {
        if (this.props.options.spa != 'undefined' && this.props.options.spa == true) {
          $('body').addClass('dynamic_grid_list');
        }
      }
    }
  }, {
    key: "render",
    value: function render() {
      var that = this;
      var klass = this.props.options && this.props.options.spa == true ? "grid_gallery module dynamic_grid content_page " : "grid_gallery module content_page ";
      var padding = this.props.options && this.props.options.no_top_padding === true ? "no_top_padding " : "";
      var use_subtitle = this.props.options && this.props.options.subtitle && this.props.options.subtitle != '';
      var subtitle = use_subtitle ? React.createElement(
        "h3",
        { className: "grid_list_subtitle" },
        this.props.options.subtitle
      ) : null;
      return React.createElement(
        "section",
        { className: klass + padding + that.state.grid_list_view },
        subtitle,
        React.createElement(GridList, that.props)
      );
    }
  }]);

  return GridListPage;
})(React.Component);

var GridList = (function (_React$Component2) {
  _inherits(GridList, _React$Component2);

  function GridList(props) {
    _classCallCheck(this, GridList);

    _get(Object.getPrototypeOf(GridList.prototype), "constructor", this).call(this, props);
    this.filters = null;
    this.state = this.getInitialState();
  }

  _createClass(GridList, [{
    key: "getInitialState",
    value: function getInitialState() {
      var title = this.props.title != '' ? this.props.title : document.title;
      var that = this;

      // Create the filtering object based on passed in filters
      if (this.props.filters) {
        this.filters = JSON.parse(this.props.filters);
        var filtering = this.filters.filter(function (f) {
          return !f[2] || f[2][1] != ""; //if option 1 is not blank or if it doesn't exist at all...
        }).map(function (f) {
          var value = f[2] ? f[2][1] : f[1][0][1]; //usually use f[2] which is first option, but sometimes this dne then use the first option of option 2
          return { name: f[0], value: value };
        });
      } else {
        var filtering = [];
      }

      //check if any items are initially selected
      if (this.filters) {
        this.filters.map(function (f) {
          console.log("checking param", f[0]);
          var param = null;

          if (that.getOptions().advanced && f[4] == true) {
            // f[4] == true indicates that this is an advanced filter
            var rows = that.getOptions().rows ? that.getOptions().rows : 5;
            filtering = []; // Empty array to use advanced versions of params
            for (var i = 0; i < rows; i++) {
              var search_item_param = mb_utils.getParam(f[0] + i);
              if (search_item_param && search_item_param != "") {
                filtering.push({ name: f[0] + i, value: Array.isArray(search_item_param) ? search_item_param[0].replace("+", " ") : search_item_param, advanced: true });
              }
              var search_term_param = mb_utils.getParam("searchTerm" + i);
              if (search_term_param && search_term_param != "") {
                filtering.push({ name: "searchTerm" + i, value: Array.isArray(search_term_param) ? search_term_param[0].replace("+", " ") : search_term_param, advanced: true });
              }
              var join_item_param = mb_utils.getParam("joinItem" + i);
              if (join_item_param && join_item_param != "") {
                filtering.push({ name: "joinItem" + i, value: Array.isArray(join_item_param) ? join_item_param[0].replace("+", " ") : join_item_param, advanced: true });
              }
            }
          } else if (f.length < 5 || !f[4]) {
            // absence or falsity of f[4] indicates that this is not an advanced filter

            var category_param = mb_utils.getParam(f[0]);
            if (category_param && category_param != "") {
              param = category_param;
            } else if (/^scope/.test(f[0])) {
              var scope_param = that.getRegexParam(/^condition_\d+=1(%3A|:)featured/);
              if (scope_param.length > 0) {
                param = "featured";
              }
            } else if (/^date/.test(f[0])) {
              if (that.props.model == "publications") {
                var date_param = that.getRegexParam(/^condition_\d+=\d+(%3A|:)publication_year/);
                if (date_param.length > 0) {
                  var match = date_param[0].match(/^condition_\d+=(\d+)(%3A|:)publication_year/);
                  param = match ? match[1] : null;
                }
              } else {
                var date_param = mb_utils.getParam("year");
                if (date_param && date_param.length > 0) {
                  var re = that.props.model == "events" ? /^(\d+)(%3A|:)start_date/ : /^(\d+)(%3A|:)publish_date/;
                  var match = Array.isArray(date_param) ? date_param[0].match(re) : date_param.match(re);
                  param = match ? match[1] : null;
                }
              }
            } else if (/^field/.test(f[0])) {
              var field = f[0].match(/^field_(.+)/)[1];
              var q = that.getRegexParam(field);
              if (q.length > 0) {
                var match = q[0].match("condition_\\d+=(.+)(%3A|:)" + field);
                param = match ? match[1] : null;
              }
            } else if (/^tag/.test(f[0])) {
              var tag_param = mb_utils.getParam("tags");
              if (tag_param && tag_param.length > 0) {
                var tag_params = Array.isArray(tag_param) ? tag_param[0].replace(/\+/g, " ").split(":") : tag_param.replace(/\+/g, " ").split(":");
                var tag_filters = f[1].map(function (tag) {
                  return tag[1];
                });
                var tags = tag_filters.filter(function (n) {
                  return tag_params.indexOf(n) !== -1;
                });
                if (tags.length > 0) {
                  param = tags[0];
                }
              }
            } else {
              // assume it is a category and attempt to get values
              var categories = mb_utils.getParam("category");
              if (categories && categories.length > 0) {
                categories = Array.isArray(categories) ? categories[0] : categories;
                var p_cats = categories.split(":");
                var f_cats = f[1].map(function (cat) {
                  return cat[1].toString();
                });
                var cats = f_cats.filter(function (n) {
                  return p_cats.indexOf(n) !== -1;
                });
                if (cats.length > 1) {
                  console.log("Multiple candidate categories found...setting to first option");
                }
                if (cats.length > 0) {
                  param = cats[0];
                }
              }
            }
            if (param && param != "") {
              console.log("found param", param);
              var in_already = false;
              filtering.map(function (g) {
                if (g.name == f[0]) {
                  in_already = true;
                  g.value = Array.isArray(param) ? param[0] : param;
                }
              });
              if (!in_already) {
                filtering.push({ name: f[0], value: Array.isArray(param) ? param[0] : param });
              }
            }
          }
        });
      }

      // parse id from URL parameters if found
      var dl = document.location.href.toString();
      var initial_id = parseInt(dl.slice(dl.indexOf('#') + 1));

      var search = mb_utils.getParam('search');

      return {
        items: [],
        initial_items: [],
        page: 0,
        per_page: this.props.per_page ? this.props.per_page : 40,
        total: 0,
        order: this.props.order ? this.props.order : "created_at desc",
        title: title,
        grid_list_url: location.pathname,
        grid_list_page_title: document.title, // gets page title as created by app helper
        grid_list_social_image: $('meta[property="og:image"]').attr('content'),
        grid_list_social_description: $('meta[name="description"]').attr('content'),
        grid_list_page_updated_at: $('meta[property="og:updated_time"]').attr('content'),
        article: null,
        filtering: filtering,
        searching: search ? search[0].replace("+", " ") : "",
        initial_id: initial_id,
        first_load: true,
        view_toggle: this.props.view_toggle ? this.props.view_toggle : false,
        loading: false,
        history_state_loaded: false,
        back_clicked: false,
        current_request: null,
        is_advanced: false
      };
    }
  }, {
    key: "setHistoryStateLoaded",
    value: function setHistoryStateLoaded() {
      this.setState({ history_state_loaded: true });
    }
  }, {
    key: "componentWillMount",
    value: function componentWillMount() {
      var that = this;
      // call main.initListeners after data loads to init fancybox etc.
      this.getData(false, main.initListeners);
    }
  }, {
    key: "getRegexParam",
    value: function getRegexParam(regex) {
      var q = location.search.substr(1).split("&").filter(function (p) {
        var re = new RegExp(regex);
        return re.test(p);
      });
      return q;
    }
  }, {
    key: "getData",
    value: function getData(append_items, callback) {

      if (this.state.loading) {
        this.state.current_request.abort();
      }

      var that = this;
      var params = {
        page: append_items ? this.state.page + 1 : 0,
        per_page: this.state.per_page,
        order: this.state.order
      };

      // search: this.state.searching,
      if (this.getOptions().full_text_search) {
        $.extend(params, { fts: this.state.searching });
      } else {
        $.extend(params, { search: this.state.searching });
      }
      $.extend(params, this.props.options);
      $.extend(params, this.getConditions());
      $.extend(params, this.getFilters());

      var api_url = '';
      if (this.props.options && typeof this.props.options.external_api_url != 'undefined') {
        api_url = this.props.options.external_api_url;
      } else {
        api_url = "/api/v1/" + that.props.model + "/";
      }

      var asset_url = '';

      if (this.props.options && typeof this.props.options.external_asset_url != 'undefined') {
        asset_url = this.props.options.external_asset_url;
      }

      // console.log('GridListPage:: replace History state')
      if (this.getOptions().advanced && this.state.is_advanced) {
        (function () {
          var advanced_params = {};
          that.state.filtering.map(function (ap) {
            advanced_params[ap.name] = ap.value;
          });
          window.history.replaceState(params, null, "?" + $.param(params) + "&" + $.param(advanced_params));
        })();
      } else {
        window.history.replaceState(params, null, "?" + $.param(params));
      }

      this.setSessionStore(params);

      var current_request = $.ajax({
        url: api_url,
        data: params,
        method: "GET",
        dataType: "json",
        success: (function (data) {
          console.log("Got items successfully.... ");

          var initial_id = that.state.initial_id;
          var initial_article = undefined;

          if (data.first_load || this.state.first_load) {
            data.initial_items = data.items;
          }

          if (typeof initial_id != 'undefined') {
            initial_article = data.items.find(function (z) {
              return z.id == initial_id;
            });
            if (initial_article) {
              data.article = initial_article;
            }
          }

          if (!that.state.first_load && that.state.initial_id) {
            that.setState({ initial_id: null });
          }

          var options = this.getOptions();
          if (options && options.multi_item && options.multi_item_match && options.multi_item_sort) {
            data.items = this.getMultiItem(data, options.multi_item_match, options.multi_item_sort);
          }

          // If the more button was pressed, concat new items to current list
          if (append_items) {
            that.setState({
              items: that.state.items.concat(data.items),
              title: that.state.title,
              total: data.total,
              per_page: data.per_page,
              page: data.page,
              asset_url: asset_url,
              first_load: false,
              loading: false
            });
            // Otherwise, get new items based on form submit
          } else {
              data["first_load"] = false;
              that.setState($.extend(data, { loading: false }));
            }
          if (typeof callback == "function") callback.call();
        }).bind(this),
        error: (function (xhr, status, err) {
          if (status == "abort") {
            that.setState({ loading: false, current_request: null });
          } else {
            console.error(status, err.toString());
          }
        }).bind(this)
      });

      this.setState({ current_request: current_request, loading: true });
    }

    // run when more button is pressed, just uses current state and increments this.state.page by 1
    // probably can get rid of this..
  }, {
    key: "getMore",
    value: function getMore(e) {
      e.preventDefault();

      this.getData(true);
    }
  }, {
    key: "getConditions",
    value: function getConditions() {
      var conditions = this.props.conditions;
      var conditions_obj = {};
      if (conditions && typeof conditions != "undefined") {
        $.each(conditions, function (i, condition) {
          conditions_obj["condition_" + (i + 1)] = condition.value + ":" + condition.name;
        });
      }
      return conditions_obj;
    }
  }, {
    key: "getOptions",
    value: function getOptions() {
      var options = this.props.options;

      if (typeof options != "undefined" && options != null) {
        return options;
      } else {
        return {};
      }
    }
  }, {
    key: "getFilters",
    value: function getFilters() {
      var that = this;
      var filtering = this.state.filtering;
      var params = {};
      var categories = that.props.categories ? that.props.categories.slice() : []; //copy categories array
      var tags = this.getTags();
      var conditions_count = that.props.conditions ? that.props.conditions.length + 1 : 1;
      $.each(filtering, function (i, param) {
        console.log("param " + param.name + ": " + param.value);
        if (param.value != "") {
          if (that.getOptions().advanced && that.state.is_advanced && param.advanced) {
            params[param.name] = param.value;
          } else if (!param.advanced) {

            if (param.name == "date") {
              if (that.props.model == "publications") {
                params["condition_" + conditions_count] = param.value + ":publication_year";
                conditions_count += 1;
              } else if (that.props.model == "events") {
                // Upcoming events
                if (param.value == "upcoming") {
                  var d = new Date();
                  params["condition_" + conditions_count] = d.getFullYear().toString() + '-' + (d.getMonth() + 1).toString() + '-' + d.getDate().toString() + ':start_date:gte';
                  conditions_count += 1;
                } else if (param.value == "past") {
                  var d = new Date();
                  params["condition_" + conditions_count] = d.getFullYear().toString() + '-' + (d.getMonth() + 1).toString() + '-' + d.getDate().toString() + ':start_date:lte';
                  conditions_count += 1;
                } else {
                  params.year = param.value + ":start_date";
                }
              } else if (that.props.model == "documents") {
                params.year = param.value + ":date";
              } else {
                params.year = param.value + ":publish_date";
              }
            } else if (param.name == "scope" && param.value.toLowerCase() == "featured") {
              params["condition_" + conditions_count] = "1:featured";
              conditions_count += 1;
            } else if (param.name == "scope" && param.value.toLowerCase() == "all") {
              // this is not a condition we want to add
            } else if (/^field/.test(param.name)) {
                // To add select box for any field name; i.e. field_author to select the "author" field
                var field_name = param.name.match(/^field_(.+)/)[1];
                params["condition_" + conditions_count] = param.value + ":" + field_name;
                conditions_count += 1;
              } else if (/^tag/.test(param.name)) {
                if (tags.length > 0) {
                  tags += ":"; // changed from comma, since for separate params we want them ANDed together
                }
                tags += param.value;
              } else {
                //this used to be limiting to if (/^(type|topic|category)$/.test(param.name)) but list seemed arbitrary, pulling for now so we can have select boxes named topics,foo etc.
                categories.push(param.value);
              }
          }
        }
      });
      if (categories.length > 0) {
        params.category = categories.join(":");
      }
      if (tags.length > 0) {
        params.tags = tags;
      }
      return params;
    }
  }, {
    key: "getTags",
    value: function getTags() {
      var options = this.getOptions();
      if (options && options.tags) {
        return options.tags;
      } else {
        return "";
      }
    }
  }, {
    key: "getBlankScope",
    value: function getBlankScope() {
      var options = this.getOptions();
      if (options && options.blank_scope) {
        return options.blank_scope;
      } else {
        return "All";
      }
    }
  }, {
    key: "getOptionName",
    value: function getOptionName(name, value) {
      var field = this.filters.find(function (f) {
        return f[0] == name;
      });
      if (typeof field == "undefined") {
        return "";
      } else {
        // make shallow duplicate of array so the filters aren't modified
        var f = field[1].slice();
        // put default option into array of options
        f.unshift(field[2]);
        // find the field whose value matches and return its name to put in the title
        var field_opt = f.find(function (g) {
          return g.length == 2 ? g[1].toString() == value : g[0].toString() == value;
        });
        // return humanize(field_opt[0]);
        return field_opt[0];
      }
      return "";
    }

    // When filters change, title must change to reflect them.
  }, {
    key: "getTitleFromParams",
    value: function getTitleFromParams(params) {
      var title = this.props.title;
      var that = this;

      if (this.filters) {
        var scope = "",
            type = title,
            date = "",
            topic = "",
            search = "";

        $.each(params, function (i, param) {
          if (param.value != "") {
            if (param.name == "type" || param.name == "category") {
              type = that.getOptionName(param.name, param.value);
            } else if (param.name == "scope") {
              scope = that.getOptionName(param.name, param.value);
            } else if (param.name == "topic") {
              topic = that.getOptionName(param.name, param.value);
            } else if (param.name == "date") {
              if (param.value != "upcoming") {
                date = "in " + param.value;
              }
            } else if (param.name == "search") {
              search = "matching '" + param.value + "'";
            }
          }
        });

        if (this.state && this.state.searching != "") {
          search = "matching '" + this.state.searching + "'";
        }

        // special cased for when params are all blank
        if (this.props.scope_in_title && scope == "" && topic == "" && date == "" && search == "") {
          scope = this.getBlankScope();
        }

        // build title from params
        var title_array = [scope, topic, type, date, search].filter(function (p) {
          return p != "";
        });
        title = title_array.join(" ");
      }

      return title;
    }

    // function to allow typing into search field, gets passed to FilterBar
  }, {
    key: "applySearch",
    value: function applySearch(e, callback) {
      this.setState({ searching: e.target.value }, function () {
        if (callback) {
          callback.call();
        }
      });
    }
  }, {
    key: "clearFiltersSearch",
    value: function clearFiltersSearch(callback) {
      var _this = this;

      this.setState({ filters: null, searching: "", article: null }, function () {
        _this.getData(false, callback);
      });
    }
  }, {
    key: "clearSearch",
    value: function clearSearch() {
      this.setState({ searching: "" }, function () {
        this.getData(false);
      });
    }
  }, {
    key: "setSearch",
    value: function setSearch() {
      this.setState({ title: this.getTitleFromParams(this.state.filtering) }, this.getData(false));
    }
  }, {
    key: "setSessionStore",
    value: function setSessionStore(params) {
      if (typeof Storage !== "undefined") {
        sessionStorage[this.props.model] = JSON.stringify(params);
      } else {
        console.error("No web storage.");
      }
    }

    // called when changing filters
  }, {
    key: "applyFilters",
    value: function applyFilters(e) {
      e.preventDefault();
      e.stopPropagation();
      var params = this.state.filtering;
      var name, value;
      if ($(e.currentTarget).is('a')) {
        name = $(e.currentTarget).data("for-select");
        value = $(e.currentTarget).data("select-val");
      } else {
        name = e.target.name;
        value = e.target.value;
      }
      var current_filter = params.findIndex(function (p) {
        return p.name == name;
      });
      if (current_filter == -1) {
        params.push({ name: name, value: value });
      } else {
        params[current_filter].value = value;
      }
      console.log('FORM PARAMS: ', params);
      this.setState({ filtering: params, title: this.getTitleFromParams(params) }, function () {
        console.log('FILTERING: ', this.state.filtering);

        this.getData(false);
      });
    }
  }, {
    key: "advancedSubmit",
    value: function advancedSubmit(props) {
      console.log("advancedSubmit");

      this.setState({ filtering: props }, function () {
        this.getData(false);
      });
    }
  }, {
    key: "setListSort",
    value: function setListSort(e) {
      this.setState({ order: e.target.dataset.value }, function () {
        this.getData(false);
      });
    }
  }, {
    key: "toggleListSort",
    value: function toggleListSort(sort_string) {
      if (this.state.order == sort_string) {
        this.setState({ order: this.props.order }, function () {
          this.getData(false);
        });
      } else {
        this.setState({ order: sort_string }, function () {
          this.getData(false);
        });
      }
    }
  }, {
    key: "getCorrectTitle",
    value: function getCorrectTitle(klass) {
      if (this.props.results_in_title) {
        return this.getTitle(klass, this.state.title);
      } else {
        return this.getTitle(klass, this.props.title);
      }
    }
  }, {
    key: "getTitle",
    value: function getTitle(klass, title) {
      if (title) {
        return React.createElement(
          "h2",
          { className: klass },
          title
        );
      } else {
        return "";
      }
    }
  }, {
    key: "getMultiItem",
    value: function getMultiItem(data, match, sort) {
      console.log("matching list items using:", match);

      // construct array consisting of properties to be matched using "match" argument, for example: "publish_date"
      var match_properties = [];
      for (var i = 0; i < data.items.length; i++) {
        match_properties.push(data.items[i][match]);
      }

      // remove duplicates properties from above leaving us with one property per match
      match_properties = match_properties.filter(function (a, b) {
        return match_properties.indexOf(a) === b;
      });

      // create a new array for every unique matched property, for example: all items with the same "publish_date"
      // then put all above arrays into a patent array
      var parent_array = [];
      for (var i = 0; i < match_properties.length; i++) {
        var sub_array = [];

        for (var j = 0; j < data.items.length; j++) {
          if (match_properties[i] === data.items[j][match]) {
            sub_array.push(data.items[j]);
          }
        }

        if (sub_array.length > 0) {
          parent_array.push(sub_array);
        }
      }

      // sort elements of sub array using sort array based on category_titles
      console.log("sorting list items using: ", sort);

      // this could be passed in though options if this type of sorting gets used more -smb
      // it will need to be passed though to any module that might need to use it as well.
      // this is the index in the array "category_titles" that we are using to sort our items by
      // values stored in this index should match up with the strings in our "multi_item_sort" array
      var category_title_index = 1; // "subcategory" for nrt resources

      // sort sub arrays into the order declared by our "multi_item_sort" array
      for (var i = 0; i < parent_array.length; i++) {
        var current_sub_array = parent_array[i];
        var sorted_sub_array = [];

        for (var j = 0; j < sort.length; j++) {
          var sort_string = sort[j];

          for (var k = 0; k < current_sub_array.length; k++) {
            if (current_sub_array[k].category_titles[category_title_index]) {
              if (current_sub_array[k].category_titles[category_title_index] === sort_string) {
                sorted_sub_array.push(current_sub_array[k]);
              }
            }
          }
        }

        if (sorted_sub_array.length > 0) {
          parent_array[i] = sorted_sub_array;
        }
      }

      // assemble sub arrays into objects with their own unique ids
      var items_array = [];
      for (var i = 0; i < parent_array.length; i++) {
        var item = { "id": i, "items": parent_array[i] };
        items_array.push(item);
      }

      return items_array;
    }
  }, {
    key: "toggleAdvanced",
    value: function toggleAdvanced() {
      this.setState({ is_advanced: !this.state.is_advanced, searching: "", filtering: [] }, this.getData);
    }
  }, {
    key: "renderHeader",
    value: function renderHeader() {
      var view_toggle = undefined;
      var article_nav = undefined;
      var gallery_header_klass = "";

      if (this.props.view_toggle) {
        view_toggle = React.createElement(ViewToggle, null);
      }

      if (this.state.article) {
        $('body').addClass('grid_list_detail');
      } else {
        $('body').removeClass('grid_list_detail');
      }

      if (this.props.options && typeof this.props.options.gallery_header_klass != 'undefined') {
        gallery_header_klass = this.props.options.gallery_header_klass;
      }

      if (this.props.title_below_filters) {
        return React.createElement(
          "header",
          { className: "gallery_header left_align " + gallery_header_klass },
          this.renderFilters(),
          this.getCorrectTitle(""),
          view_toggle
        );
      } else {
        return React.createElement(
          "header",
          { className: "gallery_header " + gallery_header_klass },
          this.getCorrectTitle("module_title"),
          this.getOptions().about_text ? React.createElement(
            "p",
            null,
            this.getOptions().about_text
          ) : null,
          this.renderFilters(),
          this.renderSortOptions(),
          view_toggle
        );
      }
    }
  }, {
    key: "renderFilters",
    value: function renderFilters() {
      var _this2 = this;

      var opts = this.getOptions();
      if (this.filters || this.props.search) {
        return React.createElement(FilterBar, { advanced: opts.advanced,
          advanced_rows: opts.rows,
          advanced_submit: function (props) {
            _this2.advancedSubmit(props);
          },
          is_advanced: this.state.is_advanced,
          toggle_advanced: function (e) {
            _this2.toggleAdvanced();
          },
          select_boxes: this.filters,
          search: this.props.search,
          placeholder: opts.placeholder,
          changeFilters: function (e) {
            _this2.applyFilters(e);
          },
          changeSearch: function () {
            _this2.setSearch();
          },
          clearSearch: function () {
            _this2.clearSearch();
          },
          filtering: this.state.filtering,
          searching: this.state.searching,
          searchFn: function (e, callback) {
            _this2.applySearch(e, callback);
          } });
      }
    }
  }, {
    key: "renderSortOptions",
    value: function renderSortOptions() {
      var opts = this.getOptions();
      var that = this;
      /*
      <button className={"sort_toggle" + (this.state.order == opts.sort_options[0].value ? " active" : "")} onClick={ function(){ that.toggleListSort(opts.sort_options[0].value) } }>
        {opts.sort_options[0].name}
      </button>
      */
      if (opts.sort_options) {
        return React.createElement(
          "div",
          { className: "sort_options" },
          opts.sort_options.length > 1 ? React.createElement(
            "div",
            { className: "sort_select" },
            opts.sort_options.map(function (sort_opt) {
              var _this3 = this;

              return React.createElement(
                "div",
                { key: sort_opt.value, className: "sort_option", onClick: function () {
                    _this3.setListSort(e);
                  }, "data-value": sort_opt.value },
                sort_opt.name
              );
            })
          ) : React.createElement(
            "label",
            { className: "sort_toggle_label" },
            React.createElement("input", { type: "checkbox", name: "order", value: opts.sort_options[0].value, onChange: function () {
                that.toggleListSort(opts.sort_options[0].value);
              } }),
            React.createElement(
              "span",
              { className: "sort_toggle" },
              opts.sort_options[0].name
            )
          )
        );
      }
    }
  }, {
    key: "formatNumber",
    value: function formatNumber(num) {
      if (num.toString() != num) {
        // return empty string if num is NaN
        return "";
      } else {
        var numString = num.toString();
        var formatted = "";
        for (var i = 0; i < numString.length; i++) {
          if ((numString.length - i) % 3 == 0 && i > 0) {
            formatted += ",";
          }
          formatted += numString.charAt(i);
        }
        return formatted;
      }
    }
  }, {
    key: "renderTotal",
    value: function renderTotal() {
      if (this.getOptions().show_total && this.state.total > 0) {
        var total = this.formatNumber(this.state.total);
        return React.createElement(
          "div",
          { className: "gl_total" },
          total + " " + (total == "1" ? 'result' : 'results')
        );
      }
    }
  }, {
    key: "getNextItem",
    value: function getNextItem() {
      if (this.state.article) {
        for (var i = 0; i < this.state.items.length; i++) {
          if (i < this.state.items.length) {
            if (this.state.items[i].id === this.state.article.id) {
              if (i + 1 != this.state.items.length) {
                return this.state.items[i + 1];
              }
            }
          }
        }
        // console.log('out of range '+i);
      } else {
          return null;
        }
    }
  }, {
    key: "getPreviousItem",
    value: function getPreviousItem() {
      if (this.state.article) {
        for (var i = 0; i < this.state.items.length; i++) {
          if (this.state.items[i].id === this.state.article.id && i > 0) {
            return this.state.items[i - 1];
          }
        }
        // console.log('out of range '+i);
      } else {
          return null;
        }
    }
  }, {
    key: "renderItemList",
    value: function renderItemList() {
      var no_items_text = this.props.no_items_text ? this.props.no_items_text : "There are no items matching these criteria.";
      var that = this;
      var list_item_component = window[that.props.list_item + "ListItem"]; // safer alternative to eval
      // "Table" style column widths
      var columns = false;
      var column_widths = [];
      if (that.getOptions().list_columns) {
        (function () {
          columns = that.getOptions().list_columns;
          var default_width = (100.0 / columns.length).toString() + "%";
          column_widths = columns.map(function (c) {
            return c.width ? c.width : default_width;
          });
        })();
      }

      if (this.state.items.length > 0) {
        return React.createElement(
          "ul",
          { className: "item_list " + that.props.class_name + (that.props.left_column ? " " + that.props.default_view : "") },
          columns ? React.createElement(
            "li",
            { className: "gridlist_table_header" },
            columns.map(function (lc, i) {
              return React.createElement(
                "div",
                { key: i, className: "list_column column_header", style: { width: column_widths[i] } },
                lc.text
              );
            })
          ) : null,
          that.state.items.map(function (item) {
            return React.createElement(
              "li",
              { key: item.id, className: "slide" + (columns ? " gridlist_table_row" : "") },
              React.createElement(list_item_component, { item: item, selected_item: function (i, c) {
                  that.selectedItem(i, c);
                }, options: that.getOptions(), column_widths: column_widths })
            );
          })
        );
      } else if (this.state.first_load) {
        return "Loading...";
      } else {
        return React.createElement(
          "div",
          { className: "no_items" },
          no_items_text
        );
      }
    }
  }, {
    key: "selectedItem",
    value: function selectedItem(item, callback) {
      console.log('GridList:: selectedItem', item);
      this.setState({ article: item }, function () {

        if (item == null) {

          this.setGridListMetas();
        }
        if (typeof callback == "function") {
          callback.call();
        }
      });
    }

    // reset title and metas (on hideDetail)
  }, {
    key: "setGridListMetas",
    value: function setGridListMetas() {
      // console.log('GridListPage:: setGridListMetas')

      if (this.state.grid_list_page_title) {
        document.title = this.state.grid_list_page_title;
      }

      $('meta[property="og:title"]').attr('content', document.title);
      $('meta[name="twitter:title"]').attr('content', document.title);
      $('meta[property="og:url"]').attr('content', document.location.href);

      if (this.state.grid_list_social_image || this.props.site_share_image) {
        var share_image = this.state.grid_list_social_image ? this.state.grid_list_social_image : this.props.site_share_image;
        $('meta[property="og:image"]').attr('content', share_image);
        $('meta[name="twitter:image"]').attr('content', share_image);
        $('link[rel="image_src"]').attr('href', share_image);
      }

      if (this.state.grid_list_page_updated_at) {
        var page_updated_at = this.props.page_updated_at ? this.props.page_updated_at : this.state.grid_list_page_updated_at;
        $('meta[property="og:updated_time"]').attr('content', this.props.page_updated_at);
      }

      if (this.props.social_description || this.state.grid_list_social_description) {
        var social_description = this.props.social_description ? this.props.social_description : this.state.grid_list_social_description;
        $('meta[name="description"]').attr('content', social_description);
        $('meta[name="og:description"]').attr('content', social_description);
        $('meta[name="twitter:description"]').attr('content', social_description);
      }
    }
  }, {
    key: "hideDetail",
    value: function hideDetail() {
      // console.log("GridList:: hideDetail", document.location)
      this.selectedItem(null);
      this.renderHeader();
    }
  }, {
    key: "getItemListOrArticle",
    value: function getItemListOrArticle() {
      var _this4 = this;

      if (this.state.article) {
        var detail_item_component = window[this.props.list_item + "Detail"];
        return React.createElement(
          "div",
          null,
          React.createElement(detail_item_component, _extends({ item: this.state.detail, options: this.getOptions(), selected_item: function (i, c) {
              _this4.selectedItem(i, c);
            }, hide_detail: function () {
              _this4.hideDetail();
            }, more_people: this.state.more_people }, this.props))
        );
      } else {
        return this.renderItemList();
      }
    }
  }, {
    key: "renderMoreButton",
    value: function renderMoreButton() {
      var _this5 = this;

      var opts = this.getOptions();
      if ((this.state.page + 1) * this.state.per_page < this.state.total) {
        return React.createElement(
          "footer",
          { className: "list_footer more_button" },
          React.createElement("div", { className: "loading" }),
          React.createElement(
            "a",
            { className: opts.button_class ? opts.button_class : "button", type: "button", href: "#", onClick: function (e) {
                _this5.getMore(e);
              } },
            "More"
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: "renderSpaController",
    value: function renderSpaController() {
      var _this6 = this;

      if (this.props.options && this.props.options.spa == true && this.state.items.length > 0) {
        return React.createElement(
          "div",
          null,
          React.createElement(SpaController, _extends({ next_item: this.getNextItem(), previous_item: this.getPreviousItem(), selected_item: function (i, c) {
              _this6.selectedItem(i, c);
            },
            get_history_state_loaded: this.state.history_state_loaded, set_history_state_loaded: function () {
              _this6.setHistoryStateLoaded();
            },
            initial_id: this.state.initial_id,
            initial_items: this.state.initial_items, hide_detail: function () {
              _this6.hideDetail();
            }, article: this.state.article }, this.props))
        );
      }
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement(
        "div",
        { className: this.props.left_column ? "" : "grid_layout" },
        this.renderSpaController(),
        React.createElement(
          "article",
          null,
          this.renderHeader(),
          this.renderTotal(),
          this.getItemListOrArticle(),
          this.renderMoreButton()
        )
      );
    }
  }]);

  return GridList;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//Hi-Performance Overlay

var HiPO = (function (_React$Component) {
  _inherits(HiPO, _React$Component);

  function HiPO(props) {
    _classCallCheck(this, HiPO);

    _get(Object.getPrototypeOf(HiPO.prototype), 'constructor', this).call(this, props);
    this.spinner_opts = {
      lines: 8, // The number of lines to draw
      length: 5, // The length of each line
      width: 3, // The line thickness
      radius: 6, // The radius of the inner circle
      color: '#FFF', // #rbg or #rrggbb
      speed: 1, // Rounds per second
      trail: 100, // Afterglow percentage
      shadow: false, // Whether to render a shadow
      className: 'spinner',
      top: "50%",
      left: "50%"
    };
    this.state = {
      loaded: false,
      loading: false
    };
  }

  _createClass(HiPO, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var _this = this;

      $('body').on('feed_hipo', function (e, d) {
        _this.checkOverlay(e, d);
      });
    }
  }, {
    key: 'checkOverlay',
    value: function checkOverlay(e, d) {
      var _this2 = this;

      e.stopPropagation();
      var that = this;
      if (d && d.url) {
        console.log("load overlay");
        this.setState({ loading: true, content: null }, function () {
          _this2.loadOverlay(d.url);
        });
      } else {
        console.error("No overlay data to load.");
      }
    }
  }, {
    key: 'loadOverlay',
    value: function loadOverlay(url) {
      var that = this;
      var load_url = url + "?layout=empty&override_preview=true";
      $('#dashboard_modal_content').load(load_url, function (response, status, xhr) {
        if (status == "error") {
          var msg = "Sorry but there was an error: ";
          alert(msg + xhr.status + " " + xhr.statusText);
          that.setState({ loading: false, loaded: false });
        } else {
          that.setState({ loading: false, loaded: true }, function () {
            that.afterLoad(url);
          });
        }
      });
    }
  }, {
    key: 'afterLoad',
    value: function afterLoad(url) {
      var that = this;

      $('body').addClass('explore_overlay_open');
      $('#dashboard_modal a.close_button, .background_area').click(function () {
        that.closeOverlay();
      });

      if (typeof mb_parallax != 'undefined') {
        mb_parallax.init(true);
      }
      if (typeof mb_utils != 'undefined') {
        mb_utils.initExpandableElement();
      }

      if (typeof ReactRailsUJS === 'object') {
        ReactRailsUJS.mountComponents();
      }

      // Federated Analytics - register a pageview
      var title = $('#dashboard_modal_content title').text();
      if (typeof _sendPageview != 'undefined') {
        _sendPageview(url, title);
      }
    }
  }, {
    key: 'closeOverlay',
    value: function closeOverlay() {
      this.setState({ loaded: false }, function () {
        $('#dashboard_modal_content').empty();
        $('body').removeClass('explore_overlay_open');
      });
    }
  }, {
    key: 'render',
    value: function render() {
      return React.createElement(
        'div',
        { id: 'dashboard_modal', className: this.state.loading || this.state.loaded ? 'visible' : '', style: { height: "100%" } },
        React.createElement(Loader, { loaded: this.state.loaded || !this.state.loading, options: this.spinner_opts, className: 'spinner' }),
        React.createElement('div', { id: 'dashboard_modal_content', className: 'content ' + (this.state.loaded ? 'visible' : '') })
      );
    }
  }]);

  return HiPO;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// for use with CBM Carousel
// CBM Carousel is either of type image carousel or plain carousel module

var ImageCarousel = (function (_React$Component) {
	_inherits(ImageCarousel, _React$Component);

	function ImageCarousel(props) {
		_classCallCheck(this, ImageCarousel);

		_get(Object.getPrototypeOf(ImageCarousel.prototype), 'constructor', this).call(this, props);
		this.state = {
			caption: '',
			link: '',
			link_text: '',
			slide: 1,
			is_mobile_width: false
		};
		this.slider = null;
		this.mobile_width = 1024;
		this.getPreviousSlide = this.getPreviousSlide.bind(this);
		this.getNextSlide = this.getNextSlide.bind(this);
	}

	_createClass(ImageCarousel, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			var that = this;
			this.slider = new MasterSlider();

			var height = this.props.image_carousel ? 400 : 500;
			var width = this.props.image_carousel ? document.documentElement.clientWidth : 600;
			var autoplay = this.props.autoplay === 'true' ? true : false;

			var fillwidth = 'autofill';

			var homepage_slider_options = {
				width: width, // slider standard width
				height: height, // slider standard height
				layout: fillwidth,
				space: this.props.image_carousel ? 5 : 0,
				fullwidth: true,
				autoHeight: false, //will expand to height of image
				autoplay: autoplay,
				speed: this.props.image_carousel ? 20 : 30,
				center: true, // only carousel.js
				mouse: false, // only carousel.js
				centerControls: true, // only carousel.js
				fullscreenMargin: 0, // only carousel.js
				loop: true,
				instantStartLayers: true //disable to allow for layer transitions
			};

			if (!this.props.split_slide_layers) {
				if (this.props.items.length > 1) {
					this.slider.control('bullets', { autohide: this.props.image_carousel || this.props.controls_persistence ? false : true });
					this.slider.control('arrows', { autohide: this.props.image_carousel || this.props.controls_persistence ? false : true });
				} else {
					homepage_slider_options.swipe = false; // disable touch controls if only one slide
				}
			}

			if (this.props.image_carousel) {
				this.slider.setup(this.props.ms_id + ' .master-slider', homepage_slider_options);
			} else {
				this.slider.setup(this.props.ms_id, homepage_slider_options);
			}

			this.slider.api.addEventListener(MSSliderEvent.CHANGE_START, function () {
				var item = that.props.items[that.slider.api.index()];
				that.setState({ title: item.title, caption: item.body, link: item.link, link_text: item.link_text, textbox_category_title: item.textbox_category_title });
			});

			if (this.props.image_carousel == false) {
				this.slider.api.addEventListener(MSSliderEvent.RESIZE, function () {
					that.setBreakpointClasses();
					that.resizeCarousel();
					that.setIsMobileWidth();
					that.setIsCarouselWiderThanMobileWidth();
				});
				if (this.props.split_slide_layers) {
					this.slider.api.addEventListener(MSSliderEvent.CHANGE_START, function () {
						that.setState({ slide: that.slider.api.index() + 1 });
					});
				}
			}

			if (this.props.autoplay) {
				$('.ms-bullet').click(function () {
					that.stopCarousel();
				});

				$('.ms-nav-prev').click(function () {
					that.stopCarousel();
				});

				$('.ms-nav-next').click(function () {
					that.stopCarousel();
				});

				$('.ms-slide .floating_text_area').hover(that.onTextArea.bind(that), that.offTextArea.bind(that));
			}

			$('.ms-slide .floating_text_area').hover(this.onTextArea.bind(this), this.offTextArea.bind(this));

			if (this.props.image_carousel == false) {
				$('.floating_text_area').off().click(function (e) {
					if ($(that).closest(".carousel_module.small, .carousel_module.medium, .carousel_module.medium_mid").exists()) {
						$(that).toggleClass('open'); // '.open' just flips arrow 180 from default
						$(that).find('.description').slideToggle(); // animates description to slide closed (height -> 0, display: none)
					}
				});
				$('.carousel_module .floating_text_area').css('position', 'absolute');
				$('.carousel_module .floating_text_area').css('visibility', 'visible');
			}

			var item = that.props.items[that.slider.api.index()];
			that.setState({ title: item.title, caption: item.body, link: item.link, textbox_category_title: item.textbox_category_title }, function () {
				that.setBreakpointClasses();
				that.setIsMobileWidth();
				that.setIsCarouselWiderThanMobileWidth();
			});
		}
	}, {
		key: 'isFullOrWideLayout',
		value: function isFullOrWideLayout() {
			var $carousel_module_container = $('#' + this.props.ms_id).parents('.carousel_module_container');
			var class_list = $carousel_module_container.length > 0 ? $carousel_module_container[0].classList : null;
			if (class_list) {
				return class_list.contains('wide') || class_list.contains('full-bleed');
			} else {
				return false;
			}
		}
	}, {
		key: 'onTextArea',
		value: function onTextArea() {
			this.slider.api.pause();
		}
	}, {
		key: 'offTextArea',
		value: function offTextArea() {
			if (!this.slider.options.stopped) {
				this.slider.api.resume();
			}
		}
	}, {
		key: 'stopCarousel',
		value: function stopCarousel() {
			this.slider.options.stopped = true;
			this.slider.api.pause();
		}
	}, {
		key: 'toggleTextBox',
		value: function toggleTextBox(e) {
			var that = this;

			var textBox = $(e.target).parents('.floating_text_area');
			if (textBox.find('.description').length > 0 && textBox.find('.description')[0].innerText.length > 0) {
				textBox.toggleClass("open");
				textBox.find('.description').animate({ height: "toggle" }, 400);
			}
		}
	}, {
		key: 'resizeCarousel',
		value: function resizeCarousel() {
			console.log('resizeCarousel');
			var w = $('#' + this.props.ms_id + ' .ms-container').parent().width();
			$('#' + this.props.ms_id + ' .ms-container').css("max-width", w);
			$('#' + this.props.ms_id + ' .ms-view').css('left', '0');
			$('#' + this.props.ms_id + ' .ms-slide-layers').css("max-width", w);
			$('#' + this.props.ms_id + ' .ms-slide-layers').css('left', '0');
		}
	}, {
		key: 'setBreakpointClasses',
		value: function setBreakpointClasses() {
			console.log('setBreakpointClasses');
			var w = $('#' + this.props.ms_id).width(); // these will not match up with mb breakpoint if carousel is not full width -smb
			var klass;
			if (w <= 480) {
				klass = "small";
			} else if (w <= 600) {
				klass = "medium";
			} else if (w <= 769) {
				klass = "medium_mid";
			} else if (w <= 1024) {
				klass = "medium_large";
			} else if (w <= 1200) {
				klass = "large";
			} else if (w <= 1700) {
				klass = "xlarge";
			} else {
				klass = "xxlarge";
			}
			var $carousel_module = $('#' + this.props.ms_id).parents('.carousel_module');

			if (!$carousel_module.hasClass(klass)) {
				$carousel_module.removeClass('small medium medium_mid medium_large large xlarge xxlarge').addClass(klass);
				//resizing after class has been updated based on size
				window.setTimeout(function () {
					$(window).trigger('resize');
				}, 300);
			}
		}
	}, {
		key: 'setIsCarouselWiderThanMobileWidth',
		value: function setIsCarouselWiderThanMobileWidth() {
			var w = $('#' + this.props.ms_id).width();
			if (w > this.mobile_width) {
				this.setState({ is_carousel_wider_than_mobile: true });
			} else {
				this.setState({ is_carousel_wider_than_mobile: false });
			}
		}
	}, {
		key: 'setIsMobileWidth',
		value: function setIsMobileWidth() {
			if (window.innerWidth < this.mobile_width) {
				this.setState({ is_mobile_width: true });
			} else {
				this.setState({ is_mobile_width: false });
			}
		}
	}, {
		key: 'getSlideLayers',
		value: function getSlideLayers(item, idx) {
			if (this.props.split_slide_layers) {
				return this.getSplitSlideLayers(item, idx);
			} else {
				return this.getFloatingTextLayers(item);
			}
		}
	}, {
		key: 'getFloatingTextLayers',
		value: function getFloatingTextLayers(item) {
			var that = this;
			var item_body = item.body;

			var title_class = item_body.length > 0 || item.more_link.length > 0 ? 'media_feature_title' : 'media_feature_title hide_expand_arrow';

			var initially_expanded = this.isFullOrWideLayout() && this.state.is_carousel_wider_than_mobile;

			var style = initially_expanded ? { display: 'block' } : {};

			if (!this.props.image_carousel) {
				return React.createElement(
					'div',
					{ className: 'ms-slide-layers' },
					React.createElement(
						'div',
						{ className: 'floating_text_area ms-layer ' + item.category_names + ' ' + (initially_expanded ? 'open' : ''), onClick: that.toggleTextBox.bind(that), 'data-duration': '300', 'data-effect': 'right(90)', 'data-ease': 'easeOutQuart', 'data-type': 'text', 'data-resize': 'false' },
						React.createElement(
							'header',
							{ className: item_body.length > 0 || item.more_link.length > 0 ? "" : "hide_expand_arrow" },
							React.createElement('h1', { className: title_class, dangerouslySetInnerHTML: { __html: item.title } }),
							React.createElement('h2', { className: 'subtitle', dangerouslySetInnerHTML: { __html: item.textbox_category_title } })
						),
						React.createElement(
							'div',
							{ className: 'description', style: style },
							React.createElement('div', { className: 'content', dangerouslySetInnerHTML: { __html: item.body } }),
							React.createElement(
								'a',
								{ className: 'more_link', href: item.more_link },
								React.createElement('div', { className: 'more_link_text', dangerouslySetInnerHTML: { __html: item.more_link_text } })
							)
						)
					)
				);
			}
		}
	}, {
		key: 'getSplitSlideLayers',
		value: function getSplitSlideLayers(item, idx) {
			var that = this;
			var item_body = item.body;

			var title_class = item_body.length > 0 ? 'media_feature_title' : 'media_feature_title hide_expand_arrow';
			if (!this.props.image_carousel) {
				return React.createElement(
					'div',
					{ className: 'ms-slide-layers' },
					React.createElement(
						'div',
						{ className: 'split_slide_layer ms-layer ' + item.category_names, onClick: that.toggleTextBox.bind(that), 'data-duration': '300', 'data-effect': 'right(90)', 'data-ease': 'easeOutQuart', 'data-type': 'text', 'data-resize': 'false' },
						React.createElement(
							'header',
							{ className: 'split mobile' },
							React.createElement('h1', { className: title_class, dangerouslySetInnerHTML: { __html: item.title } })
						),
						this.getSplitContainers(item, idx, title_class)
					)
				);
			}
		}
	}, {
		key: 'getSplitContainers',
		value: function getSplitContainers(item, idx, title_class) {
			if (this.state.is_mobile_width || idx % 2 === 0) {
				// mobile or even index
				return React.createElement(
					React.Fragment,
					null,
					this.getSplitImageContainer(item, idx, false),
					this.getSplitTextContainer(item, idx, title_class)
				);
			} else {
				return React.createElement(
					React.Fragment,
					null,
					this.getSplitTextContainer(item, idx, title_class),
					this.getSplitImageContainer(item, idx, true)
				);
			}
		}
	}, {
		key: 'getSplitImageContainer',
		value: function getSplitImageContainer(item, idx, subtitle_right) {
			return React.createElement(
				'div',
				{ className: 'split_image_container', alt: 'slide ' + (idx + 1) + ' - ' + (item.image_alt ? item.image_alt : item.title), style: { backgroundImage: 'url(' + item.image_src + ')' } },
				React.createElement('div', { className: subtitle_right ? "subtitle right" : "subtitle", dangerouslySetInnerHTML: { __html: item.textbox_category_title } })
			);
		}
	}, {
		key: 'getSplitTextContainer',
		value: function getSplitTextContainer(item, idx, title_class) {
			return React.createElement(
				'div',
				{ className: 'split_text_container' },
				React.createElement(
					'header',
					{ className: 'split' },
					React.createElement('h1', { className: title_class, dangerouslySetInnerHTML: { __html: item.title } })
				),
				React.createElement(
					'div',
					{ className: 'split_description' },
					React.createElement('div', { className: 'content', dangerouslySetInnerHTML: { __html: item.body } })
				),
				React.createElement(
					'a',
					{ className: 'more_link button', href: item.more_link },
					React.createElement('div', { className: 'more_link_text', dangerouslySetInnerHTML: { __html: item.more_link_text } })
				)
			);
		}
	}, {
		key: 'getSources',
		value: function getSources(item) {
			var sources = [];
			if (item.webm_video_file_name) {
				sources.push([item.webm_video_src, "video/webm"]);
			}

			if (item.mp4_video_file_name) {
				sources.push([item.mp4_video_src, "video/mp4"]);
			}

			if (item.ogv_video_file_name) {
				sources.push([item.ogv_video_src, "video/ogg"]);
			}

			return sources;
		}
	}, {
		key: 'checkAndCreateVideo',
		value: function checkAndCreateVideo(item) {
			if (item.webm_video_file_name || item.mp4_video_file_name || item.ogv_video_file_name) {
				var videos = this.getSources(item);
				return React.createElement(
					'video',
					{ 'data-autopause': 'false', 'data-fill-mode': 'fill', 'data-loop': 'true', 'data-mute': 'true' },
					videos.map(function (v, i) {
						return React.createElement('source', { key: i, src: v[0], type: v[1] });
					})
				);
			} else if (item.embed_video) {
				return React.createElement(
					'a',
					{ href: item.embed_video + '?hd=1&wmode=opaque&controls=1&showinfo=0', 'data-type': 'video' },
					'play video'
				);
			} else {
				return null;
			}
		}
	}, {
		key: 'getSlideBackgroundContainer',
		value: function getSlideBackgroundContainer(item, idx) {
			if (this.props.split_slide_layers) {
				return null;
			} else {
				return React.createElement('img', { alt: 'slide ' + (idx + 1) + ' - ' + (item.image_alt ? item.image_alt : item.title), 'data-src': item.image_src, src: item.image_src });
			}
		}
	}, {
		key: 'createSlide',
		value: function createSlide(item, idx) {
			var theme = item.theme ? item.theme : "dark_background";
			return React.createElement(
				'article',
				{ key: idx, className: 'ms-slide slide-' + (idx + 1) + ' ' + theme, 'data-delay': '8', 'data-fill-mode': 'fill' },
				React.createElement('div', { className: 'gradient_container_top' }),
				this.getSlideBackgroundContainer(item, idx),
				this.checkAndCreateVideo(item),
				this.getSlideLayers(item, idx),
				React.createElement('div', { className: 'gradient_container_bottom' })
			);
		}
	}, {
		key: 'createSlides',
		value: function createSlides() {
			var that = this;
			// let klass = this.props.image_carousel ? 'master-slider ms-skin-default' : ''
			return React.createElement(
				'div',
				{ className: 'master-slider ms-skin-default' },
				this.props.items.map(function (v, i) {
					return that.createSlide(v, i);
				})
			);
		}
	}, {
		key: 'getCaption',
		value: function getCaption() {
			if (this.state.caption) {
				return React.createElement('div', { className: 'caption', dangerouslySetInnerHTML: { __html: this.state.caption } });
			} else {
				return null;
			}
		}
	}, {
		key: 'getLink',
		value: function getLink() {
			if (this.state.link && this.state.link_text) {
				return React.createElement(
					'div',
					{ className: 'link_container' },
					React.createElement(
						'a',
						{ href: this.state.link },
						this.state.link_text
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: 'getDescription',
		value: function getDescription() {
			if (this.props.image_carousel) {
				return React.createElement(
					'div',
					{ className: 'slider_caption' },
					this.getCaption(),
					this.getLink()
				);
			}
		}
	}, {
		key: 'getCapsuleNav',
		value: function getCapsuleNav() {
			if (this.props.split_slide_layers) {
				return React.createElement(
					'nav',
					{ className: 'capsule_nav_container' },
					React.createElement(
						'div',
						{ className: 'capsule_nav' },
						React.createElement(
							'div',
							{ className: 'arrow_container', onClick: this.getPreviousSlide },
							React.createElement(
								'div',
								{ className: 'arrow arrow_left' },
								React.createElement(
									'div',
									{ className: 'tail' },
									React.createElement('div', { className: 'head' })
								)
							)
						),
						React.createElement(
							'div',
							{ className: 'slide_count' },
							this.state.slide + '/' + this.props.items.length
						),
						React.createElement(
							'div',
							{ className: 'arrow_container', onClick: this.getNextSlide },
							React.createElement(
								'div',
								{ className: 'arrow arrow_right' },
								React.createElement(
									'div',
									{ className: 'tail' },
									React.createElement('div', { className: 'head' })
								)
							)
						)
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: 'getPreviousSlide',
		value: function getPreviousSlide() {
			this.slider.api.previous();
			this.setState({ slide: this.slider.api.index() + 1 });
		}
	}, {
		key: 'getNextSlide',
		value: function getNextSlide() {
			this.slider.api.next();
			this.setState({ slide: this.slider.api.index() + 1 });
		}
	}, {
		key: 'render',
		value: function render() {
			// let klass = this.props.image_carousel ? '' : 'master-slider ms-skin-default'
			var klass = '';
			var that = this;

			if (this.props.image_carousel) {
				return React.createElement(
					'div',
					{ id: this.props.ms_id, className: klass },
					this.createSlides(),
					this.getDescription()
				);
			} else {
				return React.createElement(
					'div',
					{ id: this.props.ms_id, className: 'master-slider ms-skin-default' },
					this.props.items.map(function (v, i) {
						return that.createSlide(v, i);
					}),
					this.getDescription(),
					this.getCapsuleNav()
				);
			}
		}
	}]);

	return ImageCarousel;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TeaserGridItem = (function (_React$Component) {
	_inherits(TeaserGridItem, _React$Component);

	function TeaserGridItem(props) {
		_classCallCheck(this, TeaserGridItem);

		_get(Object.getPrototypeOf(TeaserGridItem.prototype), "constructor", this).call(this, props);
		this.state = {
			modal_open: false,
			scroll_position_before_overlay: null
		};
	}

	_createClass(TeaserGridItem, [{
		key: "closeModal",
		value: function closeModal(e) {
			this.setState({ modal_open: false }, function () {
				$('body').removeClass("explore_overlay_open");
				if (typeof _atw != "undefined") {
					_atw.clb(); //close addthis popup
				}

				// Restore the users scroll position, from before they opened the overlay.  
				if (window.__mb_shim_image_grid_teaser_scroll_position_before_overlay != null && window.__mb_shim_image_grid_teaser_scroll_position_before_overlay > 0 && window.scrollY <= 0) {
					window.scrollTo(0, window.__mb_shim_image_grid_teaser_scroll_position_before_overlay);
					window.__mb_shim_image_grid_teaser_scroll_position_before_overlay = null;
				}
			});
			if (e) e.preventDefault();
		}
	}, {
		key: "prevItem",
		value: function prevItem(e) {
			//arrow to previous modal
			console.log('prev');
			this.setState({ modal_open: false }, function () {
				this.props.prev(this.props.idx);
			});
			e.preventDefault();
		}
	}, {
		key: "nextItem",
		value: function nextItem(e) {
			//arrow to next modal
			console.log('next');
			this.setState({ modal_open: false }, function () {
				this.props.next(this.props.idx);
			});
			e.preventDefault();
		}
	}, {
		key: "getFeatureHtml",
		value: function getFeatureHtml(feature_type) {
			if (feature_type == "video") {
				return React.createElement("div", { className: "play" });
			} else {
				return "";
			}
		}
	}, {
		key: "activateFeature",
		value: function activateFeature() {
			this.setState({ modal_open: true }, this.loadAddThisListeners);
		}
	}, {
		key: "clickedFeature",
		value: function clickedFeature(e) {
			this.activateFeature();
			e.preventDefault();
		}
	}, {
		key: "loadAddThisListeners",
		value: function loadAddThisListeners() {
			if (typeof addthis != "undefined") {
				addthis.toolbox($(".addthis_toolbox").get());
			}

			$('.addthis_button_compact img').on("mouseover", function (e) {
				return false;
			});

			// Save the current scroll position, so we can restore it when the user closes the modal
			if (window.__mb_shim_image_grid_teaser_scroll_position_before_overlay == null || window.__mb_shim_image_grid_teaser_scroll_position_before_overlay <= 0) {
				window.__mb_shim_image_grid_teaser_scroll_position_before_overlay = window.scrollY;
			}

			if (!$('body').hasClass('explore_overlay_open')) {
				$('body').addClass('explore_overlay_open');
			}
		}
	}, {
		key: "featureModalHtml",
		value: function featureModalHtml(feature) {
			if (feature) {
				if (feature.feature_type == "video") {
					return this.featureVideoHtml(feature);
				} else if (feature.feature_type == "image" || feature.feature_type == "news") {
					return this.imageHTML(feature);
				}
			} else {
				return "";
			}
		}
	}, {
		key: "featureVideoHtml",
		value: function featureVideoHtml(feature) {
			if (feature.embed_video) {
				return React.createElement("div", { className: "embedded_video", dangerouslySetInnerHTML: { __html: feature.embed_video } });
			} else {
				var files = [];
				if (feature.webm_video_src) {
					files.push({ file: feature.webm_video_src });
				}
				if (feature.mp4_video_src) {
					files.push({ file: feature.mp4_video_src });
				}
				if (feature.ogv_video_src) {
					files.push({ file: feature.ogv_video_src });
				}
				return React.createElement(
					"div",
					null,
					React.createElement(Video, { files: files, caption: "", poster: feature.image_src, video_div: "upload_video", layout: "full", autostart: "false", vrview: "false" })
				);
			}
		}
	}, {
		key: "getButtons",
		value: function getButtons() {
			if (this.props.item.link && this.props.item.link != '') {
				return React.createElement(
					"div",
					{ className: "buttons" },
					React.createElement(
						"a",
						{ className: "button", href: window.location.origin + this.props.item.link },
						"MORE"
					),
					React.createElement(
						"div",
						{ className: "addthis_sharing_toolbox addthis_toolbox addthis_default_style",
							"data-addthis-url": window.location.origin + this.props.item.link,
							"data-addthis-title": this.props.item.title,
							"data-addthis-description": this.props.item.body,
							"data-addthis-media": this.props.item.browse
						},
						React.createElement(
							"a",
							{ className: "addthis_button_compact" },
							React.createElement("img", { src: "/assets/share.png" })
						)
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: "imageHTML",
		value: function imageHTML(feature) {
			return React.createElement(
				"figure",
				{ className: "main_image" },
				React.createElement("img", { src: feature.image_src, alt: feature.image_alt ? feature.image_alt : "" })
			);
		}

		// <div className="grid_num">{this.props.idx + 1}</div>
	}, {
		key: "render",
		value: function render() {
			var _this = this;

			var modal_style = { position: "fixed", "backgroundColor": "rgba(0, 0, 0, 0.5)", top: "0", left: "0", transform: "none", height: "100vh", width: "100vw", overflow: "auto" };
			var modal_background_style = { position: "fixed" };
			var download_spinner_opts = { lines: 9, length: 6, width: 4, radius: 7, scale: 1, corners: 1, color: '#FFF', opacity: 0.2, rotate: 0, direction: 1, speed: 1, trail: 60, fps: 20, zIndex: 2e9, className: 'spinner', left: '50%', shadow: false, hwaccel: false, position: 'relative' };
			return React.createElement(
				"li",
				{ key: this.props.item.id, className: "teaser_grid_item teaser_grid_item__" + this.props.item.feature_type + " item_" + this.props.idx + " " + this.props.klass, "data-id": this.props.item.id },
				React.createElement(
					"a",
					{ href: "", id: "teaser_grid_item_" + this.props.idx, className: "teaser_grid_link image_and_description_container", onClick: function (e) {
							_this.clickedFeature(e);
						} },
					React.createElement(
						"div",
						{ className: "grid_image" },
						this.getFeatureHtml(this.props.item.feature_type),
						React.createElement("img", { src: this.props.item.image_src })
					),
					React.createElement(
						"div",
						{ className: "grid_text" },
						React.createElement(
							"div",
							{ className: "caption" },
							React.createElement(
								"div",
								{ className: "grid_title" },
								this.props.item.title
							)
						)
					)
				),
				React.createElement(
					Modal,
					{ isOpen: this.state.modal_open, onClose: function (e) {
							_this.closeModal(e);
						}, className: "modal", width: "100%", style: modal_style, backdropStyle: modal_background_style, containerClassName: "modal_container" },
					React.createElement(
						"a",
						{ href: "", className: "modal_close", onClick: function (e) {
								_this.closeModal(e);
							} },
						React.createElement("span", { className: "modal_close_icon" })
					),
					React.createElement(
						"div",
						{ className: "arrow_navigation" },
						React.createElement("a", { href: "", className: "prev_arrow", onClick: function (e) {
								_this.prevItem(e);
							} }),
						React.createElement("a", { href: "", className: "next_arrow", onClick: function (e) {
								_this.nextItem(e);
							} })
					),
					React.createElement(Loader, { loaded: false, options: download_spinner_opts, className: "spinner" }),
					React.createElement(
						"div",
						{ className: "modal_content" },
						this.featureModalHtml(this.props.item),
						React.createElement(
							"div",
							{ className: "caption" },
							React.createElement(
								"div",
								{ className: "grid_num" },
								this.props.idx + 1
							),
							React.createElement(
								"div",
								{ className: "grid_title" },
								this.props.item.title
							)
						),
						React.createElement("div", { className: "description", dangerouslySetInnerHTML: { __html: this.props.item.body } }),
						this.getButtons(),
						React.createElement(
							"a",
							{ href: "", className: "close_button big_button", onClick: function (e) {
									_this.closeModal(e);
								} },
							"CLOSE"
						),
						React.createElement("div", { className: "after_big_button_shim" })
					)
				)
			);
		}
	}]);

	return TeaserGridItem;
})(React.Component);

var ImageGridTeaser = (function (_React$Component2) {
	_inherits(ImageGridTeaser, _React$Component2);

	function ImageGridTeaser(props) {
		_classCallCheck(this, ImageGridTeaser);

		_get(Object.getPrototypeOf(ImageGridTeaser.prototype), "constructor", this).call(this, props);
		this.state = {
			show_more: false
		};
		this.options = {
			percentPosition: true,
			itemSelector: '.teaser_grid_item',
			layoutMode: 'masonry',
			masonry: {
				gutter: '.teaser_gutter_sizer',
				horizontalOrder: true,
				fitWidth: true
			}
		};
	}

	_createClass(ImageGridTeaser, [{
		key: "showMoreItems",
		value: function showMoreItems() {
			this.setState({ show_more: true });
		}
	}, {
		key: "componentDidMount",
		value: function componentDidMount() {
			if (this.props.masonry) {
				var $grid = $('.teaser_grid').imagesLoaded(function () {
					console.log('masonry teaser loaded');
					$grid.isotope(this.options);
				});
			}
		}
	}, {
		key: "getMoreButton",
		value: function getMoreButton() {
			if (this.props.more_link) {
				return React.createElement(
					"a",
					{ className: "big_button", href: this.props.more_link },
					"MORE"
				);
			} else {
				return "";
			}
		}
	}, {
		key: "prev",
		value: function prev(idx) {
			console.log(idx);
			var new_idx = Math.max(idx - 1, 0);
			this.clickItem(new_idx);
		}
	}, {
		key: "next",
		value: function next(idx) {
			console.log(idx);
			var new_idx = Math.min(idx + 1, this.props.items.length - 1);
			this.clickItem(new_idx);
		}
	}, {
		key: "clickItem",
		value: function clickItem(idx) {
			console.log("click teaser_grid_item_" + idx);
			// $(`#teaser_grid_item_${idx}`).trigger('click'); // This doesnt appear to work on link elements
			$("#teaser_grid_item_" + idx).get(0).click();
		}
	}, {
		key: "getTitle",
		value: function getTitle() {
			if (this.props.title && this.props.title != "") {
				return React.createElement(
					"div",
					{ className: "module_title" },
					this.props.title
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getDescription",
		value: function getDescription() {
			if (this.props.description && this.props.description != "") {
				return React.createElement(
					"h3",
					{ className: "module_subtitle" },
					this.props.description
				);
			} else {
				return null;
			}
		}
	}, {
		key: "render",
		value: function render() {
			var _this2 = this;

			var that = this;
			var layout = 'b';
			// TRICKY: The layout property may contain extra HTML formatting
			if (this.props.layout && this.props.layout.indexOf('a') >= 0) layout = 'a';
			if (this.props.layout && this.props.layout.indexOf('c') >= 0) layout = 'c';
			return React.createElement(
				"div",
				{ className: "teaser_grid_container" + (this.state.show_more ? " open" : "") },
				this.getTitle(),
				this.getDescription(),
				React.createElement(
					"ol",
					{ className: "teaser_grid layout_" + layout },
					this.props.items.map(function (item, idx) {
						return React.createElement(TeaserGridItem, { key: item.id, item: item, idx: idx, prev: function (e) {
								that.prev(e);
							}, next: function (e) {
								that.next(e);
							} });
					})
				),
				React.createElement(
					"div",
					{ className: "show_more_button", onClick: function (e) {
							_this2.showMoreItems(e);
						} },
					this.props.mobile_more_text
				),
				this.getMoreButton()
			);
		}
	}]);

	return ImageGridTeaser;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InfoButton = (function (_React$Component) {
  _inherits(InfoButton, _React$Component);

  function InfoButton(props) {
    _classCallCheck(this, InfoButton);

    _get(Object.getPrototypeOf(InfoButton.prototype), 'constructor', this).call(this, props);
    this.state = {
      info_panel_open: false
    };
  }

  _createClass(InfoButton, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var that = this;
      var hasInfoPageCover = $('.info_button_page_cover').length;

      if ($('.feature_area_container').length) {
        // if feature_area_container is present
        // add page cover as a sibling of expandable_info_button
        if (!hasInfoPageCover) {
          // if there are already a info_button_page_cover, don't add another
          $('.feature_area_container').prepend("<div class='info_button_page_cover'></div>");
        }
      } else if (!hasInfoPageCover) {
        // if info button is inline and no page cover has been set. or there are no feature_area_container present
        //then info add page cover where page cover usually goes
        $('#page').prepend("<div class='info_button_page_cover'></div>");
      }
      $('.info_button_page_cover').click(function (e) {
        that.hideInfoText(e);
      });
    }
  }, {
    key: 'showInfoText',
    value: function showInfoText() {
      $('.info_button_page_cover').addClass(this.props.page_cover_class).show();
      this.setState({ info_panel_open: true });
    }
  }, {
    key: 'hideInfoText',
    value: function hideInfoText() {
      $('.info_button_page_cover').removeClass(this.props.page_cover_class).hide();
      this.setState({ info_panel_open: false });
    }
  }, {
    key: 'toggleInfoText',
    value: function toggleInfoText() {
      // for mobile
      $('.info_button_page_cover').addClass(this.props.page_cover_class).show();
      this.setState({ info_panel_open: !this.state.info_panel_open });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this = this;

      var that = this;
      var info_text_position = this.props.position ? this.props.position : 'left';
      var info_text_class = this.props.info_text_class ? this.props.info_text_class : 'info_text';
      return React.createElement(
        'span',
        { className: this.state.info_panel_open ? "info_button open" : "info_button", onMouseEnter: function (e) {
            _this.showInfoText(e);
          }, onMouseLeave: function (e) {
            _this.hideInfoText(e);
          }, onClick: function (e) {
            _this.toggleInfoText(e);
          } },
        React.createElement(
          'div',
          { className: 'info_icon' },
          React.createElement(
            'svg',
            { height: '16', viewBox: '0 0 7 16', width: '7', xmlns: 'http://www.w3.org/2000/svg' },
            React.createElement(
              'g',
              { transform: '' },
              React.createElement('path', { d: 'm3.697914 4c1.3027495 0 2.302086-1.07875496 2.302086-2.24691874 0-.93503238-.57471882-1.75308126-1.72576182-1.75308126-1.51626237 0-2.27318953 1.28431168-2.27318953 2.21934406-.03050184 1.10967203.60602334 1.78065594 1.69686535 1.78065594z' }),
              React.createElement('path', { d: 'm6.5414814 12.9135625c-.06832231 0-.13208979.0143823-.19054332.0395513-.03795684.0237307-.07591368.0460233-.11387052.0690349 0 .0014382-.00075913.0014382-.00151827.0014382-.63160178.3804114-1.1918447.5645046-1.39301594.5645046-.20041211 0-.28619456-.2502517-.08578246-.9787143l1.13035463-4.1219617c.4296714-1.50726305.28619456-2.4874155-.57314825-2.4874155-.96562195 0-3.13827134.86653243-5.1287279 2.3594132-.0060731.00431469-.01214619.00862937-.01746015.01294406-.10248346.07910254-.16776922.19847547-.16776922.3329498 0 .24018409.20572606.435064.4585186.435064.05389871 0 .10703828-.01006759.15562303-.02660722.04023425-.0208543.07970936-.0409895.12070275-.06184381.61414163-.31209549 1.31482485-.56594275 1.51295955-.56594275.2004121 0 .17232404.25168991 0 .87947648l-.98763692 3.92132894c-.60199545 2.2105566.0288472 2.7132173.88894914 2.7132173.79785273 0 2.7678126-.6500791 4.67248671-2.3090752.01973756-.0179779.03947511-.0352366.05921267-.0517762.0743954-.0769452.11918447-.1797785.11918447-.2919603 0-.2401841-.20496692-.4336258-.4585186-.4336258z' })
            )
          )
        ),
        React.createElement(
          'div',
          { className: info_text_class + ' ' + info_text_class + '_' + info_text_position },
          React.createElement('span', { dangerouslySetInnerHTML: { __html: this.props.info_text } }),
          React.createElement(
            'a',
            { className: 'info_link', href: this.props.info_link },
            this.props.info_link_text
          )
        )
      );
    }
  }]);

  return InfoButton;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LazyArticleNav = (function (_React$Component) {
	_inherits(LazyArticleNav, _React$Component);

	function LazyArticleNav(props) {
		_classCallCheck(this, LazyArticleNav);

		_get(Object.getPrototypeOf(LazyArticleNav.prototype), "constructor", this).call(this, props); // get scroll value to use when scrolling to "top" of react component

		this.state = {
			prev_item: null,
			next_item: null,
			should_show: true
		};
	}

	_createClass(LazyArticleNav, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			this.getData();
		}
	}, {
		key: "getData",
		value: function getData() {
			var that = this;
			var params = this.getSessionStore();
			$.ajax("/api/v1/" + this.props.model + "/" + this.props.id + "/prev_next", {
				dataType: "json",
				data: params,
				success: function (data) {
					that.setState({ prev_item: data["prev_item"], next_item: data["next_item"] });
				}
			});
		}
	}, {
		key: "getSessionStore",
		value: function getSessionStore() {
			if (typeof Storage !== "undefined") {
				if (sessionStorage[this.props.model]) {
					return JSON.parse(sessionStorage[this.props.model]);
				} else {
					console.log("No stored params for this model");
					return {};
				}
			} else {
				console.error("No web storage.");
				return {};
			}
		}
	}, {
		key: "getLinkWithSite",
		value: function getLinkWithSite(link) {
			if (this.props.subsite) {
				return link + "?site=" + this.props.subsite;
			} else {
				return link;
			}
		}
	}, {
		key: "getPrevious",
		value: function getPrevious() {
			if (this.state.prev_item) {
				var url = this.getUrl(this.state.prev_item);
				var thumb = this.getThumb(this.state.prev_item);
				return React.createElement(
					"a",
					{ className: "article_nav_block prev", href: this.getLinkWithSite(url), target: "_self" },
					React.createElement(
						"div",
						{ className: "link_box" },
						React.createElement("img", { alt: "Previous Article", src: "/assets/arrow_left.jpg" })
					),
					React.createElement(
						"div",
						{ className: "article_details", id: "prev_details" },
						React.createElement(
							"div",
							{ className: "img" },
							React.createElement("img", { alt: "", src: thumb })
						),
						React.createElement(
							"div",
							{ className: "title" },
							this.state.prev_item.title
						)
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getNext",
		value: function getNext() {
			if (this.state.next_item) {
				var url = this.getUrl(this.state.next_item);
				var thumb = this.getThumb(this.state.next_item);
				return React.createElement(
					"a",
					{ className: "article_nav_block next", href: this.getLinkWithSite(url), target: "_self" },
					React.createElement(
						"div",
						{ className: "link_box" },
						React.createElement("img", { alt: "Next Article", src: "/assets/arrow_right.jpg" })
					),
					React.createElement(
						"div",
						{ className: "article_details", id: "next_details" },
						React.createElement(
							"div",
							{ className: "img" },
							React.createElement("img", { alt: "", src: thumb })
						),
						React.createElement(
							"div",
							{ className: "title" },
							this.state.next_item.title
						)
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: "getUrl",
		value: function getUrl(item) {
			if (this.props.model == 'resources') {
				return item.link;
			} else {
				return item.url;
			}
		}
	}, {
		key: "getThumb",
		value: function getThumb(item) {
			if (this.props.model == 'resources') {
				return item.list_image_src;
			} else {
				return item.thumb;
			}
		}
	}, {
		key: "render",
		value: function render() {
			var that = this;
			var spinner_opts = { lines: 9, length: 6, width: 4, radius: 7, scale: 1, corners: 1, color: '#FFF', opacity: 0.6, rotate: 0, direction: 1, speed: 1, trail: 60, fps: 20, zIndex: 2e9, className: 'spinner', left: '50%', shadow: false, hwaccel: false, position: 'relative' };
			if (this.state.prev_item || this.state.next_item) {
				return React.createElement(
					"div",
					{ className: "article_nav" },
					this.getPrevious(),
					this.getNext()
				);
			} else {
				return null;
			}
		}
	}]);

	return LazyArticleNav;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LilOverlay = (function (_React$Component) {
  _inherits(LilOverlay, _React$Component);

  function LilOverlay(props) {
    _classCallCheck(this, LilOverlay);

    _get(Object.getPrototypeOf(LilOverlay.prototype), "constructor", this).call(this, props);
    this.state = {
      open: false
    };
  }

  _createClass(LilOverlay, [{
    key: "getListItem",
    value: function getListItem(item, idx, list_item_component) {
      if (list_item_component) {
        var component = window[list_item_component];
        return React.createElement(
          "li",
          { className: "slide", key: "nli_" + item.id },
          React.createElement(component, { item: item })
        );
      } else {
        return null;
      }
    }
  }, {
    key: "getOverlay",
    value: function getOverlay(item) {
      var _this = this;

      var that = this;
      return React.createElement(
        "div",
        { className: "lil_overlay" },
        React.createElement(
          "a",
          { className: "close_button", onClick: function (e) {
              _this.closeOverlay(e);
            }, title: "close" },
          React.createElement("span", { className: "close_icon" })
        ),
        item.sections.map(function (v, i) {
          return React.createElement(
            "div",
            { className: "overlay_section grid_view" },
            React.createElement(
              "h2",
              null,
              v.title
            ),
            React.createElement(
              "ul",
              { className: "item_list" },
              v.items.map(function (w, j) {
                return that.getListItem(w, j, v.list_item_component);
              })
            ),
            v.buttons ? v.buttons.map(function (w, j) {
              return React.createElement(
                "a",
                { className: "button", href: w.link, target: w.target },
                w.title
              );
            }) : null
          );
        }),
        React.createElement("div", { className: "background_area", onClick: function (e) {
            _this.closeOverlay(e);
          } })
      );
    }
  }, {
    key: "closeOverlay",
    value: function closeOverlay(e) {
      e.stopPropagation();
      this.setState({ open: false });
    }
  }, {
    key: "toggleOverlay",
    value: function toggleOverlay(e) {
      e.preventDefault();
      this.setState({ open: !this.state.open });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var item = this.props.item;
      return React.createElement(
        "li",
        { key: item.id, className: "nav_overlay " + (item.li_class ? item.li_class : '') + " " + (this.state.open ? 'open' : '') },
        React.createElement(
          "div",
          { className: "nav_title", id: item.id, onClick: function (e) {
              _this2.toggleOverlay(e);
            } },
          React.createElement(
            "a",
            { className: "main_nav_item icon", href: item.link, title: item.name },
            React.createElement(
              "span",
              null,
              item.name
            ),
            React.createElement("span", { className: "indicator" })
          )
        ),
        React.createElement(
          "div",
          { className: "global_subnav_container" },
          this.getOverlay(item)
        ),
        React.createElement("div", { className: "gradient_line" })
      );
    }
  }]);

  return LilOverlay;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Loader = (function (_React$Component) {
	_inherits(Loader, _React$Component);

	function Loader(props) {
		_classCallCheck(this, Loader);

		Loader.defaultProps = {
			component: 'div',
			loadedClassName: 'loadedContent',
			parentClassName: 'loader'
		};

		_get(Object.getPrototypeOf(Loader.prototype), 'constructor', this).call(this, props, Loader.defaultProps);
		Loader.propTypes = {
			className: PropTypes.string,
			color: PropTypes.string,
			component: PropTypes.any,
			corners: PropTypes.number,
			direction: PropTypes.oneOf([1, -1]),
			hwaccell: PropTypes.bool,
			left: PropTypes.string,
			length: PropTypes.number,
			lines: PropTypes.number,
			loaded: PropTypes.bool,
			loadedClassName: PropTypes.string,
			opacity: PropTypes.number,
			options: PropTypes.object,
			parentClassName: PropTypes.string,
			radius: PropTypes.number,
			rotate: PropTypes.number,
			scale: PropTypes.number,
			shadow: PropTypes.bool,
			speed: PropTypes.number,
			top: PropTypes.string,
			trail: PropTypes.number,
			width: PropTypes.number,
			zIndex: PropTypes.number
		};
		this.state = {
			loaded: false,
			options: {}
		};
	}

	_createClass(Loader, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.updateState(this.props);
		}
	}, {
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			this.updateState(nextProps);
		}
	}, {
		key: 'updateState',
		value: function updateState(props) {
			props || (props = {});

			var loaded = this.state.loaded;
			var options = this.state.options;

			// update loaded state, if supplied
			if ('loaded' in props) {
				loaded = !!props.loaded;
			}

			// update spinner options, if supplied
			var allowedOptions = Object.keys(this.constructor.propTypes);
			allowedOptions.splice(allowedOptions.indexOf('loaded'), 1);
			allowedOptions.splice(allowedOptions.indexOf('options'), 1);

			// allows passing options as either props or as an option object
			var propsOrObjectOptions = 'options' in props ? props.options : props;

			allowedOptions.forEach(function (key) {
				if (key in propsOrObjectOptions) {
					options[key] = propsOrObjectOptions[key];
				}
			});

			this.setState({ loaded: loaded, options: options }, this.spin);
		}
	}, {
		key: 'spin',
		value: function spin() {
			var canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);

			if (canUseDOM && !this.state.loaded) {
				var spinner = new Spinner(this.state.options);
				var target = ReactDOM.findDOMNode(this.refs.loader);

				// clear out any other spinners from previous renders
				target.innerHTML = '';
				spinner.spin(target);
			}
		}
	}, {
		key: 'render',
		value: function render() {
			var props, children;

			if (this.state.loaded) {
				props = { key: 'content', className: this.props.loadedClassName };
				children = this.props.children;
			} else {
				props = { key: 'loader', ref: 'loader', className: this.props.parentClassName };
			}

			return React.createElement("div", props, children);
		}
	}]);

	return Loader;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*
  Props:
    required:
      nav_items or nav_api_url
      search
    optional:
      search_submit
      search_placeholder: {
        placeholder: string
      }
      higlight_current {
        highlight: boolean,
        parent_ids: array // needed for highlight current to work
        current_id: number // needed for highlight current to work
      }
      show_external_icon: boolean
      subnav_only: boolean // if true, only show subnav
      no_redirect: {
        name: string // nav item name you wish not to redirect
      }
      force_external_icon_for: array // array of link urls for which we want to force an external link icon even when the link is not external
 */

var Meganav = (function (_React$Component) {
  _inherits(Meganav, _React$Component);

  function Meganav(props) {
    _classCallCheck(this, Meganav);

    _get(Object.getPrototypeOf(Meganav.prototype), 'constructor', this).call(this, props);
    this.state = this.getState();
    this.openGallerySubnav = this.openGallerySubnav.bind(this);
    this.closeGallerySubnav = this.closeGallerySubnav.bind(this);
  }

  _createClass(Meganav, [{
    key: 'getState',
    value: function getState() {
      var nav_items = this.props.nav_items ? this.props.nav_items : [];
      var breakpoint_for_desktop_nav = window.getComputedStyle(document.documentElement).getPropertyValue('--breakpoint_for_desktop_nav').split('px')[0];
      var is_desktop_nav = this.isDesktop();
      var highlightCurrent = typeof this.props.highlight_current !== 'undefined' ? this.props.highlight_current.highlight : false;
      var parent_ids = [],
          current_id = undefined;
      var modal_search_suggestions = this.props.modal_search && this.props.modal_search.suggestions ? this.props.modal_search.suggestions : null;

      if (highlightCurrent) {
        parent_ids = typeof this.props.highlight_current.parent_ids !== 'undefined' ? this.props.highlight_current.parent_ids : [];
        current_id = typeof this.props.highlight_current.current_id !== 'undefined' ? this.props.highlight_current.current_id : undefined;
      }
      var no_redirect = typeof this.props.no_redirect !== 'undefined' ? this.props.no_redirect.name.toLowerCase() : false;
      return {
        nav_items: nav_items,
        search_open: false,
        search: '',
        modal_search_suggestions: modal_search_suggestions,
        last_meganav_open: null, //for touchevents && desktop nav
        last_description_open: null,
        parent_ids: parent_ids,
        current_id: current_id,
        opened_subnavs: [],
        highlight_current: highlightCurrent,
        no_redirect: no_redirect,
        is_desktop_nav: is_desktop_nav,
        breakpoint_for_desktop_nav: breakpoint_for_desktop_nav
      };
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.getData();

      if (typeof nav != "undefined") {
        nav.toggleSubnav = function () {};
      }

      if (typeof magic_shell_nav != "undefined") {
        magic_shell_nav.toggleSubnav = function () {};
      }

      if (window.innerWidth < this.state.breakpoint_for_desktop_nav) {
        this.setState({ is_desktop_nav: false });
      }

      // NOTE: recently moved from componentWillMount, but seems unused - consider removing unless there's a future
      var isAdmin = document.querySelector('.admin_only') !== null;
      if (isAdmin) {
        this.setState({ admin_content_page: true });
      }

      $(window).resize(this.resize.bind(this));

      $('.site_nav ul.nav').hover( // control page cover
      function () {
        $('.page_cover').addClass('nav_hover_on').fadeIn(100);
      }, function () {
        $('.page_cover').removeClass('nav_hover_on').stop().fadeOut();
      });
    }
  }, {
    key: 'resize',
    value: function resize() {
      var is_desktop_nav = this.isDesktop();
      if (is_desktop_nav != this.state.is_desktop_nav) {
        this.closeOverlays();
      }
      this.setState({ is_desktop_nav: is_desktop_nav });
    }
  }, {
    key: 'getData',
    value: function getData() {
      var that = this;
      if (this.state.nav_items.length == 0) {
        $.getJSON(this.props.nav_api_url, null, function (data) {
          that.setState({ nav_items: data.items });
        });
      }
    }
  }, {
    key: 'isDesktop',
    value: function isDesktop() {
      var styles = getComputedStyle(document.documentElement);
      var bp = styles.getPropertyValue('--breakpoint_for_desktop_nav');
      var desktopBreakpoint = bp.length > 0 ? bp.replace(/\D/g, '') : 1024;
      return window.innerWidth >= desktopBreakpoint;
    }
  }, {
    key: 'closeOverlays',
    value: function closeOverlays() {
      this.closeGallerySubnav();
    }
  }, {
    key: 'forceExternalLink',
    value: function forceExternalLink(link) {
      if (Array.isArray(this.props.force_external_icon_for)) {
        return !!this.props.force_external_icon_for.includes(link);
      } else {
        return false;
      }
    }
  }, {
    key: 'isExternalLink',
    value: function isExternalLink(link) {
      if (/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/.test(link)) {
        return true;
      } else {
        return false;
      }
    }
  }, {
    key: 'isCurrent',
    value: function isCurrent(item) {
      var parent_ids = this.state.parent_ids;
      var current_id = this.state.current_id;
      var current = false;

      if (typeof current_id !== 'undefined' && current_id == item.id) {
        current = true;
        return current;
      } else if (parent_ids.length > 0) {
        parent_ids.map(function (element) {
          if (element == item.id) {
            current = true;
            return current;
          }
        });
      }
      return current;
    }
  }, {
    key: 'getExpandableArrow',
    value: function getExpandableArrow() {
      // let on_click = (e)=> {
      //   // e.preventDefault()
      //   // $(e.currentTarget).toggleClass('open')
      // }
      return React.createElement('img', { className: 'arrow_expand', src: '/assets/arrow_down.png', alt: 'expand arrow', onClick: function () {} });
    }

    // TODO: this function should only do what it says it's doing.. -nmj
  }, {
    key: 'getLinkTitleTarget',
    value: function getLinkTitleTarget(item, main, showSubSubnav) {
      var _this = this;

      var hasSubSubnavItems = typeof item.sections !== 'undefined' && typeof item.sections.items !== 'undefined';
      var showSubSubnavItems = typeof showSubSubnav !== 'undefined' ? showSubSubnav && hasSubSubnavItems : false;
      var noRedirect = this.state.no_redirect == item.name.toLowerCase();
      if (item.link == '/#missions_gallery_subnav') {
        var target = '.missions_gallery_subnav_item';
        return React.createElement(
          'a',
          { className: main ? 'main_nav_item' : '', onClick: function (e) {
              _this.toggleGallerySubnav(e);
            } },
          item.name,
          this.getExpandableArrow(),
          showSubSubnavItems ? this.getSubnavItems(item.sections, false) : ''
        );
      } else if (item.target == 'overlay') {
        return React.createElement(
          'a',
          { href: 'javascript:void(0)', onClick: function () {
              explore_overlay.init(item.link);
            } },
          this.getLinkTitleText(item, main)
        );
      } else if (noRedirect) {
        return React.createElement(
          'a',
          { className: main ? 'main_nav_item' : '', target: item.target },
          this.getLinkTitleText(item, main),
          showSubSubnavItems ? this.getSubnavItems(item.sections, false) : ''
        );
      } else {
        return React.createElement(
          'a',
          { className: main ? 'main_nav_item' : '', href: item.link, target: item.target },
          this.getLinkTitleText(item, main),
          showSubSubnavItems ? this.getSubnavItems(item.sections, false) : ''
        );
      }
    }
  }, {
    key: 'getLinkTitleText',
    value: function getLinkTitleText(item, main) {
      var showIcon = typeof this.props.show_external_icon !== 'undefined' ? this.props.show_external_icon : true;
      var forceExternalLink = this.forceExternalLink(item.link);
      var isExternalLink = this.isExternalLink(item.link);
      var isMainNav = main;
      // only show external link icon if show icon has been set to true in module, the link IS in fact external and only when it is not in the top level nav... OR if forced
      if (showIcon && isExternalLink && !isMainNav || forceExternalLink) {
        return React.createElement(
          'span',
          null,
          React.createElement(
            'span',
            null,
            item.name
          ),
          React.createElement(
            'span',
            { className: 'no_wrap' },
            '',
            this.getExternalLinkIcon()
          )
        );
      } else {
        return React.createElement(
          'span',
          null,
          item.name
        );
      }
    }
  }, {
    key: 'getExternalLinkIcon',
    value: function getExternalLinkIcon() {
      return React.createElement(
        'span',
        { className: 'external_link_icon' },
        React.createElement(
          'svg',
          { display: 'inline-block', height: '11', viewBox: '0 0 11 11', width: '11', xmlns: 'http://www.w3.org/2000/svg' },
          React.createElement('path', { d: 'm5.335 4.125 1.485 1.485 2.75-2.75 1.43 1.43v-4.29h-4.29l1.375 1.375zm5.61 1.87-1.045-1.045v4.95h-8.8v-8.8h4.95l-1.1-1.1h-3.85c-.605 0-1.1.495-1.1 1.1v8.8c0 .605.495 1.1 1.1 1.1h8.8c.605 0 1.1-.495 1.1-1.1z', fill: '#388fda', transform: '' })
        )
      );
    }

    /* GallerySubnav */
    // NOTE: the MissionsGallerySubnav component can be found in the instance of Mars
  }, {
    key: 'toggleGallerySubnav',
    value: function toggleGallerySubnav(e) {
      if (this.state.missions_gallery_subnav_open) {
        this.closeGallerySubnav();
      } else {
        this.openGallerySubnav();
      }
    }
  }, {
    key: 'openGallerySubnav',
    value: function openGallerySubnav() {
      this.setState({ missions_gallery_subnav_open: true }, function () {
        $('.missions_gallery_subnav').parents('li').addClass('open').find('.global_subnav_container .subnav').addClass('hide');
        $('.missions_gallery_subnav_item .arrow_box').addClass('reverse');
        $('.site_header_area').addClass('missions_gallery_subnav_open');
      });
    }
  }, {
    key: 'closeGallerySubnav',
    value: function closeGallerySubnav() {
      this.setState({ missions_gallery_subnav_open: false });
      $('.missions_gallery_subnav').parents('li').removeClass('open').find('.global_subnav_container .subnav').removeClass('hide');
      $('.missions_gallery_subnav_item .arrow_box').removeClass('reverse');
      $('.site_header_area').removeClass('missions_gallery_subnav_open');
    }
  }, {
    key: 'getGallerySubnav',
    value: function getGallerySubnav(item, idx) {
      // in the event of more than one gallery subnav we'll need to abstract this all a bit more -nmj
      if (item.link == "/#missions_gallery_subnav" && this.props.gallery_subnav_items) {
        return React.createElement(MissionsGallerySubnav, { item: item, gallery_subnav_items: this.props.gallery_subnav_items, open: this.state.missions_gallery_subnav_open, open_gallery_subnav: this.openGallerySubnav, close_gallery_subnav: this.closeGallerySubnav, get_external_link_icon: this.getExternalLinkIcon });
      } else {
        return null;
      }
    }

    /* *** *** *** */

  }, {
    key: 'getNavSection',
    value: function getNavSection(item, idx) {
      var _this2 = this;

      var that = this;
      var sections = item.sections;
      var columns = sections[0].columns ? sections[0].columns : false;
      var isExpandedMeganav = typeof item.expanded_meganav !== 'undefined' ? item.expanded_meganav : false;
      return React.createElement(
        'div',
        { className: 'meganav ' + (isExpandedMeganav ? 'columnar' : '') },
        sections.map(function (v, i) {
          if (columns && columns.length > 0) {
            return React.createElement(
              'div',
              { key: 'sections_container_' + that.getRandomInt() },
              React.createElement(
                'div',
                { className: 'sections_container' },
                _this2.getSubnavItems(v)
              ),
              _this2.getColumnarSection(columns)
            );
          } else {
            return React.createElement(
              'div',
              { key: 'sections_container_' + that.getRandomInt(), className: 'sections_container' },
              _this2.getSubnavItems(v, isExpandedMeganav)
            );
          }
        }),
        this.getFeaturesHtml(item)
      );
    }
  }, {
    key: 'getColumnarSection',
    value: function getColumnarSection(item) {
      var _this3 = this;

      return item.map(function (y, i) {
        var sub_items = _this3.sortSubItems(y.sub_items);
        return React.createElement(
          'div',
          { className: 'meganav_columnar_section', key: i },
          React.createElement(
            'div',
            { className: 'title' },
            y.title
          ),
          _this3.getColumns(sub_items)
        );
      });
    }
  }, {
    key: 'getColumns',
    value: function getColumns(sorted_item) {
      var _this4 = this;

      return sorted_item.map(function (sub_items, index) {
        return React.createElement(
          'div',
          { className: 'col', key: index },
          _this4.getColumnarSubSection(sub_items)
        );
      });
    }
  }, {
    key: 'getColumnarSubSection',
    value: function getColumnarSubSection(sub_items) {
      var _this5 = this;

      var that = this;
      return sub_items.map(function (item, index) {
        var showIcon = typeof _this5.props.show_external_icon !== 'undefined' ? _this5.props.show_external_icon : true;
        var isExternalLink = _this5.isExternalLink(item.link);
        return React.createElement(
          'span',
          { className: 'nav_item', key: index },
          React.createElement(
            'a',
            { href: item.url, onTouchEnd: that.openLinkWithoutHavingToDoubleTap },
            item.link_text,
            showIcon && isExternalLink ? that.getExternalLinkIcon(item.link, true) : ''
          )
        );
      });
    }
  }, {
    key: 'openLinkWithoutHavingToDoubleTap',
    value: function openLinkWithoutHavingToDoubleTap(e) {
      // iOS sometimes requires a double tap when using a plain anchor tag, this allows us to link without double tap - sb
      // tried solution here, but to no avail: https://css-tricks.com/annoying-mobile-double-tap-link-issue/
      var event = e || window.event;
      var target = event.target || event.srcElement;

      if (target instanceof HTMLAnchorElement) {
        var link = target.getAttribute('href');
        window.location = link;
      }
    }
  }, {
    key: 'sortSubItems',
    value: function sortSubItems(item) {
      var sub_items = [];
      var first_half = [],
          second_half = [];
      if (typeof item !== 'undefined') {
        item.map(function (y, i) {
          if (i < Math.ceil(item.length / 2)) {
            first_half.push(y);
          } else {
            second_half.push(y);
          }
        });
      }
      sub_items.push(first_half, second_half);
      return sub_items;
    }
  }, {
    key: 'getFeaturesHtml',
    value: function getFeaturesHtml(item) {
      var _this6 = this;

      if (item.features && item.features.length > 0) {
        var feature = item.features[0];
        return React.createElement(
          'div',
          { className: 'detail_container' },
          React.createElement(
            'div',
            { className: 'feature_info' },
            React.createElement(
              'div',
              { className: 'single_layout' },
              React.createElement(
                'a',
                { className: 'image_container', href: feature.link, style: { backgroundImage: 'url(\'' + feature.image_src + '\')' } },
                React.createElement(
                  'div',
                  { id: item.id, className: 'bottom_description ' + (feature.title.length > 30 ? 'tall_description' : ''), onClick: function (e) {
                      _this6.showOrGo(e);
                    } },
                  React.createElement(
                    'div',
                    { className: 'category_title' },
                    feature.categories
                  ),
                  React.createElement(
                    'div',
                    { className: 'content_title' },
                    feature.title
                  ),
                  React.createElement('div', { className: 'description', dangerouslySetInnerHTML: { __html: feature.body } })
                )
              )
            )
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getRandomInt',
    value: function getRandomInt() {
      return Math.floor(Math.random() * 5000000);
    }
  }, {
    key: 'getSubnavItems',
    value: function getSubnavItems(v, showSubSubnav) {
      var that = this;
      if (typeof v.items !== 'undefined') {
        return React.createElement(
          'ul',
          null,
          v.items.map(function (w, j) {
            return that.getSubnavByType(w, showSubSubnav, true);
          })
        );
      }
    }
  }, {
    key: 'getSubnavByType',
    value: function getSubnavByType(w, showSubSubnav, desktop) {
      if (typeof w.sub_items != "undefined") {
        return this.getSubItemsFromItem(w);
      } else {
        return React.createElement(
          'li',
          { key: '' + (desktop ? 'desktop_subnav_' : 'mobile_subnav_') + w.id },
          this.getLinkTitleTarget(w, false, typeof showSubSubnav !== 'undefined' ? showSubSubnav : false)
        );
      }
    }
  }, {
    key: 'getMobileSubnavItems',
    value: function getMobileSubnavItems(v) {
      var that = this;
      return v.items.map(function (w, j) {
        return that.getSubnavByType(w, false, false);
      });
    }

    //basically just a newer version of the one below but without reliance on items separate from columns
  }, {
    key: 'getSubItemsFromItem',
    value: function getSubItemsFromItem(w) {
      var sub_items = this.sortSubItems(w.sub_items);
      return React.createElement(
        'li',
        { key: w.id, className: 'meganav_columnar_section' },
        React.createElement(
          'div',
          { className: 'title' },
          w.title
        ),
        this.getColumns(sub_items)
      );
    }
  }, {
    key: 'getMobileSubnavColumns',
    value: function getMobileSubnavColumns(v) {
      return v.columns.map(function (w, j) {
        return React.createElement(
          'li',
          { key: j, className: 'stellarnav_section' },
          React.createElement(
            'div',
            { className: 'stellarnav_title' },
            w.title
          ),
          React.createElement(
            'ul',
            { className: 'top_nav_items' },
            w.sub_items.map(function (x, k) {
              return React.createElement(
                'li',
                { className: 'nav_item', key: k },
                React.createElement(
                  'a',
                  { href: x.url },
                  x.link_text
                )
              );
            })
          )
        );
      });
    }
  }, {
    key: 'getMobileSubnav',
    value: function getMobileSubnav(sections) {
      var that = this;
      if (sections.length > 0) {
        return React.createElement(
          'ul',
          { className: 'subnav' },
          sections.map(function (v, i) {
            if (v.items && v.columns) {
              return React.createElement(
                'div',
                { key: 'subnav_' + that.getRandomInt() },
                that.getMobileSubnavItems(v),
                that.getMobileSubnavColumns(v)
              );
            } else if (v.items) {
              return React.createElement(
                'div',
                { key: 'subnav_' + that.getRandomInt() },
                that.getMobileSubnavItems(v)
              );
            } else {
              return null;
            }
          })
        );
      } else {
        return null;
      }
    }

    //TODO: Refactor out this jquery: maybe subcomponent NavSection that knows whether open or closed? -RK
  }, {
    key: 'onClickArrow',
    value: function onClickArrow(e) {
      var state = this.state;
      // console.log('clicked arrow');
      var selectedSubnav = e.currentTarget.parentNode.querySelector('.global_subnav_container');

      console.log(e.currentTarget);
      // console.log('selected Subnav', selectedSubnav);

      // selectedSubnav.classList.toggle('expanded');
      var subnavId = e.currentTarget.parentNode.querySelector('.nav_title').getAttribute('id');
      var subnavIsOpen = state.opened_subnavs.includes(subnavId);

      // if(subnavIsOpen) {
      //   // call close subnav func
      //   this.closeSubNavFor(subnavId);
      //   // remove id from state array
      //   this.setState(state => {
      //     const opened_subnavs = state.opened_subnavs.filter((item, i) =>
      //       subnavId !==  item
      //     );
      //     return {
      //       opened_subnavs,
      //     }
      //   })
      // } else {
      //   // call open subnav func
      //   this.openSubNavFor(subnavId);
      //   // add id to state array
      //   var updateOpenSubnav = state.opened_subnavs.concat(subnavId);
      //   this.setState({
      //     opened_subnavs: updateOpenSubnav
      //   });
      // }

      if (e.currentTarget.parentNode.classList.length > 0 && e.currentTarget.parentNode.classList[0].includes('missions_gallery_subnav_item')) {
        // $(e.currentTarget).toggleClass('reverse').parent().find('.missions_gallery_subnav').toggleClass('open');

        this.toggleGallerySubnav();
      } else {
        // need to change to not toggle from here. use open/close subnav functions
        $(e.currentTarget).toggleClass('reverse').parent().find('.global_subnav_container').toggle();
      }
    }
  }, {
    key: 'getSubnavHeight',
    value: function getSubnavHeight(targetSubnav, navOpen) {
      // console.log('navOpen ==', navOpen)
      var navOpen = navOpen || false;
      var styleState = [],
          subnavHeight;

      if (navOpen) {
        // console.log('%c targetSubnav', 'color:green', targetSubnav);
        // console.log('%c targetSubnav.style.height', 'background-color:yellow', targetSubnav.style.height );
        subnavHeight = targetSubnav.style.height;
      } else {
        // save current styles
        styleState.visibility = targetSubnav.style.visibility;
        styleState.display = targetSubnav.style.display;

        // expand subnav to get accurate height
        targetSubnav.style.visibility = 'hidden';
        targetSubnav.style.display = 'block';

        subnavHeight = targetSubnav.scrollHeight;

        // reset styles
        targetSubnav.style.visibility = styleState.visibility;
        targetSubnav.style.display = styleState.display;
      }

      return subnavHeight;
    }

    // open
  }, {
    key: 'getOpenAnimation',
    value: function getOpenAnimation(targetSubnav) {
      var subnavHeight = this.getSubnavHeight(targetSubnav, false);
      requestAnimationFrame(function () {
        // console.log('%c reguest open animation', 'color:orange' );
        targetSubnav.style.height = 0 + 'px';
        targetSubnav.style.transition = 'height .5s ease-out';
        // targetSubnav.style.transition = subnavTransition;
        requestAnimationFrame(function () {
          targetSubnav.style.height = subnavHeight + 'px';
        });
      });
    }

    //close
  }, {
    key: 'getCloseAnimation',
    value: function getCloseAnimation(targetSubnav) {
      // console.log('%c request CLOSE  animation', 'background-color: lightblue' );
      var subnavHeight = this.getSubnavHeight(targetSubnav, true);
      var transition = targetSubnav.style.transition;
      // console.log('%c transition', 'color:dodgerblue', transition);
      targetSubnav.style.transition = '';
      // console.log('%c targetSubnav.style.transition', 'color:red', targetSubnav.style.transition);
      requestAnimationFrame(function () {
        targetSubnav.style.height = subnavHeight + 'px';
        targetSubnav.style.transition = transition;
        // targetSubnav.style.transition = 'height .7s ease-out';
        // targetSubnav.style.transition = subnavTransition;
        requestAnimationFrame(function () {
          targetSubnav.style.height = 0 + 'px';
        });
      });
    }
  }, {
    key: 'openSubNavFor',
    value: function openSubNavFor(subnavId) {
      // open clicked subnav with animation
      // console.log('%c ------ open subnav for ------', 'color:blue' );
      var subnavParent = document.getElementById(subnavId).parentNode;
      // var subnavToOpen = subnavParent.querySelector('.subnav');
      var subnavToOpen = subnavParent.querySelector('.global_subnav_container');

      // console.log('%c getsubnav height ->', 'color:red', this.getSubnavHeight(subnavToOpen));

      // var subnavHeight = this.getSubnavHeight(subnavToOpen);
      this.getOpenAnimation(subnavToOpen);
      subnavToOpen.classList.toggle('expanded');

      // subnavToOpen.style.display = 'block'; // remove when the style is added to all instances _nav_mobile.scss
    }
  }, {
    key: 'closeSubNavFor',
    value: function closeSubNavFor(subnavId) {
      // close clicked subnav with animation
      // console.log('%c ----- close subnav for -----', 'color:green');
      var subnavToClose = document.getElementById(subnavId).parentNode.querySelector('.global_subnav_container');
      // var subnavHeight = subnavToClose.scrollHeight;

      var subnavTransition = subnavToClose.style.transition;

      // subnavToClose.style.transition = '';
      // console.log('%c subnav transition == after', 'background-color:pink', subnavToClose.style.transition);
      // subnavToClose.addEventListener('transitioned', (e) => {
      //   subnavToClose.removeEventListener('transitioned', arguments.callee);

      //   subnavToClose.style.height = null;
      // });
      // requestAnimationFrame(() => {
      //   console.log('%c reguest close animation', 'color:red' )
      //   subnavToClose.style.height = subnavHeight + 'px';
      //   console.log('%c subnav transition', 'color:purpleipink', subnavTransition);
      //   subnavToClose.style.transition = subnavTransition;
      //   // subnavToClose.style.transition = 'height 2s ease-out';
      //   requestAnimationFrame(() => {
      //     subnavToClose.style.height = 0 + 'px';
      //   });
      // });
      this.getCloseAnimation(subnavToClose);
      // subnavToClose.style.height = null;
      subnavToClose.classList.toggle('expanded');
    }
  }, {
    key: 'getNavItemHTML',
    value: function getNavItemHTML(item, i) {
      var _this7 = this;

      var that = this;
      if (item.style && item.style == 'icon') {
        if (item.name == "orrery") {
          var key = this.getRandomInt();
          return React.createElement(
            'li',
            { className: item.name, id: item.name, key: key },
            React.createElement(
              'a',
              { href: 'javascript:void(0)', onClick: function (e) {
                  _this7.getOrreryOverlay(e);
                } },
              React.createElement(
                'span',
                { className: 'orrery_label' },
                item.name
              )
            )
          );
        } else if (item.features && item.features.length > 0) {
          return this.getIconWithFeatures(item);
        } else {
          var li_id = 'li_' + item.id;
          return React.createElement(
            'li',
            { className: item.li_class, key: li_id },
            React.createElement(
              'div',
              { className: 'nav_title' },
              React.createElement(
                'a',
                { className: 'main_nav_item icon', href: item.link, title: item.name },
                React.createElement(
                  'span',
                  null,
                  item.name
                )
              )
            ),
            React.createElement('div', { className: 'gradient_line' })
          );
        }
      } else if (item.style && item.style == 'lil_overlay') {
        return React.createElement(LilOverlay, { item: item });
      } else if (item && item.sections && item.sections.length > 0) {
        var _ret = (function () {
          var li_id = 'li_' + item.id;
          var has_missions_gallery_subnav = item.link == "/#missions_gallery_subnav" && _this7.props.gallery_subnav_items;
          var missions_gallery_subnav = has_missions_gallery_subnav ? 'missions_gallery_subnav_item' : '';
          var clickGallerySubnav = function () {
            if (has_missions_gallery_subnav && !!$('.no-touchevents').length) {
              that.toggleGallerySubnav();
            }
          };
          var touchEnd = null;
          if (has_missions_gallery_subnav) {
            touchEnd = function (e) {
              _this7.toggleGallerySubnav(e);
            };
          } else {
            touchEnd = function (e) {
              _this7.openOrGo(e);
            };
          }

          return {
            v: React.createElement(
              'li',
              { key: li_id, className: (item.style ? item.style : '') + ' ' + missions_gallery_subnav + ' ' + (_this7.state.highlight_current ? _this7.isCurrent(item) ? 'current' : '' : ''), onMouseEnter: function (e) {
                  _this7.openMegaNav(e);
                },
                onMouseLeave: function (e) {
                  _this7.closeMegaNav(e);
                } },
              React.createElement(
                'div',
                { className: 'arrow_box', onClick: function (e) {
                    return _this7.onClickArrow(e);
                  } },
                React.createElement('span', { className: 'arrow_down' })
              ),
              React.createElement(
                'div',
                { className: 'nav_title', id: li_id, onTouchEnd: touchEnd, onClick: clickGallerySubnav },
                _this7.getLinkTitleTarget(item, true)
              ),
              React.createElement(
                'div',
                { className: 'global_subnav_container' },
                _this7.getMegaNavForItem(item, i),
                _this7.getMobileSubnav(item.sections)
              ),
              _this7.getGallerySubnav(item, i),
              React.createElement('div', { className: 'gradient_line' })
            )
          };
        })();

        if (typeof _ret === 'object') return _ret.v;
      } else if (item.short_description && item.short_description != '') {
        return this.getGoDescription(item);
      } else {
        return React.createElement(
          'li',
          { key: item.id, className: '' + (this.state.highlight_current ? this.isCurrent(item) ? 'current' : '' : '') },
          React.createElement(
            'div',
            { className: 'nav_title' },
            this.getLinkTitleTarget(item, true)
          ),
          React.createElement('div', { className: 'gradient_line' })
        );
      }
    }
  }, {
    key: 'getOrreryOverlay',
    value: function getOrreryOverlay(e) {
      e.preventDefault();
      var o = this.props.orrery_url ? this.props.orrery_url : '//eyes.nasa.gov/apps/orrery/#/home?close=true';
      var h = $(window).height();
      explore_overlay.init(o, null, 'orrery_iframe', function () {
        $('#explore_overlay .content iframe').css({ "min-width": "100%", "overscroll-behavior": "none", "margin": 0, "position": "fixed", "top": 0, "left": 0, "height": h, "width": "100vw" }).attr('scrolling', 'no');
      });
      window.addEventListener("message", function (event) {
        if (event.data === "close_overlay") {
          explore_overlay.closeModal();
        }
      });
      gas('send', 'event', 'orrery', 'launch');
    }
  }, {
    key: 'getMegaNavForItem',
    value: function getMegaNavForItem(item, i) {
      var showWide = typeof item.expanded_meganav !== 'undefined' ? item.expanded_meganav : false;
      if (!this.props.subnav_only) {
        return React.createElement(
          'div',
          { key: i, className: 'meganav_container ' + (item.features && item.features.length > 0 ? '' : 'no_feature') + ' ' + (item.meganav_style ? item.meganav_style : '') + ' ' + (showWide ? 'wide' : '') },
          React.createElement('div', { className: 'nav_item_indicator' }),
          this.getNavSection(item, i)
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getIconWithFeatures',
    value: function getIconWithFeatures(item) {
      var _this8 = this;

      var li_id = 'li_' + item.id;
      return React.createElement(
        'li',
        { key: li_id, className: item.li_class, onMouseEnter: function (e) {
            _this8.openMegaNav(e);
          },
          onMouseLeave: function (e) {
            _this8.closeMegaNav(e);
          } },
        React.createElement(
          'div',
          { className: 'nav_title', id: li_id, onTouchEnd: function (e) {
              _this8.openOrGo(e);
            } },
          React.createElement(
            'a',
            { className: 'main_nav_item icon', href: item.link, title: item.name },
            React.createElement(
              'span',
              null,
              item.name
            )
          )
        ),
        React.createElement(
          'div',
          { className: 'global_subnav_container' },
          this.getMegaNavForIcon(item)
        ),
        React.createElement('div', { className: 'gradient_line' })
      );
    }
  }, {
    key: 'getMegaNavForIcon',
    value: function getMegaNavForIcon(item) {
      var _this9 = this;

      if (!this.props.subnav_only) {
        return React.createElement(
          'div',
          { className: 'meganav_container ' + (item.features && item.features.length > 0 ? '' : 'no_feature') + ' ' + (item.meganav_style ? item.meganav_style : ''), onClick: function (e) {
              _this9.clearLastDescriptionId(e);
            } },
          React.createElement('div', { className: 'nav_item_indicator' }),
          React.createElement(
            'div',
            { className: 'meganav' },
            this.getSectionDescription(item),
            this.getFeaturesHtml(item)
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getSectionDescription',
    value: function getSectionDescription(item) {
      if (item.short_description) {
        return React.createElement(
          'div',
          { className: 'sections_container' },
          React.createElement(
            'h2',
            { className: 'section_title' },
            item.name
          ),
          React.createElement(
            'div',
            { className: 'section_description' },
            item.short_description
          ),
          React.createElement(
            'a',
            { className: 'button', href: item.link },
            'GO'
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getGoDescription',
    value: function getGoDescription(item) {
      var _this10 = this;

      var li_id = 'li_' + item.id;
      return React.createElement(
        'li',
        { key: li_id, className: '' + (item.style ? item.style : ''), onMouseEnter: function (e) {
            _this10.openMegaNav(e);
          },
          onMouseLeave: function (e) {
            _this10.closeMegaNav(e);
          } },
        React.createElement(
          'div',
          { className: 'nav_title', id: li_id, onTouchEnd: function (e) {
              _this10.openOrGo(e);
            } },
          this.getLinkTitleTarget(item, true)
        ),
        React.createElement(
          'div',
          { className: 'global_subnav_container' },
          React.createElement(
            'div',
            { className: 'meganav_container ' + (item.features && item.features.length > 0 ? '' : 'no_feature') + ' ' + (item.meganav_style ? item.meganav_style : ''), onClick: function (e) {
                _this10.clearLastDescriptionId(e);
              } },
            React.createElement('div', { className: 'nav_item_indicator' }),
            React.createElement(
              'div',
              { className: 'meganav' },
              this.getSectionDescription(item)
            ),
            this.getFeaturesHtml(item)
          )
        ),
        React.createElement('div', { className: 'gradient_line' })
      );
    }
  }, {
    key: 'closeOpenDropdown',
    value: function closeOpenDropdown(id, $parentElm) {
      var that = this;
      if (that.state.last_meganav_open !== null && that.state.last_meganav_open) {
        var $lastParentElm = $(document.getElementById(that.state.last_meganav_open).parentNode);
        that.closeMegaNavFor($lastParentElm);
      }
      this.openAndSetLastDropdown(id, $parentElm);
    }
  }, {
    key: 'openAndSetLastDropdown',
    value: function openAndSetLastDropdown(id, $parentElm) {
      var that = this;
      if ($parentElm && !$parentElm.hasClass('expanded')) {
        that.openMegaNavFor($parentElm);
        this.setState({ last_meganav_open: id });
      }
    }
  }, {
    key: 'openOrGo',
    value: function openOrGo(e) {
      var $parentElm = $(e.currentTarget.parentNode);
      var currentText = e.target.innerText;
      var matchMore = /(More)/gi;
      var isMoreSSE = currentText.match(matchMore) !== null;
      var that = this;
      // console.log(e)

      if (this.state.is_desktop_nav) {
        // on desktop size and touch events(tablet/mobile)
        // if the current nav selection is already open
        if (this.state.last_meganav_open == e.currentTarget.id) {
          if (isMoreSSE) {
            // toggle if it is SSE More button, do not redirect to page. Page still in progress -TL 3/4/19
            e.preventDefault();
            e.stopPropagation();
            this.closeMegaNavFor($parentElm);
          }
        } else {
          e.preventDefault();
          e.stopPropagation();
          if (this.state.last_meganav_open == null) {
            $('.page_cover').fadeIn('fast');
            var pageCover = document.getElementsByClassName('page_cover')[0];
            pageCover.addEventListener('touchend', this.removePageCover);
          }
          this.closeOpenDropdown(e.currentTarget.id, $parentElm);
        }
      } else {
        if (isMoreSSE) {
          // toggle if it is SSE More button, do not redirect to page. Page still in progress -TL 3/8/19
          e.preventDefault();
          e.stopPropagation();
        } else {
          return true;
        }
      }
    }
  }, {
    key: 'removePageCover',
    value: function removePageCover() {
      var pageCover = document.getElementsByClassName('page_cover');
      $('.page_cover').fadeOut();
      pageCover.removeEventListener('touchend', this.removePageCover);
    }

    //returns a jquery ref to a element if clicked on a or a > div/img etc
  }, {
    key: 'getMeAnHref',
    value: function getMeAnHref(e) {
      var url, el;
      url = $(e.target).attr('href');
      if (url) {
        el = $(e.target);
      } else {
        //if not a link, maybe it is a image/div in an a
        var parental_a = $(e.target).parents('a');
        if (parental_a.length > 0) {
          el = parental_a.eq(0);
        }
      }
      return el;
    }
  }, {
    key: 'openPageCover',
    value: function openPageCover() {
      var that = this;
      $('.page_cover').on('click touchevent', function () {
        if (that.state.last_meganav_open) {
          var $lastParentElm = $(document.getElementById(that.state.last_meganav_open).parentNode);
          that.closeMegaNavFor($lastParentElm);
        } else {
          $('.page_cover').fadeIn('fast');
        }
      });
    }
  }, {
    key: 'openMegaNav',
    value: function openMegaNav(e) {
      if (this.state.is_desktop_nav) {
        var $thisItem = $(e.currentTarget);

        if (this.props.subnav_only) {
          this.setSubnavPosition($thisItem);
        } else {
          this.openMegaNavFor($thisItem);
        }
      }
    }
  }, {
    key: 'openMegaNavFor',
    value: function openMegaNavFor($thisItem) {
      var $meganavContainer = $thisItem.find('.meganav_container');
      var $subnavContainer = $thisItem.find('.subnav');
      var that = this;

      if ($meganavContainer.length > 0) {
        $thisItem.addClass('expanded');
        $meganavContainer.show();
        this.openPageCover();
        this.setArrowAndNavPosition($thisItem);
      } else if ($subnavContainer.length > 0) {
        this.openPageCover();
        this.setSubnavPosition($thisItem);
      }
    }
  }, {
    key: 'closeMegaNav',
    value: function closeMegaNav(e) {
      if (this.state.is_desktop_nav) {
        var $thisItem = $(e.currentTarget);
        this.closeMegaNavFor($thisItem);
      }
    }
  }, {
    key: 'closeMegaNavFor',
    value: function closeMegaNavFor($thisItem) {
      var $meganavContainer = $thisItem.find('.meganav_container');
      $thisItem.removeClass('expanded');
      $('.page_cover').off('click touchevent', function () {
        $('.page_cover').fadeOut();
      });
      $meganavContainer.hide();
      this.setState({ last_meganav_open: null });
    }
  }, {
    key: 'showOrGo',
    value: function showOrGo(e) {
      var id = e.currentTarget.id;
      var that = this;
      console.log('showOrGo');
      if (this.state.is_desktop_nav && document.querySelector(".touchevents") != null) {
        if (this.state.last_description_open == id) {
          return true;
        } else {
          e.preventDefault();
          e.stopPropagation();
          that.setState({ last_description_open: id });
        }
      }
    }
  }, {
    key: 'clearLastDescriptionId',
    value: function clearLastDescriptionId(e) {
      this.setState({ last_description_open: null });
    }
  }, {
    key: 'setSubnavPosition',
    value: function setSubnavPosition($target) {
      var offsetleft = $target.offset().left;
      var outerwidth = $target.outerWidth() / 2;
      var offset = offsetleft + outerwidth - 16;
      var subnav_width = $('.subnav').width() / 2;
      var subnav_offset = offset - subnav_width;
      var ww = $(window).width();
      var mw = $target.find('.subnav').width();
      var pastRightSide = offsetleft + mw > $(window).width();

      if (pastRightSide) {
        var children = [].concat(_toConsumableArray($($target).children()));
        var target_li = children.find(function (e) {
          return e.className == 'global_subnav_container';
        });
        $(target_li).children().css({ "left": subnav_offset + 20 });
      }
    }
  }, {
    key: 'setArrowAndNavPosition',
    value: function setArrowAndNavPosition($target) {
      var offsetleft = $target.offset().left;
      var outerwidth = $target.outerWidth() / 2;
      var offset = offsetleft + outerwidth - 16;
      var meganav_width = $('.meganav_container').width() / 2;
      var no_feature_width = $('.meganav_container.no_feature').width() / 2;
      var wide_width = $('.meganav_container.wide').width() / 2;
      var meganav_offset = offset - meganav_width;
      var no_feature_offset = offset - no_feature_width;
      var wide_offset = offset - wide_width;
      $('.nav_item_indicator').show();
      $('.meganav_container').css({ "left": meganav_offset + 16 });
      $('.meganav_container.no_feature').css({ "left": no_feature_offset + 16 });
      $('.meganav_container.wide').css({ "left": wide_offset + 16 });

      if ($target.find('.meganav').hasClass('columnar')) {
        var top = $('.meganav.columnar li:first-child').position().top;

        $('.meganav.columnar li').each(function (index, value) {
          if ($(value).position().top == top) {
            $(value).addClass('top');
          }
        });
      }

      // -- Adjust position of menu so it doesn't go off right side of screen

      var ww = $(window).width();
      var mw = $target.find('.meganav_container').width();
      var lt = parseInt($('.meganav_container').css('left'));
      var rt = ww - (lt + mw);
      var pastRightSide = lt + mw > $(window).width();
      // console.log('meganav left: ' + lt);
      // console.log('meganav right: ' + rt);
      // console.log('meganav width  ' + mw);
      // console.log('window width ' + ww);
      // console.log('pastRightSide: ' + pastRightSide);
      // console.log('===========');
      if (rt < 10) {
        $('.meganav_container').css({ "left": "auto", "right": "10px" });
        $('.nav_item_indicator').css({ "left": meganav_width - 5 - rt });
      } else {
        $('.nav_item_indicator').css({ 'left': 'calc(50% - 15px)' });
      }
      // --
    }
  }, {
    key: 'openOrSubmit',
    value: function openOrSubmit(e) {
      if (this.state.search != '') {
        e.currentTarget.parentElement.submit();
      } else if (this.state.search_open) {
        this.setState({ search_open: false });
      } else {
        this.setState({ search_open: true });
      }
    }
  }, {
    key: 'changeSearch',
    value: function changeSearch(e) {
      var search = e.currentTarget.value;
      this.setState({ search: search });
    }
  }, {
    key: 'toggleModalSearch',
    value: function toggleModalSearch(e) {
      if (this.state.search != '') {
        e.currentTarget.parentElement.parentElement.submit();
      } else if (this.state.search_open) {
        this.setState({ search_open: false });
      } else {
        this.setState({ search_open: true });
      }
    }
  }, {
    key: 'getSearchSuggestions',
    value: function getSearchSuggestions() {
      if (this.state.modal_search_suggestions && typeof this.state.modal_search_suggestions == "object") {
        return React.createElement(
          'div',
          { className: 'search_suggestions' },
          React.createElement(
            'h3',
            null,
            'Suggestions'
          ),
          React.createElement(
            'ul',
            { className: 'search_suggestions_list' },
            this.state.modal_search_suggestions.map(function (v, i) {
              return React.createElement(
                'li',
                { key: 'suggestion_' + i },
                React.createElement(
                  'a',
                  { href: v.link },
                  v.title
                )
              );
            })
          )
        );
      }
    }

    // NOTE: label for meganav_search_input is new to support ESTD accessibility; inline style was used because of instance sass include differences.. meh -nmj
  }, {
    key: 'getSearchHtml',
    value: function getSearchHtml() {
      var _this11 = this;

      var hasPlaceholder = this.props.search_placeholder;
      var use_search = this.state.is_desktop_nav && typeof this.props.hide_search_on_desktop !== 'undefined' && this.props.hide_search_on_desktop === true ? false : this.props.search;
      if (use_search && this.props.modal_search) {
        return React.createElement(
          'form',
          { className: 'meganav_overlay_search modal_search meganav_search ' + (this.state.search_open ? 'open' : ''), action: this.props.search_submit ? this.props.search_submit : "/search.html" },
          React.createElement(
            'div',
            { className: 'modal_search_box' },
            React.createElement('input', { className: 'search_field', name: 'q', type: 'text', onChange: function (e) {
                _this11.changeSearch(e);
              }, value: this.state.search, placeholder: hasPlaceholder ? hasPlaceholder.placeholder : "search" }),
            React.createElement('div', { className: 'search_submit', onClick: function (e) {
                _this11.toggleModalSearch(e);
              } })
          ),
          this.getSearchSuggestions(),
          React.createElement('div', { className: 'modal_close', onClick: function (e) {
              _this11.toggleModalSearch(e);
            } })
        );
      }if (use_search) {
        return React.createElement(
          'form',
          { className: 'meganav_overlay_search meganav_search', action: this.props.search_submit ? this.props.search_submit : "/search.html" },
          React.createElement(
            'label',
            { htmlFor: 'meganav_search_input', className: 'search_field_label', style: { display: 'inline-block', textIndent: '-9999px', overflow: 'hidden' } },
            'search'
          ),
          React.createElement('input', { id: 'meganav_search_input', className: 'search_field ' + (this.state.search_open ? 'search_open' : ''), name: 'q', type: 'text', onChange: function (e) {
              _this11.changeSearch(e);
            }, value: this.state.search, placeholder: hasPlaceholder ? hasPlaceholder.placeholder : "search" }),
          React.createElement('div', { className: 'search_submit', onClick: function (e) {
              _this11.openOrSubmit(e);
            } })
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var that = this;
      return React.createElement(
        'span',
        { style: { visibility: this.state.nav_items.length == 0 ? "hidden" : "visible" } },
        React.createElement(
          'ul',
          { className: 'nav' },
          this.state.nav_items.map(function (v, i) {
            return that.getNavItemHTML(v, i);
          })
        ),
        this.getSearchHtml()
      );
    }
  }]);

  return Meganav;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MegasectionNav = (function (_React$Component) {
  _inherits(MegasectionNav, _React$Component);

  function MegasectionNav(props) {
    _classCallCheck(this, MegasectionNav);

    _get(Object.getPrototypeOf(MegasectionNav.prototype), 'constructor', this).call(this, props);

    var is_touch = $('html').hasClass('touchevents');

    this.state = {
      sticky: false,
      nav_pos: -1,
      active: false,
      active_sub_nav: {},
      last_clicked_sub_nav: {},
      is_touch: is_touch
    };

    this.stick = this.stick.bind(this);
  }

  _createClass(MegasectionNav, [{
    key: 'toggleNav',
    value: function toggleNav() {
      this.setState({ active: !this.state.active });
    }
  }, {
    key: 'toggleSubNav',
    value: function toggleSubNav(name) {
      var data = this.state.active_sub_nav;
      var newValue = data[name] ? null : name;
      data[name] = newValue;
      this.setState({ active_sub_nav: data, last_clicked_sub_nav: name });
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      var nav_pos = undefined;
      if ($('.magic_shell_subnav').length > 0) {
        nav_pos = $('.magic_shell_subnav').height();
      } else {
        //nav_pos = $('.megasection_nav').offset().top
      }

      if (typeof nav != "undefined") {
        nav.onScroll = null;
      }

      if (typeof magic_shell_nav != "undefined") {
        magic_shell_nav.onScroll = null;
      }

      if (this.props.has_feature && typeof IntersectionObserver != "undefined") {
        var options = {
          root: null,
          rootMargin: '0px',
          threshold: [0]
        };

        var observer = new IntersectionObserver(this.stick, options);

        var target = document.querySelector('.main_feature');
        observer.observe(target);
      }
    }
  }, {
    key: 'stick',
    value: function stick(entries, observer) {
      var sticky = !entries[0].isIntersecting;
      this.setState({ sticky: sticky }, function () {
        $('body').toggleClass("secondary_nav_is_fixed", sticky);
      });
    }
  }, {
    key: 'getCurrentPageName',
    value: function getCurrentPageName() {
      var currentItems = this.props.nav.items.filter(function (item) {
        return item.current;
      });
      if (currentItems.length > 0) {
        return React.createElement(
          'span',
          { className: 'megasection_page_name' },
          this.state.sticky || !this.props.has_feature ? ': ' : '',
          '' + currentItems[0].name
        );
      } else {
        return "";
      }
    }
  }, {
    key: 'getNavItemHTML',
    value: function getNavItemHTML(item, i) {
      return React.createElement(
        'li',
        { key: i, className: '' + (item.current ? 'current' : '') },
        this.getArrowBox(item),
        React.createElement(
          'div',
          { className: 'nav_title' },
          this.getLinkTitleTarget(item, true)
        ),
        this.getSubnav(item)
      );
    }
  }, {
    key: 'onArrowBoxClick',
    value: function onArrowBoxClick(e) {
      console.log("onArrowBoxClick");
      this.toggleSubNav(e.target.getAttribute("data-name"));
    }
  }, {
    key: 'getArrowBox',
    value: function getArrowBox(item) {
      var that = this;
      var name = item.name;
      if (item.items && item.items.length > 0 && !this.state.is_touch) {
        return React.createElement(
          'button',
          { type: 'button',
            onClick: function () {
              that.toggleSubNav(item.name);
            },
            className: 'arrow_box ' + (this.state.active_sub_nav[item.name] ? "reverse" : "") },
          React.createElement(
            'span',
            { className: 'arrow_down' },
            'Expand'
          )
        );
      } else if (item.items && item.items.length > 0 && this.state.is_touch) {
        return React.createElement(
          'button',
          { type: 'button',
            onMouseDown: function () {
              that.toggleSubNav(item.name);
            },
            className: 'arrow_box ' + (this.state.active_sub_nav[item.name] ? "reverse" : "") },
          React.createElement(
            'span',
            { className: 'arrow_down', 'data-name': item.name },
            'Expand'
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getSubnav',
    value: function getSubnav(item) {
      var that = this;
      if (item.items && item.items.length > 0) {
        return React.createElement(
          'div',
          { className: 'megasection_subnav_container ' + (this.state.active_sub_nav[item.name] ? "" : "megasection_subnav_container--hidden") },
          React.createElement(
            'ul',
            { className: 'megasection_subnav' },
            item.items.map(function (v, i) {
              return React.createElement(
                'li',
                { key: 'sub-' + i, className: '' + (v.current ? 'current' : '') },
                that.getLinkTitleTarget(v)
              );
            })
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getLinkTitleTarget',

    // NOTE: android tablet doesn't seem to see onClick events ?? using onMouseDown when touchevents
    // onMouseDown was changed to onTouchEnd b/c onMouseDown was not working on iPhone, but onTouchEnd works on android and IOS
    value: function getLinkTitleTarget(item, main) {
      var _this = this;

      if (this.state.is_touch) {
        return React.createElement(
          'a',
          { className: main ? 'main_nav_item' : '', 'data-href': item.link, onTouchEnd: function (e) {
              return _this.onSubnavClick(e, item, main);
            }, target: item.target },
          item.name
        );
      } else {
        return React.createElement(
          'a',
          { className: main ? 'main_nav_item' : '', 'data-href': item.link, onClick: function (e) {
              return _this.onSubnavClick(e, item, main);
            }, target: item.target },
          item.name
        );
      }
    }
  }, {
    key: 'onSubnavClick',
    value: function onSubnavClick(event, item, main) {
      console.log('onSubnavClick');
      if ($('html').hasClass('touchevents') && main) {
        this.toggleSubNav(item.name);
        if (this.state.last_clicked_sub_nav === item.name) {
          window.location = item.link;
        } else {
          return false;
        }
      } else {
        this.toggleSubNav(item.name);
        window.location = item.link;
        return false;
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var that = this;
      return React.createElement(
        'div',
        { className: 'megasection_nav ' + (this.state.sticky ? 'sticky' : '') + ' ' + (this.state.active ? '' : 'megasection_nav--nav-hidden') },
        React.createElement(
          'div',
          { className: 'megasection_title_container ' + (this.state.active ? '' : 'megasection_title_container--nav-hidden'), onClick: function () {
              _this2.toggleNav();
            } },
          React.createElement(
            'span',
            { className: 'megasection_title' },
            this.state.sticky || this.state.active || !this.props.has_feature ? this.props.nav.title : '',
            this.getCurrentPageName()
          )
        ),
        React.createElement(
          'ul',
          { className: 'nav ' + (this.state.active ? '' : 'nav--hidden') },
          this.props.nav.items.map(function (v, i) {
            return that.getNavItemHTML(v, i);
          })
        )
      );
    }
  }]);

  return MegasectionNav;
})(React.Component);
//In use on climate if nowhere else
var MissionListItem = function (props) {
  var item = props.item;
  return React.createElement(
    "div",
    { className: "image_and_description_container" },
    React.createElement(
      "a",
      { href: item.url, target: item.target },
      React.createElement(
        "div",
        { className: "rollover_description" },
        React.createElement(
          "div",
          { className: "rollover_description_inner" },
          React.createElement(
            "div",
            { className: "rollover_description_text" },
            item.description
          ),
          React.createElement(
            "div",
            { className: "link_text_rollover" },
            item.link_text
          )
        ),
        React.createElement(
          "div",
          { className: "overlay_arrow" },
          React.createElement("img", { src: "/assets/overlay-arrow.png", alt: "More" })
        )
      ),
      props.item.thumb ? React.createElement(
        "div",
        { className: "list_image" },
        React.createElement("img", { className: "thumb", src: props.item.thumb, alt: props.item.title })
      ) : "",
      React.createElement(
        "div",
        { className: "bottom_gradient" },
        React.createElement(
          "div",
          null,
          React.createElement(
            "h3",
            null,
            item.title
          )
        )
      )
    ),
    React.createElement(
      "div",
      { className: "list_text" },
      React.createElement(
        "div",
        { className: "content_title" },
        React.createElement(
          "a",
          { href: item.url, target: item.target },
          item.title
        )
      ),
      React.createElement("div", { className: "article_teaser_body", dangerouslySetInnerHTML: { __html: item.description } }),
      React.createElement(
        "div",
        { className: "link_text" },
        React.createElement(
          "a",
          { href: item.url, target: item.target },
          item.link_text
        )
      )
    )
  );
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Modal = (function (_React$Component) {
	_inherits(Modal, _React$Component);

	function Modal() {
		_classCallCheck(this, Modal);

		_get(Object.getPrototypeOf(Modal.prototype), 'constructor', this).apply(this, arguments);
	}

	_createClass(Modal, [{
		key: 'render',
		value: function render() {
			var _this = this;

			if (this.props.isOpen === false) return null;

			var modalStyle = {
				position: 'absolute',
				top: '50vh',
				left: '50vw',
				transform: 'translate(-50%, -50%)',
				zIndex: '9999',
				background: '#fff'
			};

			if (this.props.width && this.props.height) {
				modalStyle.width = this.props.width + 'px';
				modalStyle.height = this.props.height + 'px';
				modalStyle.marginLeft = '-' + this.props.width / 2 + 'px', modalStyle.marginTop = '-' + this.props.height / 2 + 'px', modalStyle.transform = null;
			}

			if (this.props.style) {
				for (var key in this.props.style) {
					modalStyle[key] = this.props.style[key];
				}
			}

			var backdropStyle = {
				position: 'absolute',
				width: '100%',
				height: '100%',
				top: '0px',
				left: '0px',
				zIndex: '9998',
				background: 'rgba(0, 0, 0, 0.8)'
			};

			if (this.props.backdropStyle) {
				for (var key in this.props.backdropStyle) {
					backdropStyle[key] = this.props.backdropStyle[key];
				}
			}

			return React.createElement(
				'div',
				{ className: this.props.containerClassName },
				React.createElement(
					'div',
					{ className: this.props.className, style: modalStyle },
					this.props.children
				),
				!this.props.noBackdrop && React.createElement('div', { className: this.props.backdropClassName, style: backdropStyle,
					onClick: function (e) {
						return _this.close(e);
					} })
			);
		}
	}, {
		key: 'close',
		value: function close(e) {
			e.preventDefault();

			if (this.props.onClose) {
				this.props.onClose();
			}
		}
	}]);

	return Modal;
})(React.Component);
//for about the author on sse and europa
var MultiObjectListItem = function (props) {
  var item = props.item;
  return React.createElement(
    "div",
    { className: "image_and_description_container" },
    React.createElement(
      "a",
      { href: item.link, target: item.target },
      React.createElement(
        "div",
        { className: "rollover_description" },
        React.createElement(
          "div",
          { className: "rollover_description_inner" },
          item.description
        ),
        React.createElement(
          "div",
          { className: "overlay_arrow" },
          React.createElement("img", { src: "/assets/overlay-arrow.png", alt: "More" })
        )
      ),
      React.createElement(
        "div",
        { className: "list_image" },
        React.createElement("img", { src: item.image_src ? item.image_src : "/assets/public/missing.png", alt: item.title })
      ),
      React.createElement(
        "div",
        { className: "bottom_gradient" },
        React.createElement(
          "div",
          null,
          React.createElement(
            "h3",
            null,
            item.title
          )
        )
      )
    ),
    React.createElement(
      "div",
      { className: "list_text" },
      React.createElement(
        "div",
        { className: "list_date" },
        item.date
      ),
      React.createElement(
        "div",
        { className: "content_title" },
        React.createElement(
          "a",
          { href: item.link, target: item.target },
          item.title
        )
      ),
      React.createElement(
        "div",
        { className: "moli_teaser_body" },
        item.description,
        item.item_type ? React.createElement(
          "p",
          null,
          "Item type: ",
          item.item_type
        ) : null
      )
    )
  );
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var NewsListItem = (function (_React$Component) {
  _inherits(NewsListItem, _React$Component);

  function NewsListItem() {
    _classCallCheck(this, NewsListItem);

    _get(Object.getPrototypeOf(NewsListItem.prototype), "constructor", this).apply(this, arguments);
  }

  _createClass(NewsListItem, [{
    key: "render",
    value: function render() {
      var item = this.props.item;
      return React.createElement(
        "div",
        { className: "image_and_description_container" },
        React.createElement(
          "a",
          { href: item.url, target: item.target },
          React.createElement(
            "div",
            { className: "rollover_description" },
            React.createElement(
              "div",
              { className: "rollover_description_inner" },
              item.description
            ),
            React.createElement(
              "div",
              { className: "overlay_arrow" },
              React.createElement("img", { src: "/assets/overlay-arrow.png", alt: "More" })
            )
          ),
          React.createElement(
            "div",
            { className: "list_image" },
            React.createElement("img", { src: item.thumb, alt: item.main_image_alt })
          ),
          React.createElement(
            "div",
            { className: "bottom_gradient" },
            React.createElement(
              "div",
              null,
              React.createElement(
                "h3",
                null,
                item.title
              )
            )
          )
        ),
        React.createElement(
          "div",
          { className: "list_text" },
          React.createElement(
            "div",
            { className: "list_date" },
            item.date
          ),
          React.createElement(
            "div",
            { className: "content_title" },
            React.createElement(
              "a",
              { href: item.url, target: item.target },
              item.title
            )
          ),
          React.createElement(
            "div",
            { className: "article_teaser_body" },
            item.description
          )
        )
      );
    }
  }]);

  return NewsListItem;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var OtpDesktopNav = (function (_React$Component) {
  _inherits(OtpDesktopNav, _React$Component);

  function OtpDesktopNav(props) {
    _classCallCheck(this, OtpDesktopNav);

    _get(Object.getPrototypeOf(OtpDesktopNav.prototype), 'constructor', this).call(this, props);
    this.sticky_buffer = 30;
    this.sticky_offset = 0;
    this.sticky_bottom_offset = 0;
    this.sticky_threshold_top = 0;
    this.sticky_threshold_bottom = 0;
    this.is_within_sticky_thresholds = false;
    this.is_after_sticky_threshold = false;
    this.state = {
      anchors: [],
      is_loaded: false,
      desktop_otp_nav_open: true,
      desktop_opt_nav_is_fixed: false,
      desktop_otp_was_left_open_when_fixed: true,
      current_anchor: -1
    };
  }

  _createClass(OtpDesktopNav, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var _this = this;

      var that = this;

      this.setState({ anchors: this.getAnchors() }, function () {
        // if a shim is needed to prop open a space for the nav and we have anchors
        if (_this.props.column_shim && $('.content_page').hasClass(_this.props.column_shim) && _this.state.anchors.length) {
          // add class "has_on_this_page_nav" to put a left margin on the primary column
          $('.' + _this.props.column_shim).addClass('has_margin_for_otp_nav');
        } else {
          // add class "two_column" to adjust the width of the primary column
          $('.' + _this.props.column_shim).addClass('two_column');
        }
      });

      window.addEventListener('scroll', function () {
        that.queryScrollAndSetPosition();
      });
      window.addEventListener('resize', function () {
        that.setStickyMeasurementsAndQueryScroll();
      });

      that.queryDocumentReadyStateForComplete();
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      window.removeEventListener('scroll', this.queryScrollAndSetPosition);
      window.removeEventListener('resize', this.setStickyMeasurementsAndQueryScroll);
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      // page needs to be remeasured when moving between chapters
      var that = this;

      this.setState({ anchors: this.getAnchors(), is_loaded: false }, function () {
        // hide nav while measuring elements
        that.queryDocumentReadyStateForComplete();
      });
    }
  }, {
    key: 'queryDocumentReadyStateForComplete',
    value: function queryDocumentReadyStateForComplete() {
      // TODO: this needs work. cannot figure out how to detect when all content has loaded for child components -smb -8-27-2020
      // this is obvious on bosf and 5 ways
      var that = this;

      // polling for ready state complete. only works for initial page load. changes in child components not detected.
      var interval = setInterval(function () {
        if (document.readyState === 'complete') {
          clearInterval(interval);
          that.setPageIsLoadedState();
        }
      }, 600); // high ms here for SSE bosf. this solution is by no means full-proof
    }
  }, {
    key: 'setPageIsLoadedState',
    value: function setPageIsLoadedState() {
      var that = this;
      that.setState({ is_loaded: true }, function () {
        that.setStickyMeasurements();
        that.queryScrollAndSetPosition();
      });
    }
  }, {
    key: 'getPageNav',
    value: function getPageNav() {
      var anchors = [];
      $('a.mb_anchor').each(function (i, el) {
        var atext = $(el).parent().text().trim();
        var aname = $(el).attr("name");
        anchors.push({ href: aname, text: atext });
      });
      return anchors;
    }
  }, {
    key: 'getAnchors',
    value: function getAnchors() {
      return typeof this.props.page_anchors != "undefined" && Array.isArray(this.props.page_anchors) ? this.props.page_anchors : this.getPageNav();
    }
  }, {
    key: 'queryScrollAndSetPosition',
    value: function queryScrollAndSetPosition() {
      var st = $(window).scrollTop();
      // let thresh = 800;

      // TODO: query threshold height in the on component did mount
      // move over the anchor bolding code
      // make sure otp nav is working as we move from one bosf page to another
      if (st <= this.sticky_threshold_top) {
        this.is_within_sticky_thresholds = false;
        this.is_after_sticky_threshold = false;
        this.setState({ desktop_opt_nav_is_fixed: false, desktop_otp_nav_open: true });
      } else if (st > this.sticky_threshold_top && st < this.sticky_threshold_bottom) {
        this.is_within_sticky_thresholds = true;
        this.is_after_sticky_threshold = false;
        this.setState({ desktop_opt_nav_is_fixed: true });
        if (!this.state.desktop_otp_was_left_open_when_fixed) {
          this.setState({ desktop_otp_nav_open: false });
        }
      } else if (true) {
        this.is_within_sticky_thresholds = false;
        this.is_after_sticky_threshold = true;
        this.setState({ desktop_opt_nav_is_fixed: false });
      }

      // if (st <= otp_nav.sticky_threshold_top) {
      //   $wrapper_desktop.removeClass('nav_is_fixed');
      //   $wrapper_desktop.css("top", "");
      //   $wrapper_desktop.addClass('nav_is_open');
      // } else if (st > otp_nav.sticky_threshold_top && st < otp_nav.sticky_threshold_bottom) {
      //   $wrapper_desktop.addClass('nav_is_fixed');
      //   $wrapper_desktop.css("top", otp_nav.sticky_offset);
      //   if (!otp_nav.was_left_open_when_sticky) {
      //     $wrapper_desktop.removeClass('nav_is_open');
      //   }
      // } else {
      //   $wrapper_desktop.removeClass('nav_is_fixed');
      //   $wrapper_desktop.css("top", otp_nav.sticky_bottom_offset);
      // }

      // let boundaries = this.anchor_bounds;
      // for (let i = 0; i < boundaries.length; i++) {
      //   let boundary = boundaries[i];
      //
      //   if (st > boundary[0] && st < boundary[1]) {
      //     this.setState({current_anchor: i});
      //   } else {
      //     // this.setState({current_anchor: -1});
      //   }
      // }
    }
  }, {
    key: 'setStickyMeasurementsAndQueryScroll',
    value: function setStickyMeasurementsAndQueryScroll() {
      this.setStickyMeasurements();
      this.queryScrollAndSetPosition();
    }
  }, {
    key: 'setStickyMeasurements',
    value: function setStickyMeasurements() {
      var $primary_column = $('#primary_column');

      // get sticky offset
      var $site_area_header_height = $('.site_header_area').outerHeight(true);
      this.sticky_offset = $site_area_header_height + this.sticky_buffer;

      // get top threshold for sticky
      var $offset_top = $primary_column.offset().top;
      this.sticky_threshold_top = $offset_top - this.sticky_offset;

      // get bottom threshold for sticky
      if (typeof this.props.sticky_bottom_fn !== "undefined") {
        var stb_arr = this.props.sticky_bottom_fn(this.sticky_offset);
        this.sticky_threshold_bottom = stb_arr[0];
        this.sticky_bottom_offset = stb_arr[1];
      } else {
        var $primary_column_height = $primary_column.outerHeight(true);
        var $nav_height = $('.on_this_page_nav_wrapper.desktop').outerHeight(true);
        var $offset_bottom = $offset_top + $primary_column_height;
        this.sticky_threshold_bottom = $offset_bottom - $nav_height - this.sticky_offset;

        // get bottom sticky offset
        var $content_page_padding_top = parseFloat($(".content_page").css("padding-top"));
        this.sticky_bottom_offset = $content_page_padding_top + $primary_column_height - $nav_height;
      }
    }
  }, {
    key: 'toggleOnThisPageNavDesktop',
    value: function toggleOnThisPageNavDesktop() {
      if (!this.state.desktop_opt_nav_is_fixed) return;
      this.setState({ desktop_otp_nav_open: !this.state.desktop_otp_nav_open, desktop_otp_was_left_open_when_fixed: !this.state.desktop_otp_was_left_open_when_fixed });
    }
  }, {
    key: 'getOTPNavTop',
    value: function getOTPNavTop() {
      if (this.state.desktop_opt_nav_is_fixed) {
        return { top: this.sticky_offset };
      } else if (this.is_after_sticky_threshold) {
        return { top: this.sticky_bottom_offset };
      } else {
        return {};
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      if (this.state.anchors.length > 0) {
        return React.createElement(
          'div',
          { className: 'on_this_page_nav_wrapper desktop ' + (this.state.desktop_otp_nav_open ? "nav_is_open" : "") + ' ' + (this.state.desktop_opt_nav_is_fixed ? "nav_is_fixed" : "") + ' ' + (this.state.is_loaded ? '' : 'hidden'), ref: 'otp_nav_wrapper_desktop', style: this.getOTPNavTop() },
          React.createElement(
            'div',
            { className: 'on_this_page_nav' },
            React.createElement(
              'div',
              { className: 'title_wrapper', ref: 'desktop_title_wrapper', onClick: function () {
                  _this2.toggleOnThisPageNavDesktop();
                } },
              React.createElement(
                'h4',
                { className: 'page_nav_title' },
                'On this page'
              ),
              React.createElement('div', { className: 'hamburger' })
            ),
            React.createElement(
              'ul',
              null,
              this.state.anchors.map(function (anchor, i) {
                return React.createElement(
                  'li',
                  { key: i },
                  React.createElement(
                    'a',
                    { href: "#" + anchor.href },
                    anchor.text
                  )
                );
              })
            )
          )
        );
      } else {
        return null;
      }
    }
  }]);

  return OtpDesktopNav;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var OtpMobileNav = (function (_React$Component) {
  _inherits(OtpMobileNav, _React$Component);

  function OtpMobileNav(props) {
    _classCallCheck(this, OtpMobileNav);

    _get(Object.getPrototypeOf(OtpMobileNav.prototype), "constructor", this).call(this, props);
    this.state = {
      mobile_otp_nav_open: false
    };
  }

  _createClass(OtpMobileNav, [{
    key: "toggleOnThisPageNavMobile",
    value: function toggleOnThisPageNavMobile() {
      this.setState({ mobile_otp_nav_open: !this.state.mobile_otp_nav_open });
    }
  }, {
    key: "getPageNav",
    value: function getPageNav() {
      var anchors = [];
      $('a.mb_anchor').each(function (i, el) {
        var atext = $(el).parent().text().trim();
        var aname = $(el).attr("name");
        anchors.push({ href: aname, text: atext });
      });
      return anchors;
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;

      var anchors = typeof this.props.page_anchors != "undefined" && Array.isArray(this.props.page_anchors) ? this.props.page_anchors : this.getPageNav();

      if (anchors.length > 0) {
        return React.createElement(
          "div",
          { className: "on_this_page_nav_wrapper mobile " + (this.state.mobile_otp_nav_open ? "nav_is_open" : "") },
          React.createElement(
            "div",
            { className: "on_this_page_nav" },
            React.createElement(
              "div",
              { className: "title_wrapper", onClick: function () {
                  _this.toggleOnThisPageNavMobile();
                } },
              React.createElement(
                "h4",
                { className: "page_nav_title" },
                "On this page"
              ),
              React.createElement("div", { className: "arrow" })
            ),
            React.createElement(
              "ul",
              null,
              anchors.map(function (anchor, i) {
                return React.createElement(
                  "li",
                  { key: i },
                  React.createElement(
                    "a",
                    { href: "#" + anchor.href },
                    anchor.text
                  )
                );
              })
            )
          )
        );
      } else {
        return null;
      }
    }
  }]);

  return OtpMobileNav;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Very similar to solar system but missing lots of items like stellar counts etc. look at solar system dashboard if
// looking for those implementations. removed from this one.
/*
* Examples:
* {"title": "Distance from Sun", "from":"SUN", "to":"JUPITER", "type":"api", "request":"distance", "toggle_units": true}
* {"title": "One Way Light Time to the Sun", "from":"SUN", "to":"JUPITER", "type":"api", "request":"one_way_light_time", "decimals":4},
* {"title": "Length of Year", "value": "4,333 Earth Days"}
* {"title": "Length of Year", "value": "4,333 Earth Days", "link": "/foo", "target": "_self"}
* {"title": "Length of Year", "value": "4,333 Earth Days", "overlay": "/foo"}
* {"type":"countdown", "id": 11515, "count_up":false}
* {"type":"sols_on_mars", "title": "Curiosity", "sol_0": 49268, "deg_east": 137.406}
* {"type": "api_count", "title": "Foo", "url": "/api/v1/events?category=202" "units": "Events" } //relies on total returned in api
* {"title":"Soundings To Date","value":"324000", "overlay": "/overlay-soundings", "type": "calculation", "subtype": "per-day-since", "since":"2002-08-03"}
*
* */

var PageDashboard = (function (_React$Component) {
  _inherits(PageDashboard, _React$Component);

  function PageDashboard(props) {
    _classCallCheck(this, PageDashboard);

    _get(Object.getPrototypeOf(PageDashboard.prototype), 'constructor', this).call(this, props);
    this.state = {
      api: [],
      countdown: []
    };
  }

  _createClass(PageDashboard, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      if (!this.props.single_slide) {
        $('#page_dashboard').on('init', function (event, slick) {
          $('.dashboard').css("visibility", "visible");
        });

        this.carousel = $('#page_dashboard').slick({
          dots: false,
          infinite: true,
          speed: 300,
          slide: '.dashboard .slide',
          slidesToShow: 5,
          slidesToScroll: 5,
          centerMode: false,
          variableWidth: false,
          arrows: true,
          onInit: function (slider) {
            // deprecated
            $('.dashboard').css("visibility", "visible");
          },
          responsive: [{
            breakpoint: 1500,
            settings: {
              slidesToShow: 4,
              slidesToScroll: 4
            }
          }, {
            breakpoint: 1200,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 3
            }
          }, {
            breakpoint: 1024,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 2
            }
          }, {
            breakpoint: 769,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 2
            }
          }, {
            breakpoint: 600,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1,
              centerPadding: '0px'
            }
          }
          /*
          Were using the 700 pixel breakpoint above,
          since the SSE site has particularly long item names
          on the Beyond the Solar System page
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1,
              centerPadding: '0px'
            }
          }
          */
          ]
        });

        $('body').on('dashboard_resize', function () {
          // https://github.com/kenwheeler/slick/issues/429#issuecomment-57450725
          $('#page_dashboard')[0].slick.refresh();
        });

        // SHIM: The slick slider doesnt seem to respond to orientation changes on Android devices
        // (possibly because theres a delay while the browser is rendering the page)
        window.addEventListener('orientationchange', function () {
          var clock = undefined;

          // Refresh the slider every half second
          clock = setInterval(function () {
            // https://github.com/kenwheeler/slick/issues/429#issuecomment-57450725
            $('#page_dashboard')[0].slick.refresh();
          }, 500);

          // Stop refreshing after 3 seconds
          setTimeout(function () {
            clearInterval(clock);
          }, 3000);
        });
      }
      document.body.classList.add("has_dashboard");
    }

    //pulled from https://stackoverflow.com/questions/5731193/how-do-i-format-numbers-using-javascript
  }, {
    key: 'formatThousandsNoRounding',
    value: function formatThousandsNoRounding(n, dp) {
      var e = '',
          s = e + n,
          l = s.length,
          b = n < 0 ? 1 : 0,
          i = s.lastIndexOf('.'),
          j = i == -1 ? l : i,
          r = e,
          d = s.substr(j + 1, dp);
      while ((j -= 3) > b) {
        r = ',' + s.substr(j, 3) + r;
      }
      return s.substr(0, j + 3) + r + (dp ? '.' + d + (d.length < dp ? '00000'.substr(0, dp - d.length) : e) : e);
    }
  }, {
    key: 'convertOption',
    value: function convertOption(item, i, just_the_val) {
      var multi_idx = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];

      if (item.type == "api") {
        return this.buildApiSlide(item, i, just_the_val);
      } else if (item.type == "calculation") {
        return this.buildCalcSlide(item, i, just_the_val);
      } else if (item.type == "api_count") {
        return this.buildApiCountSlide(item, i, just_the_val);
      } else if (item.type == "countdown") {
        return this.buildCountdownSlide(item, i, multi_idx);
      } else if (item.type == "sols_on_mars") {
        return this.buildMarsSolsSlide(item, i, just_the_val);
      } else if (item.type == "raw_images") {
        return this.buildRawImagesSlide(item, i, just_the_val);
      } else if (typeof item.values != "undefined") {
        return this.buildMultipleValuesSlide(item, i);
      } else {
        return this.buildStaticSlide(item, just_the_val, { suffix: item.suffix });
      }
    }
  }, {
    key: 'buildMarsSolsSlide',
    value: function buildMarsSolsSlide(item, i, just_the_val) {
      if (just_the_val) {
        return React.createElement(SolsOnMars, { deg_east: item['deg_east'], sol_0: item['sol_0'] });
      } else {
        return React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(
            'div',
            { className: 'readout' },
            React.createElement(
              'div',
              { className: 'title' },
              item['title']
            ),
            React.createElement(SolsOnMars, { deg_east: item['deg_east'], sol_0: item['sol_0'] })
          )
        );
      }
    }
  }, {
    key: 'buildRawImagesSlide',
    value: function buildRawImagesSlide(item, i, just_the_val) {
      if (just_the_val) {
        return React.createElement(RawImagesDashboard, { mission: item['mission'] });
      } else {
        return React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(
            'div',
            { className: 'readout' },
            React.createElement(
              'div',
              { className: 'title' },
              item['title']
            ),
            React.createElement(RawImagesDashboard, { mission: item['mission'] })
          )
        );
      }
    }
  }, {
    key: 'buildCalcSlide',
    value: function buildCalcSlide(item, i, just_the_val) {
      var that = this;
      var suffix = item && item.suffix ? " " + item.suffix : "";
      if (just_the_val) {
        return React.createElement(
          'div',
          { className: 'value' },
          this.calculateForSubtype(item),
          suffix
        );
      } else {
        return React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(
            'div',
            { className: 'readout' },
            React.createElement(
              'div',
              { className: 'title' },
              item.title
            ),
            React.createElement(
              'div',
              { className: 'value' },
              Math.round(this.calculateForSubtype(item)).toLocaleString(),
              suffix
            )
          )
        );
      }
    }
  }, {
    key: 'calculateForSubtype',
    value: function calculateForSubtype(item) {
      switch (item.subtype) {
        case "per-day-since":
          var now = new Date();
          var start_date = new Date(item.since);
          var diff_time = now.getTime() - start_date.getTime();
          var diff_days = diff_time / (1000 * 3600 * 24);
          return diff_days * parseFloat(item.value);
          break;
        default:
          console.error("UNKNOWN Calculation for: ", item.subtype);
          return "";
      }
    }
  }, {
    key: 'buildApiSlide',
    value: function buildApiSlide(item, i, just_the_val) {
      if (just_the_val) {
        return React.createElement(SpiceAPI, { base_url: '/spice_data', query: item });
      } else {
        return React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(
            'div',
            { className: 'readout' },
            React.createElement(
              'div',
              { className: 'title' },
              item['title']
            ),
            React.createElement(SpiceAPI, { base_url: '/spice_data', query: item })
          )
        );
      }
    }
  }, {
    key: 'buildApiCountSlide',
    value: function buildApiCountSlide(item, i, just_the_val) {
      if (just_the_val) {
        return React.createElement(ApiCount, { url: item['url'], units: item['units'] });
      } else {
        return React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(
            'div',
            { className: 'readout' },
            React.createElement(
              'div',
              { className: 'title' },
              item['title']
            ),
            React.createElement(ApiCount, { url: item['url'], units: item['units'] })
          )
        );
      }
    }
  }, {
    key: 'buildCountdownSlide',
    value: function buildCountdownSlide(item, i, multi_idx) {
      var data = this.state.countdown[i];
      if (typeof multi_idx == "number" && Array.isArray(data)) {
        data = data[multi_idx];
      }
      if (data && !Array.isArray(data)) {
        return React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(Countdown, { count_up: item['count_up'], date: data['date'], title: data['title'], sols: data['sols'], sol_0: data['sol_0'], deg_east: data['deg_east'] })
        );
      } else {
        this.getCountdownData(item, i, multi_idx);
      }
    }
  }, {
    key: 'buildMultipleValuesSlide',
    value: function buildMultipleValuesSlide(item, i) {
      console.log(item);
      var that = this;
      return React.createElement(
        'div',
        null,
        React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(
            'div',
            { className: 'readout multiple' },
            React.createElement(
              'div',
              { className: 'title' },
              item["title"]
            ),
            item.values.map(function (v, j) {
              if (j + 1 == item.values.length) {
                return React.createElement(
                  'span',
                  { className: 'value_container last' },
                  that.convertOption(v, i, true, j)
                );
              } else {
                return React.createElement(
                  'span',
                  { className: 'value_container' },
                  that.convertOption(v, i, true, j)
                );
              }
            })
          )
        )
      );
    }
  }, {
    key: 'getCountdownData',
    value: function getCountdownData(item, i, multi_idx) {
      var that = this;
      $.getJSON('/api/v1/basic_html_elements/' + item['id'] + '}', function (data) {
        if (data['publish_date']) {
          var new_countdown = that.state.countdown;
          if (typeof multi_idx == 'number') {
            if (!Array.isArray(new_countdown[i])) {
              new_countdown[i] = [];
            }
            new_countdown[i][multi_idx] = { date: data['publish_date'], title: data['title'] };
          } else {
            new_countdown[i] = { date: data['publish_date'], title: data['title'] };
          }
          that.setState({ countdown: new_countdown });
        }
      });
    }
  }, {
    key: 'loadOverlay',
    value: function loadOverlay(link) {
      $('body').trigger('feed_hipo', { url: link });
    }
  }, {
    key: 'loadMepOverlay',
    value: function loadMepOverlay(e, link) {
      $('html,body').animate({ scrollTop: 0 }, 280);
      var url = link + "?layout=empty&override_preview=true";
      var $target = $(e.currentTarget);

      if ($target.hasClass('current') && $('#vital_signs_modal').hasClass('visible')) {
        $target.removeClass('current');
        vital_signs.closeModal();
      } else {
        console.log("open modal!");

        // Remove current from all dashboard items and add to new one
        $('.vital_signs_menu .slide.overlay').removeClass('current');
        $target.addClass('current');

        // If we are switching from another modal, do the transition
        // otherwise just load it -JM
        if ($('#vital_signs_modal').hasClass('visible')) {
          vital_signs.closeModal(function () {
            $('#vital_signs_modal .loading').show();
            vital_signs.loadModal(url);
          });
        } else {
          $('#vital_signs_modal .loading').show();
          vital_signs.loadModal(url);
        }
      }
    }
  }, {
    key: 'buildStaticSlide',
    value: function buildStaticSlide(item, just_the_val, options) {
      var that = this;
      var suffix = options && options.suffix ? " " + options.suffix : "";
      if (just_the_val) {
        return React.createElement(
          'div',
          { className: 'value' },
          item.value,
          suffix
        );
      } else {
        return React.createElement(
          'div',
          { className: 'image_and_description_container' },
          React.createElement(
            'div',
            { className: 'readout' },
            React.createElement(
              'div',
              { className: 'title' },
              item.title
            ),
            React.createElement(
              'div',
              { className: 'value' },
              item.value,
              suffix
            )
          )
        );
      }
    }
  }, {
    key: 'createSlide',
    value: function createSlide(v, i) {
      var that = this;
      if (v.link) {
        return React.createElement(
          'li',
          { key: i, className: 'slide link_to_page' },
          React.createElement(
            'a',
            { href: v.link, target: v.target },
            this.convertOption(v, i),
            React.createElement('span', { className: 'overlay_icon circle_arrow' })
          )
        );
      } else if (v.overlay || v.mep_overlay) {
        return React.createElement(
          'li',
          { key: i, className: 'slide overlay', onClick: function (e) {
              if (v.overlay) {
                that.loadOverlay(v.overlay);
              } else {
                that.loadMepOverlay(e, v.mep_overlay);
              }
            } },
          this.convertOption(v, i),
          React.createElement('span', { className: 'overlay_icon circle_plus' })
        );
      } else {
        return React.createElement(
          'li',
          { key: i, className: 'slide' },
          this.convertOption(v, i)
        );
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var that = this;
      if (this.props.single_value) {
        return React.createElement(
          'span',
          null,
          this.convertOption(this.props.options[0], 0, true)
        );
      } else if (this.props.single_slide) {
        if (this.props.options.type == 'api') {
          return React.createElement(
            'div',
            { className: 'readout' },
            this.convertOption(this.props.options, 0, false)
          );
        } else {
          return React.createElement(
            'div',
            { className: 'readout' },
            this.convertOption(this.props.options[0], 0, false)
          );
        }
      } else {
        return React.createElement(
          'section',
          { className: 'dashboard' },
          React.createElement(
            'div',
            { className: 'slide_container', id: 'page_dashboard' },
            that.props.options.map(function (v, i) {
              {
                return that.createSlide(v, i);
              }
            })
          )
        );
      }
    }
  }]);

  return PageDashboard;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function debounce(fn, delay) {
  var timer = null;
  return function () {
    var context = this,
        args = arguments;
    clearTimeout(timer);
    timer = setTimeout(function () {
      fn.apply(context, args);
    }, delay);
  };
};

var PageSort = (function (_React$Component) {
  _inherits(PageSort, _React$Component);

  function PageSort() {
    _classCallCheck(this, PageSort);

    _get(Object.getPrototypeOf(PageSort.prototype), "constructor", this).apply(this, arguments);
  }

  _createClass(PageSort, [{
    key: "getSortBy",

    // changeSort(event){
    //   var s = event.target.value
    //   this.setState({current_sort: s}, () =>  {this.props.changeSort(s)})
    // }

    // changePerPage(event){
    //   var pp =  event.target.value;
    //   this.setState({current_pp: pp}, () => {this.props.changePerPage(pp) })
    // }

    value: function getSortBy() {
      var _this = this;

      var that = this;
      if (this.props.sort_options.length > 0) {
        return React.createElement(
          "div",
          { className: "page_option_wrapper sort_by" },
          React.createElement(
            "label",
            { htmlFor: "order" },
            "Sort by"
          ),
          React.createElement(
            "select",
            { className: "options_field", id: "order", name: "order", defaultValue: this.props.initial_sort, onChange: function (e) {
                _this.props.changeSort(e.target.value);
              } },
            this.props.sort_options.map(function (option) {
              return React.createElement(
                "option",
                { key: option.value, value: option.value },
                option.label
              );
            })
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      if (this.props.page_count > 0) {
        return React.createElement(
          "div",
          { className: "pagination_options" },
          React.createElement(PageSortPagination, this.props),
          React.createElement(
            "div",
            { className: "options" },
            this.getSortBy(),
            React.createElement(
              "div",
              { className: "page_option_wrapper per_page" },
              React.createElement(
                "label",
                { htmlFor: "per_page" },
                "Per page"
              ),
              React.createElement(
                "select",
                { className: "options_field", id: "per_page", name: "per_page", defaultValue: this.props.initial_pp, onChange: function (e) {
                    _this2.props.changePerPage(e.target.value);
                  } },
                this.props.per_page_options.map(function (option) {
                  return React.createElement(
                    "option",
                    { key: option.value, value: option.value },
                    option.label
                  );
                })
              )
            )
          )
        );
      } else {
        return null;
      }
    }
  }]);

  return PageSort;
})(React.Component);

var PageSortPagination = (function (_React$Component2) {
  _inherits(PageSortPagination, _React$Component2);

  function PageSortPagination(props) {
    _classCallCheck(this, PageSortPagination);

    _get(Object.getPrototypeOf(PageSortPagination.prototype), "constructor", this).call(this, props);
    this.state = {
      page_input_val: this.props.page
    };
  }

  _createClass(PageSortPagination, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      $('.page_selector input').val('');
    }
  }, {
    key: "prevPage",
    value: function prevPage(e) {
      e.preventDefault();
      if (this.props.page > 1) {
        var prev = this.props.page - 1;
        //this.props.changePage(prev)
        this.setState({ page_input_val: prev }, this.props.changePage(prev));

        if (this.props.logGaEvent) {
          this.props.logGaEvent("Clicked previous page button", prev);
        }
      }
    }
  }, {
    key: "nextPage",
    value: function nextPage(e) {
      e.preventDefault();
      if (this.props.page < this.props.page_count) {
        var next = this.props.page + 1;
        this.setState({ page_input_val: next }, this.props.changePage(next));

        if (this.props.logGaEvent) {
          this.props.logGaEvent("Clicked next page button", next);
        }
      }
    }
  }, {
    key: "onPageInput",
    value: function onPageInput(e) {
      var val = parseInt(e.target.value);
      if (val < 1) {
        val = 1;
      } else if (val > this.props.page_count) {
        val = this.props.page_count;
      }
      this.setState({ page_input_val: val }, this.props.changePage(val));
    }
  }, {
    key: "blurOnEnter",
    value: function blurOnEnter(e) {
      if (e.keyCode === 13) {
        e.preventDefault();
        $(e.target).blur();
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;

      var prev_disabled = this.props.page <= 1;
      var next_disabled = this.props.page >= this.props.page_count;
      if (this.props.page_count > 0) {
        return React.createElement(
          "div",
          null,
          React.createElement(
            "div",
            { className: "pagination_nav" },
            React.createElement(
              "nav",
              { className: "pagination" },
              React.createElement(
                "span",
                { className: "prev" + (prev_disabled ? " disabled" : "") },
                React.createElement("a", { href: "#", rel: "prev", onClick: function (e) {
                    _this3.prevPage(e);
                  } })
              ),
              React.createElement(
                "div",
                { className: "page_selector" },
                React.createElement("input", { className: "page_num", placeholder: this.props.formatNumber ? this.props.formatNumber(this.props.page) : this.props.page, value: this.props.page,
                  size: "4", type: "number", onChange: function (e) {
                    _this3.onPageInput(e);
                  }, min: "1", max: this.props.page_count, onKeyUp: function (e) {
                    _this3.blurOnEnter(e);
                  } }),
                " of",
                React.createElement(
                  "span",
                  { className: "total_pages" },
                  " ",
                  this.props.formatNumber ? this.props.formatNumber(this.props.page_count) : this.props.page_count
                )
              ),
              React.createElement(
                "span",
                { className: "next" + (next_disabled ? " disabled" : "") },
                React.createElement("a", { href: "#", rel: "next", onClick: function (e) {
                    _this3.nextPage(e);
                  } })
              )
            )
          )
        );
      } else {
        return null;
      }
    }
  }]);

  return PageSortPagination;
})(React.Component);

var PaginationCount = (function (_React$Component3) {
  _inherits(PaginationCount, _React$Component3);

  function PaginationCount() {
    _classCallCheck(this, PaginationCount);

    _get(Object.getPrototypeOf(PaginationCount.prototype), "constructor", this).apply(this, arguments);
  }

  _createClass(PaginationCount, [{
    key: "render",
    value: function render() {
      var psort;
      if (this.props.first_load) {
        psort = React.createElement(
          "div",
          { className: "pagination_status" },
          React.createElement(
            "span",
            null,
            "Loading..."
          )
        );
      } else if (this.props.count == 0) {
        psort = React.createElement(
          "div",
          { className: "pagination_status no_results_text" },
          React.createElement(
            "span",
            null,
            "No results found."
          )
        );
      } else {
        psort = React.createElement(
          "div",
          { className: "pagination_status" },
          React.createElement(
            "span",
            { className: "nonessential" },
            "Showing"
          ),
          React.createElement(
            "b",
            null,
            React.createElement(
              "span",
              { className: "start_index" },
              " ",
              this.props.formatNumber ? this.props.formatNumber(this.props.start_index + 1) : this.props.start_index + 1
            ),
            "-",
            React.createElement(
              "span",
              { className: "end_index" },
              this.props.formatNumber ? this.props.formatNumber(this.props.end_index) : this.props.end_index,
              " "
            )
          ),
          "of",
          React.createElement(
            "b",
            null,
            React.createElement(
              "span",
              { className: "total_results" },
              " ",
              this.props.formatNumber ? this.props.formatNumber(this.props.count) : this.props.count,
              " "
            )
          ),
          React.createElement(
            "span",
            { className: "nonessential" },
            this.props.item_type
          )
        );
      }
      return psort;
    }
  }]);

  return PaginationCount;
})(React.Component);
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var PeopleDetailSubPages = (function (_React$Component) {
  _inherits(PeopleDetailSubPages, _React$Component);

  function PeopleDetailSubPages(props) {
    _classCallCheck(this, PeopleDetailSubPages);

    _get(Object.getPrototypeOf(PeopleDetailSubPages.prototype), "constructor", this).call(this, props);

    var nav_items = [];
    if (this.props.meeting_documents_count > 0) {
      nav_items.push({ label: "Meeting Presentations (" + this.props.meeting_documents_count + ")", value: "meeting_presentations" });
    }
    if (this.props.documents_count > 0) {
      nav_items.push({ label: "Documents (" + this.props.documents_count + ")", value: "documents" });
    }
    if (this.props.body) {
      nav_items.unshift({ label: "About", value: "body" });
    }
    if (this.props.publications_count > 0) {
      if (nav_items[0].label != "About") {
        nav_items.unshift({ label: "Recent Publications", value: "recent_publications" });
      }
      nav_items.push({ label: "Publications (" + this.props.publications_count + ")", value: "publications" });
    }

    this.state = {
      nav_items: nav_items,
      active_tab: nav_items[0],
      tab_index: 0
    };
  }

  // componentDidMount(){
  //   main.init();
  // }

  _createClass(PeopleDetailSubPages, [{
    key: "setActiveTab",
    value: function setActiveTab(tab_index) {
      this.setState({ active_tab: this.state.nav_items[tab_index], tab_index: tab_index });
    }
  }, {
    key: "setActiveTabMobile",
    value: function setActiveTabMobile(e) {
      var tab_index = e.nativeEvent.target.selectedIndex;
      this.setState({ active_tab: this.state.nav_items[tab_index], tab_index: tab_index });
    }
  }, {
    key: "renderRecentPublicationsSidebar",
    value: function renderRecentPublicationsSidebar() {
      var _this = this;

      if (this.props.recent_publications.length > 0) {
        var _ret = (function () {
          var that = _this;
          return {
            v: React.createElement(
              "aside",
              { className: "boxed" },
              React.createElement(
                "h2",
                null,
                "Recent Publications"
              ),
              React.createElement(
                "ul",
                { className: "people_publications_sidebar" },
                _this.props.recent_publications.map(function (rp, i) {
                  return React.createElement(
                    "li",
                    { className: "recent_publication_list_item", key: i },
                    React.createElement(
                      "div",
                      { className: "content " + (i != that.props.recent_publications.length - 1 ? 'with_sep' : '') },
                      React.createElement(
                        "div",
                        { className: "publication_year" },
                        rp.publication_year
                      ),
                      rp.title
                    )
                  );
                }),
                React.createElement(
                  "li",
                  { className: "recent_publication_list_item all_pubs" },
                  React.createElement(
                    "a",
                    { onClick: function () {
                        _this.setActiveTab(_this.state.nav_items.length - 1);
                      }, href: "javascript:void(0)" },
                    "All publications "
                  )
                )
              )
            )
          };
        })();

        if (typeof _ret === "object") return _ret.v;
      }
    }
  }, {
    key: "renderActiveTab",
    value: function renderActiveTab() {
      var _this2 = this;

      if (this.state.active_tab.value == "body") {
        return React.createElement(
          "div",
          { className: "people_sub_page people_detail_body" },
          React.createElement(
            "div",
            { className: "grid_layout" },
            React.createElement(
              "article",
              null,
              React.createElement(
                "header",
                { className: "page_header" },
                React.createElement(
                  "h1",
                  { className: "article_title" },
                  "About ",
                  this.props.person_tag
                )
              ),
              React.createElement(
                "div",
                { className: "primary_column" },
                React.createElement("div", { className: "wysiwyg_content", dangerouslySetInnerHTML: { __html: this.props.body } })
              ),
              React.createElement(
                "div",
                { className: "secondary_column" },
                this.renderRecentPublicationsSidebar(),
                React.createElement("div", { dangerouslySetInnerHTML: { __html: this.props.sidebar } })
              )
            )
          )
        );
      } else if (this.state.active_tab.value == "recent_publications") {
        var _ret2 = (function () {
          var that = _this2;
          return {
            v: React.createElement(
              "div",
              { className: "people_sub_page" },
              React.createElement(
                "ul",
                { className: "people_publications_list" },
                _this2.props.recent_publications.map(function (rp, i) {
                  return React.createElement(
                    "li",
                    { className: "recent_publication_list_item", key: i },
                    React.createElement(
                      "div",
                      { className: "content " + (i != that.props.recent_publications.length - 1 ? 'with_sep' : '') },
                      React.createElement(
                        "div",
                        { className: "publication_year" },
                        rp.publication_year
                      ),
                      rp.title
                    )
                  );
                }),
                _this2.props.publications_count > 0 ? React.createElement(
                  "li",
                  { className: "recent_publication_list_item all_pubs" },
                  React.createElement(
                    "a",
                    { onClick: function () {
                        _this2.setActiveTab(_this2.state.nav_items.length - 1);
                      }, href: "javascript:void(0)" },
                    "All publications "
                  )
                ) : null
              )
            )
          };
        })();

        if (typeof _ret2 === "object") return _ret2.v;
      } else {
        var gl_options = {
          default_view: "list_view",
          model: "documents",
          view_toggle: false,
          search: true,
          list_item: "PersonDocument",
          title: this.state.active_tab.label.match(/(.+)\(/)[1],
          per_page: 10,
          conditions: [{ name: "null", value: ":event_id" }],
          options: { tags: this.props.person_tag },
          className: 'react_grid_list grid_list_container'
        };
        if (this.state.active_tab.value == "meeting_presentations") {
          gl_options.conditions = [{ name: "notnull", value: ":event_id" }]; //Must be done like this for gridlist component to assemble correctly.
        } else if (this.state.active_tab.value == "publications") {
            gl_options.conditions = [];
            gl_options.model = "publications";
            gl_options.list_item = "ESPublication";
          }
        return React.createElement(
          "div",
          { className: "people_sub_page" },
          React.createElement(GridListPage, _extends({ className: "grid_gallery", key: this.state.active_tab.value }, gl_options))
        );
      }
    }
  }, {
    key: "render",
    value: function render() {
      var that = this;

      return React.createElement(
        "div",
        { className: "people_sub_pages" },
        React.createElement(
          "nav",
          { className: "tertiary_nav people_subnav" },
          React.createElement(
            "ul",
            { className: "desktop_people_subnav" },
            this.state.nav_items.map(function (nav_item, i) {
              return React.createElement(
                "li",
                { key: i, className: nav_item == that.state.active_tab ? "current" : "", onClick: function (e) {
                    return that.setActiveTab(i);
                  } },
                nav_item.label
              );
            })
          ),
          React.createElement(
            "div",
            { className: "mobile_people_subnav" },
            React.createElement(
              "select",
              { className: "nav_list", onChange: function (e) {
                  return that.setActiveTabMobile(e);
                }, value: this.state.tab_index },
              that.state.nav_items.map(function (nav_item, i) {
                return React.createElement(
                  "option",
                  { key: "mobilenav_" + i, value: i, className: nav_item == that.state.active_tab ? "current" : "" },
                  nav_item.label
                );
              })
            )
          )
        ),
        this.renderActiveTab()
      );
    }
  }]);

  return PeopleDetailSubPages;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// PersonDetail Component for Gridlist (SPA-style) [updated from gridlist refactor 6/26/2019] -nmj
// NOTE: this component updates meta tags, however, the changes will not appear to Facebook or other non-javascript scrapers
// Use this as a template for other detail components used with SPA-style Gridlist

var PersonDetail = (function (_React$Component) {
	_inherits(PersonDetail, _React$Component);

	function PersonDetail() {
		_classCallCheck(this, PersonDetail);

		_get(Object.getPrototypeOf(PersonDetail.prototype), 'constructor', this).apply(this, arguments);
	}

	_createClass(PersonDetail, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.changeTitle();
			this.setSocialTitle();
			this.setSocialUrl();
			this.setSocialImage();
			this.setSocialDescription();
			this.setPageUpdatedAt();
		}
	}, {
		key: 'componentDidUpdate',
		value: function componentDidUpdate(prevProps, prevState, snapshot) {
			// console.log('PersonDetail:: componentDidUpdate')
			if (prevProps && this.props.item && prevProps.item && this.props.item.id != prevProps.item.id) {
				this.loadImages();
				this.changeTitle();
				this.setSocialTitle();
				this.setSocialUrl();
				this.setSocialImage();
				this.setSocialDescription();
				this.setPageUpdatedAt();
			}
		}
	}, {
		key: 'setSocialTitle',
		value: function setSocialTitle() {
			$('meta[property="og:title"]').attr('content', document.title);
			$('meta[name="twitter:title"]').attr('content', document.title);
		}
	}, {
		key: 'setSocialDescription',
		value: function setSocialDescription() {
			if (this.props.item && this.props.item.meta_social_description) {
				var social_description = this.props.item.meta_social_description;
				$('meta[name="description"]').attr('content', social_description);
				$('meta[name="og:description"]').attr('content', social_description);
				$('meta[name="twitter:description"]').attr('content', social_description);
			}
		}
	}, {
		key: 'setSocialUrl',
		value: function setSocialUrl() {
			$('meta[property="og:url"]').attr('content', document.location.href);
		}
	}, {
		key: 'setSocialImage',
		value: function setSocialImage() {
			if (this.props.item) {
				var item = this.props.item;
				var list_image = item.list_image ? item.list_image : this.props.site_share_image;
				$('meta[property="og:image"]').attr('content', list_image);
				$('meta[name="twitter:image"]').attr('content', list_image);
				$('link[rel="image_src"]').attr('href', list_image);
			}
		}
	}, {
		key: 'setPageUpdatedAt',
		value: function setPageUpdatedAt() {
			if (this.props.item && this.props.item.page_updated_at) {
				var page_updated_at = this.props.item.updated_at;
				$('meta[property="og:updated_time"]').attr('content', page_updated_at);
			}
		}
	}, {
		key: 'loadImages',
		value: function loadImages() {
			$('.person_detail').css('visibility', 'hidden');
		}
	}, {
		key: 'imagesLoaded',
		value: function imagesLoaded() {
			$('.person_detail').css('visibility', 'visible');
			this.props.images_loaded();
		}
	}, {
		key: 'changeTitle',
		value: function changeTitle() {
			var title = this.getTitleSpaDetail();
			if (this.props.change_title) {
				this.props.change_title(title);
			}
		}
	}, {
		key: 'getTitleSpaDetail',
		value: function getTitleSpaDetail() {
			var item = this.props.item;
			var title = this.props.site_title;
			if (typeof item != 'undefined' && typeof item.job_title != 'undefined' && typeof item.name != 'undefined') {
				title = item.name + ' | ' + item.job_title + ' - ' + this.props.site_title;
			}
			return title;
		}
	}, {
		key: 'getMainImage',
		value: function getMainImage() {
			var _this = this;

			var item = this.props.item;
			var asset_url = '';
			if (typeof this.props.options != 'undefined' && this.props.options.external_asset_url) {
				asset_url = this.props.options.external_asset_url;
			}

			if (item.list_image_src && item.caption) {
				return React.createElement(
					'figure',
					{ className: 'main_image' },
					React.createElement('img', { id: 'main_image', src: asset_url + item.detail_image_src, onLoad: function () {
							_this.imagesLoaded();
						}, onError: function () {
							_this.imagesLoaded();
						} }),
					React.createElement(
						'figcaption',
						{ className: 'main_image_caption' },
						item.caption
					)
				);
			} else if (item.list_image_src) {
				return React.createElement(
					'figure',
					{ className: 'main_image' },
					React.createElement('img', { id: 'main_image', src: asset_url + item.detail_image_src, onLoad: function () {
							_this.imagesLoaded();
						}, onError: function () {
							_this.imagesLoaded();
						} })
				);
			} else {
				this.imagesLoaded();
				return;
			}
		}
	}, {
		key: 'render',
		value: function render() {
			var item = this.props.item;
			if (this.props.item) {
				return React.createElement(
					'div',
					{ className: 'person_detail' },
					React.createElement(
						'header',
						{ className: 'dynamic_grid_header' },
						React.createElement(
							'h2',
							{ className: 'category_title' },
							React.createElement(
								'a',
								{ href: '#', onClick: this.props.hide_detail },
								'PEOPLE'
							)
						),
						React.createElement(
							'h1',
							{ className: 'article_title' },
							item.name
						),
						React.createElement(
							'h2',
							{ className: 'sub_title' },
							item.job_title
						)
					),
					React.createElement(
						'div',
						{ className: 'clearfix', id: 'primary_column' },
						this.getMainImage(),
						React.createElement('div', { className: 'wysiwyg_content', dangerouslySetInnerHTML: { __html: item.body } })
					)
				);
			} else {
				return React.createElement('div', null);
			}
		}
	}]);

	return PersonDetail;
})(React.Component);
var PersonDocumentListItem = function (props) {
  var item = props.item;
  var item_date = new Date(item.date);
  var url = item.file ? item.url : item.url + "?list=events";
  if ((item.body == "" || item.body == null) && item.link == "" && item.has_slides == 0 && item.file == null) {
    url = null;
  }
  // true mimetypes for documents can be really ugly and long so just grab extension and pair w/ filesize
  var file_name_parts = item && item.file_file_name ? item.file_file_name.split('.') : null;
  var file_size = item && item.file_info ? ", (" + item.file_info.match(/\(([^)]*)\)[^(]*$/)[1] + ")" : '';
  var file_link_text = file_name_parts ? "" + file_name_parts[file_name_parts.length - 1].toUpperCase() + file_size : '';

  return React.createElement(
    "div",
    { className: "image_and_description_container document_list_container" },
    React.createElement(
      "a",
      { href: url ? url : "javascript:void(0)", style: url ? {} : { cursor: "default" }, target: item.link || item.file && !item.body ? "_blank" : "" },
      item.list_image != null ? React.createElement(
        "div",
        { className: "list_image" },
        React.createElement("img", { src: item.list_image, alt: item.title })
      ) : null,
      React.createElement(
        "div",
        { className: "bottom_gradient" },
        React.createElement(
          "div",
          null,
          React.createElement(
            "h3",
            null,
            item.title
          )
        )
      )
    ),
    React.createElement(
      "div",
      { className: "list_text " + (item.list_image == null ? "full_width_text" : "") },
      item_date ? React.createElement(
        "div",
        { className: "document_date" },
        item_date.getUTCMonth() + 1 + "/" + item_date.getUTCDate() + "/" + item_date.getUTCFullYear()
      ) : null,
      React.createElement(
        "div",
        { className: "content_title" },
        url ? React.createElement(
          "a",
          { href: item.url, target: item.link || item.file && !item.body ? "_blank" : "" },
          item.title
        ) : React.createElement(
          "div",
          null,
          item.title
        )
      ),
      React.createElement(
        "div",
        { className: "article_teaser_body" },
        React.createElement(
          "div",
          { className: "document_description" },
          React.createElement(
            "div",
            { className: "document_summary" },
            item.short_description,
            " "
          ),
          item.file && !item.body ? React.createElement(
            "a",
            { className: "document_file_link", href: item.file, target: "_blank" },
            file_link_text
          ) : null
        )
      )
    )
  );
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// PersonListItem Component for Gridlist (SPA-style) [updated from gridlist refactor 6/26/2019] -nmj
// Extra options permitted in gridlist options json blob (first option is default):
// {"hover":true|false, "show_institution":false|true, "show_email":false|true}

var PersonListItem = (function (_React$Component) {
	_inherits(PersonListItem, _React$Component);

	function PersonListItem(props) {
		_classCallCheck(this, PersonListItem);

		_get(Object.getPrototypeOf(PersonListItem.prototype), 'constructor', this).call(this, props);
		if (typeof this.props.options != 'undefined') {
			this.options = this.props.options;
		} else {
			this.options = null;
		}
	}

	_createClass(PersonListItem, [{
		key: 'showDetail',
		value: function showDetail() {
			if (typeof this.props.item.has_detail == 'undefined' || this.props.item.has_detail == 1) {
				if (this.options && this.options.spa) {
					this.props.selected_item(this.props.item, this.scrollToTop);
				} else {
					window.location.href = this.props.item.link;
				}
			}
		}
	}, {
		key: 'scrollToTop',
		value: function scrollToTop() {
			window.scroll(0, 0);
		}
	}, {
		key: 'render',
		value: function render() {
			var _this = this;

			var item = this.props.item;
			var asset_url = '';
			if (this.options && this.options.external_asset_url) {
				asset_url = this.options.external_asset_url;
			}

			var hover = typeof this.options.hover == 'undefined' || this.options.hover == 'true' || this.options.hover; // default true if not set
			var has_detail = typeof this.props.item.has_detail == 'undefined' || this.props.item.has_detail == 1;
			return React.createElement(
				'div',
				{ className: 'image_and_description_container person_container ' + (has_detail ? 'has_detail' : '') },
				React.createElement(
					'div',
					{ onClick: function () {
							_this.showDetail();
						}, target: item.target },
					hover ? React.createElement(
						'div',
						{ className: 'rollover_description', style: has_detail ? null : { cursor: 'default' } },
						React.createElement('div', { className: 'rollover_description_inner', dangerouslySetInnerHTML: { __html: item.short_description } }),
						React.createElement(
							'div',
							{ className: 'overlay_arrow' },
							React.createElement('img', { src: '/assets/overlay-arrow.png', alt: 'More' })
						)
					) : null,
					React.createElement(
						'div',
						{ className: 'list_image' },
						React.createElement('img', { src: asset_url + item.list_image_src })
					),
					React.createElement(
						'div',
						{ className: 'bottom_gradient' },
						React.createElement(
							'div',
							null,
							React.createElement(
								'h3',
								{ className: 'person_name' },
								item.name
							),
							React.createElement(
								'h4',
								{ className: 'person_title' },
								item.job_title
							),
							this.options.show_institution ? React.createElement(
								'h4',
								{ className: 'person_institution' },
								item.institution
							) : null,
							this.options.show_email ? React.createElement(
								'h4',
								{ className: 'person_email' },
								React.createElement(
									'a',
									{ href: "mailto:" + item.email },
									'Email'
								)
							) : null
						)
					)
				),
				React.createElement(
					'div',
					{ className: 'list_text' },
					React.createElement(
						'div',
						{ className: 'list_date' },
						item.date
					),
					React.createElement(
						'div',
						{ className: 'content_title' },
						React.createElement(
							'a',
							{ onClick: function () {
									return _this.showDetail();
								}, target: item.target },
							item.name
						)
					),
					React.createElement(
						'h4',
						{ className: 'person_title' },
						item.job_title
					),
					this.options.show_institution ? React.createElement(
						'h4',
						{ className: 'person_institution' },
						item.institution
					) : null,
					this.options.show_email ? React.createElement(
						'h4',
						{ className: 'person_email' },
						React.createElement(
							'a',
							{ href: "mailto:" + item.email },
							'Email'
						)
					) : null,
					React.createElement('div', { className: 'article_teaser_body', dangerouslySetInnerHTML: { __html: item.short_description } })
				)
			);
		}
	}]);

	return PersonListItem;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// PersonSidebar Component for Gridlist (SPA-style)
// updated for standalone people_sidebar module 12/30/19 -nmj

var PersonSidebar = (function (_React$Component) {
  _inherits(PersonSidebar, _React$Component);

  function PersonSidebar(props) {
    _classCallCheck(this, PersonSidebar);

    _get(Object.getPrototypeOf(PersonSidebar.prototype), 'constructor', this).call(this, props);
    this.state = {
      loaded: false,
      items: null
    };
  }

  _createClass(PersonSidebar, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      console.log('PersonSidebar:: componentDidMount');

      if (this.props.initial_items && this.props.initial_items.length > 0) {
        this.setState({ loaded: true, items: this.props.initial_items });
      } else {
        this.getPeople();
      }
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate(prevProps, prevState, snapshot) {
      if (prevProps && this.props.item && prevProps.item && this.props.item.id != prevProps.item.id) {
        console.log("PersonSidebar:: componentDidUpdate");
        // $('.list_content').css("visibility", "hidden")
      }
    }
  }, {
    key: 'selectedItem',
    value: function selectedItem(e) {
      if (this.props.initial_items && this.props.initial_items.length > 0) {
        e.preventDefault();
        // $('.list_content').css("visibility", "hidden")
        console.log('PersonSidebar:: selectedItem');

        var i = parseInt($(e.currentTarget).data('idx'));
        console.log("PersonSidebar:: selectedItem", i);
        for (var j = 0; j < this.state.items.length; j++) {
          if (parseInt(this.state.items[j].id) == i) {
            console.log("PersonSidebar:: selectedItem", this.state.items[j], i);

            this.props.selected_item(this.state.items[j]);
            // scroll user to top.  Only use custom scroll for article_nav
            window.scroll(0, 0);
          }
        }
      }
    }
  }, {
    key: 'hideDetail',
    value: function hideDetail(e) {
      if (this.props.initial_items && this.props.initial_items.length > 0) {
        e.preventDefault();
        this.props.hide_detail(e);
      }
    }

    // make ajax call to get people.  For standalone sidebar module
  }, {
    key: 'getPeople',
    value: function getPeople() {
      console.log('getPeople');
      var that = this;
      $.ajax({
        url: this.props.options.external_api_url,
        method: "GET",
        dataType: "json",
        success: function (data) {
          console.log("Got items successfully.... ", data);

          that.setState({ loaded: true, items: data.items });
        },
        error: function (xhr, status, err) {
          console.error(status, err.toString());
        }
      });
    }
  }, {
    key: 'getMorePeople',
    value: function getMorePeople(num_of_people) {
      var random_list = [];
      var random_item = undefined;
      items = this.state.items;
      item = this.props.article;

      if (num_of_people > items.length) {
        num_of_people = items.length;
      }

      for (var i = 0; random_list.length < num_of_people; i++) {
        random_item = items[Math.floor(Math.random() * items.length)];

        if (item == null && random_list.indexOf(random_item) < 0) {
          console.log('adding item ' + random_item.id + ' to list');
          random_list.push(random_item);
        } else if (item && item.id && random_item.id != item.id && random_list.indexOf(random_item) < 0) {
          console.log('adding item ' + random_item.id + ' to list');
          random_list.push(random_item);
        } else if (i > items.length) {
          return random_list;
        } else {
          console.log('Item dupe');
        }
      }
      return random_list;
    }
  }, {
    key: 'renderMoreSidebar',
    value: function renderMoreSidebar() {
      var _this = this;

      var that = this;

      if (this.state.loaded) {
        var _ret = (function () {
          var more_people = _this.getMorePeople(3);
          var asset_url = '';
          var title = '';
          var more_href = _this.props.initial_items && _this.props.initial_items.length > 0 ? '#' : _this.props.people_path;

          if (_this.props.options && _this.props.options.more_sidebar_title) {
            title = _this.props.options.more_sidebar_title;
          } else {
            title = _this.props.short_title ? 'More ' + _this.props.short_title + ' People' : "More People";
          }

          if (typeof _this.props.options != 'undefined' && _this.props.options.external_asset_url) {
            asset_url = _this.props.options.external_asset_url;
          }

          return {
            v: React.createElement(
              'span',
              null,
              React.createElement(
                'header',
                null,
                React.createElement(
                  'h2',
                  { className: 'sidebar_title' },
                  title
                )
              ),
              React.createElement(
                'ul',
                null,
                more_people.map(function (item, i) {
                  var href = that.props.initial_items && that.props.initial_items.length > 0 ? '#' : that.props.people_path + '#' + item.id;
                  return React.createElement(
                    'li',
                    { key: item.id, onLoad: that.loadLoad },
                    React.createElement(
                      'div',
                      { className: 'list_content' },
                      React.createElement(
                        'div',
                        { className: 'list_image' },
                        React.createElement(
                          'a',
                          { href: href, onClick: function (e) {
                              that.selectedItem(e);
                            }, 'data-idx': item.id, target: item.target },
                          React.createElement('img', { src: asset_url + item.list_image_src, alt: item.name })
                        )
                      ),
                      React.createElement(
                        'div',
                        { className: 'list_text' },
                        React.createElement(
                          'div',
                          { className: 'list_title' },
                          React.createElement(
                            'a',
                            { href: href, onClick: function (e) {
                                that.selectedItem(e);
                              }, 'data-idx': item.id, target: item.target },
                            item.name
                          )
                        )
                      ),
                      React.createElement(
                        'div',
                        { className: 'list_text' },
                        item.job_title
                      )
                    )
                  );
                })
              ),
              React.createElement(
                'a',
                { className: 'more_sidebar', href: more_href, onClick: function (e) {
                    that.hideDetail(e);
                  } },
                'view all people '
              )
            )
          };
        })();

        if (typeof _ret === 'object') return _ret.v;
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var klass = this.props['class'] ? this.props['class'] : '';
      if (this.props.initial_items) {
        return React.createElement(
          'div',
          { className: klass + ' clearfix', id: 'secondary_column' },
          React.createElement(
            'aside',
            { className: 'list_view_module boxed people_sidebar_module' },
            this.renderMoreSidebar()
          )
        );
      } else {
        return React.createElement(
          'div',
          null,
          this.renderMoreSidebar()
        );
      }
    }
  }]);

  return PersonSidebar;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var PhotoGallery = (function (_React$Component) {
  _inherits(PhotoGallery, _React$Component);

  function PhotoGallery(props) {
    _classCallCheck(this, PhotoGallery);

    _get(Object.getPrototypeOf(PhotoGallery.prototype), 'constructor', this).call(this, props);
    var api_url = 'https://api.flickr.com/services/rest/?method=flickr.groups.pools.getPhotos&api_key=e999bf30762f741cf54a81b2f103b680&group_id=2871391@N23&per_page=700&format=json&nojsoncallback=1';

    this.state = {
      photo_items: [],
      index: null,
      prev_item: null,
      next_item: null,
      total: 0,
      page: 0,
      first_load: true
    };
  }

  _createClass(PhotoGallery, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.getData();
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate() {
      console.log('componentDidUpdate');
      this.updateImageBuffer();
    }
  }, {
    key: 'getData',
    value: function getData(append_items, callback) {
      var that = this;
      var n = '';
      var page = append_items ? this.state.page + 1 : 0;
      $.ajax({
        url: this.props.api_url + "&page=" + page,
        success: function (result) {
          console.log(result);
          n = result;
          var photo_items = [];
          var total = result.photos.total;
          var _s = n.photos.photo;
          page = result.photos.page;

          for (var z = 0; z < n.photos.photo.length; z++) {
            var CurrentPhotoUrl = 'https://farm' + _s[z]['farm'] + '.staticflickr.com/' + _s[z]['server'] + '/' + _s[z]['id'] + '_' + _s[z]['secret'] + '_c.jpg';
            photo_items.push({ id: z, url: CurrentPhotoUrl });
          }
          if (append_items) {
            that.setState({ photo_items: that.state.photo_items.concat(photo_items), page: page }, function () {
              if (typeof callback == "function") callback.call();
            });
          } else {
            that.setState({ photo_items: photo_items, index: 0, total: total, page: page, first_load: false }, function () {});
          }
        } });
    }
  }, {
    key: 'renderData',
    value: function renderData() {
      console.log('renderData');
      var no_items_text = this.props.no_items_text ? this.props.no_items_text : "There are no items matching these criteria.";
      if (this.state.photo_items.length > 0) {
        var item = this.state.photo_items[this.state.index];
        return React.createElement(
          'div',
          { className: 'gallery_content responsive_image', 'data-aspect-ratio': '3/2', 'data-avoid-crop': true },
          React.createElement(PhotoListItem, { key: item.id, item: item, alt: 'Photo ' + (this.state.index + 1) })
        );
      } else if (this.state.first_load) {
        return "Loading...";
      } else {
        return React.createElement(
          'div',
          { className: 'no_items' },
          no_items_text
        );
      }
    }
  }, {
    key: 'loadNext',
    value: function loadNext() {
      console.log('loadNext');
      if (this.state.index < this.state.photo_items.length - 1) {
        var index = this.state.index + 1;
        this.setState({ index: index });
      } else if (this.state.index < this.state.total) {
        console.log('loading more data...');
        this.getData(true, this.loadNext);
      }
    }
  }, {
    key: 'loadPrev',
    value: function loadPrev() {
      if (this.state.index > 0) {
        var index = this.state.index - 1;
        this.setState({ index: index });
      }
    }
  }, {
    key: 'updateImageBuffer',
    value: function updateImageBuffer() {}
  }, {
    key: 'renderTitle',
    value: function renderTitle() {
      if (this.props.title && this.props.title != "") {
        return React.createElement(
          'div',
          { className: 'module_title' },
          this.props.title
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'renderPagination',
    value: function renderPagination() {
      if (this.state.total && this.state.total != 0) {
        return React.createElement(
          'div',
          { className: 'photo_index' },
          this.state.index + 1,
          ' / ',
          this.state.total
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'prevDisabled',
    value: function prevDisabled() {
      return this.state.index == 0 ? "disabled" : "";
    }
  }, {
    key: 'nextDisabled',
    value: function nextDisabled() {
      return this.state.index == this.state.photo_items.length - 1 ? "disabled" : "";
    }
  }, {
    key: 'render',
    value: function render() {
      console.log('render');
      var that = this;
      return React.createElement(
        'div',
        null,
        this.renderTitle(),
        React.createElement(
          'div',
          { className: 'react_photo_gallery' },
          that.renderData(),
          that.renderPagination(),
          React.createElement(
            'div',
            { className: 'nav_container' },
            React.createElement(
              'div',
              { className: 'nav' },
              React.createElement('button', { type: 'button', onClick: function (e) {
                  that.loadPrev(e);
                }, disabled: that.prevDisabled(), 'data-role': 'none', className: 'prev arrow', 'aria-label': 'Previous', role: 'button' }),
              React.createElement('button', { type: 'button', onClick: function (e) {
                  that.loadNext(e);
                }, disabled: that.nextDisabled(), 'data-role': 'none', className: 'next arrow', 'aria-label': 'Next', role: 'button' })
            )
          )
        )
      );
    }
  }]);

  return PhotoGallery;
})(React.Component);
var PhotoListItem = function (props) {
  return React.createElement("img", { src: props.item.url, alt: props.alt, className: "responsive_image__element" });
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ProjectListItem = (function (_React$Component) {
  _inherits(ProjectListItem, _React$Component);

  function ProjectListItem(props) {
    _classCallCheck(this, ProjectListItem);

    _get(Object.getPrototypeOf(ProjectListItem.prototype), "constructor", this).call(this, props);
    this.state = { show_co_investigators: false };
  }

  _createClass(ProjectListItem, [{
    key: "toggleShowCoInvestigators",
    value: function toggleShowCoInvestigators(e) {
      this.setState({ show_co_investigators: !this.state.show_co_investigators });
    }
  }, {
    key: "renderPIItem",
    value: function renderPIItem(item, i) {
      var has_detail = typeof item.has_detail == "undefined" || item.has_detail == 1;
      return React.createElement(
        "div",
        { key: i, className: "investigator_item" },
        has_detail ? React.createElement(
          "a",
          { className: "name_link", key: i, href: item.url },
          item.last_name,
          ", ",
          item.first_name,
          " "
        ) : React.createElement(
          "span",
          { className: "name_link", key: i },
          item.last_name,
          ", ",
          item.first_name
        ),
        React.createElement(
          "div",
          { className: "project_info_desc" },
          item.institution
        )
      );
    }
  }, {
    key: "renderCIItem",
    value: function renderCIItem(item, i) {
      var has_detail = typeof item.has_detail == "undefined" || item.has_detail == 1;
      return React.createElement(
        "div",
        { key: i, className: "investigator_item" },
        has_detail ? React.createElement(
          "a",
          { className: "name_link", key: i, href: item.url },
          item.last_name,
          ", ",
          item.first_name,
          " "
        ) : React.createElement(
          "span",
          { className: "name_link", key: i },
          item.last_name,
          ", ",
          item.first_name
        ),
        React.createElement(
          "div",
          { className: "project_info_desc" },
          item.institution
        )
      );
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;

      var item = this.props.item;
      var list_images = [];
      if (item.list_image_file_name) {
        list_images = [item.list_image];
      } else if (item.principal_investigators.length > 0) {
        list_images = item.principal_investigators.filter(function (p) {
          return p.list_image != "";
        }).map(function (p) {
          return p.list_image;
        });
      }
      var subject_title = item.category_title ? React.createElement(
        "h4",
        { className: "project_info_title" },
        "Subject"
      ) : null;
      var project_category = item.category_title ? React.createElement(
        "div",
        { className: "project_info_desc" },
        item.category_title
      ) : null;
      return React.createElement(
        "div",
        { className: "image_and_description_container project_item_container" },
        list_images.length > 0 ? React.createElement(
          "div",
          { className: "list_image" },
          list_images.map(function (li, idx) {
            return React.createElement("img", { key: idx, src: li });
          })
        ) : null,
        React.createElement(
          "div",
          { className: "list_text" + (list_images.length == 0 ? " full_width_text" : "") },
          React.createElement(
            "h2",
            { className: "project_title" },
            item.link ? React.createElement(
              "a",
              { href: item.link },
              item.title
            ) : item.title
          ),
          subject_title,
          project_category,
          item.principal_investigators.length > 0 ? React.createElement(
            React.Fragment,
            null,
            React.createElement(
              "h4",
              { className: "project_info_title" },
              "Principal Investigator(s)"
            ),
            item.principal_investigators.map(this.renderPIItem)
          ) : null,
          item.co_investigators.length > 0 ? React.createElement(
            React.Fragment,
            null,
            React.createElement(
              "a",
              { className: "toggle_co_investigators", onClick: function (e) {
                  _this.toggleShowCoInvestigators(e);
                } },
              this.state.show_co_investigators ? "- Hide Co-Investigators" : "+ Show Co-Investigators"
            ),
            this.state.show_co_investigators ? React.createElement(
              "div",
              { className: "project_coinvestigators" },
              item.co_investigators.map(this.renderCIItem)
            ) : null
          ) : null
        )
      );
    }
  }]);

  return ProjectListItem;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var PublicationListItem = (function (_React$Component) {
  _inherits(PublicationListItem, _React$Component);

  function PublicationListItem() {
    _classCallCheck(this, PublicationListItem);

    _get(Object.getPrototypeOf(PublicationListItem.prototype), "constructor", this).apply(this, arguments);
  }

  _createClass(PublicationListItem, [{
    key: "render",
    value: function render() {
      var item = this.props.item;
      var citation = item.citation ? ", " + item.citation.autoLink() : "";
      var use_publication_year = this.props.options && this.props.options.use_publication_year ? this.props.options.use_publication_year : false;
      return React.createElement(
        "div",
        { className: "image_and_description_container" },
        React.createElement(
          "div",
          { className: "list_text full_width_text" },
          use_publication_year ? React.createElement(
            "div",
            { className: "content_year" },
            item.publication_year
          ) : null,
          item.link ? React.createElement(
            "div",
            { className: "content_title" },
            React.createElement(
              "a",
              { href: item.link, target: "_blank" },
              item.title
            )
          ) : React.createElement(
            "div",
            { className: "content_title" },
            item.title
          ),
          React.createElement(
            "div",
            { className: "article_teaser_body" },
            item.authors,
            React.createElement(
              "div",
              { className: "citation" },
              item.periodical && item.periodical.title ? item.periodical.title : "",
              React.createElement("span", { dangerouslySetInnerHTML: { __html: citation } })
            )
          ),
          item.file_src ? React.createElement(
            "a",
            { className: "list_link", href: item.file_src, download: item.file_file_name },
            "download article"
          ) : ""
        )
      );
    }
  }]);

  return PublicationListItem;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ResourceListItem = (function (_React$Component) {
	_inherits(ResourceListItem, _React$Component);

	function ResourceListItem() {
		_classCallCheck(this, ResourceListItem);

		_get(Object.getPrototypeOf(ResourceListItem.prototype), "constructor", this).apply(this, arguments);
	}

	_createClass(ResourceListItem, [{
		key: "itemIsFancyboxable",
		value: function itemIsFancyboxable() {
			var item_is_fancyboxable = this.props.item.fancyboxable;
			var page_is_fancybox = this.props.options && this.props.options.fancybox;
			return item_is_fancyboxable && page_is_fancybox;
		}
	}, {
		key: "getImageAndDescription",
		value: function getImageAndDescription(item) {
			return React.createElement(
				"div",
				null,
				React.createElement(
					"div",
					{ className: "rollover_description" },
					React.createElement("div", { className: "rollover_description_inner", dangerouslySetInnerHTML: { __html: item.short_description } }),
					React.createElement(
						"div",
						{ className: "overlay_arrow" },
						React.createElement("img", { src: "/assets/overlay-arrow.png", alt: "More" })
					)
				),
				React.createElement(
					"div",
					{ className: "list_image" },
					React.createElement("img", { src: item.list_image_src, alt: item.alt_text })
				),
				this.getBottomGradient(item)
			);
		}
	}, {
		key: "getBottomGradient",
		value: function getBottomGradient(item) {
			if (this.props.options && this.props.options.no_item_title) {
				return "";
			} else {
				return React.createElement(
					"div",
					{ className: "bottom_gradient" },
					React.createElement(
						"div",
						null,
						React.createElement("h3", { dangerouslySetInnerHTML: { __html: item.title } })
					)
				);
			}
		}
	}, {
		key: "getLinkedImageAndDescription",
		value: function getLinkedImageAndDescription(image_and_description) {
			var item = this.props.item;
			var href = item.url;
			if (this.props.options && typeof this.props.options.href_query_params != "undefined") {
				href += "?" + this.props.options.href_query_params;
			}
			if (this.props.options.url_prefix && href.indexOf('//') < 0) {
				href = this.props.options.url_prefix + href;
			}

			if (this.props.options.url_suffix) {
				var suffix = this.props.options.url_suffix;
				if (suffix.indexOf('?') && url.indexOf('?')) {
					href = href + suffix.replace('?', '&');
				} else {
					href = href + suffix;
				}
			}

			if (this.itemIsFancyboxable()) {
				return React.createElement(
					"a",
					{ href: href, className: "fancybox_slideshow",
						"data-fancybox-group": "images",
						"data-fancybox-href": item.detail_image,
						"data-title": item.title,
						"data-sharedescription": item.share_desc,
						"data-thumbnail": item.list_image_src,
						"data-link": href
					},
					image_and_description
				);
			} else {
				return React.createElement(
					"a",
					{ href: href },
					image_and_description
				);
			}
		}
	}, {
		key: "render",
		value: function render() {
			var item = this.props.item;
			var image_and_description = this.getImageAndDescription(item);
			var linked_image_and_desc = this.getLinkedImageAndDescription(image_and_description);
			return React.createElement(
				"div",
				{ className: "image_and_description_container" },
				linked_image_and_desc,
				React.createElement(
					"div",
					{ className: "list_text" },
					React.createElement(
						"div",
						{ className: "content_title" },
						React.createElement(
							"a",
							{ href: item.url },
							item.title
						)
					),
					React.createElement("div", { className: "article_teaser_body", dangerouslySetInnerHTML: { __html: item.short_description } })
				)
			);
		}
	}]);

	return ResourceListItem;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ResourceSwapper = (function (_React$Component) {
  _inherits(ResourceSwapper, _React$Component);

  function ResourceSwapper(props) {
    _classCallCheck(this, ResourceSwapper);

    _get(Object.getPrototypeOf(ResourceSwapper.prototype), "constructor", this).call(this, props);
    this.video_resources = null;
    var rs_id = Math.ceil(Math.random() * 100000);
    this.rs_id = rs_id;
    var video_resources = this.props.resources.filter(function (resource) {
      return resource.video_items.length > 0;
    });
    this.video_resources = video_resources;
    this.state = {
      current_resource: 0
    };
  }

  _createClass(ResourceSwapper, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.addMoreLessClickListener();
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this.addMoreLessClickListener();
    }
  }, {
    key: "addMoreLessClickListener",
    value: function addMoreLessClickListener() {
      mb_utils.initExpandableElement();
    }
  }, {
    key: "toggleSwitchbox",
    value: function toggleSwitchbox(e) {
      if (parseInt(e.target.dataset['resource']) != this.state.current_resource) {
        this.setState({ current_resource: this.state.current_resource == 0 ? 1 : 0 });
      }
    }
  }, {
    key: "getResources",
    value: function getResources() {
      if (this.video_resources.length) {
        return React.createElement(Vid, { sources: this.video_resources[this.state.current_resource].video_items, id: "vid_" + this.rs_id, poster: this.video_resources[this.state.current_resource].detail_image });
      } else {
        return React.createElement(
          "div",
          null,
          "NO VIDEOS TO SEE HERE"
        );
      }
    }
  }, {
    key: "getControls",
    value: function getControls() {
      var _this = this;

      if (this.video_resources.length <= 1) {
        return null;
      } else if (this.video_resources.length === 2) {
        return React.createElement(
          "div",
          { className: "switchbox_container", id: "switchbox_" + this.rs_id },
          React.createElement(
            "form",
            { className: "switchbox" },
            React.createElement("input", { type: "radio", id: this.rs_id + "_switch_lt", "data-resource": "0", className: "switch_input " + (parseInt(this.state.current_resource) === 0 ? 'selected' : ''), value: this.props.resources[0].title, onChange: function (e) {
                _this.toggleSwitchbox(e);
              }, checked: parseInt(this.state.current_resource) == 0 ? true : '' }),
            React.createElement(
              "label",
              { htmlFor: this.rs_id + "_switch_lt", className: "switch_label switch_label_left" },
              this.props.resources[0].title
            ),
            React.createElement("input", { type: "radio", id: this.rs_id + "_switch_rt", "data-resource": "1", className: "switch_input " + (parseInt(this.state.current_resource) === 1 ? 'selected' : ''), value: this.props.resources[1].title, onChange: function (e) {
                _this.toggleSwitchbox(e);
              }, checked: parseInt(this.state.current_resource) == 1 ? true : '' }),
            React.createElement(
              "label",
              { htmlFor: this.rs_id + "_switch_rt", className: "switch_label switch_label_right" },
              this.props.resources[1].title
            ),
            React.createElement("span", { className: "switch_indicator" })
          ),
          React.createElement("div", { className: "switch_line" })
        );
      }
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement(
        "section",
        { className: "resource_swapper", id: "resource_swapper_" + this.rs_id },
        React.createElement(
          "div",
          { className: "content_wrapper" },
          this.getResources()
        ),
        this.getControls(),
        React.createElement("div", { className: "long_description_text", dangerouslySetInnerHTML: { __html: this.video_resources[this.state.current_resource].long_description } })
      );
    }
  }]);

  return ResourceSwapper;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SearchSelectDropdown = (function (_React$Component) {
	_inherits(SearchSelectDropdown, _React$Component);

	function SearchSelectDropdown(props) {
		_classCallCheck(this, SearchSelectDropdown);

		_get(Object.getPrototypeOf(SearchSelectDropdown.prototype), "constructor", this).call(this, props);
		this.state = this.getInitialState();
	}

	_createClass(SearchSelectDropdown, [{
		key: "getInitialState",
		value: function getInitialState() {
			var props = this.props;
			var selected = "";
			var filtered_options = props.options_arr ? props.options_arr : [];
			var placeholder = "Please Select";
			if (props.selected_id) {
				var selected_arr = filtered_options.filter(function (element) {
					return element[1] == props.selected_id;
				});

				if (selected_arr.length > 0) {
					selected = selected_arr[0][1];
					placeholder = selected_arr[0][0];
				}
			}

			return {
				options_open: false,
				filtered_options: filtered_options,
				list_scrolling: false,
				options_filter: "",
				placeholder: placeholder,
				selected: selected
			};
		}
	}, {
		key: "changeSelection",
		value: function changeSelection(e) {
			var that = this;
			if (this.state.list_scrolling == false) {
				if (e.currentTarget && e.currentTarget.dataset) {
					this.state.filtered_options.map(function (element) {
						if (element[1] == e.currentTarget.dataset.value) {
							var selected = typeof e.currentTarget.dataset.value == "undefined" || typeof e.currentTarget.dataset.value == undefined ? "" : e.currentTarget.dataset.value;
							that.setState({ selected: selected, placeholder: element[0] });
							that.setOptionsClosed();
							return;
						}
					});
				}
			}

			if (this.props.onSelectChange) {
				eval(this.props.onSelectChange + "(e)");
			}
		}
	}, {
		key: "setSelectRef",
		value: function setSelectRef(node) {
			this.select_ref = node;
		}
	}, {
		key: "setOptionsOpen",
		value: function setOptionsOpen() {
			this.setState({ options_open: true }, function () {
				var _this = this;

				document.addEventListener('mousedown', function (e) {
					_this.handleClickOutside(e);
				});
				document.addEventListener('touchstart', function (e) {
					_this.handleClickOutside(e);
				});
				$('.change_select').addClass('options_open');
				if (this.props.selected_id && this.props.selected_id.length > 0 || this.state.selected.length > 0) {
					$('.dropdown_select').find('input').val(this.state.placeholder);
				}
			});
		}
	}, {
		key: "setOptionsClosed",
		value: function setOptionsClosed() {
			var filtered_options = this.props.options_arr;
			this.setState({ options_open: false, options_filter: '', filtered_options: filtered_options }, function () {
				var _this2 = this;

				document.removeEventListener('mousedown', function (e) {
					_this2.handleClickOutside(e);
				});
				document.removeEventListener('touchstart', function (e) {
					_this2.handleClickOutside(e);
				});
				$('.change_select').removeClass('options_open');
				$('input.selected_title').blur();
			});
		}
	}, {
		key: "handleClickOutside",
		value: function handleClickOutside(e) {
			if (this.select_ref && !this.select_ref.contains(e.target)) {
				this.setOptionsClosed();
			}
		}
	}, {
		key: "setOptionsFilter",
		value: function setOptionsFilter(e) {
			var that = this;
			var filtered_options = this.props.options_arr.filter(function (option) {
				var filter_regex = new RegExp(that.state.options_filter, "i");
				return filter_regex.test(option[0]);
			});
			this.setState({ options_filter: e.target.value, filtered_options: filtered_options });
		}
	}, {
		key: "startListScroll",
		value: function startListScroll() {
			this.setState({ list_scrolling: true });
		}
	}, {
		key: "stopListScroll",
		value: function stopListScroll() {
			this.setState({ list_scrolling: false });
		}
	}, {
		key: "blurOnEnter",
		value: function blurOnEnter(e) {
			if (e.keyCode === 13) {
				e.preventDefault();
				$(e.target).blur();
			}
		}
	}, {
		key: "getSelectOptions",
		value: function getSelectOptions() {
			var _this3 = this;

			var that = this;
			if (!this.state.options_open) {
				return null;
			} else if (this.state.filtered_options.length > 0) {
				return React.createElement(
					"div",
					{ className: "dropdown_options", onTouchStart: function (e) {
							_this3.stopListScroll(e);
						}, onTouchMove: function (e) {
							_this3.startListScroll(e);
						} },
					this.state.filtered_options.map(function (v, i) {
						return React.createElement(
							"div",
							{ className: "compare_option", "data-value": v[1], key: "option_" + i, onClick: function (e) {
									that.changeSelection(e);
								},
								onTouchEnd: function (e) {
									that.changeSelection(e);
								} },
							v[0]
						);
					})
				);
			} else {
				return React.createElement(
					"div",
					{ className: "dropdown_options" },
					React.createElement(
						"div",
						{ className: "compare_option unselectable" },
						React.createElement(
							"i",
							null,
							"No options match your search"
						)
					)
				);
			}
		}
	}, {
		key: "getDivDropdown",
		value: function getDivDropdown() {
			var _this4 = this;

			return React.createElement(
				"div",
				{ className: "dropdown" },
				React.createElement(
					"div",
					{ className: "dropdown_select change_select", ref: function (e) {
							_this4.setSelectRef(e);
						} },
					React.createElement("input", { className: "selected_title " + (this.props.is_admin ? 'admin_select' : ''),
						type: "text", onChange: function (e) {
							_this4.setOptionsFilter(e);
						}, onClick: function (e) {
							_this4.setOptionsOpen(e);
						},
						onTouchStart: function (e) {
							_this4.setOptionsOpen(e);
						}, placeholder: this.state.placeholder,
						value: this.state.options_filter, onKeyUp: function (e) {
							_this4.blurOnEnter(e);
						} }),
					React.createElement("div", { className: "select_icon" }),
					this.getSelectOptions()
				)
			);
		}
	}, {
		key: "render",
		value: function render() {
			var state = this.state;
			return React.createElement(
				"div",
				{ className: "search_select_dropdown" },
				React.createElement(
					"div",
					{ className: "field " + (this.props.klass ? this.props.klass : '') },
					React.createElement(
						"div",
						{ className: "right_col" },
						this.getDivDropdown(),
						React.createElement("input", { type: "hidden", id: this.props.id, name: this.props.name, value: this.state.selected })
					)
				)
			);
		}
	}]);

	return SearchSelectDropdown;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ShareButton = (function (_React$Component) {
  _inherits(ShareButton, _React$Component);

  function ShareButton(props) {
    _classCallCheck(this, ShareButton);

    _get(Object.getPrototypeOf(ShareButton.prototype), "constructor", this).call(this, props);
    this.state = {
      share_open: false,
      hover: false
    };
  }

  _createClass(ShareButton, [{
    key: "toggleShare",
    value: function toggleShare(e) {
      if (e) {
        e.preventDefault();
      }

      this.setState({ share_open: !this.state.share_open });
    }
  }, {
    key: "toggleHover",
    value: function toggleHover() {
      this.setState({ hover: !this.state.hover });
    }
  }, {
    key: "getStyle",
    value: function getStyle() {
      var backgroundColor = this.props.button_color ? this.props.button_color : "#396AA2";
      var hoverColor = this.props.hover_color ? this.props.hover_color : "#4a81c1";

      if (this.state.hover) {
        return { backgroundColor: hoverColor };
      } else {
        return { backgroundColor: backgroundColor };
      }
    }
  }, {
    key: "getIcon",
    value: function getIcon() {
      if (this.props.use_icon) {
        return React.createElement(
          React.Fragment,
          null,
          React.createElement(ShareIcon, this.props)
        );
      } else {
        return null;
      }
    }
  }, {
    key: "getButtonText",
    value: function getButtonText() {
      if (this.props.button_text) {
        return React.createElement(
          "span",
          null,
          this.props.button_text
        );
      } else if (this.props.button_text === "") {
        return null;
      } else {
        return React.createElement(
          "span",
          null,
          "SHARE"
        );
      }
    }
  }, {
    key: "getIconAndButton",
    value: function getIconAndButton() {
      // default to icon first
      if (this.props.icon_first === undefined || this.props.icon_first === true) {
        return React.createElement(
          React.Fragment,
          null,
          this.getIcon(),
          this.getButtonText()
        );
      } else {
        return React.createElement(
          React.Fragment,
          null,
          this.getButtonText(),
          this.getIcon()
        );
      }
    }
  }, {
    key: "getShareHtml",
    value: function getShareHtml() {
      return React.createElement(
        "div",
        { className: "share_bubble" },
        React.createElement(CherTools, this.props)
      );
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;

      return React.createElement(
        "div",
        { className: "share_button button " + (this.state.share_open ? 'share_open' : '') + " " + (this.props.use_icon ? 'has_icon' : ''), style: this.getStyle(), onClick: function (e) {
            _this.toggleShare(e);
          }, onMouseEnter: function () {
            _this.toggleHover();
          }, onMouseLeave: function () {
            _this.toggleHover();
          } },
        this.getIconAndButton(),
        this.getShareHtml()
      );
    }
  }]);

  return ShareButton;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Slideshow = (function (_React$Component) {
  _inherits(Slideshow, _React$Component);

  function Slideshow(props) {
    _classCallCheck(this, Slideshow);

    _get(Object.getPrototypeOf(Slideshow.prototype), 'constructor', this).call(this, props);
    this.hammer = null;
    this.state = this.getInitialState();
  }

  _createClass(Slideshow, [{
    key: 'getInitialState',
    value: function getInitialState() {
      var is_mobile = window.innerWidth <= 1023;
      var start_slide = mb_utils.getParam('slide');

      return {
        loading_thumbs: true,
        view_all: false,
        is_mobile: is_mobile,
        detail: start_slide ? this.props.items[parseInt(start_slide)] : this.props.items[0],
        show_description: true,
        panning: false,
        back_link: '',
        list_offset: 0,
        image_hidden: false
      };
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      if (typeof addthis != "undefined") {
        console.log("addthis init");
        addthis.toolbox(".addthis_sharing_toolbox");
      }

      $(window).on('resize', this.resizeOverlay.bind(this));

      var back_link = mb_utils.getParam("back");
      if (back_link) {
        this.setState({ back_link: Array.isArray(back_link) ? back_link[0] : back_link });
      }

      this.pushStateToHistoryAndSetMetaContent();

      window.addEventListener("keydown", this.handleArrowKeys.bind(this));

      this.initSwipe('.slideshow_detail');
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      $(window).off('resize', this.resizeOverlay.bind(this));
      window.removeEventListener("keydown", this.handleArrowKeys.bind(this));
    }
  }, {
    key: 'pushStateToHistoryAndSetMetaContent',
    value: function pushStateToHistoryAndSetMetaContent() {
      var item = this.state.detail;

      // var url = window.location.origin + item.link;
      var history_entry = "?slide=" + this.props.items.indexOf(this.state.detail);
      if (this.state.back_link !== '') {
        history_entry += "&back=" + this.state.back_link;
      }
      history.pushState(null, '', history_entry);

      // set meta content
      var meta_title = document.title;
      meta_title = meta_title.replace(/(.+)(\s\|)/g, item.title + "$2"); // replace the part of the title before the |

      var image_url = location.protocol + "//" + location.hostname + ":" + location.port + this.state.detail.image_src;

      document.title = meta_title;
      document.head.querySelector("meta[name='description']").setAttribute('content', item.body);
      document.head.querySelector("meta[property='og:description']").setAttribute('content', item.body);
      document.head.querySelector("meta[property='og:url']").setAttribute('content', location.href);
      document.head.querySelector("meta[property='og:title']").setAttribute('content', meta_title);
      document.head.querySelector("meta[property='og:image']").setAttribute('content', image_url);
      document.head.querySelector("meta[name='twitter:image']").setAttribute('content', image_url);
    }
  }, {
    key: 'initSwipe',
    value: function initSwipe(el) {
      Hammer.defaults.touchAction = "compute";
      var that = this;
      if (this.hammer) {
        this.hammer.destroy();
      }
      this.hammer = new Hammer.Manager($(el)[0], { domEvents: true, inputClass: Hammer.TouchInput });
      var $this = $(that.hammer.element);

      var pan = new Hammer.Pan({ direction: Hammer.DIRECTION_HORIZONTAL, threshold: 10 });

      this.hammer.add(pan);

      this.hammer.on('panstart', function (e) {
        // console.log("hammer panstart")
        that.setState({ panning: true });
      });

      this.hammer.on('pan', function (e) {
        // console.log("hammer pan")
        $(el).css('transform', 'translateX(' + e.deltaX + 'px)');
      });

      this.hammer.on('panend', function (e) {
        // console.log("hammer panend")
        that.setState({ panning: false });
        if (e.deltaX > 50 && that.state.detail !== that.props.items[0]) {
          that.slidePrev($this, e.deltaX, e);
        } else if (e.deltaX < -50 && that.state.detail !== that.props.items[that.props.items.length - 1]) {
          that.slideNext($this, e.deltaX, e);
        } else {
          $(el).animate({ 'fakeProp': e.deltaX }, 0);
          $(el).animate({ 'fakeProp': 0 }, {
            step: function (now, fx) {
              $(this).css('transform', 'translateX(' + now + 'px)');
            },
            duration: 200
          });
        }
      });
    }
  }, {
    key: 'handleArrowKeys',
    value: function handleArrowKeys(e) {
      if (e.keyCode == 37) {
        this.prevSlide(null, e);
      } else if (e.keyCode == 39) {
        this.nextSlide(null, e);
      }
    }
  }, {
    key: 'translateX',
    value: function translateX(el, start_value, end_value) {
      var callback = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];

      $(el).animate({ 'fakeProp': start_value }, 0);
      $(el).animate({ 'fakeProp': end_value }, {
        step: function (now, fx) {
          $(this).css('transform', 'translateX(' + now + 'px)');
        },
        duration: 200,
        complete: callback
      });
    }
  }, {
    key: 'slidePrev',
    value: function slidePrev(el, start_x, e) {
      console.log("slidePrev");
      var that = this;
      if (this.state.detail !== this.props.items[0]) {
        var ww = window.innerWidth;
        that.translateX(el, start_x, ww + 200, function () {
          that.prevSlide(function () {
            that.translateX(el, -200 - ww, 0);
          }, e);
        });
      }
    }
  }, {
    key: 'slideNext',
    value: function slideNext(el, start_x, e) {
      console.log("slideNext");
      var that = this;
      if (this.state.detail !== this.props.items[this.props.items.length - 1]) {
        var ww = window.innerWidth;
        that.translateX(el, start_x, -200 - ww, function () {
          that.nextSlide(function () {
            that.translateX(el, ww + 200, 0);
          }, e);
        });
      }
    }
  }, {
    key: 'resizeOverlay',
    value: function resizeOverlay(e) {
      if (window.innerWidth > 1023) {
        var list_offset = this.getListOffset(this.state.detail);
        this.setState({ is_mobile: false, list_offset: list_offset });
      } else {
        this.setState({ is_mobile: true });
      }
    }
  }, {
    key: 'openViewAll',
    value: function openViewAll(e) {
      var that = this;
      this.setState({ view_all: true });
    }
  }, {
    key: 'closeViewAll',
    value: function closeViewAll(e) {
      this.setState({ view_all: false });
    }
  }, {
    key: 'getListOffset',
    value: function getListOffset(item) {
      if (!this.state.is_mobile) {
        var item_index = this.props.items.indexOf(item);
        var selectors = '.slideshow_footer_carousel .slideshow_thumbs';

        var margin = 50;
        var total_thumbs_width = document.querySelector(selectors).scrollWidth + margin * 2;
        var visible_thumbs_width = document.querySelector(selectors).clientWidth + margin * 2;

        // if all thumbs are visible, there is no reason to move them
        if (total_thumbs_width === visible_thumbs_width) return 0;

        // current thumb
        var current_thumb = document.querySelector(selectors).children[item_index];
        var $current_thumb_width = $(current_thumb).width();

        // last thumb
        var last_thumb = document.querySelector(selectors).children[this.props.items.length - 1];
        var $last_thumb_width = $(last_thumb).width();

        var $left_thumb_position = $(current_thumb).position().left + margin; // offset from parent

        var view_all_button = document.querySelector('.view_all_btn');
        var carousel_arrows = document.querySelector('.carousel_arrows');

        var $left_threshold = $(view_all_button).offset().left + $(view_all_button).width() + margin;
        var $right_threshold = $(carousel_arrows).offset().left - margin;

        var $current_thumb_left = $(current_thumb).offset().left;
        var $current_thumb_right = $current_thumb_left + $current_thumb_width;

        var $last_thumb_left = $(last_thumb).offset().left;
        var $last_thumb_right = $last_thumb_left + $last_thumb_width;

        // if current thumb right is further to right than right threshold
        if ($current_thumb_right > $right_threshold) {
          // get difference between current thumb position in parent and the width of visible thumbs minus margin
          var difference = $left_thumb_position + $current_thumb_width - (visible_thumbs_width - margin);

          return -difference;
          // if current thumb left is further to left than left threshold
        } else if ($current_thumb_left < $left_threshold) {
            var difference = $left_thumb_position - margin;

            return -difference;
            // if last thumb right has moved left of right threshold
          } else if ($last_thumb_right < $right_threshold) {
              var difference = total_thumbs_width - visible_thumbs_width;

              return -difference;
            } else {
              // no movement is necessary
              return this.state.list_offset;
            }
      }
      return 0;
    }
  }, {
    key: 'viewDetail',
    value: function viewDetail(item, callback, e) {
      var _this = this;

      if (callback === undefined) callback = null;

      this.setState({ detail: item, view_all: false, list_offset: this.getListOffset(item), image_hidden: true }, function () {
        _this.pushStateToHistoryAndSetMetaContent();

        _this.setState({ image_hidden: false }); // toggling this state to force css opacity animation to play

        if (typeof callback == "function") {
          callback.call();
        }
      });
    }
  }, {
    key: 'prevSlide',
    value: function prevSlide(callback, e) {
      if (callback === undefined) callback = null;

      var detail_idx = this.props.items.indexOf(this.state.detail);
      // if we are on the first slide return
      if (detail_idx === 0) return;

      // go to previous slide
      this.viewDetail(this.props.items[detail_idx - 1], callback, e);
    }
  }, {
    key: 'nextSlide',
    value: function nextSlide(callback, e) {
      if (callback === undefined) callback = null;

      var detail_idx = this.props.items.indexOf(this.state.detail);
      // if we are on the last slide return
      if (detail_idx === this.props.items.length - 1) return;

      // go to next slide
      this.viewDetail(this.props.items[detail_idx + 1], callback, e);
    }
  }, {
    key: 'toggleDescription',
    value: function toggleDescription() {
      if (this.state.is_mobile && window.innerWidth > window.innerHeight) {
        // only hide description when on mobile landscape
        this.setState({ show_description: !this.state.show_description });
      }
    }
  }, {
    key: 'imagesLoaded',
    value: function imagesLoaded(parentNode) {
      var imgElements = [].concat(_toConsumableArray(parentNode.querySelectorAll("img")));
      for (var i = 0; i < imgElements.length; i++) {
        var img = imgElements[i];
        if (!img.complete) {
          return false;
        }
      }

      this.setState({ list_offset: this.getListOffset(this.state.detail) });
      return true;
    }
  }, {
    key: 'handleImageChange',
    value: function handleImageChange(e) {
      this.setState({ loading_thumbs: !this.imagesLoaded(this.carouselElement) });
    }
  }, {
    key: 'renderThumbsForFooterCarousel',
    value: function renderThumbsForFooterCarousel() {
      var _this2 = this;

      return React.createElement(
        'ul',
        { className: 'slideshow_thumbs', ref: function (element) {
            _this2.carouselElement = element;
          }, style: { left: this.state.list_offset + 'px' } },
        this.props.items.map(function (item) {
          return React.createElement(
            'li',
            { className: item === _this2.state.detail ? "current" : "", key: item.id, onClick: function (e) {
                _this2.viewDetail(item, null, e);
              } },
            React.createElement('img', { src: item.image_src, onLoad: function (e) {
                return _this2.handleImageChange(e);
              }, onError: function (e) {
                _this2.handleImageChange(e);
              } })
          );
        })
      );
    }
  }, {
    key: 'renderThumbsForViewAll',
    value: function renderThumbsForViewAll() {
      var _this3 = this;

      return React.createElement(
        'ul',
        { className: 'slideshow_thumbs', style: { left: '0' } },
        this.props.items.map(function (item) {
          return React.createElement(
            'li',
            { className: item === _this3.state.detail ? "current" : "", key: item.id, onClick: function (e) {
                _this3.viewDetail(item, null, e);
              } },
            React.createElement('img', { src: item.image_src })
          );
        })
      );
    }
  }, {
    key: 'renderViewAll',
    value: function renderViewAll() {
      var _this4 = this;

      if (this.state.view_all) {
        return React.createElement(
          'div',
          { className: 'slideshow_view_all' },
          React.createElement(
            'div',
            { className: 'view_all_text' },
            React.createElement(SlideshowBrandArea, { view_all: this.state.view_all }),
            React.createElement(
              'h1',
              null,
              this.props.title
            ),
            this.props.description ? React.createElement('div', { className: 'view_all_description', dangerouslySetInnerHTML: { __html: this.props.description } }) : null
          ),
          React.createElement(
            'div',
            { className: 'view_all_items' },
            this.renderThumbsForViewAll()
          ),
          React.createElement(
            'footer',
            { className: 'view_all_footer' },
            React.createElement(
              'div',
              { className: 'close_view_all', onClick: function (e) {
                  _this4.closeViewAll(e);
                } },
              React.createElement('span', { className: 'icon' }),
              'close'
            )
          )
        );
      } else {
        return null;
      }
    }
  }, {
    key: 'getImage',
    value: function getImage() {
      if (this.state.image_hidden) {
        return null;
      } else {
        return React.createElement(
          'div',
          { className: 'image_area' },
          React.createElement('img', { src: this.state.detail.image_src })
        );
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this5 = this;

      var that = this;
      var current_slide_idx = this.props.items.indexOf(this.state.detail) + 1;
      var is_first_slide = current_slide_idx == 1;
      var is_last_slide = current_slide_idx == this.props.items.length;
      var share_url = window.location.href;

      return React.createElement(
        'div',
        { className: 'slideshow_container', id: 'slideshow_container' },
        React.createElement(
          'div',
          null,
          this.renderViewAll(),
          React.createElement(
            'div',
            { className: 'slideshow ' + (this.state.view_all ? "view_all_active" : "") },
            React.createElement(
              'div',
              { className: 'slideshow_header' },
              this.state.back_link ? React.createElement(
                'a',
                { className: 'close_btn', href: this.state.back_link },
                'BACK'
              ) : null,
              React.createElement(
                'h4',
                { className: 'slideshow_title' },
                this.props.title
              ),
              React.createElement(SlideshowBrandArea, { view_all: this.state.view_all })
            ),
            React.createElement(
              'div',
              { className: 'slideshow_detail', onClick: function (e) {
                  _this5.toggleDescription(e);
                } },
              this.getImage(),
              React.createElement(
                'div',
                { className: 'description_area', style: { opacity: this.state.show_description ? 1 : 0 } },
                React.createElement(
                  'div',
                  { className: 'description_text' },
                  React.createElement(
                    'h2',
                    { className: 'description_title' },
                    this.state.detail.title
                  ),
                  React.createElement('div', { className: 'detail_description', dangerouslySetInnerHTML: { __html: this.state.detail.body } }),
                  this.state.is_mobile ? null : React.createElement(
                    'div',
                    { className: 'share_button_component' },
                    React.createElement(ShareButton, { share: [['Facebook'], ['Twitter'], ['Pinterest'], ['Email']],
                      url: share_url,
                      share_text: this.state.detail.title,
                      button_text: "share",
                      button_color: "#ffffff00",
                      hover_color: "#ffffff00",
                      use_icon: true })
                  )
                )
              )
            ),
            React.createElement(
              'div',
              { className: 'slideshow_footer' },
              React.createElement(
                'div',
                { className: 'view_all_btn', onClick: function (e) {
                    _this5.openViewAll(e);
                  } },
                React.createElement(
                  'div',
                  { className: 'icon svg_icon_container' },
                  React.createElement(
                    'svg',
                    { id: 'grid_icon', viewBox: '0 0 24 24', xmlns: 'http://www.w3.org/2000/svg' },
                    React.createElement('path', { d: 'm0 0h6.85714286v6.85714286h-6.85714286zm8.57142857 0h6.85714283v6.85714286h-6.85714283zm8.57142853 0h6.8571429v6.85714286h-6.8571429zm-17.1428571 8.57142857h6.85714286v6.85714283h-6.85714286zm8.57142857 0h6.85714283v6.85714283h-6.85714283zm8.57142853 0h6.8571429v6.85714283h-6.8571429zm-17.1428571 8.57142853h6.85714286v6.8571429h-6.85714286zm8.57142857 0h6.85714283v6.8571429h-6.85714283zm8.57142853 0h6.8571429v6.8571429h-6.8571429z' })
                  )
                ),
                React.createElement(
                  'span',
                  { className: 'view_all_label' },
                  'View All'
                )
              ),
              this.state.is_mobile ? React.createElement(
                'div',
                { className: 'share_button_component' },
                React.createElement(ShareButton, { share: [['Facebook'], ['Twitter'], ['Pinterest'], ['Email']],
                  url: share_url,
                  share_text: this.state.detail.title,
                  button_text: "",
                  button_color: "#ffffff00",
                  hover_color: "#ffffff00",
                  use_icon: true })
              ) : React.createElement(
                'div',
                { className: 'slideshow_footer_carousel' },
                this.renderThumbsForFooterCarousel()
              ),
              React.createElement(
                'div',
                { className: 'carousel_arrows' },
                React.createElement(
                  'div',
                  { className: 'carousel_prev ' + (is_first_slide ? "disabled" : ""), onClick: function (e) {
                      _this5.prevSlide(null, e);
                    } },
                  React.createElement(
                    'div',
                    { className: 'icon svg_icon_container' },
                    React.createElement(
                      'svg',
                      { width: '24', height: '24', className: 'svg_icon' },
                      React.createElement('path', { d: 'M.41 12.818L8.897.696l.182.127L.903 12.5l8.176 11.677-.182.127L.41 12.182l-.022.015-.015-.014-.086-.061-.2.286-.087.06.022.032-.022.032.087.06.2.286.086-.06.015-.015z', fillRule: 'evenodd', opacity: '1' })
                    )
                  )
                ),
                React.createElement(
                  'div',
                  { className: 'carousel_count' },
                  current_slide_idx + ' /',
                  ' ',
                  React.createElement(
                    'span',
                    null,
                    '' + this.props.items.length
                  )
                ),
                React.createElement(
                  'div',
                  { className: 'carousel_next ' + (is_last_slide ? "disabled" : ""), onClick: function (e) {
                      _this5.nextSlide(null, e);
                    } },
                  React.createElement(
                    'div',
                    { className: 'icon svg_icon_container' },
                    React.createElement(
                      'svg',
                      { width: '24', height: '24', className: 'svg_icon' },
                      React.createElement('path', { d: 'M.41 12.818L8.897.696l.182.127L.903 12.5l8.176 11.677-.182.127L.41 12.182l-.022.015-.015-.014-.086-.061-.2.286-.087.06.022.032-.022.032.087.06.2.286.086-.06.015-.015z', fillRule: 'evenodd', opacity: '1' })
                    )
                  )
                )
              )
            )
          )
        )
      );
    }
  }]);

  return Slideshow;
})(React.Component);
var SlideshowBrandArea = function (props) {
  return React.createElement(
    "div",
    { className: "view_all_brand_area" },
    React.createElement(
      "div",
      { className: "brand_1" },
      React.createElement("a", { className: "nasa_logo", href: "https://www.nasa.gov", target: "blank", title: "visit nasa.gov" })
    ),
    React.createElement(
      "div",
      { className: "brand_2" },
      React.createElement(
        "div",
        { className: "site_logo" },
        React.createElement(
          "a",
          { id: "site_logo", href: "/", title: "Home" },
          "Home"
        )
      ),
      React.createElement("div", { className: "sub_logo" })
    ),
    React.createElement("img", { className: "print_only print_logo", src: "/assets/logo_nasa_trio_white@2x.png", alt: "" })
  );
};
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x3, _x4, _x5) { var _again = true; _function: while (_again) { var object = _x3, property = _x4, receiver = _x5; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x3 = parent; _x4 = property; _x5 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// SpaController Component for Gridlist (SPA-style) [updated from gridlist refactor 6/26/2019] -nmj
// keeps track of SPA-historystate and invokes Article and ArticleNav

var SpaController = (function (_React$Component) {
  _inherits(SpaController, _React$Component);

  function SpaController(props) {
    _classCallCheck(this, SpaController);

    _get(Object.getPrototypeOf(SpaController.prototype), "constructor", this).call(this, props);
    this.state = {
      detail_image_loaded: false,
      last_pushed_state: null
    };
  }

  _createClass(SpaController, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this = this;

      var that = this;

      console.log("SpaController:: componentDidMount");
      if (this.props.article && this.props.initial_id) {
        this.selectedItem(this.props.article, function () {});
      }

      // handle back button events
      if (!this.props.get_history_state_loaded) {
        window.addEventListener("popstate", function (e) {
          return _this.popStateListener(e);
        });
        this.props.set_history_state_loaded();
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState, snapshot) {
      // console.log('SpaController:: componentDidUpdate', prevProps, (this.props.article.id != prevProps.article.id))

      if (this.props.article) {
        var title = document.title;
        if (prevProps && prevProps.article && this.props.article.id != prevProps.article.id) {

          this.selectedItem(this.props.article, function () {});
        } else if (this.props.article.id && prevProps.article == null) {

          console.log('UPDATE...');
          this.selectedItem(this.props.article, function () {});
        }
      } else if (prevProps && this.props.article == null && prevProps.article != null) {}
    }
  }, {
    key: "popStateListener",
    value: function popStateListener(e) {
      var that = this;
      var state = e.state;

      console.log('SpaController:: popStateListener', state);

      e.preventDefault();
      e.stopPropagation();

      if (state == null) {
        console.log('POP 1 : NULL : ');

        if (this.state.last_pushed_state != state) {
          this.setState({ last_pushed_state: state });
          that.hideDetail(state, false);
        }
      } else if (typeof state != 'undefined') {

        console.log('POP 2 : state : ');
        this.setState({ last_pushed_state: state });

        if (state.id != null) {

          that.selectedItem(state, function () {}, false);
        } else {

          console.log('POP 3 : state.id == null : ');
          this.setState({ last_pushed_state: state });
          that.hideDetail(null, false);
        }
      }
    }
  }, {
    key: "setHistoryState",
    value: function setHistoryState(historyState, historyTitle, historyUrl) {
      // console.log("SpaController:: setHistoryState", historyState, this.props.article, this.state.last_pushed_state)
      document.title = historyTitle;
      window.history.pushState(historyState, historyTitle, historyUrl);
      this.setState({ last_pushed_state: historyState });
    }
  }, {
    key: "hideDetail",
    value: function hideDetail(historyState) {
      var setHistoryState = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];

      // console.log('SpaController:: hideDetail', setHistoryState)
      if (setHistoryState) {
        window.history.pushState(historyState, document.title, document.location);
      }
      this.setState({ detail_image_loaded: false }, function () {
        this.props.hide_detail(historyState);
      });
    }
  }, {
    key: "selectedItem",
    value: function selectedItem(item, callback) {
      var setHistoryState = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];

      // console.log("SpaController:: selectedItem", setHistoryState)

      if (setHistoryState && item != this.state.last_pushed_state) {
        this.setHistoryState(item, document.title, "#" + item.id);
      }

      this.setState({ detail_image_loaded: false }, function () {
        this.props.selected_item(item, callback);
      });
    }
  }, {
    key: "changeTitle",
    value: function changeTitle(title) {
      // console.log('SpaController:: changeTitle  -- ', title)
      if (this.props.article && this.props.article != null) {
        document.title = title;
      }
    }
  }, {
    key: "imagesLoaded",
    value: function imagesLoaded() {
      console.log('SpaController:: imagesLoaded');
      this.setState({ detail_image_loaded: true });
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      if (this.props.article) {
        return React.createElement(
          "div",
          null,
          !this.state.detail_image_loaded ? React.createElement("div", { className: "detail_loading" }) : null,
          React.createElement(ArticleNav, _extends({ detail_image_loaded: this.state.detail_image_loaded }, this.props)),
          React.createElement(Article, _extends({ detail_image_loaded: this.state.detail_image_loaded, initial_items: this.props.initial_items,
            hide_detail: function (a, b) {
              _this2.hideDetail(a, b);
            }, selected_item: function (a, b, c) {
              _this2.selectedItem(a, b, c);
            },
            change_title: function (t) {
              _this2.changeTitle(t);
            },
            images_loaded: function () {
              _this2.imagesLoaded();
            } }, this.props))
        );
      } else {
        return React.createElement("div", null);
      }
    }
  }]);

  return SpaController;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/* Connects to passed in base url and parses json to get spice info
   Props:
		base_url (req): no trailing slash
    duration (opt, in ms): default 5m (how often to get more data)
    frequency (opt, in ms): default 1s, (how often to update position data)
    query (req):
    	request:
    		distance:
    			from: spice target
    			to: spice target
    			Seems to work best with the naif integers: https://naif.jpl.nasa.gov/pub/naif/toolkit_docs/FORTRAN/req/naif_ids.html#Planets and Satellites
				

		 URLS
			/getRangefromT1/transmitter/transponder/start/end/interval   - upleg range from transmitter
			/getULTfromT1/transmitter/transponder/start/end/interval   - upleg light time from transmitter
 */

var SpiceAPI = (function (_React$Component) {
	_inherits(SpiceAPI, _React$Component);

	function SpiceAPI(props) {
		_classCallCheck(this, SpiceAPI);

		_get(Object.getPrototypeOf(SpiceAPI.prototype), 'constructor', this).call(this, props);
		var duration = this.props.duration ? this.props.duration : 5 * 60 * 1000;
		var frequency = this.props.frequency ? this.props.frequency : 1000;
		var dec = this.props.query.decimals ? this.props.query.decimals : 0;
		this.state = {
			frequency: frequency,
			duration: duration,
			error: false,
			received_data: false,
			getting_more_data: false,
			data: [],
			value: '',
			units: '',
			decimals: dec,
			idx: -1,
			last_error: 0,
			format_units: 'standard'
		};
		this.interval = null;

		this.tick = this.tick.bind(this);
	}

	_createClass(SpiceAPI, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getData();
			this.interval = setInterval(this.tick, this.state.frequency);

			var that = this;
			if (this.props.toggle || this.props.query && this.props.query.toggle) {
				$('body').on('toggle_units', function (e, d) {
					that.setState({ format_units: d });
				});
			}
		}
	}, {
		key: 'tick',
		value: function tick() {
			var new_i = this.state.idx + 1;
			if (this.state.getting_more_data) {
				//do nothing
			} else if (this.state.error) {
					now = new Date().getTime;
					if (now > this.state.last_error + 3000) {
						console.log("Error timeout up: Trying again.");
						this.setState({ getting_more_data: true, error: false }, this.getData());
					}
				} else if (new_i < this.state.data.length) {
					var p = this.state.data[new_i];
					this.setState({ idx: new_i, value: p['value'] });
				} else {
					this.setState({ getting_more_data: true }, this.getData());
				}
		}
	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			console.log("UNMOUNT");
			this.stopGettingData();
		}
	}, {
		key: 'stopGettingData',
		value: function stopGettingData() {
			clearInterval(this.interval);
		}
	}, {
		key: 'padZero',
		value: function padZero(num) {
			if (num < 10) {
				return '0' + num;
			} else {
				return num;
			}
		}
	}, {
		key: 'getData',
		value: function getData() {
			var that = this;
			this.setState({ received_data: false, current_idx: -1 }, function () {
				var url = that.createURLFromQuery();
				console.log("Getting more data", url);
				$.ajax(url, { dataType: 'json' }).success(function (data, status, jqxhr) {
					that.onReceiveData(data);
				}).error(function (jqxhr, status, error) {
					console.error("SpiceAPI.getData error", error, url);
				});
			});
		}
	}, {
		key: 'onReceiveData',
		value: function onReceiveData(data) {
			if (data.error) {
				console.log(data.message);
				this.setState({ received_data: true, error: true, getting_more_data: false, last_error: new Date().getTime() });
			} else {
				var now_i = this.getIdxForNow(data.items);
				var units = data.units;
				this.setState({ data: data.items, received_data: true, idx: now_i, getting_more_data: false, units: units });
			}
		}
	}, {
		key: 'createURLFromQuery',
		value: function createURLFromQuery() {
			if (this.props.query.request == "distance") {
				return this.props.base_url + this.buildDistanceUrl() + this.buildTimeUrl();
			} else if (this.props.query.request == "one_way_light_time") {
				return this.props.base_url + this.buildLightTimeUrl() + this.buildTimeUrl();
			}
		}
	}, {
		key: 'buildLightTimeUrl',
		value: function buildLightTimeUrl() {
			try {
				return '/getULTfromT1/' + this.props.query.from + '/' + this.props.query.to + '/';
			} catch (e) {
				console.error("SpiceAPI: error creating distance url: ", e.message);
			}
		}
	}, {
		key: 'buildDistanceUrl',
		value: function buildDistanceUrl() {
			try {
				return '/getRangefromT1/' + this.props.query.from + '/' + this.props.query.to + '/';
			} catch (e) {
				console.error("SpiceAPI: error creating distance url: ", e.message);
			}
		}
	}, {
		key: 'buildTimeUrl',
		value: function buildTimeUrl() {
			var now = new Date();
			now.setSeconds(0, 0);
			var now_str = now.toISOString().slice(0, 18);
			var then = new Date(now.getTime() + this.state.duration);
			var then_str = then.toISOString().slice(0, 18);
			return now_str + '/' + then_str + '/' + parseInt(this.state.frequency) / 1000 + '/';
		}
	}, {
		key: 'getIdxForNow',
		value: function getIdxForNow(data) {
			var now = new Date();
			var i = -1;
			var found = false;
			while (i + 1 < data.length && !found) {
				i++;
				if (Date.parse(data[i].date) >= now) {
					found = true;
				}
			}
			if (found) {
				return i;
			} else {
				return -1;
			}
		}
	}, {
		key: 'getFormattedDistance',
		value: function getFormattedDistance(num, unit) {
			if (this.props.query.toggle_units) {
				return [this.formatThousandsNoRounding(num.toFixed(0)), ""];
			} else {
				return [this.formatThousandsNoRounding(num.toFixed(0)), unit];
			}
		}
	}, {
		key: 'formatNumber',
		value: function formatNumber(num, units) {
			var f_num = parseFloat(num);

			if (isNaN(f_num)) {
				return ["", ""];
			} else if (this.props.query.request == 'one_way_light_time') {
				if (f_num < 60) {
					return [f_num.toFixed(4), "secs"];
				} else if (f_num < 3600) {
					var val = f_num / 60;
					return [val.toFixed(6), "mins"];
				} else {
					// let hours = (f_num / 3660).toFixed(0)
					// let minutes = ((f_num % 3600) / 60).toFixed(0)
					// let secs = (f_num % 60).toFixed(0)
					// return `${hours} hours ${minutes} mins`
					var val = f_num / 60;
					return [val.toFixed(6), "mins"];
				}
			} else if (this.props.query.request == 'distance') {
				if (this.state.format_units == 'standard') {
					var miles = f_num * 0.621371;
					return this.getFormattedDistance(miles, "miles");
				} else {
					return this.getFormattedDistance(f_num, "km");
				}
			} else if (this.state.decimals > -1) {
				return [this.formatThousandsNoRounding(f_num.toFixed(this.state.decimals)), units];
			} else {
				return [this.formatThousandsNoRounding(f_num), units];
			}
		}

		//pulled from https://stackoverflow.com/questions/5731193/how-do-i-format-numbers-using-javascript
	}, {
		key: 'formatThousandsNoRounding',
		value: function formatThousandsNoRounding(n, dp) {
			var e = '',
			    s = e + n,
			    l = s.length,
			    b = n < 0 ? 1 : 0,
			    i = s.lastIndexOf('.'),
			    j = i == -1 ? l : i,
			    r = e,
			    d = s.substr(j + 1, dp);
			while ((j -= 3) > b) {
				r = ',' + s.substr(j, 3) + r;
			}
			return s.substr(0, j + 3) + r + (dp ? '.' + d + (d.length < dp ? '00000'.substr(0, dp - d.length) : e) : e);
		}
	}, {
		key: 'changeUnits',
		value: function changeUnits(type) {
			this.setState({ format_units: type });
		}
	}, {
		key: 'getUnitToggle',
		value: function getUnitToggle() {
			var that = this;
			if (this.props.query.toggle_units && this.props.query.request == 'distance') {
				return React.createElement(
					'span',
					{ className: 'toggle_units' },
					React.createElement(
						'span',
						{ onClick: function () {
								return that.changeUnits('standard');
							}, className: 'unit_toggle ' + (that.state.format_units == 'standard' ? 'current' : '') },
						'mi'
					),
					React.createElement(
						'span',
						{ onClick: function () {
								return that.changeUnits('metric');
							}, className: 'unit_toggle ' + (that.state.format_units == 'metric' ? 'current' : '') },
						'km'
					)
				);
			} else {
				return null;
			}
		}
	}, {
		key: 'render',
		value: function render() {
			var that = this;
			if (this.state.error) {
				return React.createElement(
					'div',
					{ className: 'error' },
					'Sorry, there was an error loading data. Trying again in 30s.'
				);
			} else if (this.state.received_data) {
				var val_unit_arr = this.formatNumber(this.state.value, this.state.units);
				if (Array.isArray(val_unit_arr)) {
					return React.createElement(
						'div',
						null,
						React.createElement(
							'div',
							{ className: 'value' },
							val_unit_arr[0],
							React.createElement(
								'span',
								{ className: 'units' },
								'',
								val_unit_arr[1]
							),
							this.getUnitToggle()
						)
					);
				} else {
					return React.createElement(
						'div',
						null,
						React.createElement(
							'div',
							{ className: 'value' },
							val_unit_arr
						)
					);
				}
			} else {
				return React.createElement(
					'div',
					{ className: 'loading' },
					'Loading...'
				);
			}
		}
	}]);

	return SpiceAPI;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Legacy component only used in Mars - refactored to ES6 anyway nmj 9/1/20
// Deprecated!

var SplashScreen = (function (_React$Component) {
  _inherits(SplashScreen, _React$Component);

  function SplashScreen(props) {
    _classCallCheck(this, SplashScreen);

    _get(Object.getPrototypeOf(SplashScreen.prototype), 'constructor', this).call(this, props);
    this.spinner_opts = {
      lines: 8, // The number of lines to draw
      length: 5, // The length of each line
      width: 3, // The line thickness
      radius: 6, // The radius of the inner circle
      color: '#FFF', // #rbg or #rrggbb
      speed: 1, // Rounds per second
      trail: 100, // Afterglow percentage
      shadow: false, // Whether to render a shadow
      className: 'spinner',
      top: "20px",
      left: "50%"
    };
    this.state = {
      spinner: null,
      open: true
    };
  }

  _createClass(SplashScreen, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var spinner = $("#splash_spinner").spin(this.spinner_opts);
      this.setState({ spinner: spinner });
    }
  }, {
    key: 'fadeOut',
    value: function fadeOut(e) {
      var that = this;
      $(".splash").fadeOut(this.props.fade_time ? this.props.fade_time : 400, function () {
        that.setState({ open: false }, function () {
          if (that.props.onClose) {
            that.props.onClose(e);
          }
        });
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this = this;

      if (this.state.open) {
        return React.createElement(
          'div',
          { className: 'splash', style: { backgroundImage: "url(" + this.props.background_image + ")" } },
          React.createElement(
            'div',
            { className: 'splash_text' },
            React.createElement(
              'h1',
              { className: 'splash_title' },
              this.props.title
            ),
            React.createElement(
              'p',
              { className: 'splash_description' },
              this.props.description
            ),
            this.props.loaded ? React.createElement(
              'a',
              { className: 'button', onClick: function (e) {
                  _this.fadeOut(e);
                } },
              this.props.button_text
            ) : React.createElement(
              'div',
              { className: 'splash_loading' },
              React.createElement('div', { id: 'splash_spinner' }),
              'Loading...'
            ),
            this.props.children
          )
        );
      } else {
        return null;
      }
    }
  }]);

  return SplashScreen;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var StickyNotice = (function (_React$Component) {
  _inherits(StickyNotice, _React$Component);

  function StickyNotice(props) {
    _classCallCheck(this, StickyNotice);

    _get(Object.getPrototypeOf(StickyNotice.prototype), "constructor", this).call(this, props);
    var sticky_cookie = mb_utils.readCookie(props.cookie_name);
    var open = true;
    if (Array.isArray(sticky_cookie) && sticky_cookie[0] == "true" || sticky_cookie == "true") {
      open = false;
    }

    this.state = {
      open: open
    };
  }

  _createClass(StickyNotice, [{
    key: "close",
    value: function close(e) {
      e.preventDefault();
      that = this;

      this.setState({ open: false }, function () {
        mb_utils.createCookie(that.props.cookie_name, 'true', 365, false);
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;

      if (this.state.open === false) return null;

      return React.createElement(
        "div",
        { className: "sticky_notice_container" },
        React.createElement("div", { className: "sticky_notice_page_cover" }),
        React.createElement(
          "div",
          { className: "sticky_notice", style: { backgroundColor: this.props.background_color ? this.props.background_color : "#666666" } },
          React.createElement("div", { className: "close_button", onClick: function (e) {
              _this.close(e);
            } }),
          React.createElement(
            "p",
            null,
            React.createElement(
              "b",
              null,
              this.props.title
            )
          ),
          React.createElement("p", { className: "sticky_notice_description", dangerouslySetInnerHTML: { __html: this.props.description } })
        )
      );
    }
  }]);

  return StickyNotice;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//used in images of change and earth web for sure...

var SvgIcon = (function (_React$Component) {
	_inherits(SvgIcon, _React$Component);

	function SvgIcon(props) {
		_classCallCheck(this, SvgIcon);

		_get(Object.getPrototypeOf(SvgIcon.prototype), "constructor", this).call(this, props);
		this.state = {
			unique_id: "svg-icon-label-" + this.getUniqueID()
		};
	}

	// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random

	_createClass(SvgIcon, [{
		key: "getRandomInt",
		value: function getRandomInt(min, max) {
			min = Math.ceil(min);
			max = Math.floor(max);
			return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
		}
	}, {
		key: "getUniqueID",
		value: function getUniqueID() {
			// https://stackoverflow.com/questions/1117584/generating-guids-in-ruby#answer-1126031
			// https://gist.github.com/emacip/b28ba7e9203a38d440e23c38586c303d
			// >> rand(36**8).to_s(36)
			// => "uur0cj2h"
			return this.getRandomInt(0, Math.pow(36, 8)).toString(36);
		}
	}, {
		key: "render",
		value: function render() {
			if (this.props.label) {
				// The <foreignObject/> element is useful to software like
				// screen readers, and browsers that dont understand SVG:
				// http://davidensinger.com/2013/04/inline-svg-with-png-fallback/
				return React.createElement(
					"div",
					{ className: "icon svg_icon_container" },
					React.createElement(
						"svg",
						{ width: "24", height: "24", className: "svg_icon yyy", "aria-labelledby": this.state.unique_id },
						React.createElement(
							"switch",
							null,
							React.createElement("use", { xlinkHref: "#" + this.props.symbol }),
							React.createElement(
								"foreignObject",
								{ id: this.state.unique_id },
								this.props.label
							)
						)
					)
				);
			} else {
				// If the icon is purely decorative, its okay to leave out
				// the <foreignObject/> element.
				return React.createElement(
					"div",
					{ className: "icon svg_icon_container" },
					React.createElement(
						"svg",
						{ width: "24", height: "24", className: "svg_icon" },
						React.createElement("use", { xlinkHref: "#" + this.props.symbol })
					)
				);
			}
		}
	}]);

	return SvgIcon;
})(React.Component);
// reusable play/pause button, includes svg, just pass playing state to props
// NOTE: this is a stateless functional component.  (maybe good for future reference)
var PlayPause = function (_ref) {
  var playing = _ref.playing;
  return playing ? React.createElement(
    "svg",
    { className: "svg_icon_container", id: "pause_circle" },
    React.createElement(
      "g",
      { fill: "none", fillRule: "evenodd" },
      React.createElement("path", { d: "M0 0h39v39H0z" }),
      React.createElement("circle", {
        cx: "19.5",
        cy: "19.5",
        r: "17.5",
        stroke: "var(--play-stroke)",
        strokeWidth: "2"
      }),
      React.createElement("path", {
        fill: "#b9d4f0",
        fillRule: "nonzero",
        d: "M2.487 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H.43l-.086-.008C.148 10.91 0 10.752 0 10.562V.395L.01.315A.423.423 0 01.43 0zm5.88 0c.018.003.037 0 .056 0 .237 0 .43.177.43.394v10.168c0 .217-.193.394-.43.394H6.31l-.086-.008c-.196-.037-.344-.196-.344-.386V.395l.009-.08A.423.423 0 016.31 0z",
        transform: "translate(15 14)"
      })
    )
  ) : React.createElement(
    "svg",
    { className: "svg_icon_container", id: "play_circle" },
    React.createElement(
      "g",
      { fill: "none", fillRule: "evenodd" },
      React.createElement("path", { d: "M0 0h39v39H0z" }),
      React.createElement("circle", {
        cx: "19.5",
        cy: "19.5",
        r: "17.5",
        stroke: "var(--play-stroke)",
        strokeWidth: "2"
      }),
      React.createElement("path", {
        fill: "#b9d4f0",
        fillRule: "nonzero",
        d: "M25 19.5a.403.403 0 00-.195-.35l-8.217-5.078a.355.355 0 00-.214-.072c-.206 0-.374.18-.374.4 0 .016.003.03.004.046L16 24.645c.026.2.182.355.374.355.068 0 .132-.02.187-.055l.003.006 8.251-5.1-.003-.005A.404.404 0 0025 19.5z"
      })
    )
  );
};
var ShareIcon = function (props) {
  var getTextAndSideClass = function () {
    if (props.button_text || props.button_text === undefined) {
      // uses "SHARE" as text when not defined
      // default to icon first
      if (props.icon_first === undefined || props.icon_first === true) {
        return "has_text left";
      } else {
        return "has_text right";
      }
    } else {
      return "no_text";
    }
  };

  return React.createElement(
    "svg",
    { className: "share_icon " + getTextAndSideClass(), xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 16 16" },
    React.createElement("rect", { fill: "none", width: "16", height: "16" }),
    React.createElement("path", { fill: "currentColor", d: "M.89,3.17A.89.89,0,0,0,0,4.06H0V14.24a.89.89,0,0,0,.89.89H12.76a.89.89,0,0,0,.89-.89h0V9.55a.2.2,0,0,0-.21-.2.17.17,0,0,0-.12.05h0l-.56.52,0,0a.91.91,0,0,0-.29.63h0v2.95a.4.4,0,0,1-.37.38H1.58a.4.4,0,0,1-.37-.38h0V4.76a.41.41,0,0,1,.41-.38H4.06A1.56,1.56,0,0,0,5,4.08L5.11,4h0c.2-.15.39-.3.59-.43a.2.2,0,0,0,.09-.17.2.2,0,0,0-.2-.2H.89ZM11.1.5a.41.41,0,0,0-.41.4h0V2.22h0v0a.9.9,0,0,1-.81.87,3.86,3.86,0,0,0-.49.06A7.55,7.55,0,0,0,6.26,4.38,9.83,9.83,0,0,0,3,8.41.39.39,0,0,0,3.34,9a.39.39,0,0,0,.23-.07h0l.09-.08h0l.22-.2C5.46,7.33,7.42,7,9.78,7H9.9a.89.89,0,0,1,.79.87,0,0,0,0,1,0,.06h0V9.52a.42.42,0,0,0,.41.41.39.39,0,0,0,.27-.11h0l1-1,1.22-1.13,2-1.83.16-.14A.9.9,0,0,0,16,5.15a.93.93,0,0,0-.28-.66h0l-.05,0h0L11.37.6h0A.39.39,0,0,0,11.1.5Z" })
  );
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TabsGrid = (function (_React$Component) {
  _inherits(TabsGrid, _React$Component);

  function TabsGrid(props) {
    _classCallCheck(this, TabsGrid);

    _get(Object.getPrototypeOf(TabsGrid.prototype), 'constructor', this).call(this, props);
    this.state = {
      active_tab: this.props.tabs[0]
    };
    TabsGrid.propTypes = {
      tabs: PropTypes.arrayOf(PropTypes.object),
      title: PropTypes.string
    };
  }

  _createClass(TabsGrid, [{
    key: 'setActiveTab',
    value: function setActiveTab(tab) {
      this.setState({ active_tab: tab });
    }
  }, {
    key: 'removeContainer',
    value: function removeContainer(html) {
      // remove container html tags
      return html.replace(/^<[^<]+>/g, '').replace(/<[^<]+>$/g, '');
    }
  }, {
    key: 'render',
    value: function render() {
      var tabs = this.props.tabs;
      var fields = this.props.options ? this.props.options.fields : {};
      var that = this;

      return React.createElement(
        'section',
        { className: 'tabs_grid' },
        React.createElement(
          'header',
          null,
          React.createElement(
            'h2',
            null,
            this.props.title
          ),
          React.createElement(
            'nav',
            null,
            tabs.length > 1 ? tabs.map(function (tab, i) {
              var active = that.state.active_tab == tab;
              return React.createElement(
                'div',
                { className: 'tab_item_container' },
                React.createElement(
                  'div',
                  { key: i, className: "tab_nav_item" + (active ? " current" : ""), onClick: function () {
                      return that.setActiveTab(tab);
                    } },
                  tab.title
                )
              );
            }) : null
          )
        ),
        React.createElement(
          'div',
          { className: 'tab' },
          React.createElement(
            'div',
            { className: 'tab_inner grid_layout' },
            this.state.active_tab.items ? this.state.active_tab.items.map(function (item) {
              return React.createElement(
                'a',
                { className: 'tabs_grid_item', key: item.id, href: fields && fields.url ? item[fields.url] : item.link },
                React.createElement(
                  'div',
                  { className: 'tabs_grid_img' },
                  React.createElement('img', { src: fields && fields.image_src ? item[fields.image_src] : item.image_src })
                ),
                React.createElement(
                  'div',
                  { className: 'tabs_grid_desc' },
                  React.createElement(
                    'h3',
                    null,
                    fields && fields.title ? item[fields.title] : item.title
                  ),
                  React.createElement('div', { dangerouslySetInnerHTML: { __html: that.removeContainer(fields && fields.description ? item[fields.description] : item.body) } })
                )
              );
            }) : null
          )
        )
      );
    }
  }]);

  return TabsGrid;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TertiaryDesktopNav = (function (_React$Component) {
	_inherits(TertiaryDesktopNav, _React$Component);

	function TertiaryDesktopNav(props) {
		_classCallCheck(this, TertiaryDesktopNav);

		_get(Object.getPrototypeOf(TertiaryDesktopNav.prototype), "constructor", this).call(this, props);
		this.state = {
			current_indicator_left: ""
		};
	}

	_createClass(TertiaryDesktopNav, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			if (this.props.indicator) {
				var $curr = $('.tertiary_nav li.current').eq(0);
				var pos = $curr.offset();
				var w = $curr.width() / 2;
				this.setState({ current_indicator_left: pos.left + w + "px" });
			}
		}
	}, {
		key: "getListItem",
		value: function getListItem(v, i) {
			var current = v.id.toString() == this.props.current_page.id.toString() ? "current" : "";
			return React.createElement(
				"li",
				{ key: "tert_" + v.id, className: current },
				this.getLink(v)
			);
		}
	}, {
		key: "getLink",
		value: function getLink(v) {
			if (this.props.is_preview && v.id.toString() == this.props.preview_id.toString()) {
				return React.createElement(
					"a",
					{ href: v.url },
					v.subnav_title
				);
			} else {
				return React.createElement(
					"a",
					{ href: v.url },
					v.subnav_title
				);
			}
		}
	}, {
		key: "render",
		value: function render() {
			var _this = this;

			// console.log(this.props)
			return React.createElement(
				"nav",
				{ className: "tertiary_nav tertiary_nav_desktop" },
				React.createElement(
					"ul",
					null,
					this.props.items.map(function (v, i) {
						return _this.getListItem(v, i);
					})
				),
				this.props.indicator ? React.createElement("div", { className: "current_indicator", style: { left: this.state.current_indicator_left } }) : null
			);
		}
	}]);

	return TertiaryDesktopNav;
})(React.Component);
var ViewToggle = function () {
  return React.createElement(
    "div",
    { className: "view_selectors" },
    React.createElement(
      "a",
      { href: "#", className: "nav_item ir list_icon", title: "list view", onClick: function (e) {
          e.preventDefault();$('body').trigger('show_list_view');
        } },
      "list view"
    ),
    " ",
    React.createElement(
      "a",
      { href: "#", className: "nav_item ir grid_icon", title: "grid view", onClick: function (e) {
          e.preventDefault();$('body').trigger('show_grid_view');
        } },
      "grid view"
    )
  );
};
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Vid = (function (_React$Component) {
  _inherits(Vid, _React$Component);

  function Vid(props) {
    _classCallCheck(this, Vid);

    _get(Object.getPrototypeOf(Vid.prototype), "constructor", this).call(this, props);
    this.video = null;
    this.state = {
      loading: false
    };

    this.onDataLoaded = this.onDataLoaded.bind(this);
  }

  _createClass(Vid, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.initListeners();
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      var _this = this;

      this.video.removeEventListener("loadeddata", this.onDataLoaded, false);
      this.video.childNodes.forEach(function (child) {
        _this.video.removeChild(child);
      });
    }
  }, {
    key: "initListeners",
    value: function initListeners() {
      this.video.addEventListener("loadeddata", this.onDataLoaded, false);
    }
  }, {
    key: "onDataLoaded",
    value: function onDataLoaded() {
      this.setState({ loading: false });
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(_ref) {
      var sources = _ref.sources;

      var that = this;

      this.pause();

      this.setState({ loading: true }, function () {
        that.load();
      });
    }
  }, {
    key: "load",
    value: function load() {
      this.video.load();
    }
  }, {
    key: "play",
    value: function play() {
      this.video.play();
    }
  }, {
    key: "pause",
    value: function pause() {
      this.video.pause();
    }
  }, {
    key: "getStyle",
    value: function getStyle() {
      if (this.state.loading) {
        var _video$getBoundingClientRect = this.video.getBoundingClientRect();

        var width = _video$getBoundingClientRect.width;
        var height = _video$getBoundingClientRect.height;

        return { width: width + "px", height: height + "px" };
      } else {
        return { width: "100%", height: "100%" };
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      return React.createElement(
        "video",
        { ref: function (video) {
            _this2.video = video;
          }, autoPlay: false, loop: true, controls: true, muted: true, id: this.props.id, poster: this.props.poster, style: this.getStyle() },
        this.props.sources.map(function (source, index) {
          return React.createElement("source", { key: _this2.props.id + "_" + index, src: source.file_src, type: source.file_content_type });
        })
      );
    }
  }]);

  return Vid;
})(React.Component);
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * Check if an element is in the visible viewport
 * @param {jQuery|HTMLElement} el
 * @return boolean
 */

var IsInViewport = function (el) {
	if (typeof jQuery === "function" && el instanceof jQuery) el = el[0];
	var rect = el.getBoundingClientRect();
	return rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && rect.right <= (window.innerWidth || document.documentElement.clientWidth);
};

var Video = (function (_React$Component) {
	_inherits(Video, _React$Component);

	function Video(props) {
		_classCallCheck(this, Video);

		_get(Object.getPrototypeOf(Video.prototype), 'constructor', this).call(this, props);
		this.state = {
			user_paused: false,
			controls: this.props.controls == 'minimal' || this.props.controls == 'hide' ? false : true
		};
	}

	_createClass(Video, [{
		key: 'loadJwPlayer',
		value: function loadJwPlayer() {
			jwplayer.key = "aUHw/vpMvlcbkzWba1bSGOhfZ5nefVNAZYIC037cIbg="; // version 8
			var hash = undefined;
			var stereo = this.props.vrview_stereo && this.props.vrview_stereo == 'true' ? 'stereoscopic' : 'monoscopic';
			hash = {
				primary: 'html5',
				hlshtml: true,
				width: '100%',
				aspectratio: '16:9',
				repeat: this.props.autoloop,
				playlist: [{
					title: this.props.title,
					image: this.props.poster,
					stereomode: stereo,
					sources: this.props.files
				}]
			};

			var player = jwplayer('' + this.props.video_div).setup(hash);

			player.on('ready', function () {
				var vrPlugin = player.getPlugin('vr');
				if (vrPlugin) {
					vrPlugin.on('error', function (error) {
						console.log("vr plugin error", error);
					});
				}
			});
		}
	}, {
		key: 'showControls',
		value: function showControls() {
			var _this = this;

			if (this.props.controls != 'hide') {
				if (!this.state.controls) {
					this.setState({ controls: true }, function () {
						$('#' + _this.props.video_div + ' .play_overlay').fadeOut().hide();
					});
				}
			}
		}
	}, {
		key: 'checkAndPlayVideoInView',
		value: function checkAndPlayVideoInView(video_div) {
			var in_view = IsInViewport($('#' + video_div));
			var vid = $('#' + video_div + ' video')[0];
			if (in_view && vid && !this.state.user_paused) {
				// console.log(video_div + ' in view and idle.')
				vid.play();
			} else if (!in_view) {
				// console.log(video_div + ' not in view.')
				vid.pause();
			} else {
				// console.log('unhandled state: ', jwplayer(video_div).getState(), $('#' + video_div + ':in-viewport').length)
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var vid = $('#' + this.props.video_div + ' video')[0];
			var that = this;

			if (this.props.vrview && (this.props.vrview === 'true' || this.props.vrview === true)) {
				this.loadJwPlayer();
			} else if (this.props.autostart && this.props.autostart != "false") {
				var resizeTimer;
				$(window).on('scroll', function (e) {
					clearTimeout(resizeTimer);
					resizeTimer = setTimeout(function () {
						that.checkAndPlayVideoInView('' + that.props.video_div);
					}, 50);
				});

				vid.addEventListener('pause', function (event) {
					that.setState({ user_paused: true });
				});
			}

			if (this.props.controls == 'minimal') {
				var play_overlay = $('#' + this.props.video_div + ' .play_overlay')[0];

				$(play_overlay).one('click touchend', function () {
					vid.play();
				});

				// separate events due to autoplay
				$(vid).one('play', function () {
					that.showControls();
				});
			}
		}
	}, {
		key: 'getSourceForVttFile',
		value: function getSourceForVttFile(file, idx) {
			if (file.indexOf('vtt') > 0) {
				return React.createElement('track', { label: 'English', kind: 'subtitles', srcLang: 'en', key: this.props.video_id + '__' + idx, src: file, type: 'text/vtt' });
			} else if (file.indexOf('srt') > 0) {
				return React.createElement('track', { label: 'English', kind: 'subtitles', srcLang: 'en', key: this.props.video_id + '__' + idx, src: file, type: 'text/srt' });
			} else if (file.indexOf('scc') > 0) {
				return React.createElement('track', { label: 'English', kind: 'subtitles', srcLang: 'en', key: this.props.video_id + '__' + idx, src: file, type: 'text/scc' });
			} else {
				return null; //just for testing
			}
		}
	}, {
		key: 'getSourceForFile',
		value: function getSourceForFile(file, idx) {
			if (file.indexOf('mp4') > 0 || file.indexOf('m4v') > 0) {
				return React.createElement('source', { key: this.props.video_id + '_' + idx, src: file, type: 'video/mp4' });
			} else if (file.indexOf('ogv') > 0 || file.indexOf('ogg') > 0) {
				return React.createElement('source', { key: this.props.video_id + '_' + idx, src: file, type: 'video/ogg' });
			} else if (file.indexOf('webm') > 0) {
				return React.createElement('source', { key: this.props.video_id + '_' + idx, src: file, type: 'video/webm' });
			} else {
				return null; //just for testing
			}
		}
	}, {
		key: 'getPlayOverlay',
		value: function getPlayOverlay() {
			return React.createElement(
				'div',
				{ className: 'play_overlay' },
				React.createElement(
					'div',
					{ className: 'svg_icon_container' },
					React.createElement(
						'svg',
						{ id: 'play_circle', viewBox: '0 0 39 39' },
						React.createElement(
							'g',
							{ fill: 'none', fillRule: 'evenodd' },
							React.createElement('circle', { cx: '19.5', cy: '19.5', r: '17.5', stroke: '#ededed', strokeWidth: '2' }),
							React.createElement('path', { className: 'play_triangle', d: 'm25 19.5000893c0-.1512083-.0790527-.2811724-.1946298-.3493679l-8.2178118-5.0785984c-.0605404-.0451662-.1339226-.072123-.2133089-.072123-.2066378 0-.3742495.1792362-.3742495.4004252 0 .0155314.0026684.0301703.0043362.0451661l-.0043362 10.1991496c.025517.1997663.1821214.3552591.3742495.3552591.0682121 0 .1312542-.0208871.1862909-.0549848l.0033355.0062483 8.251501-5.0994856-.0033355-.0062483c.1119079-.0692666.1879586-.1972669.1879586-.3454403z', strokeWidth: '0', fill: '#ededed', fillRule: 'nonzero' })
						)
					)
				)
			);
		}
	}, {
		key: 'render',
		value: function render() {
			var caption;
			var that = this;
			if (this.props.caption != "" && this.props.display_caption == true) {
				caption = React.createElement(
					'figcaption',
					null,
					this.props.caption
				);
			} else {
				caption = "";
			}
			var video_container;
			if (this.props.vrview && (this.props.vrview === 'true' || this.props.vrview === true) && this.props.files.length > 0) {
				video_container = React.createElement('div', { id: this.props.video_div, className: 'video_player' });
			} else if (this.props.vtt_files) {
				video_container = React.createElement(
					'div',
					{ id: this.props.video_div, className: 'video_container' },
					this.props.controls == 'minimal' ? this.getPlayOverlay() : null,
					React.createElement(
						'video',
						{ controls: this.state.controls, preload: 'auto', muted: this.props.autostart && this.props.autostart != "false" || this.props.autoplay, poster: this.props.poster, loop: this.props.autoloop, autoPlay: this.props.autoplay },
						this.props.files.map(function (v, i) {
							if (v.file != "undefined") {
								return that.getSourceForFile(v.file, i);
							} else {
								return null;
							}
						}),
						this.props.vtt_files.map(function (v, i) {
							if (v.file != "undefined") {
								return that.getSourceForVttFile(v.file, i);
							} else {
								return null;
							}
						}),
						'Your browser does not support the video tag.'
					)
				);
			} else {
				video_container = React.createElement(
					'div',
					{ id: this.props.video_div, className: 'video_container' },
					this.props.controls == 'minimal' ? this.getPlayOverlay() : null,
					React.createElement(
						'video',
						{ controls: this.state.controls, preload: 'auto', muted: this.props.autostart && this.props.autostart != "false" || this.props.autoplay, poster: this.props.poster, loop: this.props.autoloop, autoPlay: this.props.autoplay },
						this.props.files.map(function (v, i) {
							if (v.file != "undefined") {
								return that.getSourceForFile(v.file, i);
							} else {
								return null;
							}
						}),
						'Your browser does not support the video tag.'
					)
				);
			}
			return React.createElement(
				'figure',
				null,
				video_container,
				caption
			);
		}
	}]);

	return Video;
})(React.Component);


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ReactGA=e()}}(function(){return function e(t,n,i){function a(r,s){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};t[r][0].call(c.exports,function(e){var n=t[r][1][e];return a(n?n:e)},c,c.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e){for(var t,o,r=n(e),s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var l in t)i.call(t,l)&&(r[l]=t[l]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(t);for(var u=0;u<o.length;u++)a.call(t,o[u])&&(r[o[u]]=t[o[u]])}}return r}},{}],2:[function(e,t){(function(n){var i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,a=e("object-assign"),o="_blank",r=createReactClass({displayName:"OutboundLink",propTypes:{eventLabel:PropTypes.string.isRequired},statics:{trackLink:function(){console.warn("ga tracking not enabled")}},handleClick:function(e){e.preventDefault();var t=this.props,n={label:t.eventLabel};r.trackLink(n,function(){t.target===o?window.open(t.to,o):window.location.href=t.to}),t.onClick&&t.onClick(e)},render:function(){var e=a({},this.props,{href:this.props.to,onClick:this.handleClick});return delete e.eventLabel,i.createElement("a",e)}});t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":1}],3:[function(e,t){var n=e("./utils/format"),i=e("./utils/removeLeadingSlash"),a=e("./utils/trim"),o=e("./utils/console/warn"),r=e("./utils/console/log"),s=!1,l=!0,u=function(e){return n(e,l)},c={initialize:function(e,t){return e?(t&&(t.debug&&t.debug===!0&&(s=!0),t.titleCase===!1&&(l=!1)),function(e,t,n,i,a,o,r){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,o=t.createElement(n),r=t.getElementsByTagName(n)[0],o.async=1,o.src=i,r.parentNode.insertBefore(o,r)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),void(t&&t.gaOptions?ga("create",e,t.gaOptions):ga("create",e,"auto"))):void o("gaTrackingID is required in initialize()")},ga:function(){return arguments.length>0?(ga.apply(this,arguments),void(s&&(r("called ga('arguments');"),r("with arguments: "+JSON.stringify([].slice.apply(arguments)))))):ga},set:function(e){if("function"==typeof ga){if(!e)return void o("`fieldsObject` is required in .set()");if("object"!=typeof e)return void o("Expected `fieldsObject` arg to be an Object");0===Object.keys(e).length&&o("empty `fieldsObject` given to .set()"),ga("set",e),s&&(r("called ga('set', fieldsObject);"),r("with fieldsObject: "+JSON.stringify(e)))}},send:function(e){"function"==typeof ga&&(ga("send",e),s&&(r("called ga('send', fieldObject);"),r("with fieldObject: "+JSON.stringify(e))))},pageview:function(e){return e?(e=a(e),""===e?void o("path cannot be an empty string in .pageview()"):void("function"==typeof ga&&(ga("send","pageview",e),s&&(r("called ga('send', 'pageview', path);"),r("with path: "+e))))):void o("path is required in .pageview()")},modalview:function(e){if(!e)return void o("modalName is required in .modalview(modalName)");if(e=a(e),e=i(e),""===e)return void o("modalName cannot be an empty string or a single / in .modalview()");if("function"==typeof ga){e=a(e);var t="/modal/"+e;ga("send","pageview",t),s&&(r("called ga('send', 'pageview', path);"),r("with path: "+t))}},timing:function(e){if("function"==typeof ga){if(!(e&&e.category&&e.variable&&e.value&&"number"==typeof e.value))return void o("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number");var t={hitType:"timing",timingCategory:u(e.category),timingVar:u(e.variable),timingValue:e.value};e.label&&(t.timingLabel=u(e.label)),this.send(t)}},event:function(e){if("function"==typeof ga){if(!e||!e.category||!e.action)return void o("args.category AND args.action are required in event()");var t={hitType:"event",eventCategory:u(e.category),eventAction:u(e.action)};e.label&&(t.eventLabel=u(e.label)),e.value&&("number"!=typeof e.value?o("Expected `args.value` arg to be a Number."):t.eventValue=e.value),e.nonInteraction&&("boolean"!=typeof e.nonInteraction?o("`args.nonInteraction` must be a boolean."):t.nonInteraction=e.nonInteraction),e.transport&&("string"!=typeof e.transport?o("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(e.transport)&&o("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),t.transport=e.transport)),this.send(t)}},exception:function(e){if("function"==typeof ga){var t={hitType:"exception"};e.description&&(t.exDescription=u(e.description)),"undefined"!=typeof e.fatal&&("boolean"!=typeof e.fatal?o("`args.fatal` must be a boolean."):t.exFatal=e.fatal),this.send(t)}},plugin:{require:function(e,t){return"function"==typeof ga?e?(e=a(e),""===e?void o("`name` cannot be an empty string in .require()"):t?"object"!=typeof t?void o("Expected `options` arg to be an Object"):(0===Object.keys(t).length&&o("Empty `options` given to .require()"),ga("require",e,t),void(s&&r("called ga('require', '"+e+"', "+JSON.stringify(t)+");"))):(ga("require",e),void(s&&r("called ga('require', '"+e+"');")))):void o("`name` is required in .require()"):void 0},execute:function(){var e,t,n=Array.prototype.slice.call(arguments),i=n[0],a=n[1];if(3===n.length?e=n[2]:(t=n[2],e=n[3]),"function"==typeof ga)if("string"!=typeof i)o("Expected `pluginName` arg to be a String.");else if("string"!=typeof a)o("Expected `action` arg to be a String.");else{var l=i+":"+a;e=e||null,t&&e?(ga(l,t,e),s&&(r("called ga('"+l+"');"),r('actionType: "'+t+'" with payload: '+JSON.stringify(e)))):e?(ga(l,e),s&&(r("called ga('"+l+"');"),r("with payload: "+JSON.stringify(e)))):(ga(l),s&&r("called ga('"+l+"');"))}}},outboundLink:function(e,t){if("function"!=typeof t)return void o("hitCallback function is required");if("function"==typeof ga){if(!e||!e.label)return void o("args.label is required in outboundLink()");var n={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:u(e.label)},i=!1,a=function(){i=!0,t()},r=setTimeout(a,250),s=function(){clearTimeout(r),i||t()};n.hitCallback=s,this.send(n)}else setTimeout(t,0)}},f=e("./components/OutboundLink");f.origTrackLink=f.trackLink,f.trackLink=c.outboundLink.bind(c),c.OutboundLink=f,t.exports=c},{"./components/OutboundLink":2,"./utils/console/log":4,"./utils/console/warn":5,"./utils/format":6,"./utils/removeLeadingSlash":8,"./utils/trim":10}],4:[function(e,t){function n(e){console.info("[react-ga]",e)}t.exports=n},{}],5:[function(e,t){function n(e){console.warn("[react-ga]",e)}t.exports=n},{}],6:[function(e,t){function n(e,t){return i(e)?(o("This arg looks like an email address, redacting."),r):t?a(e):e}var i=e("./mightBeEmail"),a=e("./toTitleCase"),o=e("./console/warn"),r="REDACTED (Potential Email Address)";t.exports=n},{"./console/warn":5,"./mightBeEmail":7,"./toTitleCase":9}],7:[function(e,t){function n(e){return/[^@]+@[^@]+/.test(e)}t.exports=n},{}],8:[function(e,t){function n(e){return"/"===e.substring(0,1)&&(e=e.substring(1)),e}t.exports=n},{}],9:[function(e,t){function n(e){var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return e=i(e),e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,i){return n>0&&n+e.length!==i.length&&e.search(t)>-1&&":"!==i.charAt(n-2)&&("-"!==i.charAt(n+e.length)||"-"===i.charAt(n-1))&&i.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})}var i=e("./trim");t.exports=n},{"./trim":10}],10:[function(e,t){function n(e){return e.replace(/^\s+|\s+$/g,"")}t.exports=n},{}]},{},[3])(3)});
var FiveWays = createReactClass({
	data: [{ "next_article": "NEXT: RADIAL VELOCITY" }, {
		"id": 1,
		"main_img_src": "/5_ways_content/img/detail_image_velocity.jpg",
		"main_vid": ["/5_ways_content/vid/radial_velocity"],
		"subtitle": "Watching for Wobble",
		"title": "Radial Velocity",
		"html_class": "radial_velocity",
		"planet_count": "Radial Velocity",
		"short_description": "Orbiting planets cause stars to wobble in space, changing the color of the light astronomers observe",
		"description": "<p><h2>Size rules</h2></p><p>One way to make sense of the gravitational interaction between a planet and a star is to imagine a game of tug-of-war. On one side, you have the star - a massive object with a really powerful gravitational field.</p><p>On the other side, you have the planet, much smaller, with a whole lot less gravity.</p><p>We know who wins this game - the star. That's why planets orbit stars and not the other way around.</p><p>But even though the planet is small, it still has some gravitational force. It still has an effect on its host star, even if that effect is much less pronounced than the one the star has on the planet.</p><p><strong>- but two can play at the gravity game</strong></p><div class='img no_border'><img src='/5_ways_content/img/rv1.gif'></div><p>Take a look at the above animation. At first glance, things look normal. There's a big star and a small planet, and the small planet orbits the big star. You've probably seen this many times.</p><p>But check out the star. See how it's moving a little bit, too? The effect is exaggerated for this animation, but that's what actually happens in space. The planet's gravity causes the star to 'wobble'around a little bit.</p><p>As you might imagine, the bigger the planet, the bigger the effect it has on its star. Small planets, like Earth, make their stars only wobble a tiny bit. Bigger planets, like Jupiter, have a much stronger effect.</p><p><strong>A star's 'wobble' can tell us if a star has planets, how many there are, and how big they are.</strong></p><p><h2>Digging into the Doppler data</h2></p><p>Wobbling stars are great for finding exoplanets, but how do we see the wobbling stars? </p><p>The method used is one called 'Doppler shift'. It's named after the physicist who figured it out about 150 years ago.</p><p>Energy - sound, radio waves, heat, and light - moves in waves. Like the waves you see in the animation above.</p><p>Those waves can be stretched and squeezed, based on the movement of the object that's producing them.</p><p>You may not know it, but you've probably experienced the Doppler effect before. Have you ever noticed how the sound of an ambulance passing you on the street gets higher in pitch as it gets close to you, and then lower in pitch as it speeds away?</p><p>The reason is because when an object that emits energy (like an ambulance speaker or a massive, burning star) moves closer to you, the waves bunch up and squish together. And when the object is moving away, the waves stretch out.</p><p>Those changes in the wavelength change how we perceive the energy that we're seeing or listening to. As sound waves scrunch together, they sound higher in pitch. And when visible light waves scrunch together, they look more blue in color.</p><p>When sound waves stretch out, they sound lower in pitch. And when visible light waves stretch out, they make an object look more reddish.</p><div class='img right no_border''><img src='/5_ways_content/img/rv2.gif'></div><p>This change in color is called 'redshift', and scientists can use it to see if an object in the sky is moving towards us or farther away.</p><p><h2>Putting it all together</h2></p><p>You can see this method working in the animation above. The planet causes the star to wobble around in its orbit, and as the planet moves to and fro, the light waves compress together and then stretch out, changing the color of the light we see.</p><p><h2>Super successful</h2></p><p>The radial velocity method was one of the first successful ways to find exoplanets, and continues to be one of the most productive methods. Often, this method will be used to confirm planets found with other methods - an extra step that can prove a planet exists.</p><p>Lots of astronomers and telescopes around the world use this method to discover exoplanets, but two notable observatories where this work happens are the Keck Telescopes in Hawaii and the La Silla Observatory in Chile.</p>",
		"next_article": "NEXT: TRANSIT METHOD"
	}, {
		"id": 2,
		"main_img_src": "/5_ways_content/img/detail_image_transit.jpg",
		"main_vid": ["/5_ways_content/vid/transit_method_single_planet", "/5_ways_content/vid/transit_method_double_planet", "/5_ways_content/vid/transit_method_multiple_planets"],
		"navText": ["single planet", "different planet sizes", "multiple planets"],
		"subtitle": "Searching for Shadows",
		"title": "Transit",
		"html_class": "transit",
		"planet_count": "Transit",
		"short_description": "When a planet passes directly between its star and an observer, it dims the stars light by  a measureable amount",
		"description": "<p>A solar eclipse is one of the coolest astronomical events you'll ever experience. It happens when the moon passes directly in front of the sun, blocking its light.</p><div class='img right'><img src='/5_ways_content/img/eclipse.jpg'></div><p>This is similar to how the transit method finds exoplanets. When a planet passes directly between an observer and the star it orbits, it blocks some of that star's light. For a brief period of time, that star actually gets dimmer. It's a tiny change, but it's enough to clue astronomers into the presence of an exoplanet around a distant star.</p><p>The graph you see being drawn on the left side of the animation is what astronomers call a 'light curve'. It's a chart of the level of light being observed from the star. When a planet passes in front of the star and blocks some of its light, the light curve indicates this drop in brightness.</p><p><h2>Sensing size</h2></p><p>The size and length of a transit can tell us a lot about the planet that's causing the transit. Bigger planets block more light, so they create deeper light curves. You can see that in the animation above, when you click 'different planet sizes and distances'.</p><p>Also, the farther away a planet is, the longer it takes to orbit and pass in front of its star. So the longer a transit event lasts, the farther away that planet is from its star.</p><p><h2>Mixed signals</h2></p><p>When you click on 'multiple planets' you'll see that light curves get complicated when more planets are transiting a star. The combined light curves can give us the same information as a single one, it just takes more work from astronomers to pick out each planet in the data.</p><p><h2>Atmospheric ambitions</h2></p><p>The transit method isn't just useful for finding planets, it can also give us information about the composition of a planet's atmosphere or its temperature.</p><p>When an exoplanet passes in front of its star, some of the starlight passes through its atmosphere. Scientists can analyze the colors of this light in order to get valuable clues about its composition. Using this method, they've found everything from methane to water vapor on other planets.</p><p><h2>Information goldmine</h2></b><p>The transit method has been spectacularly successful at finding new exoplanets. NASA's Kepler mission, which hunted for planets using the transit method from 2009 - 2013, found thousands of possible exoplanet discoveries and gave astronomers valuable information about the distribution of exoplanets in the galaxy.</p>",
		"previous_article": "PREVIOUS: RADIAL VELOCITY",
		"next_article": "NEXT: DIRECT IMAGING"
	}, {
		"id": 3,
		"main_img_src": "/5_ways_content/img/detail_image_imaging.jpg",
		"main_vid": ["/5_ways_content/vid/direct_imaging"],
		"subtitle": "Taking Pictures",
		"title": "Direct Imaging",
		"html_class": "imaging",
		"planet_count": "Imaging",
		"short_description": "Astronomers can take pictures of exoplanets by removing the overwhelming glare of the stars they orbit",
		"description": "<p>Exoplanets are far away, and they are millions of times dimmer than the stars they orbit. So, unsurprisingly, taking pictures of them the same way you'd take pictures of, say Jupiter or Venus, is exceedingly hard.</p><p>New techniques and rapidly-advancing technology are making it happen.</p><p>The major problem astronomers face in trying to directly image exoplanets is that the stars they orbit are millions of times brighter than their planets. Any light reflected off of the planet or heat radiation from the planet itself is drowned out by the massive amounts of radiation coming from its host star. It's like trying to find a flea in a lightbulb, or a firefly flitting around a spotlight.</p><p><h2>Shine blockers</h2></p><p>On a bright day, you might use a pair of sunglasses, or a car's sun visor, or maybe just your hand to block the glare of the sun so that you can see other things.</p><p>This is the same principle behind the instruments designed to directly image exoplanets. They use various techniques to block out the light of stars that might have planets orbiting them. Once the glare of the star is reduced, they can get a better look at objects around the star that might be exoplanets.</p><p><h2>Building a light-blocker</h2></p><p>There are two main methods astronomers use to block the light of a star.</p><div class='img right' style='max-width: 462px'><img src='/5_ways_content/img/coronagraph.jpg'></div><p>One, called coronography, uses a device inside a telescope to block light from a star before it reaches the telescope's detector. Coronagraphs are built as internal add-ons to telescopes, and are now being used to directly image exoplanets from ground-based observatories.</p><div class='img right no_border'><img src='/5_ways_content/img/starshade.gif'></div><p>Another method is to use a 'starshade', a device that's positioned to block light from a star before it even enters a telescope. For a space-based telescope looking for exoplanets, a starshade would be a separate spacecraft, designed to position itself at just the right distance and angle to block starlight from the star astronomers were observing.</p><p><h2>Way of the future</h2></p><p>Direct imaging is still in its beginning stages as an exoplanet-finding method, but there are high hopes that it will eventually be a key tool for finding and characterizing exoplanets. Future direct-imaging instruments might be able to take photos of exoplanets that would allow us to identify atmospheric patterns, oceans, and landmasses.</p>",
		"previous_article": "PREVIOUS: TRANSIT METHOD",
		"next_article": "NEXT: GRAVITATIONAL MICROLENSING"
	}, {
		"id": 4,
		"main_img_src": "/5_ways_content/img/detail_image_microlensing.jpg",
		"main_vid": ["/5_ways_content/vid/gravitational_microlensing"],
		"subtitle": "Light in a Gravity Lens",
		"title": "Gravitational Microlensing",
		"html_class": "microlensing",
		"planet_count": "Microlensing",
		"short_description": "Light from a distant star is bent and focused by gravity as a planet passes between the star and Earth",
		"description": "<p>Among his many insights, Albert Einstein rethought the concept of gravity, defining it less as a mysterious attraction between objects and more as a geometric property of spacetime.</p><p>In other words, big objects warp the fabric of space. This effect causes light to distort and change direction when affected by the gravity of a massive object, like a star or a planet.</p><p><h2>Bending for brightness</h2></p><p>This change of direction can cause some pretty interesting things to happen. Sometimes, gravity can bend and focus light like a lens in a magnifying glass or pair of glasses.</p><p>Gravitational microlensing happens when a star or planet's gravity focuses the light of another, more distant star, in a way that makes it temporarily seem brighter.</p><p>In the animation above, you can see the rays of light from the more distant star bend around the exoplanet and then the exoplanet's star. In the same way that a magnifying glass can focus the sun's light onto a tiny, very bright spot on a piece of paper, the gravity of the planet and the star focus the light rays of the distant star onto the observer.</p><p>The graph on the left indicates the changing brightness of the distant star as its light is lensed and focused onto the observer. The star starts to get brighter, then there's a brief blip of brightness from the lensing action of the planet.</p><p>The light levels fall after the planet is lensed but they continue to increase because of the continued lensing action of the star. Once the lensing star moves out of the optimum position, the brightness of the more distant star fades away.</p><p><h2>A fleeting flash of light</h2></p><div class='img right'><img src='/5_ways_content/img/lensing.gif'></div><p>To an astronomer, a lensing event looks like a distant star that gets gradually brighter over the space of a month or so, then fades away. If a planet happens to be lensed, it looks like a brief blip of light that happens during this brightening and dimming process.</p><p>Astronomers can't predict when or where these lensing events will happen. So they have to watch large parts of the sky over a long period of time. When they record a star getting brighter and then dimming in the pattern of lensing objects, they analyze the data to get information about the estimated size of the star.</p><p>Sometimes, free-floating planets in space, ones that don't orbit a star, will cause quick microlensing events that astronomers will record. These events give us an idea of how common these so-called 'rogue' planets are in the galaxy. The animation on the right shows what that kind of event looks like to a telescope.</p>",
		"previous_article": "PREVIOUS: DIRECT IMAGING",
		"next_article": "NEXT: ASTROMETRY"
	}, {
		"id": 5,
		"main_img_src": "/5_ways_content/img/detail_image_astrometry.jpg",
		"main_vid": ["/5_ways_content/vid/astrometry"],
		"subtitle": "Minuscule Movements",
		"title": "Astrometry",
		"html_class": "astrometry",
		"planet_count": "Astrometry",
		"short_description": "The orbit of a planet can cause a star to wobble around in space in relation to nearby stars in the sky",
		"description": "<p>First, go and read the Radial Velocity text for an explanation of how planets cause their stars to wobble around in space. We'll wait!</p><p>Okay, back? Good.</p><p>Doppler shifts aren't the only way astronomers can find stars that are wobbling due to the gravity of their planets. The wobble can also be visible as changes in the star's apparent position in the sky.</p><p>In other words, scientists can actually detect the star's position wiggling around in space.</p><p>Astrometry, as this method is called, is still amazingly hard to do. Stars wobble such a minute distance that it's very difficult to accurately detect the wobble from planets, especially small ones the size of Earth.</p><p>In order to track the movement of these stars, scientists take a series of images of a star and some of the other stars that are near it in the sky. In each picture, they compare the distances between these reference stars and the star they're checking for exoplanets.</p><p>If the target star has moved in relation to the other stars, astronomers can analyze that movement for signs of exoplanets.</p><p>Astrometry requires extremely precise optics, and is especially hard to do from the Earth's surface because our atmosphere distorts and bends light.</p>",
		"previous_article": "PREVIOUS: GRAVITATIONAL MICROLENSING"
	}],

	spinOpts: {
		lines: 5, // The number of lines to draw
		length: 0, // The length of each line
		width: 3, // The line thickness
		radius: 45, // The radius of the inner circle
		corners: 1, // Corner roundness (0..1)
		rotate: 53, // The rotation offset
		direction: 1, // 1: clockwise, -1: counterclockwise
		color: '#fff', // #rgb or #rrggbb or array of colors
		speed: .5, // Rounds per second
		trail: 30, // Afterglow percentage
		shadow: false, // Whether to render a shadow
		hwaccel: false, // Whether to use hardware acceleration
		className: 'spinner', // The CSS class to assign to the spinner
		zIndex: 2, // The z-index (defaults to 2000000000)
		top: 'auto', // Top position relative to parent in px
		left: 'auto' // Left position relative to parent in px
	},

	itemToSwipe: $('.chapter_details .chapter_details_body article'),

	getInitialState: function () {
		var current_page = 0;
		if (window.location.hash) {
			var dest = window.location.hash.match(/\/(\d)/);
			if (dest && dest.length == 2) {
				current_page = parseInt(dest[1]);
			}
		}

		return {
			is_mobile: false,
			loaded: false,
			current_page: current_page,
			planet_counts: {}
		};
	},

	componentWillMount: function () {
		$('body').addClass("ms_full_height");
		window.addEventListener('hashchange', this.hashChange, false);
		// For iOS, add iOS class to entire page to handle hover issues with special classes
		if (mb_utils.mobileAndTabletCheck()) {
			this.setState({ is_mobile: true });
		}
	},

	componentDidMount: function () {
		var that = this;
		this.initSpinner();
		$('.loader_title').show();

		var planet_counts = {};
		$.getJSON('/planet_methods', function (data) {
			$.each(data, function (i, d) {
				planet_counts[d["name"]] = d["count"];
			});
			that.$loader.fadeOut(function () {
				that.spinner.stop();
				that.setState({ planet_counts: planet_counts, loaded: true }, function () {
					$('html, body').animate({ scrollTop: 0 }, function () {
						$('.five_ways_module').fadeIn(function () {
							if (that.state.current_page != 0) {
								$('.chapter_details').fadeIn();
								$('html, body').scrollTop(0);
								that.initSwipe();
							}
						});
					});
				});
			});
		});
	},
	componentWillUpdate: function (nextProps, nextState) {
		if (nextState.current_page == 0) {
			$('#page').addClass('five_ways_intro');
		} else {
			$('#page').removeClass('five_ways_intro');
		}
	},
	componentDidUpdate: function (prevProps, prevState, snapshot) {
		if (prevState && prevState.current_page != this.state.current_page) {
			window.location.hash = this.state.current_page == 0 ? "" : "#/" + this.state.current_page;
		}
	},

	hashChange: function () {
		if (window.location.hash) {
			var dest = window.location.hash.match(/\/(\d)/);
			if (dest && dest.length == 2) {
				current_page = parseInt(dest[1]);
				if (current_page !== this.state.current_page) {
					this.setState({ current_page: current_page });
				}
			}
		} else {
			this.setState({ current_page: 0 });
		}
	},

	initSpinner: function () {
		/* init the spinner */
		var target = document.getElementById('spinner');
		this.$loader = $('.loader');
		this.spinner = new Spinner(this.spinOpts).spin(target);

		/* position the spinner */
		var top = ($(window).height() - this.$loader.outerHeight() - 40) / 2 + $(window).scrollTop() + "px";
		this.$loader.css('top', top);
	},

	initSwipe: function () {
		var that = this;
		$('.chapter_details').swipe({
			triggerOnTouchEnd: true,
			swipeStatus: that.swipeStatus,
			allowPageScroll: "vertical",

			/* This doesn't seem to be triggering 'cancel', so might not do anything. Solution is handled directly in swipeStatus -JM */
			threshold: 75,

			excludedElements: $.fn.swipe.defaults.excludedElements + ", .chapter_detail .description, .detail_video, .video-wrap"
		});

		// For iPhone, wrap video containers in a tags to allow tap on video (disables swipe on the video)
		if (this.state.is_mobile && $('figure').hasClass('detail_video')) {
			$('.detail_video').wrap('<a />');
		};
	},

	swipeStatus: function (event, phase, direction, distance, fingers) {

		//console.log('mb_swipe.swipeStatus.mb_swipe.itemToSwipe: ' + mb_swipe.itemToSwipe)
		// console.log("Event: " + event, "Phase: " + phase, "Direction: " + direction, "Distance: " + distance, "Fingers: " + fingers )
		var w = this.itemToSwipe.width();

		//If we are moving before swipe, and we are going L or R, then manually drag the images
		if (phase == "move" && (direction == "left" || direction == "right")) {
			var duration = 0;

			if (direction == "left" && this.state.current_page <= 4) {
				// console.log("movin' left!!")
				this.slideItems(distance, duration);
			} else if (direction == "right" && this.state.current_page > 1) {
				// console.log("movin' right!!!")
				this.slideItems(0 - distance, duration);
			}
		}

		// Else, cancel or swipe end and not reaching the threshold ...
		// ...means snap back to the beginning
		// The distance value is needed because 'cancel' doesn't seem to be firing
		// The use of distance here was added custom -JM
		else if (phase == "cancel" || phase == "end" && distance < 75) {
				this.slideItems(0, 300);
			}

			// Else end means the swipe was completed, so move to the next image
			else if (phase == "end") {
					if (direction == "right" && this.state.current_page > 1) this.previousItem();else if (direction == "left" && this.state.current_page <= 4) this.nextItem();
				}
	},

	animateArticle: function (left, new_page) {
		var dir = left ? '100%' : '-100%';
		var opp = left ? '-100%' : '100%';
		var that = this;
		$('.chapter_details').animate({ left: dir, opacity: '0' }, 100, "easeInQuint", function () {
			$('.chapter_details .chapter_details_body article').css("transform", "translateX(0px)");
			console.log("change to ", new_page);
			that.setState({ current_page: new_page }, function () {
				$('.chapter_details').css({ left: opp }).animate({ left: '0', opacity: '1' }, 300, "easeOutQuint");
			});
		});
	},

	previousItem: function () {
		console.log("click prev");
		var prev = this.state.current_page - 1;
		if (prev <= 0) {
			this.showChapter(0);
		} else {
			this.animateArticle(true, prev);
		}
	},

	nextItem: function () {
		console.log("click next");
		var next = this.state.current_page + 1;
		if (next >= this.data.length) {
			return;
		} else if (next == 1) {
			this.showChapter(1);
		} else {
			this.animateArticle(false, next);
		}
	},

	/**
  * Manually update the position of the itemToSwipe on drag
  */
	slideItems: function (distance, duration, itemNum) {
		$('.chapter_details .chapter_details_body article').css("transition-duration", (duration / 1000).toFixed(1) + "s");
		// this.itemToSwipe.css("-moz-transition-duration", (duration/1000).toFixed(1) + "s");
		// this.itemToSwipe.css("-webkit-transition-duration", (duration/1000).toFixed(1) + "s");
		// this.itemToSwipe.css("-ms-transition-duration", (duration/1000).toFixed(1) + "s");
		// this.itemToSwipe.css("-o-transition-duration", (duration/1000).toFixed(1) + "s");

		// inverse the number we set in the css
		var value = (distance < 0 ? "" : "-") + Math.abs(distance).toString();

		$('.chapter_details .chapter_details_body article').css("transform", "translateX(" + value + "px)");
		// this.itemToSwipe.css("-moz-transform", "translateX("+value +"px)");
		// this.itemToSwipe.css("-webkit-transform", "translate3d("+value +"px,0px,0px)");
		// this.itemToSwipe.css("-ms-transform", "translateX("+value +"px)");
		// this.itemToSwipe.css("-o-transform", "translateX("+value +"px)");
		// console.log('slideItems().currentChapter, currentDetail: ' + '#chapter_' + mb_detail.currentChapter + '_detail_' + mb_detail.currentDetail);

		// animation.activateDetailVideo(itemNum);
	},

	showDetails: function (e) {
		var chapter = $(e.currentTarget).data('show-chapter');
		this.showChapter(chapter);
	},
	showChapter: function (chapter) {
		console.log("FiveWays.showDetails(" + chapter + ")");

		this.setState({ current_page: parseInt(chapter) }, function () {
			$('.chapter_details').fadeIn();
			$('html, body').scrollTop(0);
			this.initSwipe();
			// history.pushState( {}, "", "#/" + detailNum );
		});
	},

	changeDetail: function (e) {
		// console.log('mb_detail.changeDetail.scrollTop, detailNum: ' + $(document).scrollTop() + "," + detailNum);
		var that = this;
		var detailNum = parseInt($(e.currentTarget).data('show-chapter'));
		if (detailNum > 0 && detailNum <= 5) {
			var scrollPos = $(document).scrollTop();
			if (scrollPos > 50) {
				$('html, body').animate({ scrollTop: 0 }, function () {
					that.showDetail(detailNum);
				});
			} else {
				that.showDetail(detailNum);
			}
		}
	},

	showDetail: function (detailNum) {
		this.setState({ current_page: detailNum });
		//this.jumpToItem(detailNum);
		//history.pushState({}, "", "#/" + detailNum);
	},

	renderIndex: function () {
		return React.createElement(
			"div",
			{ id: "intro" },
			React.createElement(
				"section",
				null,
				React.createElement(
					"header",
					null,
					React.createElement(
						"div",
						{ className: "main_title" },
						React.createElement(
							"h1",
							null,
							"5 Ways to Find a Planet"
						)
					)
				),
				React.createElement(
					"article",
					null,
					React.createElement(
						"nav",
						null,
						this.getHomeMenu()
					)
				)
			)
		);
	},

	getHomeMenu: function () {
		var that = this;
		return React.createElement(
			"ul",
			null,
			this.data.map(function (v, i) {
				if (i == 0) {
					return null;
				}
				return React.createElement(
					"li",
					{ key: "home_li_" + i },
					React.createElement(
						"a",
						{ href: "javascript:void(0)", "data-show-chapter": i, onClick: that.showDetails },
						React.createElement(
							"h2",
							null,
							v.title
						),
						React.createElement(
							"h3",
							null,
							v.subtitle
						),
						React.createElement(
							"h4",
							{ className: "count " + v.html_class },
							that.state.planet_counts[v.planet_count],
							" ",
							"planet" + (that.state.planet_counts[v.planet_count] > 1 ? 's' : '') + " discovered"
						)
					)
				);
			})
		);
	},

	renderArticle: function () {
		var item = this.data[this.state.current_page];

		return React.createElement(
			"div",
			{ className: "article chapter_details" },
			React.createElement(
				"div",
				{ className: "chapter_details_body" },
				React.createElement(FiveWaysArticle, { planet_counts: this.state.planet_counts, item: item, idx: this.state.current_page,
					is_mobile: this.state.is_mobile, showPrevious: this.previousItem, showNext: this.nextItem })
			)
		);
	},

	renderArticleNav: function () {
		var item = this.data[this.state.current_page];
		return React.createElement(
			"div",
			{ className: "article_navs" },
			this.state.current_page >= 2 ? React.createElement(
				"div",
				{ className: "article_nav prev", onClick: this.previousItem },
				React.createElement("div", { className: "icon" }),
				React.createElement(
					"div",
					{ className: "article_nav_text" },
					item.previous_article
				)
			) : null,
			this.state.current_page > 0 && this.state.current_page < 5 ? React.createElement(
				"div",
				{ className: "article_nav next", onClick: this.nextItem },
				React.createElement(
					"div",
					{ className: "article_nav_text" },
					item.next_article
				),
				React.createElement("div", { className: "icon" })
			) : null
		);
	},

	renderDotNav: function () {
		var that = this;
		return React.createElement(
			"div",
			{ id: "dot_nav", className: "clearfix" },
			React.createElement(
				"nav",
				null,
				React.createElement(
					"ul",
					null,
					React.createElement("li", { className: "home " + (this.state.current_page == 0 ? "current" : ""), "data-show-chapter": "0",
						onClick: this.showDetails }),
					React.createElement("li", { className: "previous " + (this.state.current_page <= 1 ? "disabled" : ""),
						onClick: function (e) {
							that.state.current_page > 1 ? that.previousItem() : console.log("disabled");
						} }),
					React.createElement("li", { className: "dot " + (this.state.current_page == 1 ? "current" : ""), "data-show-chapter": "1",
						onClick: this.showDetails }),
					React.createElement("li", { className: "dot " + (this.state.current_page == 2 ? "current" : ""), "data-show-chapter": "2",
						onClick: this.showDetails }),
					React.createElement("li", { className: "dot " + (this.state.current_page == 3 ? "current" : ""), "data-show-chapter": "3",
						onClick: this.showDetails }),
					React.createElement("li", { className: "dot " + (this.state.current_page == 4 ? "current" : ""), "data-show-chapter": "4",
						onClick: this.showDetails }),
					React.createElement("li", { className: "dot " + (this.state.current_page == 5 ? "current" : ""), "data-show-chapter": "5",
						onClick: this.showDetails }),
					React.createElement("li", { className: "next " + (this.state.current_page >= 5 ? "disabled" : ""), onClick: this.nextItem })
				)
			)
		);
	},

	render: function () {
		if (this.state.loaded) {
			var expanded = this.state.detail_expanded !== null ? this.state.detail_expanded : false;
			return React.createElement(
				"div",
				{ className: "five_ways_module " + (this.state.current_page == 0 ? "" : "detail_view") },
				this.state.current_page == 0 ? this.renderIndex() : this.renderArticle(),
				this.renderArticleNav(),
				this.renderDotNav()
			);
		} else {
			return React.createElement(
				"div",
				{ className: "loader" },
				React.createElement("div", { id: "spinner" }),
				React.createElement(
					"div",
					{ className: "loader_title" },
					"LOADING"
				)
			);
		}
	}
});
var FiveWaysArticle = createReactClass({

  globalVideoElement: "video.detail_video",

  getInitialState: function () {
    return {
      current_video_idx: 0
    };
  },

  componentDidMount: function () {
    //this.setVideoToContainerWidth(this.globalVideoElement);
  },

  componentDidUpdate: function (prevProps, prevState, snapshot) {
    var that = this;
    if (prevProps && prevProps.idx != this.props.idx) {
      this.setState({ current_video_idx: 0, description_open: false }, function () {
        $('.five_ways_module .description').hide();
        if (that.props.is_mobile) {
          that.activateDetailVideo();
        }
      });
    }
  },

  activateDetailVideo: function () {

    // On iPad the videos pause and play properly, but $(this).get(0).currentTime = 0 has no effect
    // So the video just continues playing where it left off.

    var thisArticleId = '#detail_' + this.props.idx;
    var navExists = $('.video_nav', thisArticleId).length;

    //console.log('mb_detail.activateDetailVideo.articleIndex: ' + articleIndex);
    //console.log('mb_detail.activateDetailVideo.navExists: ' + navExists);

    // Pause all videos 
    $('video').each(function (i) {
      //console.log('activateDetailVideo.# of videos: ' + i);
      $(this).get(0).pause();
    });

    /* Reset videos if this a multiple video article */
    if (navExists) {
      this.resetMultipleVideoArticle(this.props.idx);
    }

    /* 
    If this is on a mobile device, we just want to bring up the play button,
    otherwise we can just start the video
    */
    if (this.props.is_mobile) {

      this.hideVideoShowImage(this.props.idx);
    } else {

      // Start playing any and all videos in the current iframe
      // Getting an occasional error here...
      // InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable
      $(thisArticleId).find('video').each(function (index) {
        //console.log('activateDetailVideo.# of videos: ' + index);
        $(this).get(0).currentTime = 0;
        $(this).get(0).play();
      });
    }
  },

  resetMultipleVideoArticle: function (articleIndex) {
    var vidx = 0;
    var that = this;

    var thisArticleId = '#detail_' + articleIndex.toString();
    var curVidID = 'video_' + that.props.idx.toString() + '_' + that.state.current_video_idx.toString();
    var curVid = document.getElementById(curVidID);
    var $curVid = $('#' + curVidID);
    var $curtain = $(thisArticleId).find('.curtain');

    $('.video_img', thisArticleId).hide();
    $('.play_btn', thisArticleId).hide();

    that.setVideoToContainerWidth(that.globalVideoElement);

    this.setState({ current_video_idx: parseInt(vidx) }, function () {
      if (!that.props.is_mobile) {
        curVid.play();
      }
    });
  },

  hideVideoShowImage: function (articleIndex) {
    var thisArticleId = '#detail_' + articleIndex;
    $('.play_btn', thisArticleId).show();
    $('.video_img', thisArticleId).show();

    $('video', thisArticleId).hide();
  },

  playVidForTouch: function (e) {
    /* This is called when a video play button is tapped */

    console.log('playVidForTouch.articleIndex: ' + this.props.idx);

    var thisArticleId = '#detail_' + this.props.idx;
    var videoTagId = "video_" + this.props.idx + '_0';
    var videoImgTagId = "#video_img_" + this.props.idx;
    var v = document.getElementById(videoTagId);

    console.log('playVidForTouch.videoTagId: ' + videoTagId);

    // Hide the button
    $('.play_btn').hide();

    // Show the nav if there is one
    //$('nav', thisArticleId).show();

    // Set the video width and height
    this.setVideoToContainerWidth(this.globalVideoElement);

    // Hide the placeholder image
    $(videoImgTagId).hide();
    var that = this;
    v.addEventListener('webkitendfullscreen', function (e) {
      that.hideVideoShowImage(that.props.idx);
    });

    // Play the video
    $('#' + videoTagId).show();
    v.play();
  },

  setVideoToContainerWidth: function (videoElement) {
    var $vid = $(videoElement);
    var w = $vid.parent().width();
    var h = w * 9 / 16;

    $vid.width(w).height(h);
  },

  selectVideo: function (e) {
    var vidx = $(e.currentTarget).data('select-video');
    var that = this;

    var thisArticleId = '#detail_' + that.props.idx.toString();
    var curVidID = 'video_' + that.props.idx.toString() + '_' + that.state.current_video_idx.toString();
    var curVid = document.getElementById(curVidID);
    var $curVid = $('#' + curVidID);
    var $curtain = $(thisArticleId).find('.curtain');

    //console.log('animation.selectVideoInCurrentArticle.thisArticleId: ' + thisArticleId);
    //console.log('animation.selectVideoInCurrentArticle.curVidID: ' + curVidID);

    if (this.props.is_mobile) {
      // For mobile, don't use the curtain, as it prevents playback
      // when we don't call the video play immediately on click

      $('.video_img', thisArticleId).hide();
      $('.play_btn', thisArticleId).hide();

      that.setVideoToContainerWidth(that.globalVideoElement);

      this.setState({ current_video_idx: parseInt(vidx) }, function () {
        curVid.play();
      });
    } else {

      $curtain.fadeIn(function () {
        that.setState({ current_video_idx: parseInt(vidx) }, function () {
          curVid.currentTime = 0;
          curVid.play();
          $curtain.fadeOut();
        });
      });
    }
  },

  toggleDescription: function () {
    var that = this;
    this.setState({ description_open: !this.state.description_open }, function () {
      var $description = $('.five_ways_module .description');
      $description.slideToggle(500);

      if (!that.state.description_open) {
        $('html, body').animate({ scrollTop: 0 });
      } else {
        $('html, body').animate({ scrollTop: $description.offset().top - 100 }, 500);
      }
    });
  },

  render: function () {
    var that = this;
    var item = this.props.item;
    var multipleVideosExist = item.main_vid.length > 1;
    var navExists = item.navText;
    var previousArticleExists = item.previous_article;
    var nextArticleExists = item.next_article;

    return React.createElement(
      'article',
      { className: 'chapter_detail', id: 'detail_' + this.props.idx },
      React.createElement(
        'div',
        { className: 'animation' },
        React.createElement(
          'div',
          { className: 'video_container' },
          navExists ? React.createElement(
            'nav',
            { className: 'video_nav' },
            item.navText.map(function (navText, i) {
              return React.createElement(
                'a',
                { className: that.state.current_video_idx == i ? "current" : "", key: i, href: 'javascript:void(0)', onClick: that.selectVideo, 'data-select-video': i },
                navText
              );
            })
          ) : null,
          React.createElement(
            'div',
            { className: 'playback_controls hide_on_desktop' },
            React.createElement(
              'a',
              { className: 'play_btn', href: 'javascript:void(0)', onTouchEnd: this.playVidForTouch },
              React.createElement('div', { className: 'arrow_right' })
            )
          ),
          multipleVideosExist ? React.createElement('div', { className: 'curtain' }) : null,
          React.createElement('div', { className: 'gradient_overlay' }),
          React.createElement('img', { className: 'video_img ' + (item.main_vid ? "hide_on_desktop" : ""), src: item.main_img_src, width: '100%', id: 'video_img_' + that.props.idx }),
          item.main_vid.map(function (vid, i) {
            var video_class = i == that.state.current_video_idx ? "current" : "hidden";
            var vid_mp4 = vid + ".mp4";
            var vid_ogg = vid + ".ogv";
            if (that.props.is_mobile) {
              return React.createElement(
                'video',
                { key: that.props.idx + '_' + i, className: 'detail_video ' + video_class, loop: true, preload: 'auto', muted: true, id: 'video_' + that.props.idx + '_' + i },
                React.createElement('source', { src: vid_mp4, type: 'video/mp4' }),
                React.createElement('source', { src: vid_ogg, type: 'video/ogg' }),
                'Your browser does not support the video tag.'
              );
            } else {
              return React.createElement(
                'video',
                { key: that.props.idx + '_' + i, className: 'detail_video hide_on_touchscreen ' + video_class, loop: true, autoPlay: true, preload: 'auto', muted: true, id: 'video_' + that.props.idx + '_' + i },
                React.createElement('source', { src: vid_mp4, type: 'video/mp4' }),
                React.createElement('source', { src: vid_ogg, type: 'video/ogg' }),
                'Your browser does not support the video tag.'
              );
            }
          })
        )
      ),
      React.createElement(
        'div',
        { className: 'text_content clearfix' },
        React.createElement(
          'header',
          null,
          React.createElement(
            'h1',
            { className: 'title' },
            item.title
          ),
          React.createElement(
            'h2',
            { className: 'subtitle' },
            item.subtitle
          ),
          React.createElement(
            'div',
            { className: 'count ' + item.html_class },
            this.props.planet_counts[item.planet_count],
            React.createElement(
              'span',
              null,
              ' ',
              'planet' + (this.props.planet_counts[item.planet_count] > 1 ? 's' : '') + ' discovered'
            )
          )
        ),
        React.createElement(
          'h3',
          { className: 'short_description' },
          item.short_description
        ),
        React.createElement(
          'a',
          { className: 'more_link', href: 'javascript:void(0);', onClick: this.toggleDescription },
          this.state.description_open ? "- less info" : "+ more info"
        ),
        this.props.is_mobile ? null : React.createElement(
          'a',
          { className: 'download_link', href: '/5_ways_content/downloads/ways_to_find_a_planet.zip' },
          React.createElement(
            'span',
            null,
            ''
          ),
          'download videos'
        ),
        React.createElement('div', { className: 'description clearfix', dangerouslySetInnerHTML: { __html: item.description } }),
        React.createElement(
          'div',
          { className: 'prev_next clearfix' },
          previousArticleExists ? React.createElement(
            'a',
            { className: 'previous_link', href: 'javascript:void(0);', onClick: this.props.showPrevious },
            React.createElement(
              'span',
              { className: 'caret' },
              ''
            ),
            item.previous_article
          ) : null,
          nextArticleExists ? React.createElement(
            'a',
            { className: 'next_link', href: 'javascript:void(0);', onClick: this.props.showNext },
            item.next_article,
            React.createElement(
              'span',
              { className: 'caret' },
              ''
            )
          ) : null
        )
      )
    );
  }
});
var AjaxTabbedSearch = createReactClass({
	getInitialState: function () {
		var search_open = this.props.always_open ? true : false;
		return {
			search_open: search_open,
			search_text: '',
			search_results: [],
			tab_idx: -1,
			tab_val: ''
		};
	},

	componentDidMount: function () {
		var that = this;
		$('.search_container').on("closeModals", function () {
			that.closeSearch();
		});
		$(document).on('clear_search', this.clearSearch);
	},

	componentWillUnmount: function () {
		$('.search_container').off("closeModals");
		$(document).off('clear_search');
	},

	openSearch: function () {
		this.setState({ search_open: true }, function () {
			document.getElementById("search").focus();
		});
	},

	closeSearch: function () {
		if (this.state.search_text == '') {
			var search_open = this.props.always_open ? true : false;
			this.setState({ search_open: search_open, tab_idx: -1, tab_val: '', search_results: [] });
		}
		return false;
	},

	search: function (e) {
		var that = this;
		var val = e.currentTarget.value;
		if (this.props.parental_search_notification) {
			this.props.parental_search_notification(val);
		}
		this.setState({ search_text: val }, function () {
			if (val != '') {
				that.doSearch();
			}
		});
	},

	doSearch: function () {
		var that = this;
		console.log("Search", this.state.search_text);
		var params = { term: this.state.search_text };
		$.getJSON(this.props.search_url, params, function (data) {
			var tab_idx = undefined,
			    tab_val = undefined;
			if (that.state.tab_idx > -1 && that.hasDataForTab(data, that.state.tab_val)) {
				//if exists and in new results keep same
				tab_idx = that.state.tab_idx;
				tab_val = that.state.tab_val;
			} else if (data.length > 0) {
				for (var i = 0; i < data.length; i++) {
					var v = data[i];
					if (v.items.length > 0) {
						tab_idx = i;
						tab_val = v.name;
						break;
					}
				}
			} else {
				tab_idx = -1;
				tab_val = '';
			}
			that.setState({ search_results: data, tab_idx: tab_idx, tab_val: tab_val });
		});
	},
	//TODO make this not EOX specific? -RK
	clickedItem: function (e) {
		var that = this;
		var id = $(e.currentTarget).data('id');
		var model = $(e.currentTarget).data('model');
		var search_open = this.props.always_open ? true : false;
		this.setState({ search_text: '', search_open: search_open, tab_idx: -1, tab_val: '', search_results: [] }, function () {
			that.props.clicked_result(model, id);
		});
	},

	//TODO make this not EOX specific? -RK
	getSearchResultsForTab: function () {
		var _this = this;

		var that = this;
		if (this.state.search_results[this.state.tab_idx] && this.state.search_results[this.state.tab_idx].items) {
			var _ret = (function () {
				var model = _this.state.search_results[_this.state.tab_idx].model;
				if (model == 'planets') {
					return {
						v: _this.state.search_results[_this.state.tab_idx].items.map(function (v, i) {
							return React.createElement(
								'div',
								{ key: i, className: 'result', 'data-id': v.id, onClick: that.clickedItem, 'data-model': model },
								React.createElement(
									'div',
									{ className: 'title' },
									'' + v.display_name
								),
								React.createElement(
									'ul',
									{ className: 'details' },
									React.createElement(
										'li',
										null,
										React.createElement(
											'span',
											{ className: 'category' },
											'Distance from Earth:'
										),
										React.createElement(
											'span',
											{ className: 'value' },
											v.st_dist > 0 ? that.convertParsecToLightYears(v.st_dist) : 'Unknown'
										)
									),
									React.createElement(
										'li',
										null,
										React.createElement(
											'span',
											{ className: 'category' },
											'Planet Type:'
										),
										React.createElement(
											'span',
											{ className: 'value' },
											v.planet_type
										)
									),
									React.createElement(
										'li',
										null,
										React.createElement(
											'span',
											{ className: 'category' },
											'Discovery Date:'
										),
										React.createElement(
											'span',
											{ className: 'value' },
											v.discovery_date
										)
									)
								)
							);
						})
					};
				} else {
					return {
						v: _this.state.search_results[_this.state.tab_idx].items.map(function (v, i) {
							return React.createElement(
								'div',
								{ key: i, className: 'result', 'data-id': v.id, onClick: that.clickedItem, 'data-model': model },
								React.createElement(
									'div',
									{ className: 'title' },
									v.display_name
								),
								React.createElement(
									'ul',
									{ className: 'details' },
									React.createElement(
										'li',
										null,
										React.createElement(
											'span',
											{ className: 'category' },
											'Star Type:'
										),
										React.createElement(
											'span',
											{ className: 'value' },
											v.stellar_type
										)
									),
									React.createElement(
										'li',
										null,
										React.createElement(
											'span',
											{ className: 'category' },
											'Planets:'
										),
										React.createElement(
											'span',
											{ className: 'value' },
											v.planet_count
										)
									),
									React.createElement(
										'li',
										null,
										React.createElement(
											'span',
											{ className: 'category' },
											'Distance from Earth:'
										),
										React.createElement(
											'span',
											{ className: 'value' },
											v.st_dist > 0 ? that.convertParsecToLightYears(v.st_dist) : 'Unknown'
										)
									)
								)
							);
						})
					};
				}
			})();

			if (typeof _ret === 'object') return _ret.v;
		} else {
			return "";
		}
	},

	convertParsecToLightYears: function (val) {
		return Math.round(parseFloat(val) * 3.262) + " light-years";
	},

	changeSearchTab: function (e) {
		var target = e.currentTarget;
		var tab_idx = $(target).data('tab-idx');
		var tab_val = $(target).data('tab');
		this.setState({ tab_idx: tab_idx, tab_val: tab_val });
	},

	hasDataForTab: function (data, val) {
		var has_data = data.filter(function (v) {
			return v.name == val && v.items.length > 0;
		});
		return has_data.length > 0;
	},

	clearSearch: function (e) {
		this.setState({ search_text: '', search_results: [] }, function () {
			if (this.props.close_mobile_search) {
				this.props.close_mobile_search(false);
			}
		});
	},

	getSearchResultsHtml: function () {
		var that = this;
		if (this.state.search_text == '') {
			return React.createElement(
				'a',
				{ className: 'view_selector search_icon' },
				'search'
			);
		} else if (this.state.search_results.length > 0) {
			return React.createElement(
				'div',
				{ className: 'search_results' },
				React.createElement(
					'div',
					{ className: 'close_icon', onClick: this.clearSearch },
					React.createElement(
						'div',
						{ className: 'x_icon' },
						React.createElement('div', { className: 'icon' })
					)
				),
				React.createElement(
					'ul',
					{ className: 'search_results_nav' },
					this.props.tabs.map(function (v, i) {
						return React.createElement(
							'li',
							{ key: i, onClick: that.changeSearchTab, 'data-tab': v.val, 'data-tab-idx': i, className: (that.hasDataForTab(that.state.search_results, v.val) ? '' : 'no_data') + ' ' + (that.state.tab_idx == i ? 'current' : '') },
							v.name
						);
					})
				),
				React.createElement(
					'div',
					{ className: 'results_list' },
					this.getSearchResultsForTab()
				)
			);
		} else {
			return React.createElement(
				'div',
				{ className: 'search_results no_results' },
				'No results found.',
				React.createElement(
					'div',
					{ className: 'close_icon', onClick: this.clearSearch },
					React.createElement(
						'div',
						{ className: 'x_icon' },
						React.createElement('div', { className: 'icon' })
					)
				)
			);
		}
	},

	render: function () {
		if (this.state.search_open) {
			return React.createElement(
				'div',
				{ className: 'search_container open' },
				React.createElement(
					'div',
					{ className: 'search_input_and_results' },
					React.createElement('input', { type: 'search', name: 'search', id: 'search', className: this.state.search_text != "" ? "search_not_empty" : "", value: this.state.search_text, onChange: this.search, onBlur: this.closeSearch, placeholder: this.props.placeholderText }),
					this.getSearchResultsHtml()
				)
			);
		} else {
			return React.createElement(
				'div',
				{ className: 'search_container' },
				React.createElement(
					'a',
					{ className: 'view_selector search_icon', onClick: this.openSearch },
					'search'
				)
			);
		}
	}
});
function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function qinticInOut(t) {
	if ((t *= 2) < 1) return 0.5 * t * t * t * t * t;
	return 0.5 * ((t -= 2) * t * t * t * t + 2);
}

var AnimatedNumber = createReactClass({

	timeout: null,
	startAnimationTime: null,

	getInitialState: function () {
		var value = parseInt(this.props.value, 10);
		var previousValue = parseInt(this.props.initialValue) || 0;

		return {
			previousValue: previousValue,
			displayValue: value
		};
	},

	getDefaultProps: function () {
		return {
			speed: 500,
			useLocaleString: false
		};
	},

	componentWillReceiveProps: function (nextProps) {
		var _this = this;

		var value = parseInt(this.props.value, 10);

		if (parseInt(nextProps.value, 10) === value) return;

		this.setState({
			previousValue: this.state.displayValue
		});

		if (!isNaN(parseInt(this.props.delayValue, 10))) {
			this.delayTimeout = setTimeout(function () {
				_this.startAnimationTime = new Date().getTime();
				_this.updateNumber();
			}, this.props.delayValue);
		} else {
			this.startAnimationTime = new Date().getTime();
			this.updateNumber();
		}
	},

	shouldComponentUpdate: function (nextProps, nextState) {
		return nextState.displayValue !== this.state.displayValue;
	},

	updateNumber: function () {
		var value = parseInt(this.props.value, 10);
		var speed = parseInt(this.props.speed);
		var now = new Date().getTime();
		var elapsedTime = Math.min(speed, now - this.startAnimationTime);
		var progress = qinticInOut(elapsedTime / speed);

		var currentDisplayValue = Math.round((value - this.state.previousValue) * progress + this.state.previousValue);

		this.setState({
			displayValue: currentDisplayValue
		});

		if (elapsedTime < speed) {
			this.timeout = setTimeout(this.updateNumber, 16);
		} else {
			this.setState({
				previousValue: value
			});
		}
	},

	componentWillUnmount: function () {
		clearTimeout(this.timeout);
		clearTimeout(this.delayTimeout);
	},

	render: function () {
		var _props = this.props;
		var className = _props.className;
		var useLocaleString = _props.useLocaleString;

		var other = _objectWithoutProperties(_props, ['className', 'useLocaleString']);

		var displayValue = this.state.displayValue;

		var classes = 'animated_number';
		if (className) classes += ' ' + className;

		return React.createElement(
			'span',
			{ className: classes },
			useLocaleString ? displayValue.toLocaleString() : displayValue
		);
	}

});
var AppPreloader = createReactClass({
	download_spinner_opts: { lines: 9, length: 6, width: 4, radius: 7, scale: 1, corners: 1, color: '#FFF', opacity: 0.2, rotate: 0, direction: 1, speed: 1, trail: 60, fps: 20, zIndex: 2e9, className: 'spinner', left: '50%', shadow: false, hwaccel: false, position: 'relative' },

	getInitialState: function () {
		return {
			entered: false
		};
	},

	clickEnter: function () {
		this.setState({ entered: true }, this.props.on_enter);
	},

	getEnterBtn: function () {
		if (!this.props.app_loaded && !this.state.entered) {
			return React.createElement(Loader, { loaded: false, options: this.download_spinner_opts, className: 'spinner' });
		} else if (this.state.entered) {
			return "";
		} else {
			return React.createElement(
				'div',
				{ className: 'button', onClick: this.clickEnter },
				'ENTER'
			);
		}
	},

	render: function () {
		if (!this.props.is_webgl_enabled) {
			return React.createElement(
				'div',
				{ id: 'loader' },
				React.createElement(
					'div',
					{ className: 'loader_modal eclipse_modal panel' },
					React.createElement(
						'div',
						{ className: 'modal_content' },
						React.createElement(
							'div',
							{ className: 'intro_logo_container' },
							React.createElement(
								'h1',
								null,
								'Eyes on Exoplanets'
							)
						),
						React.createElement(
							'div',
							{ className: 'description' },
							React.createElement(
								'div',
								null,
								React.createElement(
									'p',
									null,
									'It appears your browser does not support WebGL. ',
									React.createElement('br', null),
									'Please ',
									React.createElement(
										'a',
										{ href: 'https://get.webgl.org/', target: '_parent' },
										'visit this site'
									),
									' for more information and support.'
								),
								React.createElement(
									'p',
									null,
									React.createElement(
										'a',
										{ href: '/eyes-on-exoplanets-web' },
										'Recommended platforms'
									)
								)
							)
						)
					)
				)
			);
		} else {
			return React.createElement(
				'div',
				{ id: 'loader', className: (this.props.app_loaded ? "loaded" : "") + ' ' + (this.state.entered ? "entered" : "") },
				React.createElement(
					'div',
					{ className: 'loader_modal eclipse_modal panel' },
					React.createElement(
						'div',
						{ className: 'modal_content' },
						React.createElement(
							'div',
							{ className: 'intro_logo_container' },
							React.createElement(
								'h1',
								null,
								'Eyes on Exoplanets'
							)
						),
						React.createElement(
							'div',
							{ className: 'description' },
							React.createElement(
								'div',
								{ className: 'browser_ok' },
								React.createElement(
									'p',
									null,
									'Explore a real-time visualization of all known exoplanets  planets outside of our solar system.'
								)
							),
							React.createElement(
								'div',
								{ className: 'browser_fail' },
								React.createElement(
									'p',
									null,
									'It appears your browser does not support WebGL. Please visit ',
									React.createElement(
										'a',
										{ href: 'https://get.webgl.org/', target: '_blank' },
										'this site'
									),
									' for more information and support.'
								)
							)
						),
						React.createElement(
							'div',
							{ className: 'button_loader_container' },
							this.getEnterBtn()
						),
						React.createElement(
							'div',
							{ className: 'intro_notes' },
							'Note: Planetary surface depictions are hypothetical and based on available data.'
						),
						React.createElement(
							'p',
							null,
							React.createElement(
								'a',
								{ href: '/eyes-on-exoplanets-web', target: '_blank' },
								'Recommended platforms'
							)
						),
						React.createElement(
							'p',
							null,
							React.createElement(
								'a',
								{ href: 'https://eyes.nasa.gov/eyes-on-exoplanets.html', target: '_blank' },
								'Download desktop version ',
								React.createElement('img', { src: '/assets/outside_link.svg' })
							)
						)
					)
				)
			);
		}
	}
});
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// this file is only called by eox_grid in eyes on exoplannets

var Carousel = (function (_React$Component) {
	_inherits(Carousel, _React$Component);

	function Carousel(props) {
		_classCallCheck(this, Carousel);

		_get(Object.getPrototypeOf(Carousel.prototype), "constructor", this).call(this, props);
		this.carousel = null;
	}

	_createClass(Carousel, [{
		key: "componentDidMount",
		value: function componentDidMount() {
			var that = this;
			this.carousel = $('#' + this.props.carousel_id).slick({
				dots: false,
				slidesToShow: 5,
				slidesToScroll: 5,
				responsive: [{
					breakpoint: 1024,
					settings: {
						slidesToShow: 4,
						slidesToScroll: 4,
						infinite: false,
						centerMode: false
					}
				}, {
					breakpoint: 800,
					settings: {
						slidesToShow: 3,
						slidesToScroll: 3,
						arrows: true,
						centerMode: false,
						infinite: false

					}
				}, {
					breakpoint: 600,
					settings: {
						slidesToShow: 2,
						slidesToScroll: 2,
						arrows: true,
						centerMode: false

					}
				}, {
					breakpoint: 480,
					settings: {
						slidesToShow: 1,
						slidesToScroll: 1,
						arrows: true,
						centerMode: true,
						infinite: false
					}
				}],
				slide: ".slide"
			});
		}
	}, {
		key: "componentWillUnmount",
		value: function componentWillUnmount() {
			// this.carousel.slick('unslick')
		}
	}, {
		key: "buildSlide",
		value: function buildSlide(item, idx) {
			return React.createElement(
				"div",
				{ key: idx, className: "slide", "data-id": item.id, onClick: this.props.item_clicked },
				React.createElement(
					"a",
					null,
					React.createElement(
						"div",
						{ className: "image_and_description_container" },
						React.createElement(
							"div",
							{ className: "rollover_description" },
							React.createElement(
								"div",
								{ className: "rollover_description_inner" },
								item.description
							)
						),
						React.createElement(
							"div",
							{ className: "img" },
							React.createElement("img", { className: "thumb", src: item.list_image })
						),
						React.createElement(
							"div",
							{ className: "gradient slide_label_text" },
							React.createElement(
								"div",
								{ className: "list_text_content" },
								React.createElement(
									"div",
									{ className: "content_title" },
									item.title
								),
								React.createElement(
									"div",
									{ className: "subtitle" },
									item.planet_type
								)
							)
						)
					)
				)
			);
		}
	}, {
		key: "render",
		value: function render() {
			var slides = this.props.slides;
			var that = this;

			return React.createElement(
				"div",
				{ id: this.props.carousel_id, className: "detail_carousel" },
				this.props.slides.map(function (s, i) {
					return that.buildSlide(s, i);
				})
			);
		}
	}]);

	return Carousel;
})(React.Component);
var CircleSizeCompare = createReactClass({
	getSizeComparison: function () {
		var larger = undefined,
		    smaller = undefined,
		    size_text = undefined,
		    left_circ = undefined,
		    right_circ = undefined,
		    pct = undefined,
		    ratio = undefined,
		    small_style = undefined;
		var left_rad = this.props.left.val;
		var right_rad = this.props.right.val;
		if (left_rad >= right_rad) {
			larger = this.props.left.name;
			smaller = this.props.right.name;
			ratio = left_rad / right_rad;
			pct = Math.round(right_rad / left_rad * 100);
		} else {
			larger = this.props.right.name;
			smaller = this.props.left.name;
			ratio = right_rad / left_rad;
			pct = Math.round(left_rad / right_rad * 100);
		}
		small_style = {
			width: pct + '%',
			height: pct + '%',
			left: 50 - pct / 2 + '%',
			top: 50 - pct / 2 + '%'
		};
		return React.createElement(
			'div',
			null,
			React.createElement(
				'div',
				{ className: 'names' },
				React.createElement(
					'span',
					{ className: 'name ' + (this.props.left.name == smaller ? 'smaller' : 'larger') },
					this.props.left.name
				),
				React.createElement(
					'span',
					{ className: 'name ' + (this.props.right.name == smaller ? 'smaller' : 'larger') },
					this.props.right.name
				)
			),
			React.createElement(
				'div',
				{ className: 'circles' },
				React.createElement('div', { className: 'larger' }),
				React.createElement('div', { className: 'smaller', style: small_style })
			)
		);
	},
	render: function () {
		return React.createElement(
			'div',
			{ className: 'section compare' },
			React.createElement(
				'div',
				{ className: 'compare_title' },
				this.props.title
			),
			this.getSizeComparison(),
			React.createElement(
				'div',
				{ className: 'facts' },
				this.props.facts.map(function (v, i) {
					return React.createElement(
						'div',
						{ key: i, className: 'fact' },
						React.createElement(
							'span',
							{ className: 'title' },
							v.title
						),
						React.createElement('span', { className: 'value', dangerouslySetInnerHTML: { __html: v.value } })
					);
				})
			)
		);
	}
});
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Countdown = (function (_React$Component) {
	_inherits(Countdown, _React$Component);

	function Countdown(props) {
		_classCallCheck(this, Countdown);

		_get(Object.getPrototypeOf(Countdown.prototype), "constructor", this).call(this, props);
		this.state = {
			countdown_html: "",
			completed: false
		};
	}

	_createClass(Countdown, [{
		key: "componentWillMount",
		value: function componentWillMount() {
			var that = this;
			setInterval(function () {
				if (!that.state.completed) {
					var launch = new Date(that.props.date);
					var count_up = that.props.count_up;
					var now = new Date();
					if (now < launch || count_up) {
						var timespan = Math.abs(launch.getTime() - now.getTime());
						timespan = timespan / 1000;
						var seconds = Math.floor(timespan % 60);
						timespan = timespan / 60;
						var minutes = Math.floor(timespan % 60);
						timespan = timespan / 60;
						var hours = Math.floor(timespan % 24);
						timespan = timespan / 24;
						var days = Math.floor(timespan % 365);
						var years = Math.floor(timespan / 365);
						var year_day;
						if (years != 0) {
							year_day = "<div class='time_years unit'>" + years + "<span class='time_label'>yrs</span></div><div class='time_days unit'>" + days + "<span class='time_label'>days</span></div>";
						} else {
							year_day = "<div class='time_days unit'>" + days + "<span class='time_label'>days</span></div>";
						}
						that.setState({ countdown_html: year_day + "<div class='time_hours unit'>" + that.pad2(hours) + "<span class='time_label'>hrs</span></div><div class='time_minutes unit'>" + that.pad2(minutes) + "<span class='time_label'>mins</span></div><div class='time_seconds unit'>" + that.pad2(seconds) + "<span class='time_label'>secs</span></div></div>" });
					} else {
						that.setState({ countdown_html: "<div class='completed'>COMPLETED</div>", completed: true });
					}
				}
			}, 1000);
		}
	}, {
		key: "pad2",
		value: function pad2(n) {
			return n < 10 ? '0' + n : n;
		}
	}, {
		key: "render",
		value: function render() {
			return React.createElement(
				"div",
				{ className: "countdown" },
				React.createElement(
					"div",
					{ className: "countdown_title" },
					this.props.title
				),
				React.createElement("div", { className: "countdown_time", dangerouslySetInnerHTML: { __html: this.state.countdown_html } })
			);
		}
	}]);

	return Countdown;
})(React.Component);
var DestinationCarousel = createReactClass({
	carousel: null,
	componentDidMount: function () {
		var that = this;
		console.log("mount carousel");
		this.carousel = $('#' + this.props.carousel_id).slick({
			dots: false,
			initialSlide: this.props.goto
		});
	},

	componentWillUnmount: function () {
		// this.carousel.slick('unslick')
	},

	buildSlide: function (item, idx) {
		return React.createElement(
			"div",
			{ key: idx, className: "slide", "data-id": item.id },
			React.createElement(
				"div",
				{ className: "image_and_description_container" },
				React.createElement(
					"div",
					{ className: "img" },
					React.createElement("img", { src: item.image_src })
				),
				React.createElement(
					"div",
					{ className: "gradient" },
					React.createElement(
						"div",
						{ className: "list_text_content" },
						React.createElement(
							"div",
							{ className: "content_title" },
							item.title
						)
					)
				)
			),
			React.createElement(
				"div",
				{ className: "destination_links" },
				item.feature_links.map(function (v, i) {
					console.log('%c v', 'color:blue', v);
					return React.createElement(
						"a",
						{ key: i, className: "button", href: v.link, target: v.target },
						v.link_text
					);
				})
			)
		);
	},

	render: function () {
		var slides = this.props.slides;
		var that = this;
		return React.createElement(
			"div",
			{ id: this.props.carousel_id, className: "destination_carousel" },
			this.props.slides.map(function (s, i) {
				return that.buildSlide(s, i);
			})
		);
	}
});
var DestinationHub = createReactClass({
	getInitialState: function () {
		var goto = this.whichSlide();
		return {
			modal_open: false,
			goto: goto
		};
	},

	whichSlide: function () {
		var found = -1;
		var href = window.location.href;
		this.props.items.map(function (v, i) {
			v.feature_links.map(function (w) {
				var idx = href.indexOf(w.link);
				if (idx >= 0) {
					found = i;
				}
			});
		});

		if (found > -1) {
			return found;
		} else {
			return 0;
		}
	},

	showModal: function () {
		this.setState({ modal_open: true });
		$('body').addClass('explore_overlay_open');
	},

	closeModal: function () {
		this.setState({ modal_open: false });
		$('body').removeClass('explore_overlay_open');
	},

	getModal: function () {
		var modal_styles = { "backgroundColor": "#1d1d1d", "top": "0", "left": "0", 'transform': 'none' };
		return React.createElement(
			Modal,
			{ isOpen: this.state.modal_open, onRequestClose: this.closeModal, style: modal_styles, className: 'destinations_modal modal' },
			React.createElement(
				'a',
				{ className: 'overlay_close_button visible', onClick: this.closeModal },
				React.createElement('div', { className: 'close_icon' })
			),
			React.createElement(DestinationCarousel, { carousel_id: this.props.rand_id, slides: this.props.items, goto: this.state.goto })
		);
	},

	render: function () {
		if (this.props.splash_image) {
			return React.createElement(
				'div',
				{ className: 'destination_hub_module' },
				React.createElement(
					'div',
					{ className: 'splash', style: { backgroundImage: "url(" + this.props.splash_image + ")" } },
					React.createElement(
						'div',
						{ className: 'intro_text' },
						React.createElement(
							'h1',
							null,
							'Exoplanet',
							React.createElement('br', null),
							'Travel Bureau'
						),
						React.createElement(
							'h2',
							null,
							'Take a trip outside our solar system'
						),
						React.createElement(
							'div',
							{ className: 'outline_button', onClick: this.showModal },
							React.createElement(
								'div',
								{ className: 'button_title' },
								'explore'
							),
							React.createElement(
								'div',
								{ className: 'button_sub_title' },
								'the Galaxy'
							)
						)
					)
				),
				this.getModal()
			);
		} else {
			return React.createElement(
				'div',
				{ className: 'destination_hub' },
				React.createElement(
					'div',
					{ className: 'destination_button button', onClick: this.showModal },
					'CHOOSE A DESTINATION'
				),
				this.getModal()
			);
		}
	}
});
var Disclaimer = createReactClass({

	getInitialState: function () {
		return {
			modal_open: true
		};
	},

	hideText: function () {
		this.setState({ modal_open: false });
	},

	render: function () {
		return React.createElement(
			"span",
			{ className: this.state.modal_open ? "disclaimer open" : "disclaimer" },
			React.createElement(
				"a",
				{ className: "overlay_close_button visible", onClick: this.hideText },
				React.createElement("div", { className: "close_icon" })
			),
			React.createElement(
				"div",
				{ className: "disclaimer_text" },
				React.createElement("span", { dangerouslySetInnerHTML: { __html: this.props.disclaimer_text } })
			)
		);
	}
});
var EoxGrid = createReactClass({
	//are dynamic but are cached after it grabs them
	// filters: {
	// 	featured: {
	// 		name: "Featured",
	// 		categories: [
	// 			{name: "Top Discoveries", items: [
	// 				{list_image: "http://placekitten.com/g/800/600", title: "Ultricies diam", subtitle: "Aliquam scelerisque aliquet dis"},
	// 					...
	// 			]},
	// 		]
	// 	}
	// },

	//Velit diam, amet pellentesque augue vel porta diam tincidunt lectus. Montes cursus, massa porttitor sed lorem. Urna massa. Eros nisi hac. Etiam proin odio mid dis placerat a a sociis. Habitasse nisi! Ut dignissim sociis ut risus amet et diam? Tristique! Pulvinar porta tristique, tincidunt mattis ac porta, arcu cras, dolor! Pulvinar, ut ultricies porta pulvinar porta auctor rhoncus parturient, vut amet etiam montes? Vut nunc, proin magna tristique et tincidunt! Duis sagittis adipiscing, vel.

	//Nec pellentesque elementum, porttitor. Ac dolor ultrices sociis porta phasellus ut, odio! Dictumst eu porta turpis a purus magnis lundium turpis porta dolor porta montes. Habitasse vel tristique quis adipiscing eros mus, placerat elit sagittis, pid ac augue? Magna ac cursus placerat dapibus rhoncus, arcu, odio turpis lacus turpis vut. Diam eu nec elementum lundium tincidunt phasellus nisi facilisis natoque turpis in, ridiculus tempor, lectus, integer, magna velit eu? Mus dapibus turpis placerat. Magna scelerisque integer eros, nisi penatibus ultricies! Nec vel? Nec etiam.
	download_spinner_opts: { lines: 9, length: 6, width: 4, radius: 7, scale: 1, corners: 1, color: '#FFF', opacity: 0.2, rotate: 0, direction: 1, speed: 1, trail: 60, fps: 20, zIndex: 2e9, className: 'spinner', left: '50%', shadow: false, hwaccel: false, position: 'relative' },

	getInitialState: function () {
		console.log('EOXGRID yo');
		return {
			active_filter: this.props.grid_filters[0].value,
			all_filters: [],
			filters: [],
			view_all: "",
			page_num: 1,
			per_page: 30
		};
	},
	componentDidMount: function () {
		this.getData();
		var that = this;
		$(document).on('set_grid', function (e, val, l2) {
			that.changeFilterByName(val, l2);
		});
	},

	componentWillUnmount: function () {
		$(document).off('set_grid');
	},

	getData: function () {
		var that = this;

		$.getJSON('/eox_json', { filter: true }, function (data) {
			var new_all = that.splitDataForTabs(data);
			that.setState({ all_filters: new_all, filters: new_all["featured"] }, function () {
				that.props.setFeatured(new_all["featured"]["categories"]);
			});
		});
	},

	splitDataForTabs: function (data) {
		var all = {};
		var that = this;
		this.props.grid_filters.map(function (v, i) {
			//featured,extreme,kepler,planet_types,detection,observatory
			switch (v.value) {
				case "featured":
				case "weirdest":
					all[v.value] = that.splitDataForCategory(data, v.value);
					break;
				case "planet_types":
					all[v.value] = that.splitDataForColumn(v.name, data, data.planet_types, "planet_type");
					break;
				case "detection":
					all[v.value] = that.splitDataForColumn(v.name, data, data.discovery_methods, "pl_discmethod");
					break;
				case "observatory":
					all[v.value] = { name: "Observatory", planets: data.planets };
					break;
				case "kepler":
					all[v.value] = that.splitDataForKepler(v.name, data);
					break;
				default:
					console.error("Unexpected value for splitDataForTabs", v);
			}
		});
		return all;
	},
	splitDataForKepler: function (name, data) {
		var k = data.planets.filter(function (v) {
			return v.pl_kepflag;
		});
		return { name: name, categories: [{ name: name, items: k }] };
	},

	splitDataForCategory: function (data, col) {
		return { categories: data[col], name: col };
	},

	splitDataForColumn: function (name, data, keys_from, column) {
		var that = this;
		var ret_val = { name: name, categories: [] };
		Object.keys(keys_from).map(function (v) {
			var items = that.filterPlanetsByCol(data, column, v);
			ret_val["categories"].push({ name: v, items: items });
		});
		return ret_val;
	},

	filterPlanetsByCol: function (data, col, val) {
		return data["planets"].filter(function (x) {
			return x[col] == val;
		});
	},

	getTipText: function (name) {
		if (this.props.info_tips) {
			var tip = this.props.info_tips[name];
			if (tip) {
				return React.createElement(InfoTip, { tip_text: tip.text });
			} else {
				return "";
			}
		} else {
			return "";
		}
	},

	changeFilter: function (e) {
		var val;
		var $target = $(e.currentTarget);
		if ($target.is('select')) {
			val = $target.val();
		} else {
			val = $target.data('filter');
		}
		if (val == "weirdest") {
			this.changeFilterByName(val, "Weirdest Planets");
		} else if (val == "kepler") {
			this.changeFilterByName(val, "Kepler Discoveries");
		} else {
			this.changeFilterByName(val);
		}
	},

	changeFilterByName: function (val, l2) {
		var _this = this;

		var page_num = val == this.state.active_filter ? this.state.page_num : 1;
		if (l2) {
			this.setState({ active_filter: val, filters: this.state.all_filters[val], view_all: l2, page_num: page_num });
		} else {
			this.setState({ active_filter: val, filters: [], view_all: "", page_num: page_num }, function () {
				_this.loadFilters(val);
			});
		}
	},

	loadFilters: function (val) {
		var filters = this.state.all_filters[val];
		if (typeof filters != 'undefined') {
			this.setState({ filters: filters });
		}
	},

	onViewAll: function (e) {
		var $target = $(e.currentTarget);
		var val = $target.data('view-all');
		this.setState({ view_all: val, page_num: 1 });
	},

	backToFilter: function () {
		this.setState({ view_all: "" });
	},

	clickObservatory: function (e) {
		var page_num = this.state.view_all == e.currentTarget.getAttribute('data-name') ? this.state.page_num : 1;
		this.setState({ view_all: e.currentTarget.getAttribute('data-name'), page_num: page_num });
	},

	getPlanetsMatchingObservatory: function () {
		var that = this;
		return this.state.filters.planets.filter(function (v) {
			//could resolve this by modifying the JSON but would need to add a lot of data to that sheet and have arrays for possible matching... #haxjustification -RK
			if (that.state.view_all == "Kepler and K2") {
				return v.pl_facility == "Kepler" || v.pl_facility == "K2";
			} else if (that.state.view_all == "XO Project") {
				return v.pl_facility == "XO";
			} else if (that.state.view_all == "TESS") {
				return v.pl_facility == "Transiting Exoplanet Survey Satellite (TESS)";
			} else {
				return v.pl_facility == that.state.view_all;
			}
		});
	},

	getObservatoryItems: function () {
		var that = this;
		if (this.state.view_all == "") {
			//level 1
			return React.createElement(
				'div',
				{ className: 'grid_row full_list_view observatory_list' },
				React.createElement(
					'header',
					{ className: 'grid_header' },
					React.createElement(
						'h2',
						null,
						'Browse planets by observatory'
					)
				),
				React.createElement(
					'ul',
					{ className: 'item_list' },
					this.props.observatories.map(function (w, j) {
						return that.getObservatoryGridItemHtml(w, j);
					})
				)
			);
		} else {
			//level 2
			var obs_items = this.getPlanetsMatchingObservatory();
			var items = obs_items.slice(0, this.state.per_page * this.state.page_num);
			return React.createElement(
				'div',
				{ className: 'grid_row full_list_view' },
				React.createElement(
					'header',
					{ className: 'grid_header' },
					React.createElement(
						'h2',
						null,
						this.state.view_all
					),
					React.createElement(
						'a',
						{ className: 'toggle_more', onClick: that.backToFilter },
						' All Observatories'
					)
				),
				React.createElement(
					'ul',
					{ className: 'item_list' },
					items.map(function (w, j) {
						return that.getGridItemHtml(w, j);
					})
				),
				items.length < obs_items.length ? React.createElement(
					'div',
					{ className: 'grid_footer' },
					React.createElement(
						'a',
						{ className: 'button', onClick: that.appendPage },
						'MORE'
					)
				) : null
			);
		}
	},

	appendPage: function () {
		this.setState({ page_num: this.state.page_num + 1 });
	},

	getGridGalleryHtml: function () {
		var that = this;
		var filters = this.state.filters;
		if (!filters) {
			return "";
		}
		var categories = this.state.filters.categories;
		if (filters && filters.name == "Observatory") {
			return this.getObservatoryItems();
		} else if (categories) {
			//All has been selected show Level 2
			if (this.state.view_all != "") {
				var all_cat = categories.filter(function (v) {
					return v.name == that.state.view_all;
				});
				var v = all_cat[0];
				var items = v.items.slice(0, this.state.per_page * this.state.page_num);
				if (filters.name == "Kepler Discoveries" || filters.name == "weirdest") {
					klass = "kepler_discoveries";
				} else {
					klass = "";
				}
				return React.createElement(
					'div',
					{ className: klass + " grid_row full_list_view" },
					React.createElement(
						'header',
						{ className: 'grid_header' },
						React.createElement(
							'h2',
							null,
							v.name
						),
						React.createElement(
							'a',
							{ className: 'toggle_more', onClick: that.backToFilter },
							' ',
							this.state.filters.name
						)
					),
					React.createElement(
						'ul',
						{ className: 'item_list' },
						items.map(function (w, j) {
							return that.getGridItemHtml(w, j);
						})
					),
					items.length < v.items.length ? React.createElement(
						'div',
						{ className: 'grid_footer' },
						React.createElement(
							'a',
							{ className: 'button', onClick: that.appendPage },
							'MORE'
						)
					) : null
				);
			} else {
				return categories.map(function (v, i) {
					var items = undefined,
					    view_all = undefined,
					    klass = undefined;
					if (v.items.length > 4) {
						items = v.items.slice(0, 5);
						view_all = React.createElement(
							'a',
							{ className: 'toggle_more', onClick: that.onViewAll, 'data-view-all': v.name },
							' view all'
						);
					} else {
						items = v.items;
						view_all = '';
					}
					if (filters.name == "Planet Types") {
						klass = "planet_types";
					} else {
						klass = "";
					}
					return React.createElement(
						'div',
						{ key: i, className: "grid_row carouselable_view " + klass },
						React.createElement(
							'header',
							{ className: 'grid_header' },
							React.createElement(
								'h2',
								null,
								v.name
							),
							view_all,
							that.getTipText(v.name)
						),
						React.createElement(Carousel, { slides: items, carousel_id: 'grid_carousel_' + i, item_clicked: that.props.item_clicked })
					);
				});
			}
		} else {
			return React.createElement(Loader, { loaded: false, options: this.download_spinner_opts, className: 'spinner' });
		}
	},

	//HTML for carousel items is in Carousel.js.jsx!
	getGridItemHtml: function (item, idx) {
		return React.createElement(
			'li',
			{ key: 1000 + idx, className: 'slide', 'data-id': item.id, onClick: this.props.item_clicked },
			React.createElement(
				'a',
				null,
				React.createElement(
					'div',
					{ className: 'image_and_description_container' },
					React.createElement(
						'div',
						{ className: 'rollover_description' },
						React.createElement(
							'div',
							{ className: 'rollover_description_inner' },
							item.description
						)
					),
					React.createElement(
						'div',
						{ className: 'img' },
						React.createElement('img', { className: 'thumb', src: item.list_image })
					),
					React.createElement(
						'div',
						{ className: 'gradient' },
						React.createElement(
							'div',
							{ className: 'list_text_content' },
							React.createElement(
								'div',
								{ className: 'content_title' },
								item.title
							),
							React.createElement(
								'div',
								{ className: 'subtitle' },
								item.planet_type
							)
						)
					)
				)
			)
		);
	},

	getObservatoryGridItemHtml: function (item, idx) {
		return React.createElement(
			'li',
			{ key: idx, className: 'slide', 'data-idx': idx, 'data-name': item["name"], onClick: this.clickObservatory },
			React.createElement(
				'a',
				null,
				React.createElement(
					'div',
					{ className: 'image_and_description_container' },
					React.createElement(
						'div',
						{ className: 'img' },
						React.createElement('img', { className: 'thumb', src: '/assets/eox/observatories/' + item["image"] + '.jpg' })
					),
					React.createElement(
						'div',
						{ className: 'list_text_content' },
						React.createElement(
							'div',
							{ className: 'content_title' },
							item["name"]
						)
					)
				)
			)
		);
	},

	render: function () {
		var that = this;
		return React.createElement(
			'div',
			{ id: 'grid_view', className: 'overlay overlay_grid ' + (this.props.grid_open ? 'open' : '') },
			React.createElement(
				'header',
				{ className: 'filter_bar' },
				React.createElement(
					'ul',
					{ className: 'categories desktop' },
					this.props.grid_filters.map(function (v, i) {
						return React.createElement(
							'li',
							{ key: i, className: v.value == that.state.active_filter ? 'active' : '', 'data-filter': v.value, onClick: that.changeFilter },
							v.name
						);
					})
				),
				React.createElement(
					'select',
					{ className: 'categories mobile', onChange: this.changeFilter, value: this.state.active_filter },
					this.props.grid_filters.map(function (v, i) {
						return React.createElement(
							'option',
							{ key: i, value: v.value },
							v.name
						);
					})
				),
				React.createElement(
					'div',
					{ className: 'close_btn panel_close_button', onClick: this.props.grid_close_fn },
					React.createElement('div', { className: 'icon' })
				)
			),
			React.createElement(
				'section',
				{ className: 'main_overlay_section grid_gallery' },
				React.createElement(
					'div',
					{ className: 'grid_layout' },
					this.getGridGalleryHtml()
				)
			)
		);
	}
});
var EoxHeader = createReactClass({
	getInitialState: function () {
		return {
			searching: false
		};
	},

	search_tabs: [{ val: 'planets', name: 'Planets' }, { val: 'stars', name: 'Stars' }],

	isSearching: function (val) {
		var is_searching = val != '';
		this.setState({ searching: is_searching }, function () {
			document.body.scrollTop = 0; //for iphone shifting...
		});
	},

	closeModal: function (e) {
		if (e) e.preventDefault();
		this.setState({ searching: false }, function () {
			this.props.mobile_nav_close();
			$(document).trigger('clear_search');
		});
	},

	clickedSearchResult: function (model, id) {
		this.setState({ searching: false }, function () {
			this.props.clicked_search_result(model, id);
		});
	},

	render: function () {
		var that = this;
		return React.createElement(
			'div',
			{ className: 'site_header_area ' + (this.props.mobile_open ? "nav_overlay_true" : "") },
			React.createElement(
				'header',
				{ id: 'site_header' },
				React.createElement(
					'div',
					{ className: 'brand_area' },
					React.createElement(
						'div',
						{ className: 'brand_1' },
						React.createElement(
							'a',
							{ href: 'https://www.nasa.gov', className: 'nasa_logo', target: 'blank', title: 'visit nasa.gov' },
							'NASA'
						)
					),
					React.createElement(
						'div',
						{ className: 'brand_2' },
						React.createElement(
							'a',
							{ href: '#', className: 'brand_logo', onClick: this.props.on_galaxy_view, title: 'Eyes on Exoplanets home' },
							'Eyes on Exoplanets'
						)
					)
				),
				React.createElement(
					'div',
					{ className: 'views_search_container' },
					React.createElement(AjaxTabbedSearch, { tabs: this.search_tabs, search_url: '/eox_search', clicked_result: this.props.clicked_search_result, placeholderText: 'Type a name or a partial name of a planet or star.' }),
					React.createElement(
						'ul',
						{ className: 'view_selectors' },
						React.createElement(
							'li',
							{ className: 'nav_item' },
							React.createElement(
								'div',
								{ className: 'galaxy' },
								React.createElement(
									'a',
									{ href: '#', className: 'view_selector', 'data-show': 'galaxy', onClick: this.props.on_galaxy_view },
									React.createElement(SvgIcon, { symbol: 'galaxy', label: 'Home' }),
									React.createElement(
										'span',
										{ className: 'icon_text' },
										'HOME'
									)
								)
							)
						),
						React.createElement(
							'li',
							{ className: 'nav_item' },
							React.createElement(
								'a',
								{ href: '#', className: 'view_selector', 'data-show': 'planets', onClick: this.props.grid_open_fn },
								'Browse Planets'
							)
						),
						React.createElement(
							'li',
							{ className: 'nav_item ' + (this.props.is_open_sub_nav('missions') ? "expanded" : "") },
							React.createElement(
								'a',
								{ href: '#', className: 'view_selector', 'data-show': 'missions', onClick: this.props.toggle_sub_nav },
								'Missions'
							),
							React.createElement(
								'div',
								{ className: 'subnav_container' },
								React.createElement('div', { className: 'nav_item_indicator' }),
								React.createElement(
									'ul',
									{ className: 'subnav' },
									this.props.missions.map(function (v, i) {
										return React.createElement(
											'li',
											{ key: i },
											React.createElement(
												'a',
												{ href: '#', onClick: that.props.on_mission_click, 'data-value': v.value },
												v.name
											)
										);
									})
								)
							)
						)
					)
				),
				React.createElement(
					'a',
					{ className: 'menu_button', href: '#', onClick: this.props.mobile_nav_open, id: 'menu_button' },
					React.createElement('span', { className: 'menu_icon' })
				)
			),
			React.createElement(
				'div',
				{ className: 'mobile_nav_container ' + (this.props.mobile_open ? "open" : "") + ' ' + (this.state.searching ? "searching" : "") },
				React.createElement(
					'a',
					{ className: 'modal_close', href: '#', onClick: this.closeModal, id: 'modal_close' },
					React.createElement('span', { className: 'modal_close_icon' })
				),
				React.createElement(
					'nav',
					{ className: 'site_nav' },
					React.createElement(
						'ul',
						{ className: 'nav' },
						React.createElement(
							'li',
							{ className: 'nav_item' },
							React.createElement(
								'div',
								{ className: 'galaxy' },
								React.createElement(
									'a',
									{ href: '#', className: 'view_selector', 'data-show': 'galaxy', onClick: this.props.on_galaxy_view },
									React.createElement(SvgIcon, { symbol: 'galaxy', label: 'Home' }),
									React.createElement(
										'span',
										{ className: 'icon_text' },
										'HOME'
									)
								)
							),
							React.createElement(
								'div',
								{ className: 'subnav_container' },
								React.createElement('div', { className: 'nav_item_indicator' }),
								React.createElement(
									'ul',
									{ className: 'subnav' },
									React.createElement(
										'li',
										null,
										React.createElement(
											'a',
											{ href: '#', onClick: this.props.on_galaxy_view },
											'Space'
										)
									),
									React.createElement(
										'li',
										null,
										React.createElement(
											'a',
											{ href: '#', onClick: this.props.on_earth_view },
											'Earth'
										)
									)
								)
							)
						),
						React.createElement(
							'li',
							{ className: 'nav_item' },
							React.createElement(
								'a',
								{ href: '#', className: 'view_selector', 'data-show': 'planets', onClick: this.props.grid_open_fn },
								'Browse Planets'
							)
						),
						React.createElement(
							'li',
							{ className: 'nav_item' },
							React.createElement(
								'a',
								{ className: 'view_selector', 'data-show': 'missions' },
								'Missions'
							),
							React.createElement(
								'div',
								{ className: 'subnav_container' },
								React.createElement('div', { className: 'nav_item_indicator' }),
								React.createElement(
									'ul',
									{ className: 'subnav' },
									this.props.missions.map(function (v, i) {
										return React.createElement(
											'li',
											{ key: i },
											React.createElement(
												'a',
												{ href: '#', onClick: that.props.on_mission_click, 'data-value': v.value },
												v.name
											)
										);
									})
								)
							)
						),
						React.createElement(
							'li',
							{ className: 'nav_item' },
							React.createElement(
								'a',
								{ href: '#', onClick: this.props.open_settings, className: 'settings' },
								'Settings'
							)
						),
						React.createElement(
							'li',
							{ className: 'nav_item' },
							React.createElement(
								'a',
								{ href: '#', className: 'help', onClick: this.props.load_faq },
								'Help'
							)
						)
					)
				),
				React.createElement(
					'div',
					{ className: 'search_header' },
					React.createElement(
						'div',
						{ className: 'menu_name' },
						'Search'
					),
					React.createElement(AjaxTabbedSearch, { parental_search_notification: this.isSearching, always_open: 'true', tabs: this.search_tabs, search_url: '/eox_search', clicked_result: this.clickedSearchResult, close_mobile_search: this.isSearching, placeholderText: '' }),
					React.createElement(
						'div',
						{ className: 'mobile_search_instructions' },
						'Type a name or a partial name of a planet or star.'
					)
				)
			)
		);
	}
});
/* mobile */ /* end mobile */;
var EoxQuickFilterColumn = createReactClass({
	// getInitialState(){
	// 	return {
	// 		open: false
	// 	}
	// },

	hasOptions: function (v) {
		return typeof v["options"] != "undefined";
	},

	clickedOption: function (e) {
		this.props.clicked_option(e);
	},

	getOptionsHtml: function (v) {
		var that = this;

		if (this.hasOptions(v)) {
			return React.createElement(
				"ul",
				{ className: "options" },
				v.options.map(function (v, i) {
					return React.createElement(
						"li",
						{ onClick: that.clickedOption, key: 1000 + i,
							className: "option " + (that.props.is_active_filter(v) ? "current" : ""),
							"data-idx": i,
							"data-field": v.field.split(','),
							"data-db": v.db,
							"data-value": v.value,
							"data-name": v.name,
							"data-modal": v.modal,
							"data-modal-options": v.options ? JSON.stringify(v.options) : null
						},
						v.name
					);
				})
			);
		} else {
			return "";
		}
	},

	clickedCol: function (e) {
		if (!$(e.currentTarget).hasClass("has_options")) {
			this.props.clicked_option(e);
		} else if ($(e.currentTarget).data("name") == "Missions") {
			console.log("clicked missions");
		} else {
			// SHIM: Automatically select the first item, so we dont have
			// two active filter buttons (one open and one current) at the same time
			var firstItem = e.currentTarget.parentNode.querySelector('li');
			if (firstItem) firstItem.click();
		}

		this.props.opened_filter(e);
	},

	render: function () {
		var has_options = this.hasOptions(this.props.filter);
		return React.createElement(
			"div",
			{ className: "col " + (this.props.is_active_filter(this.props.filter) ? "current" : "") + " " + (has_options ? "has_options" : "") + " " + this.props.filter.field.split(',').join(' ') + " " + (this.props.is_open_filter(this.props.filter) ? "open" : "") },
			React.createElement(
				"div",
				{ className: "col_img_text_container " + (has_options ? "has_options" : ""), "data-idx": this.props.idx,
					onClick: this.clickedCol, "data-field": this.props.filter.field,
					"data-value": this.props.filter.value, "data-db": this.props.filter.db, "data-name": this.props.filter.name },
				React.createElement("div", { className: "more_indicator" }),
				React.createElement("div", { className: "col_img" }),
				React.createElement(
					"div",
					{ className: "col_text" },
					this.props.filter.name
				)
			),
			this.getOptionsHtml(this.props.filter)
		);
	}
});

var EoxQuickFilter = createReactClass({
	getInitialState: function () {
		return {
			title: "FILTER",
			stylobate: "All Planet types",
			active_filters: [{ value: "All", field: "plType", db: "planets" }],
			open_filter: null, // Toggle filter menu with multiple options on touch devices
			mobile_open: false,
			nav_level: 0,
			menu_options: [],
			modal_options: null,
			hide_menu: false
		};
	},

	componentDidMount: function () {
		var that = this;
		$('body').on('reset_filter', function () {
			that.setState({ active_filters: [{ value: "All", field: "plType", db: "planets" }], stylobate: "All Planet types", modal_options: null, hide_menu: false });
		});
		$('body').on("close_menus", function () {
			that.closeFilter();
		});
	},

	componentWillUnmount: function () {
		$('body').off('reset_filter');
		$('.search_container').off("close_menus");
	},

	addFilter: function (field, db, value, filters, name) {
		if (this.props.single_select) {
			filters = [];
		}
		if (db) {
			filters.push({ field: field, db: db, value: value, name: name });
		} else {
			filters.push({ field: field, value: value, name: name });
		}
		return filters;
	},

	removeFilter: function (field, db, value, filters) {
		var af = filters.filter(function (v) {
			if (db) {
				return !(v.db == db && v.field == field && v.value == value);
			} else {
				return !(v.field == field && v.value == value);
			}
		});

		return af;
	},

	removeAllButAll: function (field, db, filters, name) {
		return [{ field: field, db: db, value: "All", name: name }];
	},

	clickedFilter: function (e) {
		var field = e.currentTarget.getAttribute("data-field");
		var db = e.currentTarget.getAttribute("data-db");
		var value = e.currentTarget.getAttribute("data-value");
		var name = e.currentTarget.getAttribute("data-name");
		var modal = e.currentTarget.getAttribute("data-modal");
		var modal_options = e.currentTarget.getAttribute("data-modal-options");
		var all_present = $(e.currentTarget).siblings('li[data-value="All"]').length > 0;
		var siblings_selected = $(e.currentTarget).siblings('.current').length > 0;
		var af = undefined;
		if (value == "All" && siblings_selected) {
			//special case where other filters have been added but all is clicked
			af = this.removeAllButAll(field, db, this.state.active_filters, name);
		} else if (value == "All" && !siblings_selected && $(e.currentTarget).hasClass('current')) {
			//special case where no other filters select and trying to deselect all
			return; //do nothing
		} else if (modal) {
				var _modal_options = JSON.parse(modal_options);
				var opt = _modal_options[0];
				af = this.addFilter(opt.field, opt.db, opt.value, this.state.active_filters, opt.name);
				this.setState({ modal_options: _modal_options, hide_menu: true });
			} else {
				if (this.state.modal_options !== null && this.isActiveFilter({ db: db, field: field, value: value })) {
					// do nothing when discoveries modal is showing and active filter is clicked
					return;
				} else if (this.isActiveFilter({ db: db, field: field, value: value })) {
					af = this.removeFilter(field, db, value, this.state.active_filters);
					if (all_present && !siblings_selected) {
						af = this.addFilter(field, db, "All", af, name);
					}
				} else {
					af = this.addFilter(field, db, value, this.state.active_filters, name);
					if (all_present) {
						af = this.removeFilter(field, db, "All", af);
					}
				}
			}

		var stylobate = this.getCurrentFilterText(af);

		this.setState({ active_filters: af, stylobate: stylobate, mobile_open: false }, function () {
			this.props.on_filter_change(af);
		});
	},

	openedFilter: function (e) {
		var name = e.currentTarget.getAttribute("data-name");
		if (this.state.open_filter === name) {
			this.setState({ open_filter: null });
		} else {
			this.setState({ open_filter: name });
		}
	},

	closeFilter: function (e) {
		this.setState({ open_filter: null });
	},

	getCurrentFilterText: function (af) {
		var text = "";
		af.map(function (v, i) {
			text += v.name;
			if (i + 1 < af.length) {
				text += ",";
			}
		});
		return text;
	},

	getActiveFilters: function (db, value, field) {
		var in_filters = this.state.active_filters.filter(function (af) {
			if (db) {
				return af.db == db && af.value == value && field.split(',').indexOf(af.field) > -1;
			} else if (value) {
				return af.value == value && field.split(',').indexOf(af.field) > -1;
			} else {
				return field.split(',').indexOf(af.field) > -1;
			}
		});
		return in_filters;
	},

	isActiveFilter: function (filter) {
		if (this.state.active_filters.length == 0) {
			return false;
		} else {
			var in_filters = this.getActiveFilters(filter.db, filter.value, filter.field);
			return in_filters.length > 0;
		}
	},

	isOpenFilter: function (filter) {
		if (filter) {
			return this.state.open_filter === filter.name;
		} else {
			return false;
		}
	},

	openMobileFilter: function () {
		this.setState({ mobile_open: true, menu_options: this.props.filters, nav_level: 0 });
	},

	closeMobileFilter: function () {
		this.setState({ mobile_open: false });
	},

	goBack: function () {
		var options = undefined;
		var that = this;
		if (this.state.nav_level == 2) {
			// get the index of the filter that contains the current options
			var current_idx = this.props.filters.findIndex(function (f) {
				return f.options.some(function (g) {
					return g.options == that.state.menu_options;
				});
			});
			if (current_idx > -1) {
				options = this.props.filters[current_idx].options;
			} else {
				options = this.props.filters;
			}
		} else {
			options = this.props.filters;
		}
		this.setState({ menu_options: options, nav_level: this.state.nav_level - 1 });
	},

	getMobileHeader: function () {
		if (this.state.nav_level == 0) {
			return React.createElement(
				"span",
				{ className: "filter_title" },
				"FILTER GALAXY"
			);
		} else {
			return React.createElement("span", { className: "filter_title back", onClick: this.goBack });
		}
	},

	loadOptions: function (e) {
		var idx = parseInt(e.currentTarget.getAttribute("data-idx")),
		    options = undefined;
		var that = this;
		if (this.state.nav_level == 1) {
			var current_idx = this.props.filters.findIndex(function (f) {
				return f.options == that.state.menu_options;
			});
			if (current_idx > -1) {
				options = this.props.filters[current_idx].options[idx].options;
			} else {
				return;
			}
		} else {
			options = this.props.filters[idx].options;
		}
		this.setState({ menu_options: options, nav_level: this.state.nav_level + 1 });
	},

	closeModals: function () {
		var af = [{ name: "All Planet Types", value: "All", field: "plType", db: "planets" }];
		var stylobate = this.getCurrentFilterText(af);
		this.setState({ modal_options: null, hide_menu: false, active_filters: af, stylobate: stylobate, open_filter: null }, function () {
			this.props.on_filter_change(this.state.active_filters);
		});
	},

	getMobileMenu: function () {
		var that = this;
		var icon = this.state.nav_level == 0 ? React.createElement("div", { className: "icon" }) : '';
		return React.createElement(
			"ul",
			{ className: "menu_options" },
			this.state.menu_options.map(function (v, i) {
				var has_options = typeof v["options"] != "undefined";
				var arrow = undefined,
				    click = undefined;
				if (has_options) {
					arrow = React.createElement(
						"div",
						{ className: "arrow_box" },
						React.createElement("span", { className: "arrow_right" })
					);
					click = that.loadOptions;
				} else {
					click = that.clickedFilter;
				}
				return React.createElement(
					"li",
					{ className: (that.isActiveFilter(v) ? "current" : "") + " " + v.field.split(',').join(' '), key: i, "data-idx": i, onClick: click, "data-value": v.value, "data-field": v.field, "data-db": v.db, "data-name": v.name },
					icon,
					v.name,
					arrow
				);
			})
		);
	},

	renderQuickMenuModal: function () {
		var that = this;
		if (this.state.modal_options) {
			return React.createElement(
				"div",
				{ className: "eox_quick_menu_modal" },
				React.createElement(
					"a",
					{ className: "modal_close", onClick: this.closeModals },
					React.createElement("span", { className: "quick_modal_close_icon" })
				),
				React.createElement(
					"header",
					null,
					React.createElement(
						"h4",
						null,
						"Discoveries"
					)
				),
				React.createElement(
					"ul",
					null,
					this.state.modal_options.map(function (v, i) {
						return React.createElement(
							"li",
							{ onClick: that.clickedFilter, key: 1000 + i,
								className: "option " + (that.isActiveFilter(v) ? "current" : ""),
								"data-idx": i,
								"data-field": v.field.split(','),
								"data-db": v.db,
								"data-value": v.value,
								"data-name": v.name },
							v.name
						);
					})
				)
			);
		}
	},

	render: function () {
		var that = this;
		return React.createElement(
			"div",
			{ className: "quick_menus" },
			React.createElement(
				"div",
				{ className: "eox_quick_menu desktop galaxy" + (this.state.hide_menu ? " hide_quick_menu" : "") },
				React.createElement(
					"div",
					{ className: "entablature" },
					React.createElement(
						"div",
						{ className: "metope" },
						React.createElement("hr", null),
						React.createElement(
							"span",
							null,
							this.state.title
						),
						React.createElement("hr", null)
					)
				),
				React.createElement(
					"div",
					{ className: "cols" },
					this.props.filters.map(function (v, i) {
						return React.createElement(EoxQuickFilterColumn, { key: i, filter: v, idx: i,
							active_filters: that.state.active_filters,
							clicked_option: that.clickedFilter,
							is_active_filter: that.isActiveFilter,
							opened_filter: that.openedFilter,
							is_open_filter: that.isOpenFilter
						});
					})
				),
				React.createElement(
					"div",
					{ className: "stylobate" },
					this.state.stylobate != "" ? "Current filter: " + this.state.stylobate : ''
				)
			),
			React.createElement(
				"div",
				{ className: "eox_quick_menu mobile galaxy" },
				React.createElement("div", { className: "expander", onClick: this.openMobileFilter }),
				React.createElement(
					"div",
					{ className: "filter_panel " + (this.state.mobile_open ? 'open' : '') },
					React.createElement("div", { className: "modal_background", onClick: this.closeMobileFilter }),
					React.createElement(
						"div",
						{ className: "menu" },
						React.createElement(
							"header",
							null,
							this.getMobileHeader(),
							React.createElement("span", { className: "close_btn", onClick: this.closeMobileFilter })
						),
						this.getMobileMenu()
					)
				)
			),
			this.renderQuickMenuModal()
		);
	}
});
var EoxQuickViewColumn = createReactClass({
	hasOptions: function (v) {
		return typeof v["options"] != "undefined";
	},

	getOptionsHtml: function (v) {
		var that = this;

		if (this.hasOptions(v)) {
			return React.createElement(
				"ul",
				{ className: "options" },
				v.options.map(function (v, i) {
					return React.createElement(
						"li",
						{ onClick: that.props.clicked_option, key: 1000 + i,
							className: "option " + (that.props.is_current(v) ? "current" : ""),
							"data-idx": i,
							"data-field": v.field,
							"data-db": v.db,
							"data-value": v.value
						},
						v.name
					);
				})
			);
		} else {
			return "";
		}
	},

	render: function () {
		var has_options = this.hasOptions(this.props.view);
		return React.createElement(
			"div",
			{ className: "col " + (this.props.is_current(this.props.view) ? "current" : "") + " " + (has_options ? "has_options" : "") + " " + this.props.view.field + " " + (this.props.is_open_view(this.props.view) ? "open" : "") },
			React.createElement(
				"div",
				{ className: "col_img_text_container " + (has_options ? "has_options" : ""), "data-idx": this.props.idx,
					onClick: this.props.clicked_option, "data-field": this.props.view.field,
					"data-value": this.props.view.value, "data-name": this.props.view.name },
				React.createElement("div", { className: "more_indicator" }),
				React.createElement("div", { className: "col_img" }),
				React.createElement(
					"div",
					{ className: "col_text" },
					this.props.view.name
				)
			),
			this.getOptionsHtml(this.props.view)
		);
	}
});

var EoxQuickView = createReactClass({
	// views: [
	// 	{name: "Planet", field: "planet", value: "exo_KEPLER-16_B"},
	// 	{name: "System", field: "system", value: "KEPLER-16"},
	// 	{name: "Star", field: "star",
	// 		options: [
	// 			{name: "Kepler-16 A", value: "KEPLER-16-A", field: "star"},
	// 			{name: "Kepler-16 B",  value: "KEPLER-16-B", field: "star"}
	// 		] }
	// ],

	getInitialState: function () {
		return {
			view_value: 'KEPLER-16',
			view: 'system',
			compare_system: false,
			compare_earth: false,
			compare_jupiter: false,
			compare_sun: false,
			compare_sun_jupiter: false,
			compare_mission: '', //'',school_bus,scientist
			mobile_open: false,
			nav_level: 0,
			menu_options: this.props.views,
			open_view: null // Toggle view menu with multiple options on touch devices
		};
	},

	componentDidMount: function () {
		var that = this;
		$(document).on('reset_compares', this.resetCompares);
		$('body').on("close_menus", function () {
			that.closeView();
		});
	},

	componentWillUnmount: function () {
		$(document).off('reset_compares');
		$('.search_container').off("close_menus");
	},

	isCurrent: function (view) {
		if (typeof view['value'] == 'undefined') {
			return view.field == this.props.view;
		} else {
			return view.value == this.props.target && view.field == this.props.view;
		}
	},

	resetCompares: function () {
		var _this = this;

		console.log("resetCompares");
		this.setState({ compare_system: false, compare_earth: false, compare_jupiter: false, compare_sun: false,
			compare_sun_jupiter: false, compare_mission: '' }, function () {
			_this.props.ranger_update({ removeCompare: null }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	checkAndRemoveCompare: function () {
		var status = { mobile_open: false };
		if (this.props.view == 'planet' && (this.state.compare_earth || this.state.compare_jupiter)) {
			status["compare_earth"] = false;
			status["compare_jupiter"] = false;
			this.props.ranger_update({ removeCompare: null }, null, function (ack) {});
		} else if (this.props.view == 'system' && this.state.compare_system) {
			status["compare_system"] = false;
			var val = this.props.target;
			this.props.ranger_update({ showSystemCompare: { name: val, show: false } }, null, function (ack) {
				console.log(ack);
			});
		} else if (this.props.view == 'star' && (this.state.compare_sun || this.state.compare_sun_jupiter)) {
			status["compare_sun"] = false;
			status["compare_sun_jupiter"] = false;
			var val = this.props.target.toUpperCase();
			this.props.comparing_sun(false);
			this.props.ranger_update({ removeCompare: null }, null, function (ack) {
				console.log(ack);
			});
		}

		return status;
	},

	clickedView: function (e) {
		var field = e.currentTarget.getAttribute("data-field");
		var value = e.currentTarget.getAttribute("data-value");
		var status = this.checkAndRemoveCompare();

		console.log("clickedView");
		this.setState(status, function () {
			this.props.view_changed(value, field);
		});

		var name = e.currentTarget.getAttribute("data-name");
		if (this.state.open_view === name) {
			this.setState({ open_view: null });
		} else {
			this.setState({ open_view: name });
		}
	},

	isOpenView: function (view) {
		if (view) {
			return this.state.open_view === view.name;
		} else {
			return false;
		}
	},

	closeView: function (e) {
		this.setState({ open_view: null });
	},

	handleSystemCompare: function (compare) {
		var val = this.props.target;
		console.log("handleSystemCompare");
		this.setState({ compare_system: compare, mobile_open: false }, function () {
			this.props.ranger_update({ showSystemCompare: { name: val, show: compare } }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	toggleSystemCompare: function () {
		this.handleSystemCompare(!this.state.compare_system);
	},

	enableSystemCompare: function () {
		this.handleSystemCompare(true);
	},

	disableSystemCompare: function () {
		this.handleSystemCompare(false);
	},

	enableSunCompare: function () {
		this.setState({ compare_sun_jupiter: false, compare_sun: true, mobile_open: false }, function () {
			this.props.comparing_sun(true);
			this.props.ranger_update({ showCompareObject: "Compare_Sun" }, null, function (ack) {
				console.log(ack);
			});
		});
	},
	enableSunJupiterCompare: function () {
		this.setState({ compare_sun_jupiter: true, compare_sun: false, mobile_open: false }, function () {
			this.props.comparing_sun(true);
			this.props.ranger_update({ showCompareObject: "Compare_Jupiter" }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	enableJupiterCompare: function () {
		var val = this.props.target;
		console.log("enableJupiterCompare");

		this.setState({ compare_jupiter: true, compare_earth: false, mobile_open: false }, function () {
			this.props.ranger_update({ showCompareObject: "Compare_Jupiter" }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	enableEarthCompare: function () {
		var val = this.props.target;
		console.log("enableEarthCompare");

		this.setState({ compare_jupiter: false, compare_earth: true, mobile_open: false }, function () {
			this.props.ranger_update({ showCompareObject: "Compare_Earth" }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	removeCompare: function () {
		console.log("removeCompare");
		var reset_star = false;
		if (this.state.compare_sun || this.state.compare_sun_jupiter) {
			reset_star = true;
		}
		this.setState({ compare_mission: '', compare_jupiter: false, compare_earth: false, compare_sun: false,
			compare_sun_jupiter: false, mobile_open: false }, function () {
			if (this.props.comparing_sun) {
				this.props.comparing_sun(false);
			}
			this.props.ranger_update({ removeCompare: null }, null, function (ack) {});
			if (reset_star) {
				this.props.view_changed(this.props.target, "star");
			}
		});
	},

	changeComparisons: function (e) {
		if (e.currentTarget.value == "earth") {
			this.enableEarthCompare();
		} else if (e.currentTarget.value == "jupiter") {
			this.enableJupiterCompare();
		} else if (e.currentTarget.value == "sun") {
			this.enableSunCompare();
		} else if (e.currentTarget.value == "sun_jupiter") {
			this.enableSunJupiterCompare();
		} else if (e.currentTarget.value == "") {
			this.removeCompare();
		}
	},

	lookupCompare: function () {
		if (this.state.compare_earth) {
			return "earth";
		} else if (this.state.compare_jupiter) {
			return "jupiter";
		} else if (this.state.compare_sun) {
			return "sun";
		} else if (this.state.compare_sun_jupiter) {
			return "sun_jupiter";
		} else {
			return "";
		}
	},

	getViewActions: function () {
		if (this.props.view == "system") {
			return React.createElement(
				"div",
				{ className: "actions" },
				React.createElement(
					"div",
					{ className: "action" },
					React.createElement(
						"a",
						{ onClick: this.toggleSystemCompare, className: "button " + (this.state.compare_system ? "current" : "") },
						"COMPARE TO OUR SOLAR SYSTEM"
					)
				)
			);
		} else if (this.props.view == "planet") {
			if (this.canCompare()) {
				return React.createElement(
					"div",
					{ className: "actions" },
					React.createElement(
						"div",
						{ className: "action" },
						React.createElement(
							"select",
							{ className: "multiple_comparisons " + this.lookupCompare(), onChange: this.changeComparisons,
								value: this.lookupCompare() },
							React.createElement(
								"option",
								{ value: "" },
								"COMPARE"
							),
							React.createElement(
								"option",
								{ value: "earth" },
								"Compare to Earth"
							),
							React.createElement(
								"option",
								{ value: "jupiter" },
								"Compare to Jupiter"
							)
						)
					)
				);
			} else {
				return null;
			}
		} else if (this.props.view == "star") {
			if (this.canCompare()) {
				return React.createElement(
					"div",
					{ className: "actions" },
					React.createElement(
						"div",
						{ className: "action" },
						React.createElement(
							"select",
							{ className: "multiple_comparisons " + this.lookupCompare(), onChange: this.changeComparisons,
								value: this.lookupCompare() },
							React.createElement(
								"option",
								{ value: "" },
								"COMPARE"
							),
							React.createElement(
								"option",
								{ value: "sun" },
								"Compare to Sun"
							)
						)
					)
				);
			} else {
				return null;
			}
		} else if (this.props.view == "mission") {
			return React.createElement(
				"select",
				{ className: "mission_compare", value: this.state.compare_mission, onChange: this.compareMission },
				React.createElement(
					"option",
					{ value: "" },
					"Compare Size"
				),
				React.createElement(
					"option",
					{ value: "scientist" },
					"Scientist"
				),
				React.createElement(
					"option",
					{ value: "school_bus" },
					"School Bus"
				)
			);
		} else {
			return null;
		}
	},

	openMobileFilter: function () {
		console.log("openMobileFilter");

		this.setState({ mobile_open: true });
	},

	closeMobileFilter: function () {
		console.log("closeMobileFilter");

		this.setState({ mobile_open: false });
	},

	goBack: function () {
		console.log("goBack");

		this.setState({ menu_options: this.props.views, nav_level: 0 });
	},

	getMobileHeader: function () {
		if (this.state.nav_level == 0) {
			return React.createElement(
				"span",
				{ className: "filter_title" },
				"VIEW OPTIONS"
			);
		} else {
			return React.createElement("span", { className: "filter_title back", onClick: this.goBack });
		}
	},

	loadOptions: function (e) {
		var idx = parseInt(e.currentTarget.getAttribute("data-idx"));
		var options = this.props.views[idx].options;
		console.log("loadOptions");

		this.setState({ menu_options: options, nav_level: 1 });
	},

	loadMobileCompareOptions: function () {
		console.log("loadMobileCompareOptions");

		this.setState({ menu_options: [], nav_level: 1 });
	},

	getCompareOptions: function () {
		if (this.state.nav_level == 0 && this.canCompare()) {
			return React.createElement(
				"ul",
				{ className: "compare" },
				React.createElement(
					"li",
					{ onClick: this.loadMobileCompareOptions },
					React.createElement("div", { className: "icon" }),
					"Compare",
					React.createElement(
						"div",
						{ className: "arrow_box" },
						React.createElement("span", { className: "arrow_right" })
					)
				)
			);
		} else if (this.state.menu_options && this.state.menu_options.length == 0) {
			if (this.props.view == 'planet') {
				if (this.state.nav_level > 0 && this.canCompare()) {
					return React.createElement(
						"ul",
						{ className: "compare" },
						React.createElement(
							"li",
							{ className: this.state.compare_jupiter ? 'current' : '', onClick: this.enableJupiterCompare },
							"Compare to Jupiter"
						),
						React.createElement(
							"li",
							{ className: this.state.compare_earth ? 'current' : '', onClick: this.enableEarthCompare },
							"Compare to Earth"
						),
						React.createElement(
							"li",
							{ className: !this.state.compare_jupiter && !this.state.compare_earth ? 'current' : '', onClick: this.removeCompare },
							"Compare to None"
						)
					);
				} else {
					return "";
				}
			} else if (this.state.nav_level > 0 && this.props.view == 'system') {
				return React.createElement(
					"ul",
					{ className: "compare" },
					React.createElement(
						"li",
						{ className: this.state.compare_system ? 'current' : '', onClick: this.enableSystemCompare },
						"Compare to Our Solar System"
					),
					React.createElement(
						"li",
						{ className: !this.state.compare_system ? 'current' : '', onClick: this.disableSystemCompare },
						"Compare to None"
					)
				);
			} else if (this.state.nav_level > 0 && this.props.view == 'star') {
				return React.createElement(
					"ul",
					{ className: "compare" },
					React.createElement(
						"li",
						{ className: this.state.compare_sun ? 'current' : '', onClick: this.enableSunCompare },
						"Compare to Sun"
					),
					React.createElement(
						"li",
						{ className: !this.state.compare_sun && !this.state.compare_sun_jupiter ? 'current' : '', onClick: this.removeCompare },
						"Compare to None"
					)
				);
			} else if (this.state.nav_level > 0 && this.props.view == 'mission') {
				return React.createElement(
					"ul",
					{ className: "compare" },
					React.createElement(
						"li",
						{ className: this.state.compare_mission == 'scientist' ? 'current' : '', onClick: this.enableScientistCompare },
						"Compare to Scientist"
					),
					React.createElement(
						"li",
						{ className: this.state.compare_mission == 'school_bus' ? 'current' : '', onClick: this.enableSchoolBusCompare },
						"Compare to School Bus"
					),
					React.createElement(
						"li",
						{ className: this.state.compare_mission == '' ? 'current' : '', onClick: this.removeCompare },
						"Compare to None"
					)
				);
			} else {
				return "";
			}
		} else {
			return "";
		}
	},

	//if pl_radj missing then ranger displays as 1 jupiter so don't compare
	//if st_rad > 0 then can compare
	canCompare: function () {
		var view = arguments.length <= 0 || arguments[0] === undefined ? this.props.view : arguments[0];

		if (view == 'system' || view == 'mission') {
			return true;
		}
		var can_compare = false;
		var that = this;
		this.props.views.map(function (v) {
			if (v.field == view) {
				if (typeof v.options != "undefined") {
					v.options.map(function (w) {
						if (w.value == that.props.target) {
							can_compare = w.can_compare;
						}
					});
				} else {
					can_compare = v.can_compare;
				}
			}
		});
		return can_compare;
	},

	getMobileMenu: function () {
		var that = this;
		var icon = this.state.nav_level == 0 ? React.createElement("div", { className: "icon" }) : '';
		var options = this.state.nav_level == 0 ? this.props.views : this.state.menu_options;
		if (options) {
			return React.createElement(
				"div",
				{ className: "view_options" },
				React.createElement(
					"ul",
					{ className: "menu_options" },
					options.map(function (v, i) {
						var has_options = typeof v["options"] != "undefined";
						var arrow = undefined,
						    click = undefined;
						if (has_options) {
							arrow = React.createElement(
								"div",
								{ className: "arrow_box" },
								React.createElement("span", { className: "arrow_right" })
							);
							click = that.loadOptions;
						} else {
							click = that.clickedView;
						}
						return React.createElement(
							"li",
							{ className: (that.isCurrent(v) ? "current" : "") + " " + v.field, key: i, "data-idx": i, onClick: click, "data-value": v.value, "data-field": v.field },
							icon,
							v.name,
							arrow
						);
					})
				),
				this.getCompareOptions()
			);
		} else {
			return React.createElement(
				"div",
				{ className: "view_options" },
				React.createElement("ul", { className: "menu_options" }),
				this.getCompareOptions()
			);
		}
	},
	enableScientistCompare: function () {
		this.setCompareMission('scientist');
	},

	enableSchoolBusCompare: function () {
		this.setCompareMission('school_bus');
	},

	removeCompareMission: function () {
		this.setCompareMission('');
	},

	compareMission: function (e) {
		var compare = e.currentTarget.value;
		this.setCompareMission(compare);
	},

	setCompareMission: function (compare) {
		switch (compare) {
			case 'school_bus':
				__ranger.update({ exo: { showCompareObject: "Compare_School_Bus" } });
				break;
			case 'scientist':
				__ranger.update({ exo: { showCompareObject: "Compare_Scientist" } });
				break;
			default:
				__ranger.update({ exo: { removeCompare: null } });
		}
		this.setState({ compare_mission: compare, mobile_open: false });
	},

	getEntablature: function () {
		if (this.props.title) {
			return React.createElement(
				"div",
				{ className: "entablature" },
				React.createElement(
					"div",
					{ className: "metope" },
					React.createElement("hr", null),
					React.createElement(
						"span",
						null,
						this.props.title
					),
					React.createElement("hr", null)
				)
			);
		} else {
			return null;
		}
	},

	getColumns: function () {
		var that = this;

		if (this.props.views) {
			return React.createElement(
				"div",
				{ className: "cols" },
				this.props.views.map(function (v, i) {
					return React.createElement(EoxQuickViewColumn, { key: i, view: v, idx: i,
						current_view: that.props.view,
						is_current: that.isCurrent,
						clicked_option: that.clickedView,
						current_view_value: that.props.target,
						is_open_view: that.isOpenView
					});
				})
			);
		} else {
			return null;
		}
	},

	render: function () {
		return React.createElement(
			"div",
			{ className: "quick_menus" },
			React.createElement(
				"div",
				{ className: "eox_quick_menu desktop galaxy" },
				this.getEntablature(),
				this.getColumns(),
				React.createElement(
					"div",
					{ className: "stylobate" },
					this.getViewActions()
				)
			),
			React.createElement(
				"div",
				{ className: "eox_quick_menu mobile galaxy" },
				React.createElement("div", { className: "expander", onClick: this.openMobileFilter }),
				React.createElement(
					"div",
					{ className: "filter_panel " + (this.state.mobile_open ? 'open' : '') },
					React.createElement("div", { className: "modal_background", onClick: this.closeMobileFilter }),
					React.createElement(
						"div",
						{ className: "menu" },
						React.createElement(
							"header",
							null,
							this.getMobileHeader(),
							React.createElement("span", { className: "close_btn", onClick: this.closeMobileFilter })
						),
						this.getMobileMenu()
					)
				)
			)
		);
	}
});
/*<option value="sun_jupiter">Compare to Jupiter</option>*/ /*<li className={this.state.compare_sun_jupiter ? 'current' : ''} onClick={this.enableSunJupiterCompare}>Compare to Jupiter</li>*/;
var EoxSettings = createReactClass({
	getInitialState: function () {
		//no idea what the defaults are here...
		return {
			panel_open: false,
			show_star_field: true,
			show_labels: this.props.show_labels,
			show_grid: false,
			star_brightness: "100",
			star_symbol: 'star'
		};
	},

	settings: [
	// {label: 'Show entire star field', val: 'show_star_field', type: 'checkbox', onchange: ''},
	{ label: 'Show labels', val: 'show_labels', type: 'checkbox' },
	// {label: 'Show grid', val: 'show_grid', type: 'checkbox'},
	{ label: 'Planetary lighting', val: 'headlight', type: 'checkbox', external: true }],

	// {label: 'Star brightness', val: 'star_brightness', type: 'range'},

	galaxy_view: [{ label: 'Star symbol', val: 'star_symbol', type: 'radio', options: ['dot', 'num', 'star'] }],

	toggleCheckbox: function (e) {
		var el = e.currentTarget.id;
		console.log('toggleCheckbox', el);
		this.toggleEl(el, !this.state[el]);
	},

	toggleEl: function (el, val) {
		switch (el) {
			case 'show_star_field':
				this.setState({ show_star_field: val }, function () {
					this.props.ranger_update({ showStars: { value: val } }, false, function (ack) {
						console.log(ack);
					});
				});
				break;
			case 'show_labels':
				this.setState({ show_labels: val }, function () {
					this.props.toggleLabels();
				});
				break;
			case 'show_grid':
				this.setState({ show_grid: val }, function () {
					console.log('dkh to update ranger...');
				});
				break;
			case 'headlight':
				this.props.set_headlight(!this.props.headlight);
				break;
			default:
				console.error("Unknown setting for toggle el.", el);
		}
	},

	changeRange: function (e) {
		var el = e.currentTarget.id;
		var val = e.currentTarget.value;
		console.log('toggleCheckbox', el);
		if (el == "star_brightness") {
			this.setState({ star_brightness: val }, function () {
				console.log('dkh to update ranger...');
			});
		} else {
			console.error("Unknown setting for range el.", el);
		}
	},

	changeRadio: function (e) {
		var that = this;
		var el = e.currentTarget.id;
		var val = e.currentTarget.value;
		console.log('changeRadio', el);

		this.setState({ star_symbol: val }, function () {
			var v = undefined;
			// number passed in must be a float for some reason, variablizing turns these into int's no matter what I try - RK
			if (this.state.star_symbol == 'dot') {
				__ranger.update({ exo: { setSprite: 0.0 } }, null, function (ack) {
					console.log(ack);
				});
			} else if (this.state.star_symbol == 'num') {
				__ranger.update({ exo: { setSprite: 1.0 } }, null, function (ack) {
					console.log(ack);
				});
			} else {
				__ranger.update({ exo: { setSprite: 2.0 } }, null, function (ack) {
					console.log(ack);
				});
			}
		});
	},

	getInput: function (setting) {
		var _this = this;

		var val = setting.external ? this.props[setting.val] : this.state[setting.val];

		if (setting.type == 'checkbox') {
			return React.createElement(
				'span',
				{ className: 'toggle_wrapper' },
				React.createElement(
					'label',
					{ className: setting.type, htmlFor: setting.val },
					setting.label
				),
				React.createElement('input', { className: 'toggle', id: setting.val, type: 'checkbox', checked: val, onChange: this.toggleCheckbox }),
				React.createElement('div', { className: 'toggle_icon' })
			);
		} else if (setting.type == 'range') {
			return React.createElement(
				'span',
				{ className: 'toggle_wrapper' },
				React.createElement(
					'label',
					{ className: setting.type, htmlFor: setting.val },
					setting.label
				),
				React.createElement('input', { className: 'range', id: setting.val, type: 'range', value: val, min: '0', max: '100', step: '1', onChange: this.changeRange })
			);
		} else if (setting.type == 'radio') {
			var _ret = (function () {
				var that = _this;
				return {
					v: setting.options.map(function (v, i) {
						return React.createElement(
							'span',
							{ key: 100 + i, className: 'radio_button_container' },
							React.createElement('input', { className: 'radio_button', name: setting.val, id: v, value: v, type: 'checkbox', checked: val == v, onChange: that.changeRadio }),
							React.createElement(
								'label',
								{ className: setting.type, htmlFor: v },
								v
							)
						);
					})
				};
			})();

			if (typeof _ret === 'object') return _ret.v;
		} else {
			console.error('EoxSettings.getInput: unknown form element in settings.');
			return "";
		}
	},

	getMenuSection: function (setting, i) {
		if (setting.label == "Planetary lighting" && !this.props.headlight_enabled) {
			return null;
		} else {
			return React.createElement(
				'div',
				{ className: 'menu_section ' + setting.val, key: i },
				React.createElement(
					'div',
					{ className: 'menu_option' },
					React.createElement(
						'div',
						{ className: 'input_wrapper' },
						React.createElement(
							'div',
							{ className: "menu_option_title " + setting.type },
							setting.label
						),
						this.getInput(setting)
					)
				)
			);
		}
	},

	render: function () {
		var that = this;
		return React.createElement(
			'span',
			{ className: 'settings' },
			React.createElement(
				'div',
				{ className: 'settings_modal ' + (this.props.settings_panel_open ? 'open' : '') },
				React.createElement(
					'a',
					{ className: 'modal_close', onClick: this.props.toggle_settings, id: 'modal_close' },
					React.createElement('span', { className: 'modal_close_icon' })
				),
				React.createElement(
					'form',
					null,
					React.createElement(
						'div',
						{ className: 'menu_name' },
						'SETTINGS'
					),
					React.createElement(
						'div',
						{ className: 'toggle_area' },
						this.settings.map(that.getMenuSection)
					),
					React.createElement(
						'div',
						{ className: 'secondary_name' },
						'Galaxy View'
					),
					this.galaxy_view.map(that.getMenuSection)
				)
			),
			React.createElement('a', { onClick: this.props.toggle_settings, className: 'settings_icon ' + (this.props.settings_panel_open ? 'current' : '') })
		);
	}
});
var EoxTelescopeView = createReactClass({
  google_api_key: "AIzaSyD-ILk-ny3xs_whBFy0ULPXlDJDv7IYt6Q", //from Jason Craig originally for eclipse
  getInitialState: function () {
    return {
      go_modal_open: false,
      lat: null,
      lng: null,
      elevation: null,
      direction: null,
      telescope_visible: false,
      showing_visible: false,
      telescope_constellations: false,
      showing_constellations: false,
      named_location: null,
      mobile_options_open: false
    };
  },

  componentDidMount: function () {
    $('body').on('pick_earth', this.onPickEarthLocation);
    $('body').on('hide_constellations', this.hideConstellations);
    $('body').on('show_all_stars', this.showAll);

    window.addEventListener('mousemove', this.onMouseMove);
  },

  onMouseMove: function (e) {
    if (this.props.view == 'earth') {
      document.documentElement.style.setProperty('--mouse_x', e.clientX);
      document.documentElement.style.setProperty('--mouse_y', e.clientY);

      // Give the stylesheet a cue when the mouse is outside of an invisible square
      // that is constrained to the height or width of the screen (whichever is smaller).
      // (The stylesheet will use this information to hide the crosshairs element.)

      var window_margin = 250; // Maximum width of the eox_current_location element, in pixels

      var distance = window_margin;
      var target_size = window.innerHeight > window.innerWidth ? window.innerWidth : window.innerHeight;
      var target_width = target_size;
      var target_height = target_size;
      var target_x_start = (window.innerWidth - target_size) / 2;
      var target_y_start = (window.innerHeight - target_size) / 2;

      var mouse_x = e.clientX - target_x_start;
      var mouse_y = e.clientY - target_y_start;

      if (mouse_x < window_margin) {
        distance = mouse_x / window_margin;
      } else if (mouse_x > target_width - window_margin) {
        distance = (target_width - mouse_x) / window_margin;
      } else if (mouse_y < window_margin) {
        distance = mouse_y / window_margin;
      } else if (mouse_y > target_height - window_margin) {
        distance = (target_height - mouse_y) / window_margin;
      }

      if (distance < 0) distance = 0;
      if (distance > window_margin) distance = window_margin;

      document.documentElement.style.setProperty('--mouse_percentage_from_edge', distance);

      if (e.clientX > window.innerWidth - window_margin) {
        document.documentElement.classList.add('is_near_right_screen_edge');
      } else {
        document.documentElement.classList.remove('is_near_right_screen_edge');
      }
    }
  },

  getBearingHtml: function () {
    if (this.state.elevation && this.state.direction && this.props.view == 'telescope') {
      return React.createElement(
        'div',
        { className: 'bearings' },
        React.createElement(
          'div',
          { className: 'title' },
          'Telescope Bearing'
        ),
        React.createElement(
          'div',
          { className: 'direction' },
          React.createElement(
            'svg',
            { height: '7', viewBox: '0 0 15 7', width: '15', xmlns: 'http://www.w3.org/2000/svg' },
            React.createElement('path', { d: 'm19.75 62.7040518 1-2.4h5.6v2.4c0 .3.2.3.4.2l4.1-3.1c.2-.2.2-.4 0-.6l-4.1-3.1c-.2-.2-.4-.1-.4.2v2.3h-5.6v-2.3c0-.3-.2-.3-.4-.2l-4.2 3.1c-.2.2-.2.4 0 .6l4.1 3.1c.3.2-.5.1-.5-.2z', fill: '#fff', transform: 'translate(-16 -56)' })
          ),
          this.state.direction,
          '',
          this.getCardinal(parseFloat(this.state.direction))
        ),
        React.createElement(
          'div',
          { className: 'elevation' },
          React.createElement(
            'svg',
            { height: '15', viewBox: '0 0 7 15', width: '7', xmlns: 'http://www.w3.org/2000/svg' },
            React.createElement('path', { d: 'm20.75 83.7040518v-2.4h5.6v2.4c0 .3.2.3.4.2l4.1-3.1c.2-.2.2-.4 0-.6l-4.1-3.1c-.2-.2-.4-.1-.4.2v2.3h-5.6v-2.3c0-.3-.2-.3-.4-.2l-4.2 3.1c-.2.2-.2.4 0 .6l4.1 3.1c.3.2.5.1.5-.2z', fill: '#fff', transform: 'matrix(0 -1 1 0 -77.004052 31.004052)' })
          ),
          this.state.elevation,
          ''
        )
      );
    } else {
      return null;
    }
  },

  changeTelescopeVisible: function (e) {
    console.log(e.currentTarget);
    var val = !this.state.telescope_visible;
    this.setState({ telescope_visible: val, showing_visible: val }, function () {
      console.log("toggle ranger visible", val);
      if (val) {
        __ranger.update({ exo: { enableByFilters: [{ field: "visible", value: true }] } }, null, function (ack) {
          console.log(ack);
        });
      } else {
        __ranger.update({ exo: { showStars: { value: true } } }, null, function (ack) {
          console.log(ack);
        });
        // __ranger.update( { exo:  {enableByFilters: [{field: "all", value: true}] } }, null, function(ack){console.log(ack)} );
      }
    });
  },

  showAll: function () {
    if (this.state.telescope_visible && this.state.showing_visible) {
      this.setState({ showing_visible: false }, function () {
        __ranger.update({ exo: { enableByFilters: [{ field: "all", value: true }] } }, null, function (ack) {
          console.log(ack);
        });
      });
    }
  },

  showVisible: function () {
    if (this.state.telescope_visible && !this.state.showing_visible) {
      this.setState({ showing_visible: true }, function () {
        __ranger.update({ exo: { enableByFilters: [{ field: "visible", value: true }] } }, null, function (ack) {
          console.log(ack);
        });
      });
    }
  },
  //used to toggle view on/off in telescope (on-earth)
  changeTelescopeConstellations: function (e) {
    var val = !this.state.telescope_constellations;
    this.setState({ telescope_constellations: val, showing_constellations: val }, function () {
      console.log("toggle ranger constellations", val);
      var show_hide = val ? "show" : "hide";
      var msg = { scene: {} };
      var msg2 = { scene: {} };
      msg.scene[show_hide] = { lod: { node: "Constellations", name: "constellationLines" } };
      msg2.scene[show_hide] = { lod: { node: "Constellations", name: "constellationLabels" } };
      __ranger.update(msg);
      __ranger.update(msg2);
    });
  },

  //used to show constellations if user clicked constellations, then moved to another view
  showConstellations: function () {
    if (this.state.telescope_constellations && !this.state.showing_constellations) {
      this.setState({ showing_constellations: true }, function () {
        __ranger.update({ scene: { show: { lod: { node: "Constellations", name: "constellationLines" } } } });
        __ranger.update({ scene: { show: { lod: { node: "Constellations", name: "constellationLabels" } } } });
      });
    }
  },
  //used to hide constellations if user clicked constellations, then moved to another view
  hideConstellations: function () {
    if (this.state.telescope_constellations && this.state.showing_constellations) {
      this.setState({ showing_constellations: false }, function () {
        __ranger.update({ scene: { hide: { lod: { node: "Constellations", name: "constellationLines" } } } });
        __ranger.update({ scene: { hide: { lod: { node: "Constellations", name: "constellationLabels" } } } });
      });
    }
  },

  openMobile: function (e) {
    this.setState({ mobile_options_open: true });
  },
  closeMobile: function (e) {
    this.setState({ mobile_options_open: false });
  },

  getTelescopeOptions: function () {
    if (this.props.view == 'telescope') {
      return React.createElement(
        'div',
        { className: 'telescope_layer' },
        this.getBearingHtml(),
        React.createElement(
          'div',
          { className: 'change_location' },
          React.createElement(
            'a',
            { className: 'back_btn', onClick: this.props.on_earth_view },
            React.createElement(
              'svg',
              { height: '12', viewBox: '0 0 16 12', width: '16', xmlns: 'http://www.w3.org/2000/svg' },
              React.createElement('path', { d: 'm29.025 20.0744333v3.8c0 .3-.3.5-.7.5h-5.6v3.2c0 .3-.3.5-.6.3l-7.9-5.5c-.3-.2-.3-.5 0-.7l8-5.5c.2-.3.5-.2.5.2v3.2h5.6c.4 0 .7.2.7.5z', fill: '#8b9ce0', transform: 'translate(-14 -16)' })
            )
          ),
          React.createElement(
            'div',
            { className: 'lat_lng' },
            React.createElement(
              'div',
              { className: 'location_label' },
              'Location:'
            ),
            this.getLatLngDisplay()
          ),
          React.createElement(
            'a',
            { className: 'secondary_button', onClick: this.props.on_earth_view },
            'Change Location'
          )
        ),
        React.createElement(
          'div',
          { className: 'telescope_settings desktop' },
          React.createElement(
            'div',
            { className: 'title' },
            'Display'
          ),
          React.createElement(
            'div',
            { className: 'options' },
            React.createElement(
              'label',
              null,
              React.createElement('input', { type: 'checkbox', checked: this.state.telescope_visible, onChange: this.changeTelescopeVisible }),
              React.createElement('span', { className: 'icon' }),
              'Only stars visible to the naked eye'
            ),
            React.createElement(
              'label',
              null,
              React.createElement('input', { type: 'checkbox', checked: this.state.telescope_constellations, onChange: this.changeTelescopeConstellations }),
              React.createElement('span', { className: 'icon' }),
              'Constellations'
            )
          )
        ),
        React.createElement(
          'div',
          { className: 'telescope_settings eox_quick_menu mobile' },
          React.createElement('div', { className: 'expander', onClick: this.openMobile }),
          React.createElement(
            'div',
            { className: 'filter_panel ' + (this.state.mobile_options_open ? "open" : "") },
            React.createElement('div', { className: 'modal_background', onClick: this.closeMobile }),
            React.createElement(
              'div',
              { className: 'menu' },
              React.createElement(
                'header',
                null,
                React.createElement(
                  'span',
                  { className: 'filter_title' },
                  'VIEW OPTIONS'
                ),
                React.createElement('span', { className: 'close_btn', onClick: this.closeMobile })
              ),
              React.createElement(
                'div',
                { className: 'view_options' },
                React.createElement(
                  'ul',
                  { className: 'menu_options' },
                  React.createElement(
                    'li',
                    { className: 'visible_stars ' + (this.state.telescope_visible ? 'current' : '') },
                    React.createElement(
                      'span',
                      { className: 'toggle_wrapper' },
                      React.createElement(
                        'label',
                        { className: 'toggler' },
                        React.createElement(
                          'span',
                          { className: 'toggler_text' },
                          'Only stars visible to the naked eye'
                        ),
                        React.createElement('input', { type: 'checkbox', className: 'toggle', checked: this.state.telescope_visible, onChange: this.changeTelescopeVisible }),
                        React.createElement('div', { className: 'toggle_icon' })
                      )
                    )
                  ),
                  React.createElement(
                    'li',
                    { className: 'constellations ' + (this.state.telescope_constellations ? 'current' : '') },
                    React.createElement(
                      'span',
                      { className: 'toggle_wrapper' },
                      React.createElement(
                        'label',
                        { className: 'toggler' },
                        React.createElement(
                          'span',
                          { className: 'toggler_text' },
                          'Constellations'
                        ),
                        React.createElement('input', { type: 'checkbox', className: 'toggle', checked: this.state.telescope_constellations, onChange: this.changeTelescopeConstellations }),
                        React.createElement('div', { className: 'toggle_icon' })
                      )
                    )
                  )
                )
              )
            )
          )
        )
      );
    } else {
      return null;
    }
  },

  onPickEarthLocation: function (e) {
    var that = this;
    if (this.props.view == 'earth') {
      console.log("pick earth");
      __ranger.update({ exo: { getLatLong: true } }, null, function (ack) {
        if (ack && ack.success && ack.message && typeof ack.message.latitude != 'undefined' && typeof ack.message.longitude != 'undefined') {
          that.setState({ lat: ack.message.latitude, lng: ack.message.longitude, go_modal_open: true }, function () {
            that.getLocationFromCoordinates(ack.message.latitude, ack.message.longitude);
          });
        } else {
          console.error("error getting lat/lng", ack);
          that.setState({ lat: null, lng: null, go_modal_open: false, named_location: null });
        }
      });
    }
  },

  //given "0-360" returns the nearest cardinal direction "N/NE/E/SE/S/SW/W/NW/N"
  // from https://gist.github.com/basarat/4670200
  getCardinal: function (angle) {
    var directions = 8;

    var degree = 360 / directions;
    angle = angle + degree / 2;

    if (angle >= 0 * degree && angle < 1 * degree) return "N";
    if (angle >= 1 * degree && angle < 2 * degree) return "NE";
    if (angle >= 2 * degree && angle < 3 * degree) return "E";
    if (angle >= 3 * degree && angle < 4 * degree) return "SE";
    if (angle >= 4 * degree && angle < 5 * degree) return "S";
    if (angle >= 5 * degree && angle < 6 * degree) return "SW";
    if (angle >= 6 * degree && angle < 7 * degree) return "W";
    if (angle >= 7 * degree && angle < 8 * degree) return "NW";
    //Should never happen:
    return "N";
  },

  closeGoModal: function (e) {
    this.setState({ go_modal_open: false });
  },

  getLatLngDisplay: function () {
    if (this.state.named_location) {
      return this.state.named_location;
    } else if (this.state.lat && this.state.lng) {
      var lat_cardinal = this.state.lat > 0 ? 'N' : 'S';
      var lng_cardinal = this.state.lng > 0 ? 'E' : 'W';
      return Math.abs(this.state.lat.toFixed(2)) + ' ' + lat_cardinal + ', ' + Math.abs(this.state.lng.toFixed(2)) + ' ' + lng_cardinal;
    } else {
      return "";
    }
  },

  goToLatLng: function () {
    var that = this;
    this.props.on_telescope();

    // window.setTimeout(this.showVisible, 1000) //no idea why this can't run now... maybe getting borked by state update?
    this.setState({ go_modal_open: false, showing_constellations: false, telescope_constellations: false,
      telescope_visible: false, showing_visible: false }, function () {
      __ranger.update({ scene: { hide: { lod: { node: "Constellations", name: "constellationLines" } } } });
      __ranger.update({ scene: { hide: { lod: { node: "Constellations", name: "constellationLabels" } } } });
      __ranger.update({ exo: { showStars: { value: true } } });
      __ranger.update({ exo: { gotoLatLong: { latitude: this.state.lat, longitude: this.state.lng } } }, null, function (ack) {
        console.log(ack);
        that.getBearing();
      });
    });
  },

  getLocationStatusDisplay: function () {
    var coordinates = undefined; // TBD: Can we display coordinates? 24.84 N, 82.49 E
    if (this.props.view === 'earth' && !this.state.go_modal_open && !this.props.hide_location_status) {
      return React.createElement(
        'section',
        { role: 'status', className: 'eox_current_location', id: 'eox_current_location' },
        React.createElement(
          'h6',
          { className: 'eox_current_location_title' },
          React.createElement(
            'svg',
            { width: '20', height: '20', viewBox: '0 0 26 26', className: 'eox_current_location_icon' },
            React.createElement(
              'switch',
              null,
              React.createElement('path', { fill: 'currentColor', d: 'M24.6,11.6 L23,11.6 C22.4,7.2 18.9,3.7 14.4,3 L14.4,1.4 C14.4,0.6 13.8,0 13,0 C12.2,0 11.6,0.6 11.6,1.4 L11.6,3 C7.1,3.6 3.6,7.1 3,11.6 L1.4,11.6 C0.6,11.6 0,12.2 0,13 C0,13.8 0.6,14.4 1.4,14.4 L3,14.4 C3.6,18.8 7.1,22.3 11.6,23 L11.6,24.6 C11.6,25.4 12.2,26 13,26 C13.8,26 14.4,25.4 14.4,24.6 L14.4,23 C18.8,22.4 22.3,18.9 23,14.4 L24.6,14.4 C25.4,14.4 26,13.8 26,13 C26,12.2 25.4,11.6 24.6,11.6 Z M14.4,20.1 L14.4,18.8 C14.4,18 13.8,17.4 13,17.4 C12.2,17.4 11.6,18 11.6,18.8 L11.6,20.1 C8.8,19.5 6.5,17.3 6,14.5 L7.3,14.5 C8.1,14.5 8.7,13.9 8.7,13.1 C8.7,12.3 8.1,11.7 7.3,11.7 L5.9,11.7 C6.5,8.9 8.7,6.6 11.5,6.1 L11.5,7.4 C11.5,8.2 12.1,8.8 12.9,8.8 C13.7,8.8 14.3,8.2 14.3,7.4 L14.3,5.9 C17.1,6.5 19.4,8.7 19.9,11.5 L18.6,11.5 C17.8,11.5 17.2,12.1 17.2,12.9 C17.2,13.7 17.8,14.3 18.6,14.3 L19.9,14.3 C19.5,17.3 17.3,19.5 14.4,20.1 Z' }),
              React.createElement(
                'foreignObject',
                null,
                coordinates ? 'Your current location is' : ''
              )
            )
          )
        ),
        React.createElement(
          'p',
          { className: 'eox_current_location_coordinates' },
          coordinates ? coordinates : 'Click anywhere on the globe'
        )
      );
    } else {
      return null;
    }
  },

  getBearing: function () {
    var that = this;
    if (this.props.view == 'telescope' || this.props.view == 'earth') {
      __ranger.update({ exo: { getElevDir: true } }, null, function (ack) {
        // console.log(ack)
        if (ack && ack.success) {
          var direction = ((ack.message.direction + 360) % 360).toFixed(2);
          that.setState({ elevation: ack.message.elevation.toFixed(2), direction: direction });
        }
      });
      window.setTimeout(this.getBearing, 500);
    } else {
      console.log("Stop getting bearings");
    }
  },

  getLocationFromCoordinates: function (latitude, longitude) {
    console.log("get city name from google for lat: " + latitude + ", lon: " + longitude);
    var that = this;
    $.ajax({
      type: 'GET',
      dataType: "json",
      url: '//maps.googleapis.com/maps/api/geocode/json?latlng=' + latitude + ',' + longitude + '&sensor=false&key=' + this.google_api_key,
      data: {},
      success: function (data) {
        var loc = that.getNameFromGoogleResults(data);
        if (loc) {
          that.setState({ named_location: loc.title });
        } else {
          console.log('no results');
          that.setState({ named_location: null });
        }
      },
      error: function () {
        console.log('error getting city from coordinates', latitude, longitude);
      }
    });
  },

  getNameFromGoogleResults: function (data) {
    var city, state_short, state_long, country, formatted_address;
    var loc = { "in_usa": false };
    if (data['results'].length == 0) {
      return null;
    }
    loc['google_results'] = data['results'];

    var first_result = data['results'][0];
    formatted_address = first_result['formatted_address'];
    $.each(first_result['address_components'], function (i, val) {
      if (val['types'] == "locality,political") {
        if (val['long_name'] != "") {
          city = val['long_name'];
        }
      } else if (val['types'][0] == "administrative_area_level_1") {
        state_short = val['short_name'];
        state_long = val['long_name'];
      } else if (val['types'] == "country,political") {
        loc['in_usa'] = val['short_name'] == 'US';
        country = val['long_name'];
      }
    });

    if (city && state_short) {
      loc['title'] = city + ", " + state_short;
    } else if (city && country) {
      loc['title'] = city + ', ' + country;
    } else if (state_long && country) {
      loc['title'] = state_long + ', ' + country;
    } else if (country) {
      loc['title'] = country;
    }

    loc['state_long'] = state_long ? state_long : '';

    loc['lat'] = first_result['geometry']['location']['lat'];
    loc['lon'] = first_result['geometry']['location']['lng'];

    return loc;
  },

  render: function () {
    var goModalStyle = { "backgroundColor": "transparent" };

    return React.createElement(
      'div',
      null,
      React.createElement(
        Modal,
        { isOpen: this.state.go_modal_open, onClose: this.closeGoModal,
          style: goModalStyle, className: 'go_modal modal', backdropStyle: { background: "transparent" }
        },
        React.createElement(
          'div',
          { className: 'lat_lng' },
          this.getLatLngDisplay()
        ),
        React.createElement(
          'footer',
          null,
          React.createElement(
            'div',
            { className: 'button', onClick: this.goToLatLng },
            'GO'
          )
        )
      ),
      this.getLocationStatusDisplay(),
      this.getTelescopeOptions()
    );
  }
});
function onPickEarthLocation(e) {
  console.log("onPickEarthLocation");
  $('body').trigger('pick_earth');
  $('body').trigger('close_menus');
}
function onClickEarth(e) {
  console.log("click earth", e);
  $('body').trigger('click_earth', e);
}

var EyesOnExo = createReactClass({
  grid_filters: [{ name: "Featured", value: "featured" }, { name: "Weirdest Planets", value: "weirdest" }, { name: "Planet Types", value: "planet_types" }, { name: "Kepler Discoveries", value: "kepler" }, { name: "Detection Method", value: "detection" }, { name: "Observatory", value: "observatory" }],
  missions: [{ name: "TESS", value: "Mission_TESS" }, { name: "Kepler", value: "Mission_Kepler" }, { name: "Spitzer", value: "Mission_Spitzer" }, { name: "Hubble", value: "Mission_Hubble" }],
  updating_data: false,
  last_update: 0,
  download_spinner_opts: { lines: 9, length: 6, width: 4, radius: 7, scale: 1, corners: 1, color: '#FFF', opacity: 0.2, rotate: 0, direction: 1, speed: 1, trail: 60, fps: 20, zIndex: 2e9, className: 'spinner', left: '50%', shadow: false, hwaccel: false, position: 'relative' },
  instructionModalStyle: { "backgroundColor": "#1d1d1d" },

  getInitialState: function () {
    var instruction_modal_cookie = mb_utils.readCookie("instruction_modal_closed");
    var instruction_modal_closed = false;

    var is_mobile = mb_utils.mobileAndTabletCheck();
    // let is_mobile = false;

    if (instruction_modal_cookie) {
      instruction_modal_closed = instruction_modal_cookie == "true";
    }
    return {
      ranger_loaded: false,
      ranger_ready: false,
      load_ranger: true, //helpful to toggle to actually be able to use your computer...
      is_mobile: is_mobile,
      iOS: false,
      content: {},
      galaxy: [],
      star: [],
      planet: [],
      system: [],
      mission: [],
      earth: [this.props.earth],
      radius_delta: 10,
      grid_open: false,
      featured: [],
      distance_from_earth: 0,
      units_from_earth: " light-years",
      target: 'Start',
      filters: [],
      observatories: [],
      instruction_modal_closed: instruction_modal_closed,
      get_ranger_state: true,
      comparing_sun: false,
      mobile_nav_open: false,
      open_header_sub_nav: null, // Toggle header sub nav on touch devices
      settings_panel_open: false,
      is_webgl_enabled: true,
      show_labels: true,
      footer_title: this.props.milky_way ? this.props.milky_way.footer_title : "",
      footer_links: this.props.milky_way ? this.props.milky_way.footer_links : "",
      view: 'galaxy', //view needs to match array of data (star,planet,system,galaxy)
      feature_idx: -1, //for ranger modules (snw, nwa, halloween)
      untouched: true,
      earth_instruction_modal_open: false,
      need_earth_instruction: true,
      show_habzone: true,
      can_show_habzone: false,
      habzone_minimized: true,
      headlight: false
    };
  },

  componentDidMount: function () {
    this.detectWebgl();
    this.detectIos();

    if (this.props.is_eox) {
      this.getInitialData();
      this.getObservatories();
    } else {
      this.getObservatories();
      this.onEnter();
    }

    var that = this;
    $('body').on("close_menus", function () {
      that.closeHeaderSubNav();
    });
    $(window).resize(this.checkMobileLandscape);
  },

  checkMobileLandscape: function () {
    var isLandscape = $(window).width() > $(window).height();
    if (this.state.is_mobile && this.props.custom_planets && isLandscape) {
      $('body').addClass('main_feature_present');
    } else {
      $('body').removeClass('main_feature_present');
    }
  },

  detectIos: function () {
    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    if (iOS) {
      this.setState({ iOS: iOS });
    }
  },

  getInitialData: function () {
    var that = this;
    $.getJSON('/eox_json', { planet_types: true }, function (data) {
      that.setState({ content: data, galaxy: [that.props.milky_way] });
    });
  },

  getObservatories: function () {
    var that = this;
    var filters = undefined,
        observatories = undefined;
    $.getJSON('/eox_data/filters.json', function (data) {
      filters = data;
      $.getJSON('/eox_data/observatories.json', function (data) {
        observatories = data;
        that.addObservatoriesToFilters(observatories, filters);
      });
    });
  },

  addObservatoriesToFilters: function (observatories, filters) {
    observatories.map(function (v) {
      filters[2].options.push({ name: v.name, value: v.exo_id, field: "pl_facility", db: "planets" });
    });
    this.setState({ filters: filters, observatories: observatories });
  },

  loadFallbackUrl: function () {
    if (this.props.fallback_url) {
      window.open(this.props.fallback_url, "_self");
    } else {
      alert("Sorry, this feature is not currently available on your browser.");
    }
  },

  onEnter: function (e) {
    if (this.state.load_ranger) {
      window.setInterval(this.getRangerState, 500);
    } else {
      this.setState({ ranger_loaded: true });
    }
  },

  checkRangerReady: function (e, feature) {
    var that = this;
    console.log("Show: ", feature);
    if (this.state.ranger_ready) {
      $('.grid_menu').hide();
      $('.planet_navigator').addClass('visible');
      this.checkMobileLandscape();
      var i = this.getRangerFeatureIdx(feature);
      if (i > -1) {
        this.changeRangerFeature(i);
      } else {
        console.log("Feature not found. Go to first feature.");
        this.setState({ feature_idx: 0 }, function () {
          this.changeRangerFeature(0);
        });
      }
    } else {
      console.log("Ranger not ready. Wait 5s and try again.");
      setTimeout(function () {
        that.checkRangerReady(null, feature);
      }, 5000);
    }
  },

  setHeadlight: function () {
    var headlight = !this.state.headlight;
    this.setState({ headlight: headlight }, function () {
      this.setPlanetLighting(headlight);
    });
  },

  getRangerFeatureIdx: function (feature) {
    try {
      var i = -1;
      var found = false;
      var that = this;
      while (!found && i < this.props.planets.length) {
        i = i + 1;
        var f = that.props.planets[i];
        if (feature == f.ranger_system_id || feature == f.ranger_feature_id) {
          found = true;
        }
      }
      return i;
    } catch (e) {
      return -1;
    }
  },

  rangerCheck: function () {
    var that = this;
    try {
      console.log("check ranger ready!!!!!");

      var node = __ranger.scene.get("Earth");
      var milky = __ranger.scene.get("MilkyWay");
      // let node_loaded = node.loaded
      // let all_ready = node && node.frame && node.frame.rootData && node.frame.rootData[0] && node.frame.rootData[0].thisToRoot
      // console.log("node, node_loaded, all_ready", node, node_loaded, all_ready)
      if (this.props.is_eox && node && node.loaded && milky && milky.loaded || !this.props.is_eox && node && node.loaded) {
        // console.log("ranger earth node exists", node)
        this.setState({ ranger_ready: true }, function () {
          __ranger.setWindowTitle("Eyes on Exoplanets");
        });
      } else {
        throw "Unknown error. Earth node not found.";
      }
    } catch (error) {
      console.log("Ranger not ready. Try again in 1s");

      window.setTimeout(function () {
        that.rangerCheck();
      }, 1000);
    }
  },

  detectWebgl: function () {
    var ie = mb_utils.getIEVersion();
    //re enable on mobile
    // if(this.state.is_mobile && (this.props.mission_module || this.props.feature_module)){ //disable since not loading on mobile
    // 	this.setState({is_webgl_enabled: false});
    // } else
    if (ie.major > 0 && ie.major <= 11) {
      this.setState({ is_webgl_enabled: false });
      $(document).on('showRangerFeature', this.loadFallbackUrl);
    } else if (!this.detector()) {
      // check to see if webgl context is available
      this.setState({ is_webgl_enabled: false });
      $(document).on('showRangerFeature', this.loadFallbackUrl);
    } else {
      $(document).on('showRangerFeature', this.checkRangerReady);
      this.loadRangerScripts();
    }
  },

  detector: function () {
    try {
      var canvas = document.createElement('canvas');return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
    } catch (e) {
      return false;
    }
  },

  loadRangerScripts: function () {
    var that = this;
    if (this.state.load_ranger) {
      $.ajax({
        url: this.props.ranger_url + "apps/exo-web/dist/startup.js",
        method: "GET",
        dataType: "script",
        crossDomain: true,
        beforeSend: function (jqXHR) {
          // set request headers here rather than in the ajax 'headers' object
          jqXHR.setRequestHeader('Accept-Encoding', 'gzip');
          jqXHR.setRequestHeader('Accept', '*/*');
        },
        success: function () {
          var settings = window['__ranger'].settings;
          settings.scene = settings.scene || {};
          settings.path = settings.path || {};
          settings.exo = settings.exo || {};
          settings.camera = settings.camera || {};
          settings.title = $('title').text().replace(/[^\w\s]/gi, '');
          settings.path['static'] = that.props.ranger_url + "apps/exo-web/static";
          settings.path.dynamic = that.props.ranger_url + "assets/dynamic";
          settings.path.images = that.props.ranger_url + "1";
          settings.path.image = that.props.ranger_url + "apps/exo-web/modules/exo-web";
          settings.path.document = that.props.ranger_url + "3";
          settings.path.server = that.props.ranger_url + "apps/exo-web/modules/exo-web";
          settings.path.animation = that.props.ranger_url + "5";
          settings.path.module = that.props.ranger_url + "apps/exo-web/dist";
          settings.mb = {};
          if (that.props.mission_module) {
            settings.target = that.props.features[0].ranger_feature_id;
          } else if (that.props.features) {
            var p = that.props.planets[0];
            var target = p.ranger_system ? p.ranger_system_id : p.ranger_feature_id;
            settings.target = target;
          }
          $.ajax({
            url: that.props.ranger_url + "apps/exo-web/dist/ranger.js",
            method: "GET",
            dataType: "script",
            crossDomain: true,
            beforeSend: function (jqXHR) {
              // set request headers here rather than in the ajax 'headers' object
              jqXHR.setRequestHeader('Accept-Encoding', 'gzip');
              jqXHR.setRequestHeader('Accept', '*/*');
            },
            success: function () {
              $.ajax({
                url: that.props.ranger_url + "apps/exo-web/dist/exo-web.js",
                method: "GET",
                dataType: "script",
                crossDomain: true,
                beforeSend: function (jqXHR) {
                  // set request headers here rather than in the ajax 'headers' object
                  jqXHR.setRequestHeader('Accept-Encoding', 'gzip');
                  jqXHR.setRequestHeader('Accept', '*/*');
                },
                success: function () {
                  console.log("Ranger scripts loaded");
                  that.setState({ ranger_loaded: true }, function () {
                    that.rangerCheck();
                  });
                }
              });
            }
          });
        }
      });
    } else {
      this.setState({ ranger_loaded: true });
    }
  },

  getRangerState: function () {
    var that = this;
    if (this.state.ranger_ready && !this.updating_data) {
      try {
        this.update({ getState: null }, true, function (ack) {
          var new_state = {};
          var view_changed = false;
          if (ack.success) {
            var view = ack.message.current_view;
            var dist = parseInt(ack.message.distance_from_target_km);
            var earth_dist_km = parseInt(ack.message.distance_from_earth_km);
            var earth_dist = that.kmToLy(earth_dist_km);
            var radius = parseInt(ack.message.target_radius_km);
            var target = ack.message.current_exo_id;

            if (that.props.is_eox && that.state.distance_from_earth != earth_dist && earth_dist >= 0 && that.state.distance_from_earth != earth_dist_km) {
              if (earth_dist == 0) {
                var mi_arr = that.getFormattedMi(earth_dist_km);
                if (that.state.distance_from_earth != mi_arr[0]) {
                  view_changed = true;
                  new_state["distance_from_earth"] = mi_arr[0];
                  new_state["units_from_earth"] = mi_arr[1];
                }
              }

              if (that.state.distance_from_earth != earth_dist && earth_dist > 0) {
                new_state["distance_from_earth"] = earth_dist;
                new_state["units_from_earth"] = " light-years";
              }
              view_changed = true;
            }
            //deal with all the situations where view is null
            if ((view == null || view == "Mission") && target.indexOf('Mission_') == 0 && that.state.view != "mission") {
              new_state["view"] = "mission";
              new_state['target'] = target;
              view_changed = true;
            } else if (view == null && target == "TelescopeAnchorPoint" && that.state.view != 'telescope') {
              new_state = {
                view: 'telescope',
                target: target
              };
              view_changed = true;
            } else if (view == null && target == "Earth" && that.state.view != 'earth') {
              new_state = {
                view: 'earth',
                quick_menu_type: "earth",
                target: 'Earth',
                mobile_nav_open: false,
                footer_title: that.props.milky_way ? that.props.milky_way.footer_title : '',
                footer_links: that.props.milky_way ? that.props.milky_way.footer_links : []
              };
              view_changed = true;
            } else if (view == null && ['earth', 'galaxy', 'telescope'].indexOf(that.state.view) < 0 || that.state.view == 'telescope' && target != "TelescopeAnchorPoint" || that.state.view == 'earth' && target != 'Earth') {
              new_state = {
                view: 'galaxy',
                quick_menu_type: "galaxy",
                target: 'Start',
                mobile_nav_open: false,
                footer_title: that.props.milky_way ? that.props.milky_way.footer_title : '',
                footer_links: that.props.milky_way ? that.props.milky_way.footer_links : []
              };
              view_changed = true;
            } else if (view != null && (view.toLowerCase() == 'star' || view.toLowerCase() == 'system')) {
              if (target == 'Kepler-16-A' || target == 'Kepler-16-B') {
                new_state["view"] = 'star';
                view_changed = true;
              } else if (Math.floor(dist) <= radius * that.state.radius_delta && that.state.view != 'star') {
                new_state["view"] = 'star';
                view_changed = true;
              } else if (!that.state.comparing_sun && Math.floor(dist) > radius * that.state.radius_delta && that.state.view != 'system') {
                new_state["view"] = 'system';
                view_changed = true;
              }
            } else if (view != null && that.state.view != view.toLowerCase()) {
              new_state["view"] = view.toLowerCase();
              view_changed = true;
            }

            if (that.state.target != ack.message.current_exo_id) {
              new_state["target"] = ack.message.current_exo_id;
              $(document).trigger('reset_compares');
              view_changed = true;
            }

            if (view_changed) {
              if (that.props.features) {
                var new_idx = that.evaluateNewRangerView(new_state);
                if (new_idx > -1) {
                  new_state["feature_idx"] = new_idx;
                }
              }
              var v = view ? view.toLowerCase() : 'galaxy';

              if (v == 'system' && that.state.show_habzone) {
                __ranger.update({ exo: { showHabZone: true } });
              } else if (v == 'planet' && that.state.show_habzone) {
                __ranger.update({ exo: { showHabZone: false } });
              }

              if (v == 'system') {
                var hz = __ranger.scene.get(ack.message.current_exo_id).habZone;
                if (hz && hz.length > 0) {
                  new_state["can_show_habzone"] = hz[0] > 0;
                } else {
                  console.log("no hz", ack.message.current_exo_id, hz);
                  new_state["can_show_habzone"] = false;
                }
              }

              if (that.props.is_eox) {
                var title = that.getFooterTitle(v, target);
                if (title != that.state.footer_title) {
                  new_state["footer_title"] = title;
                  new_state["footer_links"] = that.getFooterContextArray(v, target);
                }
                if (v != 'telescope' && target != "TelescopeAnchorPoint") {
                  $('body').trigger('hide_constellations');
                  $('body').trigger('show_all_stars');
                }
              }

              that.setState(new_state);
            }
          }
        });
      } catch (e) {
        //ranger probably not ready yet
        console.log(e.message);
      }
    }
  },

  getFormattedMi: function (earth_dist_km) {
    var miles = earth_dist_km * 0.621371;
    if (miles > 1e9) {
      return [Math.round(miles / 1e9), " billion mi"];
    } else if (miles > 1e6) {
      return [Math.round(miles / 1e6), " million mi"];
    } else if (miles > 1e3) {
      return [Math.round(miles / 1e3), " thousand mi"];
    } else {
      return [miles, " mi"];
    }
  },

  evaluateNewRangerView: function (new_state) {
    // console.log("evaluateNewRangerView", new_state)
    if (typeof new_state.target != "undefined") {
      if (new_state.target == 'Start') {
        return 0;
      } else {
        return this.getRangerFeatureIdx(new_state.target);
      }
    }
    return -1;
  },

  frameTarget: function (name, type) {
    console.log("Frame target", name, type);
  },

  openMobileNav: function (e) {
    if (e) e.preventDefault();
    this.setState({ mobile_nav_open: true });
  },

  closeMobileNav: function (e) {
    if (e) e.preventDefault();
    this.setState({ mobile_nav_open: false });
  },

  isOpenHeaderSubNav: function (name) {
    if (name) {
      return this.state.open_header_sub_nav === name;
    } else {
      return false;
    }
  },

  toggleHeaderSubNav: function (e) {
    if (e) e.preventDefault();
    var name = e.currentTarget.getAttribute("data-show");
    if (this.state.open_header_sub_nav === name) {
      this.setState({ open_header_sub_nav: null });
    } else {
      this.setState({ open_header_sub_nav: name });
    }
  },

  closeHeaderSubNav: function () {
    this.setState({ open_header_sub_nav: null });
  },

  onClickGalaxy: function (e) {
    if (e) e.preventDefault();
    this.setState({
      view: 'galaxy',
      footer_title: this.props.milky_way.footer_title,
      footer_links: this.props.milky_way.footer_links,
      quick_menu_type: "galaxy",
      mobile_nav_open: false,
      get_ranger_state: true,
      galaxy: [this.props.milky_way],
      target: 'Start'
    }, function () {
      __ranger.update({ exo: { showStars: { value: true } } }, null, function (m) {
        $('body').trigger('reset_filter');
      });
      __ranger.update({ exo: { showCandidates: false } }, null, function (ack) {
        console.log(ack);
      });

      this.update({ gotoGalaxyView: null }, false, function (ack) {
        console.log(ack);
      });
    });
  },

  closeEarthInstructionModal: function (e) {
    this.setState({ earth_instruction_modal_open: false, need_earth_instruction: false });
  },

  onEarthView: function (e) {
    if (e) e.preventDefault();
    this.setState({
      view: 'earth',
      footer_title: this.props.milky_way.footer_title,
      footer_links: this.props.milky_way.footer_links,
      quick_menu_type: "",
      mobile_nav_open: false,
      get_ranger_state: true,
      earth: [this.props.earth],
      on_earth: false,
      named_location: null,
      earth_instruction_modal_open: this.state.need_earth_instruction,
      target: 'Start'
    }, function () {

      this.update({ gotoObjectView: { name: "Earth", type: "Planet" } }, false, function (ack) {
        console.log(ack);
      });
    });
  },

  setFeatured: function (featured) {
    this.setState({ featured: featured });
  },

  toggleSettings: function (e) {
    this.setState({ settings_panel_open: !this.state.settings_panel_open });
  },

  openSettings: function (e) {
    if (e) e.preventDefault();
    this.setState({ settings_panel_open: true, mobile_nav_open: false });
  },

  closeSettings: function () {
    this.setState({ settings_panel_open: false });
  },

  toggleLabels: function () {
    this.setState({ show_labels: !this.state.show_labels });
  },

  update: function (message, quiet, callback) {
    if (!quiet) {
      console.log("SENDING MESSAGE TO RANGER: ", message);
    }
    if (message.hasOwnProperty("gotoObjectView")) {
      //ensure this is not called too often
      var now = new Date().getTime();
      if (this.last_update != 0 && now - this.last_update < 1000) {
        return;
      } else {
        this.last_update = now;
      }
    }

    if (typeof __ranger != "undefined" && typeof __ranger.update == "function") {
      if (callback) {
        __ranger.update({ exo: message }, null, callback);
      } else {
        __ranger.update({ exo: message });
      }
    } else if (callback) {
      callback();
    }
  },

  // viewFrom(view){
  // 	console.log("view from: " + view)
  // },
  //
  // getDistanceFromEarth(){
  // 	let that = this;
  // 	this.update({ getDistanceFromEarth: null }, true, that.receiveDistanceFromEarth )
  // },
  //
  // receiveDistanceFromEarth(ack){
  // 	// console.log("received distance from earth", ack)
  // 	if(ack.success && this.state.distance_from_earth != ack.message.distance){
  // 		this.setState({distance_from_earth: ack.message.distance})
  // 	}
  // },

  openGrid: function (e) {
    if (e) e.preventDefault();
    this.setState({
      grid_open: true,
      mobile_nav_open: false,
      get_ranger_state: false
    }, function () {
      window.setTimeout(function () {
        $('.detail_carousel').slick("refresh");
        $(window).resize();
      }, 300);
    });
  },

  closeGrid: function () {
    this.setState({ grid_open: false, get_ranger_state: true });
  },

  gridItemClicked: function (e) {
    var id = $(e.currentTarget).data('id');
    this.getDataForId('planet', id);
  },

  missionClicked: function (e) {
    if (e) e.preventDefault();
    var mission = e.currentTarget.getAttribute('data-value');
    this.changeToMission(mission);
    this.closeHeaderSubNav();
  },

  changeToMission: function (mission) {
    this.setState({ mobile_nav_open: false,
      footer_title: this.getFooterTitle("mission", mission),
      footer_links: this.getFooterContextArray("mission", mission)
    }, function () {
      this.update({ gotoObjectView: { name: mission, type: "Mission" } }, false, function (ack) {
        console.log(ack);
      });
      if (mission == "Mission_Hubble") {
        this.update({ "setHeadlightState": false }, false, function (ack) {
          console.log(ack);
        });
      } else if (mission == "Mission_TESS") {
        this.update({ "setHeadlightState": true }, false, function (ack) {
          console.log(ack);
        });
      }
    });

    switch (mission) {
      case "Mission_Kepler":
        this.observatoryFiltered("Kepler", true);
        break;
      case "Mission_Spitzer":
        this.observatoryFiltered("Spitzer Space Telescope", true);
        break;
      case "Mission_Hubble":
        this.observatoryFiltered("Hubble Space Telescope", true);
        break;
      case "Mission_TESS":
        this.observatoryFiltered("Transiting Exoplanet Survey Satellite (TESS)", true);
        break;
      default:
        console.error("Unknown mission:", mission);
    }
  },

  closeInstructionModal: function () {
    this.setState({ instruction_modal_closed: true }, function () {
      mb_utils.createCookie("instruction_modal_closed", "true", 14);
    });
  },

  getDataForId: function (model, id, exo_id) {
    var that = this;

    if (!this.updating_data && model != "galaxy" && id != "Start") {
      this.updating_data = true;
      console.log("get data for", model, id, exo_id);
      var url = '/eox_json';
      $.getJSON(url, { model: model, id: id, exo_id: exo_id }, function (data) {
        console.log("received data.");
        that.updateSystem(data);
      });
    } else {
      console.log("Already updating or model = galaxy.", this.updating_data, model, id, exo_id);
    }
  },

  updateSystem: function (data) {
    $(document).trigger('reset_compares');
    var that = this;
    var target = data.current_exo_id;
    var type = data.current_view;
    if (typeof target != "undefined" && typeof type != "undefined") {
      console.log("data received", target, type);
      this.setState({
        view: type,
        grid_open: false,
        get_ranger_state: true,
        star: data.star,
        planet: data.planet,
        system: data.system,
        target: data.current_exo_id,
        mobile_nav_open: false

      }, function () {
        var _this = this;

        console.log("done setting state.");
        that.updating_data = false;
        that.update({ gotoObjectView: { name: target, type: that.capitalize(type) } }, false, function (ack) {});
        that.updateContextMenu();
        if (that.capitalize(type) == "Planet") {
          window.setTimeout(function () {
            that.setPlanetLighting(_this.state.headlight);
          }, 5000); //don't know how to do this any other way. Davit has passed the responsibility of knowing the light state, but setting it immediately doesn't work.
        }
      });
    } else {
        console.log("received data without type or target. do nothing.");
        that.updating_data = false;
      }
  },

  setPlanetLighting: function (val) {
    __ranger.update({ exo: { setStarLightState: !val } }, null, function (m) {
      console.log(m);
    });
    __ranger.update({ exo: { setHeadlightState: val } }, null, function (m) {
      console.log(m);
    });
  },

  updateContextMenu: function () {
    this.setState({
      footer_title: this.getFooterTitle(this.state.view, this.state.target),
      footer_links: this.getFooterContextArray(this.state.view, this.state.target)
    });
  },

  capitalize: function (string) {
    if (string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    } else {
      return string;
    }
  },

  kmToLy: function (num) {
    var ret_val = num / 9.461e+12;
    return ret_val.toFixed(0);
  },

  viewChanged: function (value, field) {
    // console.log(value,field)
    if (field == 'system' && this.state.show_habzone) {
      __ranger.update({ exo: { showHabZone: true } });
    } else if (this.state.show_habzone) {
      __ranger.update({ exo: { showHabZone: false } });
    }

    if (value && field) {
      this.setState({ view: field,
        target: value,
        footer_title: this.getFooterTitle(field, value),
        footer_links: this.getFooterContextArray(field, value)
      }, function () {
        var type = field ? this.capitalize(field) : null;
        this.update({ gotoObjectView: { name: value, type: type } }, null, function (ack) {
          console.log(ack);
        });
      });
    }
  },

  rangerViewChanged: function (field) {
    var planet = this.props.planets[this.state.feature_idx];
    if (field == 'planet') {
      value = planet["ranger_feature_id"];
    } else {
      value = planet["ranger_system_id"];
    }
    this.setState({ view: field, target: value }, function () {
      var type = field ? this.capitalize(field) : null;
      this.update({ gotoObjectView: { name: value, type: type } }, null, function (ack) {
        console.log(ack);
      });
    });
  },

  hasData: function () {
    var that = this;
    if (typeof this.state[this.state.view] != 'undefined') {
      var has_data = that.getCurrentTarget(this.state.view, this.state.target);
      return has_data.length > 0;
    } else {
      return false;
    }
  },

  getViews: function () {
    var _this2 = this;

    if (this.hasData()) {
      var views = [{ name: "Planet", field: "planet" }, { name: "System", field: "system", value: this.state.system[0].exo_id }, { name: "Star", field: "star" }];
      if (this.state.planet.length > 1) {
        (function () {
          var options = [];
          _this2.state.planet.map(function (v) {
            var val = v.exo_id;
            options.push({ name: v.title, value: val, field: "planet", can_compare: v.can_compare });
          });
          views[0]["options"] = options;
        })();
      } else {
        views[0]["value"] = this.state.planet[0].exo_id;
        views[0]["can_compare"] = this.state.planet[0].can_compare;
      }

      if (this.state.star.length > 1) {
        (function () {
          var options = [];
          _this2.state.star.map(function (v) {
            var val = v.exo_id;
            options.push({ name: v.title, value: val, field: "star", can_compare: v.can_compare });
          });
          views[2]["options"] = options;
        })();
      } else {
        views[2]["value"] = this.state.star[0].exo_id;
        views[2]["can_compare"] = this.state.star[0].can_compare;
      }

      return views;
    } else {
      if (this.state.view && this.state.target) {
        console.log("needs data", this.state.view, this.state.target);
        this.getDataForId(this.state.view, null, this.state.target);
      } else {
        console.log("state or target is undefined.", this.state.view, this.state.target);
      }

      return [];
    }
  },

  filterChanged: function (af) {
    var that = this;
    if (af.length == 0 || af[0].value == "All") {
      __ranger.update({ exo: { showStars: { value: true } } }, null, function (m) {
        console.log(m);
      });
      __ranger.update({ exo: { showCandidates: false, showTessCandidate: false } }, null, function (ack) {
        console.log(ack);
      });
      this.setState({ galaxy: [this.props.milky_way] });
    } else if (af[0].field == "displayName") {
      this.handleKeplerFilter(af);
    } else if (af[0].field == "tess") {
      this.handleTessFilter(af);
    } else {
      var filters = af[0].value.split(',');
      if (filters.length > 1) {
        (function () {
          var active_filters = [{ filterType: 'or' }];
          filters.map(function (v) {
            active_filters.push({ field: af[0].field, db: af[0].db, value: v });
          });
          __ranger.update({ exo: { showStars: { value: true, filters: [active_filters] } } }, null, function (m) {
            console.log(m);
          });
          __ranger.update({ exo: { showCandidates: false, showTessCandidate: false } }, null, function (ack) {
            console.log(ack);
          });
        })();
      } else {
        if (af[0].field == "pl_facility" && af[0].value == "Kepler") {
          __ranger.update({ exo: { showStars: { value: true, filters: [{ field: "displayName", value: "Kepler", db: "planets", filterType: 'or' }, { field: "displayName", value: "K2", db: "planets" }] } } }, null, function (ack) {
            console.log(ack);
          });
        } else {
          __ranger.update({ exo: { showStars: { value: true, filters: af } } }, null, function (m) {
            console.log(m);
          });
        }
        __ranger.update({ exo: { showCandidates: false, showTessCandidate: false } }, null, function (ack) {
          console.log(ack);
        });
      }

      switch (af[0].field) {
        case "visType":
        case "plType":
          this.planetTypeFiltered(af[0].name);
          break;
        case "displayName":
          this.observatoryFiltered("Kepler");
          break;
        case "pl_facility":
          this.observatoryFiltered(af[0].value);
          break;
        default:
          console.error("Unexpected filter.", af);
      }
    }
  },

  handleKeplerFilter: function (filter) {
    var that = this;
    if (filter[0].value == "AllKepler") {

      __ranger.update({ exo: { showStars: { value: true, filters: [{ field: "displayName", value: "Kepler", db: "planets", filterType: 'or' }, { field: "displayName", value: "K2", db: "planets" }] } } }, null, function (ack) {
        console.log(ack);
      });

      __ranger.update({ exo: { showCandidates: true } }, null, function (ack) {
        console.log(ack);
      });
    } else if (filter[0].value == "Candidates") {
      __ranger.update({ exo: { showStars: { value: false } } }, null, function (m) {
        __ranger.update({ exo: { showCandidates: true } }, null, function (ack) {
          console.log(ack);
        });
      });
    } else {
      __ranger.update({ exo: { showStars: { value: true, filters: [{ field: "displayName", value: "Kepler", db: "planets", filterType: 'or' }, { field: "displayName", value: "K2", db: "planets" }] } } }, null, function (ack) {
        console.log(ack);
      });

      __ranger.update({ exo: { showCandidates: false } }, null, function (ack) {
        console.log(ack);
      });
    }

    this.observatoryFiltered("Kepler");
  },

  handleTessFilter: function (filter) {
    var that = this;
    if (filter[0].value == "AllTess") {

      __ranger.update({ exo: { showStars: { value: true, filters: [{ field: "pl_facility", db: "planets", value: "Transiting Exoplanet Survey Satellite (TESS)" }] } } }, null, function (ack) {
        console.log(ack);
      });

      __ranger.update({ exo: { showTessCandidate: true, showCandidates: false } }, null, function (ack) {
        console.log(ack);
      });
    } else if (filter[0].value == "Candidates") {
      __ranger.update({ exo: { showStars: { value: false } } }, null, function (m) {
        __ranger.update({ exo: { showTessCandidate: true, showCandidates: false } }, null, function (ack) {
          console.log(ack);
        });
      });
    } else {
      __ranger.update({ exo: { showStars: { value: true, filters: [{ field: "pl_facility", db: "planets", value: "Transiting Exoplanet Survey Satellite (TESS)" }] } } }, null, function (m) {
        console.log(m);
      });
      __ranger.update({ exo: { showCandidates: false, showTessCandidate: false } }, null, function (ack) {
        console.log(ack);
      });
    }

    this.observatoryFiltered("Transiting Exoplanet Survey Satellite (TESS)");
  },

  planetTypeFiltered: function (value) {
    var that = this;
    var pt = this.state.content[value];
    __ranger.update({ exo: { getFilterCount: null } }, null, function (ack) {
      console.log(ack.message.filterCount);
      if (pt && ack.success) {
        var subtitle = pt.subtitle;
        var regex = /[\d,]+ planet/;
        pt.subtitle = subtitle.replace(regex, ack.message.filterCount + " planet");
        that.setState({ galaxy: [pt] });
      } else {
        console.error(ack.message);
      }
    });
  },

  observatoryFiltered: function (value, mission) {
    var obs_arr = this.state.observatories.filter(function (v) {
      return v.exo_id == value;
    });
    if (obs_arr.length > 0 && !mission) {
      var observatory = obs_arr[0];
      var subtitle = observatory["by"];
      if (value == "Kepler") {
        subtitle = this.props.kepler.confirmed + ' confirmed planets <span class="sep"> | </span> ' + this.props.kepler.candidates + ' candidates';
      } else if (value == "Transiting Exoplanet Survey Satellite (TESS)") {
        subtitle = this.props.tess.confirmed + ' confirmed planets <span class="sep"> | </span> ' + this.props.tess.candidates + ' candidates';
      }
      this.setState({
        galaxy: [{ title: observatory["name"],
          subtitle: subtitle,
          description: observatory["description"],
          image: '/assets/eox/observatories/' + observatory["image"] + '.jpg'
        }]
      });
    } else if (obs_arr.length > 0 && mission) {
      var observatory = obs_arr[0];
      var subtitle = observatory["by"];
      if (value == "Kepler") {
        subtitle = this.props.kepler.confirmed + ' confirmed planets <span class="sep"> | </span> ' + this.props.kepler.candidates + ' candidates';
      } else if (value == "Transiting Exoplanet Survey Satellite (TESS)") {
        subtitle = this.props.tess.confirmed + ' confirmed planets <span class="sep"> | </span> ' + this.props.tess.candidates + ' candidates';
      }
      this.setState({
        mission: [{ title: observatory["name"],
          subtitle: subtitle,
          description: observatory["description"],
          image: '/assets/eox/observatories/' + observatory["image"] + '.jpg'
        }]
      });
    }
  },
  //using this to determine if should change views
  setComparingSun: function (comparing_sun) {
    this.setState({ comparing_sun: comparing_sun });
  },

  getQuickMenu: function () {
    if (this.state.ranger_ready && this.state.view) {
      if (this.props.is_eox && this.state.view == "galaxy") {
        return React.createElement(EoxQuickFilter, { single_select: 'true', filters: this.state.filters, on_filter_change: this.filterChanged });
      } else if (this.state.view.toLowerCase() == "mission") {
        return this.getMissionCompare();
      } else if (this.state.view.toLowerCase() == "earth" || this.state.view.toLowerCase() == 'telescope') {
        return "";
      } else {
        return React.createElement(EoxQuickView, { title: 'View', ranger_update: this.update, view_changed: this.viewChanged,
          views: this.getViews(), view: this.state.view, target: this.state.target, comparing_sun: this.setComparingSun });
      }
    } else {
      return null;
    }
  },

  getMissionCompare: function () {
    var _this3 = this;

    if (this.state.mission && this.state.mission.length > 0) {
      return React.createElement(EoxQuickView, { ranger_update: this.update, view: this.state.view, target: this.state.target });
    } else {
      if (this.state.view && this.state.target) {
        (function () {
          console.log("needs data for mission");
          var that = _this3;
          window.setTimeout(function () {
            that.changeToMission(that.state.target);
          }, 1);
        })();
      } else {
        console.log("state or target is undefined.", this.state.view, this.state.target);
      }

      return "";
    }
  },

  getDetailsForView: function (k) {
    var view_arr = this.state[this.state.view] || [];
    var that = this;
    if (view_arr.length > 1) {
      view_arr = view_arr.filter(function (v) {
        return v.exo_id == that.state.target;
      });
    }
    if (view_arr.length > 0) {
      return view_arr[0][k];
    } else {
      return "";
    }
  },

  getFooterTitle: function (view, target) {
    if (this.props.is_eox) {
      // console.log("getFooterTitle", view, target)
      switch (view) {
        // case "system":
        // return "FEATURED DESTINATIONS";
        // break;
        case "planet":
          return "MORE PLANETS LIKE THIS";
          break;
        case "star":
          return this.getStarFooterTitle(view, target);
          break;
        case "mission":
          return "MISSIONS";
          break;
        case "galaxy":
        case "earth":
        case "telescope":
          return this.props.milky_way.footer_title;
          break;
        default:
          return "";
      }
    } else {
      return "";
    }
  },

  getFooterContextArray: function (view, target) {
    if (this.props.is_eox) {
      var arr = undefined;
      console.log("Footer context array, ", view, target);
      switch (view) {
        // case "system":
        //   arr = this.getCurrentTarget(view,target);
        //   return arr.length > 0 ? this.getSystemContext(arr[0]) : [];
        //   break;
        case "planet":
          arr = this.getCurrentTarget(view, target);
          return arr.length > 0 ? this.getPlanetContext(arr[0]) : [];
          break;
        case "star":
          arr = this.getCurrentTarget(view, target);
          return arr.length > 0 ? this.getStarContext(arr[0]) : [];
          break;
        case "mission":
          return this.getMissionContext(target);
          break;
        case "galaxy":
        case "earth":
        case "telescope":
          return this.props.milky_way.footer_links;
          break;
        default:
          //dncc
          return [];
      }
    } else {
      return [];
    }
  },
  //[{name: "Systems with Earthlike planets", onclick: "console.log('foo')"}, {name: "Binary star systems", onclick: "console.log('bar')"}, {name: "MORE", onclick: "console.log('foo')", klass: "button"} ]
  getSystemContext: function (system) {
    var context_menu = [];
    this.getRandomArrayElements(this.props.system_context_array, 3).map(function (v) {
      context_menu.push({ name: v.context_description, onclick: 'that.contextSystemClick(\'' + v.id + '\',\'' + v.exo_id + '\')' });
    });
    return context_menu;
  },
  getStarContext: function (star) {
    var star_type = this.props.star_context_arrays.filter(function (v) {
      return v.name == star.stellar_type;
    });
    var context_menu = [];
    if (star_type.length > 0) {
      this.getRandomArrayElements(star_type[0].items, 3).map(function (v) {
        context_menu.push({ name: v.title, onclick: 'that.contextStarClick(\'' + v.id + '\',\'' + v.exo_id + '\')' });
      });
    }
    return context_menu;
  },

  getMissionContext: function (target) {
    var context_menu = [];
    this.missions.map(function (v, i) {
      if (v.value != target) {
        context_menu.push({ name: v.name, onclick: 'that.changeToMission(\'' + v.value + '\')' });
      }
    });

    return context_menu;
  },

  contextSystemClick: function (id, exo_id) {
    this.getDataForId("system", id, exo_id);
  },

  contextStarClick: function (id, exo_id) {
    this.getDataForId("system", id, exo_id);
  },

  getRandomArrayElements: function (arr, count) {
    if (arr && arr.length > 0) {
      var shuffled = arr.slice(0),
          i = arr.length,
          min = i - count,
          temp,
          index;
      while (i-- > min) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
      }
      return shuffled.slice(min);
    } else {
      return [];
    }
  },

  getPlanetContext: function (planet) {
    context_menu = [];
    if (planet.planet_type) {
      context_menu.push({ name: planet.planet_type + 's', onclick: 'that.openGridToPage(\'planet_types\', "' + planet.planet_type + '")' });
    }
    if (planet.pl_discmethod) {
      context_menu.push({ name: planet.pl_discmethod + ' Discoveries', onclick: 'that.openGridToPage(\'detection\', "' + planet.pl_discmethod + '")' });
    }

    if (planet.pl_kepflag) {
      context_menu.push({ name: "Kepler Discoveries", onclick: "that.openGridToPage('kepler', 'Kepler Discoveries')" });
    }

    if (this.planetFeatured(this.state.target)) {
      context_menu.push({ name: "Featured Planets", onclick: "that.openGridToPage('featured')" });
    }

    return context_menu;
  },

  openGridToPage: function (filter, l2) {
    this.setState({ grid_open: true }, function () {
      $(document).trigger('set_grid', [filter, l2]);
    });
  },

  planetFeatured: function (target) {
    var is_featured = false;
    this.state.featured.map(function (v) {
      var arr = v.items.filter(function (w) {
        return w.exo_id == target;
      });
      if (arr.length > 0) {
        is_featured = true;
      }
    });
    return is_featured;
  },

  getCurrentTarget: function (view, target) {
    var that = this;
    if (this.state[view] && target) {
      var arr = this.state[view].filter(function (v) {
        return v.exo_id == target;
      });
      return arr;
    } else {
      return [];
    }
  },

  getStarFooterTitle: function (view, target) {
    var that = this;
    var star = this.getCurrentTarget(view, target);
    return star.length > 0 ? 'MORE SYSTEMS WITH ' + star[0].stellar_type + ' STARS' : '';
  },

  getInfoTitle: function () {
    if (this.props.custom_planets && this.state.view == 'planet' && this.state.target == this.props.planets[this.state.feature_idx].ranger_feature_id) {
      return this.props.planets[this.state.feature_idx].title;
    } else if (this.props.back_to_grid && this.state.view == 'planet') {
      return this.getDetailsForView("feature_title");
    } else {
      return this.getDetailsForView("title");
    }
  },

  getInfoSubtitle: function () {
    if (this.props.custom_planets && this.state.view == 'planet' && this.state.target == this.props.planets[this.state.feature_idx].ranger_feature_id) {
      return this.props.planets[this.state.feature_idx].description;
    } else {
      return this.getDetailsForView("subtitle");
    }
  },

  getInfoFull: function () {
    return this.getDetailsForView("description");
  },

  getInfoImg: function () {
    return this.getDetailsForView("image");
  },

  getInfoExplore: function () {
    return this.getDetailsForView("url");
  },

  loadFAQ: function (e) {
    if (e) e.preventDefault();
    explore_overlay.init('/eox_faq', null, null, this.attachOverlayToComponent);
  },

  attachOverlayToComponent: function () {
    console.log("detaching explore overlay");
    var exploverlay = $('#explore_overlay').detach();
    $('#eox_app').append(exploverlay);
    var exploverlay_close = $('.overlay_close_button').detach();
    $('#eox_app').append(exploverlay_close);
    console.log("finished reattaching explore overlay");
  },

  closeAllModals: function () {
    this.setState({ settings_panel_open: false }, function () {
      $('.search_container').trigger("closeModals");
    });
  },
  isCurrentContext: function (name) {
    return this.state.view == 'galaxy' && name == "SPACE" || (this.state.view == 'earth' || this.state.view == 'telescope') && name == "EARTH";
  },

  getFooterContextHtml: function () {
    var that = this;

    if (this.state.footer_title != '' || this.state.footer_links.length > 0) {
      return React.createElement(
        'div',
        { className: 'context_menu' },
        React.createElement(
          'div',
          { className: 'links_title' },
          this.state.footer_title
        ),
        this.state.footer_links.map(function (v, i) {
          var current = that.isCurrentContext(v.name);
          return React.createElement(
            'a',
            { key: i, className: current ? 'current' : '', onClick: function (e) {
                eval(v.onclick);
              } },
            v.name
          );
        })
      );
    } else {
      return null;
    }
  },

  toggleRangerState: function (enabled) {
    this.setState({ get_ranger_state: enabled });
  },

  getPrevNextHTML: function () {
    if (!this.props.mission_module && this.state.ranger_ready && this.props.features && this.props.planets.length > 1) {
      return React.createElement(
        'div',
        { className: 'feature_navigation' },
        React.createElement(
          'a',
          { className: 'minimal_arrows next', onClick: this.nextFeature },
          React.createElement('div', { className: 'icon' }),
          React.createElement(
            'span',
            null,
            'Next',
            React.createElement('br', null),
            'Planet'
          )
        ),
        React.createElement(
          'a',
          { className: 'minimal_arrows prev', onClick: this.prevFeature },
          React.createElement('div', { className: 'icon' }),
          React.createElement(
            'span',
            null,
            'Previous',
            React.createElement('br', null),
            'Planet'
          )
        )
      );
    } else {
      return null;
    }
  },

  nextFeature: function () {
    var next = this.state.feature_idx + 1;
    if (next >= this.props.planets.length) {
      next = 0;
    }
    this.changeRangerFeature(next);
  },

  prevFeature: function () {
    var prev = this.state.feature_idx - 1;
    if (prev < 0) {
      prev = this.props.planets.length - 1;
    }
    this.changeRangerFeature(prev);
  },

  //only used by strange new worlds
  changeRangerFeature: function (idx) {
    var planet = this.props.planets[idx];
    var type = planet.ranger_system ? 'system' : 'planet';
    this.setState({ feature_idx: idx }, function () {
      this.rangerViewChanged(type);
    });
  },

  // keepTryingTillTargetIsCorrect(view,idx){
  //  if(this.state.target == this.props.planets[idx].exo_id && view == this.state.view){
  //    console.log("our work here is done.")
  //   } else {
  //    let that = this;
  //    console.log("keep trying... target or view incorrect.",this.props.planets[idx].exo_id, this.state.target, view, this.state.view )
  //    setTimeout(() => {
  //      that.changeRangerFeature(idx)
  //     }, 500)
  //   }
  //
  // },

  getRangerLegendHTML: function () {
    if (this.state.view == 'planet') {
      return React.createElement(
        'div',
        { className: 'ranger_legend' },
        React.createElement(
          'div',
          { className: 'series hzone' },
          React.createElement('div', { className: 'color_box' }),
          React.createElement(
            'div',
            { className: 'legend_text' },
            'Habitable Zone'
          )
        ),
        React.createElement(
          'div',
          { className: 'close_btn' },
          React.createElement('span', { className: 'close_icon' })
        )
      );
    } else {
      return null;
    }
  },

  getLoading: function () {
    if (!this.state.is_webgl_enabled) {
      return null;
    } else if (this.state.ranger_ready) {
      if (this.state.untouched) {
        return React.createElement(
          'div',
          { className: 'touch_hint' },
          React.createElement('div', { className: 'touch_img' })
        );
      } else {
        return null;
      }
    } else {
      return React.createElement(
        'div',
        { className: 'loader' },
        'Loading...'
      );
    }
  },

  removeHint: function (e) {
    if (this.state.untouched) {
      this.setState({ untouched: false });
    }
  },

  getDistanceHtml: function () {
    if (this.props.is_eox && this.state.view != 'telescope' && this.state.view != 'earth' && this.state.ranger_ready) {
      return React.createElement(
        'div',
        { className: 'distance_from_earth' },
        React.createElement('div', { className: 'distance_icon' }),
        React.createElement(
          'div',
          { className: 'distance_text' },
          'You are',
          React.createElement(
            'div',
            { className: 'light_years' },
            React.createElement(AnimatedNumber, { value: this.state.distance_from_earth, speed: 1000, useLocaleString: true }),
            this.state.units_from_earth
          ),
          'from Earth'
        )
      );
    } else {
      return null;
    }
  },

  toggleHabZone: function (e) {
    var show_habzone = !this.state.show_habzone;
    this.setState({ show_habzone: show_habzone }, function () {
      __ranger.update({ exo: { showHabZone: show_habzone } });
    });
  },

  closeHabZone: function (e) {
    e.stopPropagation();
    this.setState({ habzone_minimized: true });
  },

  openHabZone: function (e) {
    e.stopPropagation();
    this.setState({ habzone_minimized: false });
  },

  getHabZoneOption: function () {
    if (this.state.view == 'system' && this.state.ranger_ready && this.state.can_show_habzone) {
      return React.createElement(
        'div',
        { className: 'ranger_secondary_legend ' + (this.state.habzone_minimized ? "minimized" : ""), onClick: this.openHabZone },
        React.createElement(
          'div',
          { className: 'series hzone' },
          React.createElement(
            'label',
            { className: 'legend_text' },
            React.createElement('input', { checked: this.state.show_habzone, type: 'checkbox', onChange: this.toggleHabZone }),
            React.createElement('span', { className: 'icon' }),
            'Habitable Zone'
          ),
          React.createElement(
            'div',
            { className: 'close_btn', onClick: this.closeHabZone },
            React.createElement('span', { className: 'close_icon' })
          )
        )
      );
    } else {
      return null;
    }
  },

  getInfoPanelHtml: function () {
    // If there is data to show in the info panel
    if (this.state.target != "TelescopeAnchorPoint" && this.state.ranger_ready) {
      return React.createElement(InfoPanel, { back_to_grid: this.props.back_to_grid, title: this.getInfoTitle(), subtitle: this.getInfoSubtitle(),
        full_info: this.getInfoFull(), map_img: this.getInfoImg(),
        explore_link: this.getInfoExplore(), ranger_state_fn: this.toggleRangerState,
        overlay_link: this.state.view == "planet", overlay_callback: this.attachOverlayToComponent
      });
    } else {
      return "";
    }
  },

  onTelescopeView: function () {
    this.setState({ view: 'telescope' });
  },

  getLoaderAndGrid: function () {
    if (this.props.is_eox) {
      return React.createElement(
        'div',
        null,
        React.createElement('div', { className: 'gradient_container_top' }),
        React.createElement('div', { className: 'gradient_container_bottom' }),
        React.createElement(AppPreloader, { app_loaded: this.state.ranger_loaded, is_mobile: this.state.is_mobile,
          is_webgl_enabled: this.state.is_webgl_enabled, on_enter: this.onEnter }),
        React.createElement(EoxGrid, { grid_open: this.state.grid_open, grid_close_fn: this.closeGrid, grid_filters: this.grid_filters,
          item_clicked: this.gridItemClicked, info_tips: this.state.content ? this.state.content["info_tips"] : {},
          observatories: this.state.observatories, setFeatured: this.setFeatured })
      );
    } else {
      return this.getLoading();
    }
  },

  getHeader: function () {
    if (this.props.is_eox) {
      return React.createElement(EoxHeader, { grid_open_fn: this.openGrid, on_galaxy_view: this.onClickGalaxy, on_earth_view: this.onEarthView,
        missions: this.missions, on_mission_click: this.missionClicked, clicked_search_result: this.getDataForId,
        mobile_nav_open: this.openMobileNav, mobile_nav_close: this.closeMobileNav,
        mobile_open: this.state.mobile_nav_open,
        is_open_sub_nav: this.isOpenHeaderSubNav, toggle_sub_nav: this.toggleHeaderSubNav,
        open_settings: this.openSettings, close_settings: this.closeSettings,
        load_faq: this.loadFAQ
      });
    } else {
      return React.createElement(Fullscreen, { is_webgl_enabled: this.state.is_webgl_enabled, app_selector: '#eox_app' });
    }
  },

  getLightHtml: function () {
    if (this.state.view != "mission") {
      return React.createElement(
        'a',
        { className: 'light ' + (this.state.headlight ? "current" : ""), onClick: this.setHeadlight },
        React.createElement(SvgIcon, { symbol: 'light', label: '' + (this.state.headlight ? "Light is on" : "Light is off") })
      );
    } else {
      return null;
    }
  },

  getFooter: function () {
    if (this.props.is_eox) {
      return React.createElement(
        'footer',
        { className: 'eox_footer' },
        this.getFooterContextHtml(),
        React.createElement(
          'div',
          { className: 'tools' },
          this.getLightHtml(),
          React.createElement(EoxSettings, { settings_panel_open: this.state.settings_panel_open, ranger_update: this.update,
            toggle_settings: this.toggleSettings, load_faq: this.loadFAQ,
            headlight: this.state.headlight, set_headlight: this.setHeadlight,
            show_labels: this.state.show_labels, headlight_enabled: this.state.view != "mission",
            toggleLabels: this.toggleLabels
          }),
          React.createElement('a', { className: 'help', onClick: this.loadFAQ }),
          this.state.iOS ? null : React.createElement(Fullscreen, { is_webgl_enabled: this.state.is_webgl_enabled, app_selector: '#eox_app' })
        )
      );
    } else {
      return null;
    }
  },

  getModals: function () {
    if (this.props.is_eox && this.state.ranger_ready) {
      return React.createElement(
        'div',
        null,
        React.createElement(
          Modal,
          { isOpen: !this.state.instruction_modal_closed, onClose: this.closeInstructionModal, style: this.instructionModalStyle, className: 'instructions_modal modal' },
          React.createElement(
            'div',
            { className: 'instructions_text' },
            React.createElement(
              'p',
              null,
              'Zoom out for a full view of our galaxy. ',
              React.createElement('br', null),
              'Zoom in to locate our own solar system. ',
              React.createElement('br', null),
              'Click or tap any star to explore.'
            )
          ),
          React.createElement(
            'footer',
            null,
            React.createElement(
              'div',
              { className: 'button', onClick: this.closeInstructionModal },
              'GOT IT'
            )
          )
        ),
        React.createElement(
          Modal,
          { isOpen: this.state.earth_instruction_modal_open, onClose: this.closeEarthInstructionModal, style: this.instructionModalStyle, backdropStyle: { position: "fixed" }, className: 'telescope_instruction_modal modal' },
          React.createElement(
            'div',
            { className: 'instructions_text' },
            React.createElement(
              'p',
              null,
              'Click anywhere',
              React.createElement('br', null),
              'on the globe'
            )
          ),
          React.createElement(
            'footer',
            null,
            React.createElement(
              'div',
              { className: 'button', onClick: this.closeEarthInstructionModal },
              'GOT IT'
            )
          )
        )
      );
    }
  },

  getTelescopeView: function () {
    if (this.props.is_eox && this.state.ranger_ready) {
      return React.createElement(EoxTelescopeView, { view: this.state.view, on_earth_view: this.onEarthView,
        hide_location_status: this.state.telescope_instruction_modal_open || this.state.grid_open || this.state.settings_panel_open,
        on_telescope: this.onTelescopeView });
    } else {
      return null;
    }
  },

  getDisclaimer: function () {
    return React.createElement(
      'div',
      { className: 'disclaimer' },
      'Hypothetical visualization'
    );
  },

  backToGrid: function (e) {
    e.preventDefault();
    $('.planet_navigator').removeClass('visible');
    $('.grid_menu').show();
    if (this.props.custom_planets) {
      $('body').removeClass('main_feature_present');
    }
  },

  getBackToGridButton: function () {
    if (this.props.back_to_grid && this.state.ranger_ready) {
      return React.createElement(
        'div',
        { className: 'back_to_grid button', onClick: this.backToGrid },
        React.createElement(
          'span',
          null,
          this.props.custom_planets ? 'Choose A Destination' : 'Destinations'
        )
      );
    } else {
      return "";
    }
  },

  render: function () {
    var that = this;
    return React.createElement(
      'div',
      { id: 'eox_app' },
      this.getLoaderAndGrid(),
      React.createElement(
        'div',
        { className: 'eox_main ' + this.state.view, onClick: this.removeHint, onTouchStart: this.removeHint, onDragStart: this.removeHint },
        this.getHeader(),
        React.createElement('div', { id: 'ranger-container', className: '' + (this.state.show_labels ? '' : 'hide_labels'), onClick: this.closeAllModals }),
        this.getHabZoneOption(),
        this.getQuickMenu(),
        this.getBackToGridButton(),
        this.getInfoPanelHtml(),
        this.getDistanceHtml(),
        this.getPrevNextHTML(),
        this.getTelescopeView(),
        this.getDisclaimer(),
        this.getModals()
      ),
      this.getFooter()
    );
    //}
  }

});
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Fullscreen = (function (_React$Component) {
	_inherits(Fullscreen, _React$Component);

	function Fullscreen(props) {
		_classCallCheck(this, Fullscreen);

		_get(Object.getPrototypeOf(Fullscreen.prototype), 'constructor', this).call(this, props);
		this.state = { fullscreen: false };
	}

	_createClass(Fullscreen, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			var that = this;
			document.addEventListener("keydown", function (e) {
				if (e.keyCode == 27) {
					that.setState({ fullscreen: false });
				}
			}, false);

			if (screenfull && screenfull.enabled) {
				document.addEventListener(screenfull.raw.fullscreenchange, function () {
					var $app = $(that.props.app_selector);

					//handle situation where user clicks button, then esc to exit
					if (!screenfull.isFullscreen && $('body').hasClass('fullscreen_element')) {
						$app.css({ height: "", width: "" });
						$('body').removeClass('fullscreen_element');
						that.setState({ fullscreen: false });
					}
				});
			} else if (mb_utils.mobileAndTabletCheck()) {
				$('body').addClass('motanf'); // mobile or tablet and not fullscreen-able
			} else {
					//ie9 and 10 and possibly others
					$('#fullscreen').hide();
				}
		}
	}, {
		key: 'toggleFullscreen',
		value: function toggleFullscreen(e) {
			var $btn = $(e.currentTarget),
			    $app = $(this.props.app_selector);

			if (screenfull.enabled && !$btn.hasClass('active')) {
				screenfull.request($app[0]);
				$app.css({ height: "100vh", width: "100vw" });
				$('body').addClass('fullscreen_element');
				this.setState({ fullscreen: true });
			} else if ($('body').hasClass('motanf') && !$btn.hasClass('active')) {
				this.expandForNonFullscreenable($btn);
				this.setState({ fullscreen: true });
			} else if (screenfull.enabled && $btn.hasClass('active')) {
				screenfull.exit();
				$app.css({ height: "", width: "" });
				$('body').removeClass('fullscreen_element');
				this.setState({ fullscreen: false });
			} else {
				this.contractForNonFullscreenable($btn);
				this.setState({ fullscreen: false });
			}
		}
	}, {
		key: 'contractForNonFullscreenable',
		value: function contractForNonFullscreenable($btn) {
			$('body').removeClass('fullscreen_element');
		}
	}, {
		key: 'expandForNonFullscreenable',
		value: function expandForNonFullscreenable($btn) {
			$('body').addClass('fullscreen_element');
		}
	}, {
		key: 'render',
		value: function render() {
			var _this = this;

			return React.createElement('div', { id: 'fullscreen', className: 'fullscreen fullscreen_options ' + (this.props.is_webgl_enabled ? "" : "hidden") + ' ' + (this.props.is_webgl_enabled ? "" : "hidden") + ' ' + (this.state.fullscreen ? "active" : ""), onClick: function (e) {
					_this.toggleFullscreen(e);
				} });
		}
	}]);

	return Fullscreen;
})(React.Component);
var GoldRush = createReactClass({
	xAxis: null,
	yAxis: null,
	canvas_width: 0,
	canvas_height: 0,
	padding: 60,
	svg: null,
	x_dom_low: .01,
	y_dom_low: .01,

	colors: {
		"Radial Velocity": "#4363d8",
		"Pulsar Timing": "#800000",
		"Transit": "#ffe119",
		"Imaging": "#e6194B",
		"Microlensing": "#9A6324",
		"Other": "#a8a8a8"
	},

	all_methods: ["Transit", "Radial Velocity", "Microlensing", "Imaging", "Pulsar Timing", "Other"],

	getInitialState: function () {
		var data = JSON.parse(this.props.data);
		var now = new Date();
		var max_year = now.getFullYear();
		var found = false;
		while (!found || max_year < 1989) {
			if (typeof data[max_year.toString()] != "undefined") {
				found = true;
			} else {
				max_year = max_year - 1;
			}
		}
		return {
			max_year: max_year,
			year: max_year,
			planets_this_year: data[max_year].planet_total_discovery,
			year_with_data: max_year.toString(),
			data: data,
			has_data: true
		};
	},

	d3keyfn: function (d) {
		return d.id;
	},

	formatMagnitude: function (d, val) {
		if (val < 3) {
			return d;
		} else if (val < 6) {
			return d / 1000 + "k";
		} else {
			return d / 1e6 + "m";
		}
	},

	formatAxisNum: function (d) {
		var log = Math.log(d) / Math.LN10;
		// return Math.abs(Math.round(log) - log) < 1e-2 ? that.formatAxisNum(d) : '';
		if (d == 1) {
			return 1;
		} else if (Math.abs(Math.round(log) - log) < 1e-2) {
			if (d < 1) {
				return d / 1;
			} else {
				return this.formatMagnitude(d, Math.round(log));
			}
		} else {
			return "";
		}
	},

	componentDidMount: function () {
		var that = this;
		this.canvas_width = $('#gold_rush_chart').width();
		this.canvas_height = $('#gold_rush_chart').height();
		var dataset = this.state.data[this.state.year_with_data]['items'];

		if (dataset.length > 0) {

			// Create scale functions
			var xScale = d3.scale.log() // xScale is width of graphic
			.domain([this.x_dom_low, d3.max(dataset, function (d) {
				return d.pl_orbper; // input domain
			})]).range([this.padding, this.canvas_width - this.padding]); // output range

			var yScale = d3.scale.log() // yScale is height of graphic
			.domain([this.y_dom_low, d3.max(dataset, function (d) {
				return d.pl_masse; // input domain
			})]).range([this.canvas_height - this.padding, this.padding]); // remember y starts on top going down so we flip

			// Define X axis
			var xAxis = d3.svg.axis().scale(xScale).orient("bottom").ticks(0, "e").tickFormat(that.formatAxisNum);

			// Define Y axis
			var yAxis = d3.svg.axis().scale(yScale).orient("left").ticks(0, "e").tickFormat(that.formatAxisNum);

			// Create SVG element
			this.svg = d3.select("#gold_rush_chart").append("svg").attr("width", this.canvas_width).attr("height", this.canvas_height).attr("class", "gold_rush_svg");

			// Create Circles
			this.svg.selectAll("circle").data(dataset, that.d3keyfn).enter().append("circle") // Add circle svg
			// .attr("class", (d) => {return d.pl_discmethod.toLowerCase().replace(new RegExp(' ', 'g'), '_')})
			.attr("cx", function (d) {
				return xScale(d.pl_orbper); // Circle's X
			}).attr("cy", function (d) {
				// Circle's Y
				return yScale(d.pl_masse);
			}).attr("r", 3) // radius
			.attr("stroke", function (d) {
				return that.getColorFor(d.pl_discmethod);
			}).attr("fill", "transparent");

			// Add to X axis
			this.svg.append("g").attr("class", "x axis").attr("transform", "translate(0," + (this.canvas_height - this.padding) + ")").call(xAxis).append("text").attr("class", "label").attr("x", this.canvas_width / 2).attr("y", 45).style("text-anchor", "middle").text("ORBIT PERIOD (EARTH DAYS)");

			// Add to Y axis
			this.svg.append("g").attr("class", "y axis").attr("transform", "translate(" + this.padding + ",0)").call(yAxis).append("text").attr("class", "label").attr("transform", "rotate(-90)").attr("y", -45).attr("x", -1 * (this.canvas_height / 2))
			// .attr("dy", ".71em") //offset planet mass label inside chart
			.style("text-anchor", "middle").text("PLANET MASS (EARTH MASSES)*");
		}

		window.addEventListener("resize", this.redraw);
	},

	componentWillUnmount: function () {
		window.removeEventListener("resize", this.redraw);
	},

	redraw: function () {
		var that = this;
		this.canvas_width = $('#gold_rush_chart').width();
		this.canvas_height = $('#gold_rush_chart').height();
		var dataset = this.state.data[this.state.year_with_data]['items'];

		if (dataset.length > 0) {

			// Rebuild scale functions
			var xScale = d3.scale.log() // xScale is width of graphic
			.domain([this.x_dom_low, d3.max(dataset, function (d) {
				return d.pl_orbper; // input domain
			})]).range([this.padding, this.canvas_width - this.padding]); // output range

			var yScale = d3.scale.log() // yScale is height of graphic
			.domain([this.y_dom_low, d3.max(dataset, function (d) {
				return d.pl_masse; // input domain
			})]).range([this.canvas_height - this.padding, this.padding]); // remember y starts on top going down so we flip

			// Define X axis
			var xAxis = d3.svg.axis().scale(xScale).orient("bottom").ticks(0, "e").tickFormat(that.formatAxisNum);

			// Define Y axis
			var yAxis = d3.svg.axis().scale(yScale).orient("left").ticks(0, "e").tickFormat(that.formatAxisNum);

			// Resize SVG
			this.svg.attr("width", this.canvas_width).attr("height", this.canvas_height);

			// Create Circles
			this.svg.selectAll("circle").attr("cx", function (d) {
				return xScale(d.pl_orbper); // Circle's X
			}).attr("cy", function (d) {
				// Circle's Y
				return yScale(d.pl_masse);
			});

			// Resize X axis
			this.svg.select("g.x").attr("transform", "translate(0," + (this.canvas_height - this.padding) + ")").call(xAxis).select("text.label").attr("x", this.canvas_width / 2);

			// Resize Y axis
			this.svg.select("g.y").call(yAxis).select("text.label").attr("x", -1 * (this.canvas_height / 2));
		}
	},

	getColorFor: function (disc) {
		return this.colors[disc];
	},

	updateData: function () {
		var _this = this;

		var that = this;
		// console.log("update data!", this.state.year_with_data)

		var data = this.state.data[this.state.year_with_data];
		if (data) {
			this.setState({ has_data: true }, function () {
				var dataset = data['items'];

				// Create scale functions
				var xScale = d3.scale.log() // xScale is width of graphic
				.domain([_this.x_dom_low, d3.max(dataset, function (d) {
					return d.pl_orbper; // input domain
				})]).range([_this.padding, _this.canvas_width - _this.padding]); // output range

				var yScale = d3.scale.log() // yScale is height of graphic
				.domain([_this.y_dom_low, d3.max(dataset, function (d) {
					return d.pl_masse; // input domain
				})]).range([_this.canvas_height - _this.padding, _this.padding]); // remember y starts on top going down so we flip

				// Update scale domains
				// xScale.domain([0, d3.max(dataset, function(d) {
				//   return d.pl_orbper; })]);
				// yScale.domain([0, d3.max(dataset, function(d) {
				//   return d.pl_masse; })]);

				// Define X axis
				var xAxis = d3.svg.axis().scale(xScale).orient("bottom").ticks(0, "e").tickFormat(that.formatAxisNum);

				// Define Y axis
				var yAxis = d3.svg.axis().scale(yScale).orient("left").ticks(0, "e").tickFormat(that.formatAxisNum);

				var clear = _this.svg.selectAll("circle").data([]);
				clear.exit().remove();

				// Update circles
				var circles = _this.svg.selectAll("circle").data(dataset, that.d3keyfn); // Update with new data

				circles.enter().append("circle").attr("r", 3).attr("cx", function (d) {
					return xScale(d.pl_orbper);
				}).attr("cy", function (d) {
					return yScale(d.pl_masse);
				}).attr("stroke", function (d) {
					return that.getColorFor(d.pl_discmethod);
				}) // Change color
				.attr("fill", "transparent");

				// circles.exit().remove()

				// Update X Axis
				_this.svg.select(".x.axis").transition().duration(1000).call(xAxis);

				// Update Y Axis
				_this.svg.select(".y.axis").transition().duration(1000).call(yAxis);
			});
		} else {
			return;
		}
	},

	onSliderChange: function (event) {
		var year = event.target.value.toString();
		if (this.state.data[year]) {
			this.setState({ year: year, year_with_data: year, planets_this_year: this.state.data[year].planet_total_discovery }, this.updateData);
		} else {
			this.setState({ year: year });
		}
	},

	getLegend: function () {
		var _this2 = this;

		if (this.state.has_data) {
			var _ret = (function () {
				var data = _this2.state.data[_this2.state.year_with_data];
				if (!data) {
					return {
						v: undefined
					};
				}
				var methods = _this2.all_methods;
				var data_methods = data["methods"];
				return {
					v: React.createElement(
						"div",
						{ className: "legend_items" },
						methods.map(function (v, i) {
							return _this2.getLegendItem(v, i, data_methods);
						})
					)
				};
			})();

			if (typeof _ret === "object") return _ret.v;
		} else {
			return null;
		}
	},

	getLegendItem: function (item, idx, data_methods) {
		return React.createElement(
			"div",
			{ className: "legend_item " + (typeof data_methods[item] != "undefined" ? 'active' : 'inactive'), key: idx },
			React.createElement("div", { className: "color_box", style: { border: "2px solid " + this.getColorFor(item) } }),
			React.createElement(
				"div",
				{ className: "legend_text" },
				item,
				typeof data_methods[item] != "undefined" ? " (" + data_methods[item] + ")" : " (0)"
			)
		);
	},

	render: function () {
		var that = this;
		return React.createElement(
			"div",
			{ className: "" },
			React.createElement(
				"div",
				{ className: "legend" },
				this.getLegend()
			),
			React.createElement("div", { id: "gold_rush_chart", className: "gold_rush_chart" }),
			React.createElement(
				"div",
				{ className: "slider_container" },
				React.createElement(
					"div",
					{ className: "year_discoveries" },
					React.createElement(
						"div",
						{ className: "year" },
						React.createElement(
							"span",
							{ className: "type" },
							"YEAR"
						),
						React.createElement(
							"span",
							{ className: "val" },
							this.state.year
						)
					),
					this.state.planets_this_year > -1 ? React.createElement(
						"div",
						{ className: "discoveries" },
						React.createElement(
							"span",
							{ className: "type" },
							"DISCOVERIES"
						),
						React.createElement(
							"span",
							{ className: "val" },
							this.state.planets_this_year
						)
					) : null
				),
				React.createElement(
					"div",
					{ className: "selektron_container" },
					React.createElement(
						"div",
						{ className: "year_beginning" },
						"1989"
					),
					React.createElement("input", { className: "selektron", type: "range", value: this.state.year, onChange: this.onSliderChange, step: "1", min: "1989", max: this.state.max_year.toString() }),
					React.createElement(
						"div",
						{ className: "year_end" },
						this.state.max_year.toString()
					)
				)
			)
		);
	}
});
var InfoPanel = createReactClass({
	getInitialState: function () {
		return {
			panel_open: false
		};
	},

	infoPanelIsToggleable: function () {
		// Match the logic in getLeftSection
		return !(this.props.overlay_link && this.props.explore_link) && this.props.full_info;
	},

	toggleInfoPanel: function (e) {
		this.setState({ panel_open: !this.state.panel_open }, function () {
			this.props.ranger_state_fn(!this.state.panel_open);
		});
	},

	onExploreClick: function (e) {
		var that = this;
		explore_overlay.init(this.props.explore_link, null, null, function () {
			if (that.props.overlay_callback) {
				that.props.overlay_callback.call();
			}
		});
		this.props.ranger_state_fn(false);
	},

	getExploreHtml: function () {
		if (this.props.explore_link) {
			return React.createElement("a", { className: "explore", onClick: this.onExploreClick });
		} else {
			return "";
		}
	},

	getLeftSection: function () {
		if (this.props.overlay_link && this.props.explore_link) {
			return React.createElement(
				"div",
				{ className: "left_section" },
				React.createElement(
					"a",
					{ className: "info_toggle", onClick: this.onExploreClick },
					React.createElement(
						"div",
						{ className: "title_container" },
						React.createElement(
							"h1",
							{ className: "image_title" },
							this.props.title
						),
						React.createElement("div", { className: "show" })
					),
					React.createElement("h3", { className: "date", dangerouslySetInnerHTML: { __html: this.props.subtitle } })
				)
			);
		} else if (this.props.full_info) {
			return React.createElement(
				"div",
				{ className: "left_section" },
				React.createElement(
					"a",
					{ className: "info_toggle", onClick: this.toggleInfoPanel },
					React.createElement(
						"div",
						{ className: "title_container" },
						React.createElement(
							"h1",
							{ className: "image_title" },
							this.props.title
						),
						React.createElement("div", { className: "caret" })
					),
					React.createElement("h3", { className: "date", dangerouslySetInnerHTML: { __html: this.props.subtitle } })
				),
				React.createElement(
					"div",
					{ className: "full_info" },
					React.createElement(
						"div",
						{ className: "minimap_container" },
						React.createElement("img", { src: this.props.map_img })
					),
					React.createElement("div", { dangerouslySetInnerHTML: { __html: this.props.full_info } }),
					this.getExploreHtml()
				)
			);
		} else {
			return React.createElement(
				"div",
				{ className: "left_section" },
				React.createElement(
					"div",
					{ className: "title_container" },
					React.createElement(
						"h1",
						{ className: "image_title" },
						this.props.title
					)
				),
				React.createElement("h3", { className: "date", dangerouslySetInnerHTML: { __html: this.props.subtitle } })
			);
		}
	},

	render: function () {
		return React.createElement(
			"div",
			{ id: "info_panel", className: this.state.panel_open && this.infoPanelIsToggleable() ? "open" : "" },
			React.createElement(
				"div",
				{ className: "grid_layout" },
				this.getLeftSection(),
				React.createElement(
					"div",
					{ className: "right_section" },
					React.createElement(
						"div",
						{ className: "minimap_container" },
						React.createElement("img", { src: this.props.map_img })
					)
				)
			)
		);
	}
});
var InfoTip = createReactClass({

  getInitialState: function () {
    return {
      info_panel_open: false
    };
  },

  showInfoText: function () {
    this.setState({ info_panel_open: true });
  },

  hideInfoText: function () {
    this.setState({ info_panel_open: false });
  },

  toggleInfoText: function () {
    this.setState({ info_panel_open: !this.state.info_panel_open });
  },

  render: function () {
    var that = this;
    return React.createElement(
      "span",
      { className: this.state.info_panel_open ? "info_tip open" : "info_tip" },
      React.createElement("div", { className: "info_icon", onMouseEnter: this.showInfoText, onMouseLeave: this.hideInfoText, onClick: this.toggleInfoText }),
      React.createElement(
        "div",
        { className: "info_text" },
        this.props.tip_text
      )
    );
  }
});
var MegasectionNav = createReactClass({
  getInitialState: function () {
    var is_touch = $('html').hasClass('touchevents');
    return {
      sticky: false,
      nav_pos: -1,
      active: false,
      active_sub_nav: {},
      last_clicked_sub_nav: {},
      is_touch: is_touch
    };
  },

  toggleNav: function () {
    this.setState({ active: !this.state.active });
  },

  toggleSubNav: function (name) {
    var data = this.state.active_sub_nav;
    var newValue = data[name] ? null : name;
    data[name] = newValue;
    this.setState({ active_sub_nav: data, last_clicked_sub_nav: name });
  },

  componentDidMount: function () {
    var nav_pos = undefined;
    if ($('.magic_shell_subnav').length > 0) {
      nav_pos = $('.magic_shell_subnav').height();
    } else {
      //nav_pos = $('.megasection_nav').offset().top
    }

    if (typeof nav != "undefined") {
      nav.onScroll = null;
    }

    if (typeof magic_shell_nav != "undefined") {
      magic_shell_nav.onScroll = null;
    }

    if (this.props.has_feature && typeof IntersectionObserver != "undefined") {
      var options = {
        root: null,
        rootMargin: '0px',
        threshold: [0]
      };

      var observer = new IntersectionObserver(this.stick, options);

      var target = document.querySelector('.main_feature');
      observer.observe(target);
    }
  },

  stick: function (entries, observer) {
    var sticky = !entries[0].isIntersecting;
    this.setState({ sticky: sticky }, function () {
      $('body').toggleClass("secondary_nav_is_fixed", sticky);
    });
  },

  getCurrentPageName: function () {
    var currentItems = this.props.nav.items.filter(function (item) {
      return item.current;
    });
    if (currentItems.length > 0) {
      return React.createElement(
        'span',
        { className: 'megasection_page_name' },
        this.state.sticky ? ': ' : '',
        '' + currentItems[0].name
      );
    } else {
      return "";
    }
  },

  getNavItemHTML: function (item, i) {
    return React.createElement(
      'li',
      { key: i, className: '' + (item.current ? 'current' : '') },
      this.getArrowBox(item),
      React.createElement(
        'div',
        { className: 'nav_title' },
        this.getLinkTitleTarget(item, true)
      ),
      this.getSubnav(item)
    );
  },

  onArrowBoxClick: function (e) {
    console.log("onArrowBoxClick");
    this.toggleSubNav(e.target.getAttribute("data-name"));
  },

  getArrowBox: function (item) {
    var that = this;
    var name = item.name;
    if (item.items && item.items.length > 0 && !this.state.is_touch) {
      return React.createElement(
        'button',
        { type: 'button',
          onClick: function () {
            that.toggleSubNav(item.name);
          },
          className: 'arrow_box ' + (this.state.active_sub_nav[item.name] ? "reverse" : "") },
        React.createElement(
          'span',
          { className: 'arrow_down' },
          'Expand'
        )
      );
    } else if (item.items && item.items.length > 0 && this.state.is_touch) {
      return React.createElement(
        'button',
        { type: 'button',
          onMouseDown: function () {
            that.toggleSubNav(item.name);
          },
          className: 'arrow_box ' + (this.state.active_sub_nav[item.name] ? "reverse" : "") },
        React.createElement(
          'span',
          { className: 'arrow_down', 'data-name': item.name },
          'Expand'
        )
      );
    } else {
      return null;
    }
  },

  getSubnav: function (item) {
    var that = this;
    if (item.items && item.items.length > 0) {
      return React.createElement(
        'div',
        { className: 'megasection_subnav_container ' + (this.state.active_sub_nav[item.name] ? "" : "megasection_subnav_container--hidden") },
        React.createElement(
          'ul',
          { className: 'megasection_subnav' },
          item.items.map(function (v, i) {
            return React.createElement(
              'li',
              { key: 'sub-' + i, className: '' + (v.current ? 'current' : '') },
              that.getLinkTitleTarget(v)
            );
          })
        )
      );
    } else {
      return null;
    }
  },

  // NOTE: android tablet doesn't seem to see onClick events ?? using onMouseDown when touchevents
  getLinkTitleTarget: function (item, main) {
    var _this = this;

    if (this.state.is_touch) {
      return React.createElement(
        'a',
        { className: main ? 'main_nav_item' : '', 'data-href': item.link, href: item.link, onMouseDown: function (e) {
            return _this.onSubnavClick(e, item, main);
          }, target: item.target },
        item.name
      );
    } else {
      return React.createElement(
        'a',
        { className: main ? 'main_nav_item' : '', 'data-href': item.link, href: item.link, onClick: function (e) {
            return _this.onSubnavClick(e, item, main);
          }, target: item.target },
        item.name
      );
    }
  },

  onSubnavClick: function (event, item, main) {
    console.log('onSubnavClick');
    if ($('html').hasClass('touchevents') && main) {
      this.toggleSubNav(item.name);
      if (this.state.last_clicked_sub_nav == item.name) {
        window.location = item.link;
      } else {
        return false;
      }
    } else {
      this.toggleSubNav(item.name);
      window.location = item.link;
      return false;
    }
  },

  render: function () {
    var that = this;
    return React.createElement(
      'div',
      { className: 'megasection_nav ' + (this.state.sticky ? 'sticky' : '') + ' ' + (this.state.active ? '' : 'megasection_nav--nav-hidden') },
      React.createElement(
        'div',
        { className: 'megasection_title_container ' + (this.state.active ? '' : 'megasection_title_container--nav-hidden'), onClick: that.toggleNav },
        React.createElement(
          'span',
          { className: 'megasection_title' },
          this.state.active ? this.props.nav.title : '',
          this.getCurrentPageName()
        )
      ),
      React.createElement(
        'ul',
        { className: 'nav ' + (this.state.active ? '' : 'nav--hidden') },
        this.props.nav.items.map(function (v, i) {
          return that.getNavItemHTML(v, i);
        })
      )
    );
  }
});
function titleize(str) {
	var words = str.split(/\W/g);
	words = words.map(function (word) {
		return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
	});

	return words.join(" ");
}

var NewWorldsAtlas = createReactClass({

	getInitialState: function () {
		var per_page = mb_utils.getParam('per_page');
		var page = mb_utils.getParam('page');
		var order = mb_utils.getParam('order');
		var planet_system = mb_utils.getParam('planet_system[]');
		var planet_type = mb_utils.getParam('planet_type[]');
		var discovery_method = mb_utils.getParam('discovery_method[]');
		var search = mb_utils.getParam('s');
		return {
			items: [],
			total: 0,
			search: search ? search : "",
			page: page ? parseInt(page[0]) : 0,
			per_page: per_page ? parseInt(per_page[0]) : 10,
			order: order ? order[0].replace('+', ' ') : 'display_name asc',
			start_index: 0,
			end_index: 0,
			page_count: 0,
			planet_system: planet_system ? planet_system : [],
			planet_type: planet_type ? planet_type : [],
			discovery_method: discovery_method ? discovery_method : [],
			first_load: true,
			selected_max: 100
		};
	},

	componentWillMount: function () {
		ReactGA.initialize('UA-75768140-1');
	},

	componentDidMount: function () {
		this.getData(this.initListeners, true);
		var search = mb_utils.getParam('s');
		if (search) {
			document.getElementById("mobile_search_field").value = search;
			document.getElementById("desktop_search_field").value = search;
		}
	},

	initListeners: function () {},

	//returns params object
	getParams: function (maintain_current_page) {
		var that = this;
		var page_number = maintain_current_page ? this.state.page : 0; // always go back to page 1 unless we're paginating or coming in via url

		var params = { ajax_params: {
				order: this.state.order,
				per_page: this.state.per_page,
				page: page_number
			}, cookie_params: {
				order: this.state.order,
				per_page: this.state.per_page,
				page: page_number
			}
		};

		var search_arr = [];
		var planet_system = [];
		$.each([["planet_type", "planet_type"], ["discovery_method", "pl_discmethod"]], function (k, v) {
			var search_term = that.getSearchParamForCheckboxArray(v[0], v[1], params);
			if (search_term) {
				search_arr.push(search_term);
			}
		});

		if (this.state.search && this.state.search != '') {
			params.ajax_params.condition_1 = "%" + this.state.search + "%:display_name:ilike";
			params.cookie_params.s = this.state.search;
		}

		$.each(this.state.planet_system, function (k, v) {
			var ps_option = v.split('planet_system-')[1];
			var col = "";
			if (ps_option == "planets-with-host-stars-visible-to-the-naked-eye") {
				col = "vis_naked";
			} else if (ps_option == "planets-discovered-by-kepler") {
				col = "pl_kepflag";
			} else if (ps_option == "planets-within-multiple-planet-systems") {
				col = "multiple_planet_system";
			}
			params.ajax_params["condition_" + (k + 2)] = "t:" + col;
			planet_system.push(v);
		});
		params.cookie_params.planet_system = planet_system;
		params.ajax_params.search = search_arr.join('+');

		return params;
	},

	getSearchParamForCheckboxArray: function (arr_string, col, params) {
		var search = "";
		var arr = this.state[arr_string];
		if (arr.length > 0) {
			search += "(";
			$.each(arr, function (k, v) {
				search += k == 0 ? "" : "|";
				search += v.split(arr_string + '-')[1];
			});
			search += "):" + col;
			params.cookie_params[arr_string] = arr;
			return search;
		} else {
			return null;
		}
	},

	getData: function (callback, maintain_current_page) {
		var that = this;
		var items = [];
		var params = this.getParams(maintain_current_page);
		mb_utils.createCookie('nwa_filters', $.param(params.cookie_params), 365);
		$.ajax({
			url: "/api/v1/planets",
			data: params.ajax_params,
			method: "GET",
			dataType: "json",
			success: (function (data) {
				console.log("Got items successfully.... ");
				var table_ok = that.state.first_load;
				var d = $.extend(data, { first_load: false });
				that.setState(d, that.checkTableWrapper(table_ok));

				// that.setCookies();
				this.updateIndices();
				if (typeof callback == "function") callback.call();
			}).bind(this),
			error: (function (xhr, status, err) {
				console.error(status, err.toString());
			}).bind(this)
		});
	},

	checkTableWrapper: function (first_load) {
		if (first_load) {
			window.setTimeout(function () {
				mb_responsive_tables.init();
			}, 200);
		}
	},

	updateIndices: function () {
		var start_index = this.state.page * this.state.per_page;
		var end_index = Math.min(this.state.total, start_index + this.state.per_page);
		var page_count = Math.ceil(this.state.total / this.state.per_page);

		this.setState({ start_index: start_index, end_index: end_index, page_count: page_count });
	},

	removeFilter: function (e) {
		var filter = e.target.getAttribute("data-filter-name");
		var arr_string = filter.split('-')[0];
		this.addRemoveCheckboxItemFromArray(false, filter, this.state[arr_string], arr_string);
	},

	openMobileFilters: function (e) {
		$('#secondary_column').addClass('open');
	},

	closeMobileFilters: function (e) {
		$('#secondary_column').removeClass('open');
	},

	expandSection: function (e) {
		$(e.target).parents('.form_section').toggleClass('open');
	},

	clearFilters: function (e) {
		this.setState({ planet_system: [], planet_type: [], discovery_method: [] }, this.getData);
	},

	onSearch: function (e) {
		document.getElementById("mobile_search_field").value = e.target.value;
		this.setState({ search: e.target.value }, this.getData);
	},

	onMobileSearch: function (e) {
		document.getElementById("desktop_search_field").value = e.target.value;
		this.setState({ search: e.target.value }, this.getData);
	},

	scrollToTop: function (e) {
		var el = document.getElementById("article_title");
		if (!!el && el.scrollIntoView) {
			e.preventDefault();
			el.scrollIntoView();
		}
	},

	formatNumber: function (num) {
		if (this.pageIsNan(num)) {
			return "";
		} else {
			var numString = num.toString();
			var formatted = "";
			for (var i = 0; i < numString.length; i++) {
				if ((numString.length - i) % 3 == 0 && i > 0) {
					formatted += ",";
				}
				formatted += numString.charAt(i);
			}
			return formatted;
		}
	},

	selectMultipleFilters: function (e) {
		var $this = $(e.target);
		var selections = $this.data("filterSelections").split(',');
		this._selectFilters(selections);
	},

	_selectFilters: function (selections) {
		$.each(selections, function (k, v) {
			var $target = $('#target-' + v.toLowerCase() + ' input[type=checkbox]');
			var checked = $target.prop('checked');
			if (!checked) {
				$target.click();
			}
		});
	},

	pageIsNan: function (o) {
		return o.toString() != o;
	},

	changePageNumber: function (page) {
		if (this.pageIsNan(page)) {
			console.log("pageNAN", page.toString());
			this.setState({ page: page });
		} else {
			var z_page = page - 1;
			console.log("page", page, z_page);
			this.setState({ page: z_page }, function () {
				this.getData(undefined, true);
			});
			var top = document.documentElement && document.documentElement.scrollTop || document.body.scrollTop;
			if (top > $('.filterable_gallery').offset().top) {
				var iev = mb_utils.getIEVersion();
				if (iev.major > 0 && iev.major < 12) {
					document.documentElement.scrollTop = $('.filterable_gallery').offset().top;
				} else {
					window.scrollTo(0, $('.filterable_gallery').offset().top);
				}
			}
		}
	},

	changeOrder: function (order) {
		console.log("ri: change order", order);
		this.setState({ order: order }, this.getData);
	},

	changePerPage: function (per_page) {
		console.log("ri: change pp", per_page);
		this.setState({ per_page: per_page }, this.getData);
	},

	onCheckBoxChange: function (e) {
		var el = e.target;
		var arr_str = el.name.split('-')[0];
		var arr = this.state[arr_str];
		this.addRemoveCheckboxItemFromArray(el.checked, el.value, arr, arr_str);
	},

	activeFilters: function () {
		var active = this.state.planet_system.concat(this.state.planet_type, this.state.discovery_method);

		return active;
	},

	addRemoveCheckboxItemFromArray: function (checked, value, arr, arr_str) {
		if (arr && value && arr_str) {
			if (checked) {
				console.log("add ", arr_str, value);
				// var active_filters = this.state.active_filters.push(value)
				this.setState({ arr_str: arr.push(value) }, this.getData);
				ReactGA.event({
					category: 'NWA',
					action: 'Added a Filter',
					label: value
				});
			} else {
				var idx = arr.indexOf(value);
				// var idy = this.state.active_filters.indexOf(value)
				if (idx > -1) {
					console.log("remove ", arr_str, value);
					// var active_filters = this.state.active_filters(idy, 1)
					this.setState({ arr_str: arr.splice(idx, 1) }, this.getData);
					ReactGA.event({
						category: 'NWA',
						action: 'Removed a Filter',
						label: value
					});
				}
			}
		}
	},

	isCurrentSort: function (el) {
		var c = "";
		if (this.state.order.indexOf(el) > -1) {
			c += "current";
			if (this.state.order.indexOf('asc') > -1) {
				c += " asc";
			} else {
				c += " desc";
			}
		}
		return c;
	},

	getFilterName: function (filter) {
		var stripped_filter = filter.replace("discovery_method-", "").replace("planet_type-", "").replace("planet_system-", "");
		return titleize(stripped_filter);
	},

	changeSort: function (e) {
		var sort = e.target.attributes["data-sort"].value;
		if (this.state.order.indexOf(sort) > -1) {
			if (e.target.classList.contains('asc')) {
				this.setState({ order: sort + " desc" }, this.getData);
			} else {
				this.setState({ order: sort + " asc" }, this.getData);
			}
		} else {
			this.setState({ order: sort + " asc" }, this.getData);
		}
	},

	render: function () {
		var that = this;
		var per_page_options = [{ label: '10', value: 10 }, { label: '25', value: 25 }, { label: '50', value: 50 }];

		return React.createElement(
			'div',
			{ className: 'grid_layout' },
			React.createElement(
				'article',
				null,
				React.createElement(
					'div',
					{ className: this.state.items.length > 0 ? "filterable_gallery" : "filterable_gallery no_results" },
					React.createElement(
						'header',
						{ id: 'page_header' },
						React.createElement(
							'h1',
							{ id: 'article_title', className: 'module_title_small' },
							'All Discoveries'
						),
						React.createElement(
							'div',
							{ id: 'filter_link_container', className: 'filter_link_container' },
							React.createElement('div', { className: 'download_links' })
						)
					),
					React.createElement('hr', null),
					React.createElement('div', { id: 'modals' }),
					React.createElement(
						'div',
						{ id: 'primary_column' },
						React.createElement(
							'div',
							{ className: 'pagination_container' },
							React.createElement(PaginationCount, {
								count: this.state.total,
								start_index: this.state.start_index,
								end_index: this.state.end_index,
								item_type: 'planets',
								formatNumber: this.formatNumber,
								first_load: this.state.first_load
							}),
							React.createElement(PageSort, {
								per_page_options: per_page_options,
								initial_pp: this.state.per_page,
								initial_sort: this.state.order,
								page: this.state.page + 1,
								count: this.state.total,
								changeSort: this.changeOrder,
								changePage: this.changePageNumber,
								changePerPage: this.changePerPage,
								page_count: this.state.page_count,
								formatNumber: this.formatNumber
							}),
							React.createElement(
								'div',
								{ className: 'mobile_options_container' },
								React.createElement(
									'div',
									{ className: 'search_binder' },
									React.createElement('input', { className: 'search_field', id: 'mobile_search_field', name: 'keyword', placeholder: 'Star or planet name', type: 'search', onChange: this.onMobileSearch }),
									React.createElement('input', { className: 'search_submit', type: 'button', value: '' })
								),
								React.createElement(
									'div',
									{ className: 'mobile_filter_btn' },
									React.createElement(
										'a',
										{ className: 'button', href: 'javascript:void(0)', onClick: this.openMobileFilters },
										'Filter'
									)
								)
							),
							that.activeFilters().length > 0 ? React.createElement(
								'div',
								{ className: 'filtering_results' },
								'Filtering:',
								React.createElement(
									'span',
									{ className: 'applied_filters' },
									that.activeFilters().map(function (item) {
										var filter_name = that.getFilterName(item);
										return React.createElement(
											'div',
											{ key: item, className: 'applied_filter' },
											React.createElement('a', { className: 'filter_remove', href: 'javascript:void(0)', 'data-filter-name': item, onClick: that.removeFilter }),
											filter_name
										);
									})
								),
								React.createElement(
									'a',
									{ className: 'clear_filter', href: 'javascript:void(0)', 'data-submit-form': 'true', onClick: that.clearFilters },
									'Clear filters'
								)
							) : React.createElement('div', { className: 'filtering_results' })
						),
						React.createElement(
							'section',
							{ className: 'data_results grid_gallery' },
							React.createElement(
								'div',
								{ className: 'datasearch extra_wide_content tbl', id: 'results' },
								React.createElement(
									'ul',
									{ className: 'header' },
									this.props.results_columns.map(function (col) {
										return React.createElement(
											'li',
											{ key: col.col_name, 'data-sort': col.col_name, className: that.isCurrentSort(col.col_name), onClick: that.changeSort },
											col.name
										);
									})
								),
								this.state.items.map(function (item) {
									return React.createElement(
										'ul',
										{ className: 'exoplanet', key: item.id },
										React.createElement(
											'li',
											null,
											React.createElement(
												'a',
												{ href: item.url },
												item.display_name
											)
										),
										React.createElement(
											'li',
											null,
											item.st_dist
										),
										React.createElement(
											'li',
											null,
											item.mass_display
										),
										React.createElement(
											'li',
											null,
											item.st_optmag
										),
										React.createElement(
											'li',
											null,
											item.discovery_date
										)
									);
								})
							)
						),
						React.createElement(
							'div',
							{ className: 'errors' },
							React.createElement(
								'div',
								{ className: 'date_error', style: { display: "none" } },
								'ERROR: Incorrect date format - please enter date as \'YYYY-MM-DD\'.'
							)
						),
						React.createElement(
							'footer',
							{ className: 'search_footer' },
							React.createElement(
								'div',
								{ className: 'pagination_options ' },
								React.createElement(PageSortPagination, {
									initial_pp: that.state.per_page,
									page: this.state.page + 1,
									changePage: that.changePageNumber,
									page_count: this.state.page_count,
									formatNumber: this.formatNumber
								}),
								React.createElement(
									'span',
									{ className: 'scroll_to_top' },
									React.createElement(
										'a',
										{ href: '#', onClick: this.scrollToTop },
										'Back to top'
									)
								)
							)
						)
					),
					React.createElement(
						'div',
						{ id: 'secondary_column' },
						React.createElement(
							'aside',
							{ className: 'boxed filter_search' },
							React.createElement(
								'header',
								null,
								React.createElement(
									'h2',
									{ className: 'sidebar_title' },
									'Search'
								)
							),
							React.createElement(
								'div',
								{ className: 'search_binder' },
								React.createElement('input', { className: 'search_field', id: 'desktop_search_field', name: 'keyword', placeholder: 'Star or planet name', type: 'search', onChange: this.onSearch }),
								React.createElement('input', { className: 'search_submit', type: 'button', value: '' })
							)
						),
						React.createElement(
							'aside',
							{ className: 'boxed sidebar_filters' },
							React.createElement(
								'header',
								null,
								React.createElement(
									'h2',
									null,
									'Filters'
								),
								React.createElement(
									'div',
									{ className: 'mobile_filter_controls' },
									React.createElement(
										'a',
										{ className: 'clear_filter', href: 'javascript:void(0)', 'data-submit-form': 'true', onClick: that.clearFilters },
										'Clear all'
									),
									React.createElement(
										'a',
										{ className: 'button done', href: 'javascript:void(0)', onClick: that.closeMobileFilters },
										'Done'
									)
								)
							),
							React.createElement('hr', null),
							React.createElement(
								'div',
								{ className: 'form_section' },
								React.createElement(
									'h4',
									null,
									'Planet System'
								),
								React.createElement(
									'div',
									{ className: 'expand_section', onClick: that.expandSection },
									React.createElement('div', { className: 'arrow_down' })
								),
								React.createElement(CheckboxList, { items: that.props.filters.planet_system, checked_items: this.state.planet_system, when_clicked: this.onCheckBoxChange, checkbox_class: 'ri_checkbox', form_section: 'planet_system', text_format: 'none' })
							),
							React.createElement('hr', null),
							React.createElement(
								'div',
								{ className: 'form_section' },
								React.createElement(
									'h4',
									null,
									'Planet Type'
								),
								React.createElement(
									'div',
									{ className: 'expand_section', onClick: that.expandSection },
									React.createElement('div', { className: 'arrow_down' })
								),
								React.createElement(CheckboxList, { items: that.props.filters.planet_type, text_format: 'none', checked_items: this.state.planet_type, when_clicked: this.onCheckBoxChange, checkbox_class: 'ri_checkbox', form_section: 'planet_type', show_count: 'true' })
							),
							React.createElement('hr', null),
							React.createElement(
								'div',
								{ className: 'form_section' },
								React.createElement(
									'h4',
									null,
									'Discovery Method'
								),
								React.createElement(
									'div',
									{ className: 'expand_section', onClick: that.expandSection },
									React.createElement('div', { className: 'arrow_down' })
								),
								React.createElement(CheckboxList, { items: that.props.filters.discovery_method, checked_items: this.state.discovery_method, when_clicked: this.onCheckBoxChange, checkbox_class: 'ri_checkbox', form_section: 'discovery_method', show_count: 'true' })
							)
						)
					)
				)
			)
		);
	}
});
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// Very similar to solar system but missing lots of items like stellar counts etc. look at solar system dashboard if
// looking for those implementations. removed from this one.
/*
* {"title": "Distance from Sun", "from":"SUN", "to":"JUPITER", "type":"api", "request":"distance"}
* {"title": "One Way Light Time to the Sun", "from":"SUN", "to":"JUPITER", "type":"api", "request":"one_way_light_time", "decimals":4},
* {"title": "Length of Year", "value": "4,333 Earth Days"}
* {"type":"countdown", "id": 11515, "count_up":false}
*/

var PageDashboard = (function (_React$Component) {
	_inherits(PageDashboard, _React$Component);

	function PageDashboard(props) {
		_classCallCheck(this, PageDashboard);

		_get(Object.getPrototypeOf(PageDashboard.prototype), 'constructor', this).call(this, props);
		this.state = {
			api: [],
			countdown: [],
			lookup: []
		};
	}

	_createClass(PageDashboard, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			if (!this.props.single_slide && !this.props.not_slick) {
				this.carousel = $('#page_dashboard').slick({
					dots: false,
					infinite: true,
					speed: 300,
					slide: '.slide',
					slidesToShow: 5,
					slidesToScroll: 5,
					centerMode: false,
					variableWidth: false,
					arrows: true,
					onInit: function (slider) {
						// deprecated
						$('.dashboard').css("visibility", "visible");
					},
					responsive: [{
						breakpoint: 1500,
						settings: {
							slidesToShow: 4,
							slidesToScroll: 4
						}
					}, {
						breakpoint: 1200,
						settings: {
							slidesToShow: 3,
							slidesToScroll: 3
						}
					}, {
						breakpoint: 1024,
						settings: {
							slidesToShow: 2,
							slidesToScroll: 2
						}
					}, {
						breakpoint: 769,
						settings: {
							slidesToShow: 2,
							slidesToScroll: 2
						}
					}, {
						breakpoint: 700,
						settings: {
							slidesToShow: 1,
							slidesToScroll: 1,
							centerPadding: '0px'
						}
					}
					/*
     Were using the 700 pixel breakpoint above,
     since the SSE site has particularly long item names
     on the Beyond the Solar System page
     {
     	breakpoint: 480,
     	settings: {
     		slidesToShow: 1,
     		slidesToScroll: 1,
     		centerPadding: '0px'
     	}
     }
     */
					]
				});

				$('body').on('dashboard_resize', function () {
					// https://github.com/kenwheeler/slick/issues/429#issuecomment-57450725
					$('#page_dashboard')[0].slick.refresh();
				});

				// SHIM: The slick slider doesnt seem to respond to orientation changes on Android devices
				// (possibly because theres a delay while the browser is rendering the page)
				window.addEventListener('orientationchange', function () {
					var clock = undefined;

					// Refresh the slider every half second
					clock = setInterval(function () {
						// https://github.com/kenwheeler/slick/issues/429#issuecomment-57450725
						$('#page_dashboard')[0].slick.refresh();
					}, 500);

					// Stop refreshing after 3 seconds
					setTimeout(function () {
						clearInterval(clock);
					}, 3000);
				});
			}
		}

		//pulled from https://stackoverflow.com/questions/5731193/how-do-i-format-numbers-using-javascript
	}, {
		key: 'formatThousandsNoRounding',
		value: function formatThousandsNoRounding(n, dp) {
			var e = '',
			    s = e + n,
			    l = s.length,
			    b = n < 0 ? 1 : 0,
			    i = s.lastIndexOf('.'),
			    j = i == -1 ? l : i,
			    r = e,
			    d = s.substr(j + 1, dp);
			while ((j -= 3) > b) {
				r = ',' + s.substr(j, 3) + r;
			}
			return s.substr(0, j + 3) + r + (dp ? '.' + d + (d.length < dp ? '00000'.substr(0, dp - d.length) : e) : e);
		}
	}, {
		key: 'convertOption',
		value: function convertOption(item, i, just_the_val) {
			var multi_idx = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];

			if (item.type == "api") {
				return this.buildApiSlide(item, i, just_the_val);
			} else if (item.type == "countdown") {
				return this.buildCountdownSlide(item, i, multi_idx);
			} else if (typeof item.lookup != "undefined" || item.type == "lookup") {
				return this.buildLookupSlide(item, i, just_the_val, multi_idx);
			} else if (typeof item.values != "undefined") {
				return this.buildMultipleValuesSlide(item, i);
			} else {
				return this.buildStaticSlide(item.title, item.value, just_the_val, { suffix: item.suffix });
			}
		}
	}, {
		key: 'buildApiSlide',
		value: function buildApiSlide(item, i, just_the_val) {
			if (just_the_val) {
				return React.createElement(SpiceAPI, { base_url: '/spice_data', query: item });
			} else {
				return React.createElement(
					'div',
					null,
					React.createElement(
						'a',
						{ className: 'dashboard_link' },
						React.createElement(
							'div',
							{ className: 'readout' },
							React.createElement(
								'div',
								{ className: 'title' },
								item['title']
							),
							React.createElement(SpiceAPI, { base_url: '/spice_data', query: item })
						)
					)
				);
			}
		}
	}, {
		key: 'buildCountdownSlide',
		value: function buildCountdownSlide(item, i, multi_idx) {
			var data = this.state.countdown[i];
			if (typeof multi_idx == "number" && Array.isArray(data)) {
				data = data[multi_idx];
			}
			if (data && !Array.isArray(data)) {
				var title = item['title'] ? item['title'] : data['title'];
				return React.createElement(
					'div',
					{ className: 'image_and_description_container' },
					React.createElement(Countdown, { count_up: item['count_up'], date: data['date'], title: title })
				);
			} else {
				this.getCountdownData(item, i, multi_idx);
			}
		}
	}, {
		key: 'buildLookupSlide',
		value: function buildLookupSlide(item, i, just_the_val, multi_idx) {
			var data = this.state.lookup[i];
			if (typeof multi_idx == "number" && Array.isArray(data)) {
				data = data[multi_idx];
			}
			if (data && !Array.isArray(data)) {
				var title = item['title'];
				if (!title) {
					title = data['title'];
				}
				return this.buildStaticSlide(title, this.formatThousandsNoRounding(data['value']) + ' ' + data['units'], null, just_the_val);
			} else {
				this.getLookupData(item, i, multi_idx);
				return null;
			}
		}
	}, {
		key: 'buildMultipleValuesSlide',
		value: function buildMultipleValuesSlide(item, i) {
			console.log(item);
			var that = this;
			return React.createElement(
				'div',
				null,
				React.createElement(
					'div',
					{ className: 'dashboard_link' },
					React.createElement(
						'div',
						{ className: 'readout multiple' },
						React.createElement(
							'div',
							{ className: 'subtitle' },
							item["title"]
						),
						item.values.map(function (v, j) {
							if (j + 1 == item.values.length) {
								return React.createElement(
									'span',
									{ className: 'value_container last' },
									that.convertOption(v, i, true, j)
								);
							} else {
								return React.createElement(
									'span',
									{ className: 'value_container' },
									that.convertOption(v, i, true, j)
								);
							}
						})
					)
				)
			);
		}
	}, {
		key: 'getLookupData',
		value: function getLookupData(item, i, multi_idx) {
			var that = this;
			var url = undefined;
			if (typeof item.api_url != 'undefined') {
				url = item.api_url;
			} else {
				return null;
			}
			$.getJSON(url, function (data) {
				if (typeof error == "undefined") {
					var new_lookup = that.state.lookup;
					if (typeof multi_idx == 'number') {
						if (!Array.isArray(new_lookup[i])) {
							new_lookup[i] = [];
						}

						new_lookup[i][multi_idx] = typeof item.col != 'undefined' ? { title: item.title, value: data[item.col], units: "" } : data;
					} else {
						new_lookup[i] = typeof item.col != 'undefined' ? { title: item.title, value: data[item.col], units: "" } : data;
					}
					that.setState({ lookup: new_lookup });
				}
			});
		}
	}, {
		key: 'getCountdownData',
		value: function getCountdownData(item, i, multi_idx) {
			var that = this;
			$.getJSON('/api/v1/basic_html_elements/' + item['id'] + '}', function (data) {
				if (data['publish_date']) {
					var new_countdown = that.state.countdown;
					if (typeof multi_idx == 'number') {
						if (!Array.isArray(new_countdown[i])) {
							new_countdown[i] = [];
						}
						new_countdown[i][multi_idx] = { date: data['publish_date'], title: data['title'] };
					} else {
						new_countdown[i] = { date: data['publish_date'], title: data['title'] };
					}
					that.setState({ countdown: new_countdown });
				}
			});
		}
	}, {
		key: 'buildStaticSlide',
		value: function buildStaticSlide(title, value, just_the_val, options) {
			if (just_the_val) {
				return React.createElement(
					'div',
					{ className: 'primary_value' },
					value,
					options && options.suffix ? " " + options.suffix : ""
				);
			} else {
				return React.createElement(
					'div',
					null,
					React.createElement(
						'div',
						{ className: 'dashboard_link' },
						React.createElement(
							'div',
							{ className: 'readout' },
							React.createElement(
								'div',
								{ className: 'primary_value' },
								value,
								options && options.suffix ? " " + options.suffix : ""
							),
							React.createElement(
								'div',
								{ className: 'subtitle' },
								title
							)
						)
					)
				);
			}
		}
	}, {
		key: 'render',
		value: function render() {
			var that = this;
			if (this.props.single_value) {
				return React.createElement(
					'span',
					null,
					this.convertOption(this.props.options[0], 0, true)
				);
			} else if (this.props.single_slide) {
				if (this.props.options.type == 'api') {
					return React.createElement(
						'div',
						{ className: 'readout' },
						this.convertOption(this.props.options, 0, false)
					);
				} else {
					return React.createElement(
						'div',
						{ className: 'readout' },
						this.convertOption(this.props.options[0], 0, false)
					);
				}
			} else if (this.props.not_slick) {
				return React.createElement(
					'div',
					{ className: 'dashboard_menu' },
					React.createElement(
						'div',
						{ className: 'dashboard_menu_items' },
						React.createElement(
							'header',
							null,
							React.createElement(
								'h2',
								{ className: 'section_title' },
								this.props.title
							),
							React.createElement(
								'small',
								null,
								this.props.subtitle
							)
						),
						React.createElement(
							'ul',
							null,
							that.props.options.map(function (v, i) {
								return React.createElement(
									'li',
									{ key: i, className: 'slide' },
									' ',
									that.convertOption(v, i)
								);
							})
						)
					)
				);
			} else {
				return React.createElement(
					'section',
					{ className: 'dashboard' },
					React.createElement(
						'div',
						{ className: 'slide_container', id: 'page_dashboard' },
						that.props.options.map(function (v, i) {
							return React.createElement(
								'li',
								{ key: i, className: 'slide' },
								' ',
								that.convertOption(v, i)
							);
						})
					)
				);
			}
		}
	}]);

	return PageDashboard;
})(React.Component);

/*<div className="dashboard_link">*/ /*<Countdown count_up={item['count_up']} date={data['date']} title={data['title']}/>*/;
function debounce(fn, delay) {
	var timer = null;
	return function () {
		var context = this,
		    args = arguments;
		clearTimeout(timer);
		timer = setTimeout(function () {
			fn.apply(context, args);
		}, delay);
	};
};
var PageSort = createReactClass({
	getInitialState: function () {
		return {
			current_page: this.props.initial_page,
			current_sort: this.props.initial_sort,
			current_pp: this.props.initial_pp
		};
	},

	changeSort: function (event) {
		var s = event.target.value;
		this.setState({ current_sort: s }, this.props.changeSort(s));
	},

	changePerPage: function (event) {
		var pp = event.target.value;
		this.setState({ current_pp: pp }, this.props.changePerPage(pp));
	},

	render: function () {
		return React.createElement(
			"div",
			{ className: "pagination_options" },
			React.createElement(PageSortPagination, this.props),
			React.createElement(
				"div",
				{ className: "options" },
				React.createElement(
					"div",
					{ className: "page_option_wrapper per_page" },
					React.createElement(
						"label",
						null,
						" Per page"
					),
					React.createElement(
						"select",
						{ className: "options_field", id: "per_page", name: "per_page", defaultValue: this.props.initial_pp, onChange: this.changePerPage },
						this.props.per_page_options.map(function (option) {
							return React.createElement(
								"option",
								{ key: option.value, value: option.value },
								option.label
							);
						})
					)
				)
			)
		);
	}

});

var PageSortPagination = createReactClass({
	getInitialState: function () {
		return {
			page_input_val: this.props.page
		};
	},
	componentDidMount: function () {
		$('.page_selector input').val('');
	},

	prevPage: function (e) {
		if (this.props.page > 1) {
			var prev = this.props.page - 1;
			this.props.changePage(prev);
			this.setState({ page_input_val: prev }, this.props.changePage(prev));
		}
	},

	nextPage: function (e) {
		if (this.props.page < this.props.page_count) {
			var next = this.props.page + 1;
			this.setState({ page_input_val: next }, this.props.changePage(next));
		}
	},

	onPageInput: function (e) {
		var val = parseInt(e.target.value);
		if (val < 1) {
			val = 1;
		} else if (val > this.props.page_count) {
			val = this.props.page_count;
		}
		this.setState({ page_input_val: val }, this.props.changePage(val));
	},

	render: function () {
		var prev_disabled = this.props.page <= 1;
		var next_disabled = this.props.page >= this.props.page_count;
		return React.createElement(
			"div",
			null,
			React.createElement(
				"div",
				{ className: "pagination_nav" },
				React.createElement(
					"nav",
					{ className: "pagination" },
					React.createElement(
						"span",
						{ className: "prev" + (prev_disabled ? " disabled" : "") },
						React.createElement("a", { href: "javascript:void(0)", rel: "prev", onClick: this.prevPage })
					),
					React.createElement(
						"div",
						{ className: "page_selector" },
						React.createElement("input", { className: "page_num", placeholder: this.props.formatNumber ? this.props.formatNumber(this.props.page) : this.props.page, value: this.props.page,
							size: "2", type: "number", onChange: this.onPageInput, min: "1", max: this.props.page_count }),
						" of",
						React.createElement(
							"span",
							{ className: "total_pages" },
							" ",
							this.props.formatNumber ? this.props.formatNumber(this.props.page_count) : this.props.page_count
						)
					),
					React.createElement(
						"span",
						{ className: "next" + (next_disabled ? " disabled" : "") },
						React.createElement("a", { href: "javascript:void(0)", rel: "next", onClick: this.nextPage })
					)
				)
			)
		);
	}
});

var PaginationCount = createReactClass({
	render: function () {
		var psort;
		if (this.props.first_load) {
			psort = React.createElement(
				"div",
				{ className: "pagination_status" },
				React.createElement(
					"span",
					null,
					"Loading..."
				)
			);
		} else if (this.props.count == 0) {
			psort = React.createElement(
				"div",
				{ className: "pagination_status" },
				React.createElement(
					"span",
					null,
					"No results found."
				)
			);
		} else {
			psort = React.createElement(
				"div",
				{ className: "pagination_status" },
				React.createElement(
					"span",
					{ className: "nonessential" },
					"Showing"
				),
				React.createElement(
					"b",
					null,
					React.createElement(
						"span",
						{ className: "start_index" },
						" ",
						this.props.formatNumber ? this.props.formatNumber(this.props.start_index + 1) : this.props.start_index + 1
					),
					"-",
					React.createElement(
						"span",
						{ className: "end_index" },
						this.props.formatNumber ? this.props.formatNumber(this.props.end_index) : this.props.end_index,
						" "
					)
				),
				"of",
				React.createElement(
					"b",
					null,
					React.createElement(
						"span",
						{ className: "total_results" },
						" ",
						this.props.formatNumber ? this.props.formatNumber(this.props.count) : this.props.count,
						" "
					)
				),
				React.createElement(
					"span",
					{ className: "nonessential" },
					this.props.item_type
				)
			);
		}
		return psort;
	}
});
var RangerInfoPanel = createReactClass({
	getInitialState: function () {
		return {
			minimized: false
		};
	},

	toggleMinimized: function () {
		this.setState({ minimized: !this.state.minimized });
	},

	onExploreClick: function () {
		var that = this;
		explore_overlay.init(this.props.feature.url, null, null, function () {

			// SHIM: Attempt to trigger a browser repaint in Safari 11
			var article = document.querySelector('article.guild_navigator_canvas');
			if (article) {
				var parent = article.parentNode;
				parent.removeChild(article);
				parent.appendChild(article);
			}

			if (that.props.overlay_callback) {
				that.props.overlay_callback.call();
			}
		});
	},
	render: function () {
		if (this.props.feature) {
			if (this.props.view == 'planet') {
				return React.createElement(
					'div',
					{ className: 'viewer_text_area ' + (this.state.minimized ? "minimized" : "") },
					React.createElement('div', { className: 'expander', onClick: this.toggleMinimized }),
					React.createElement(
						'header',
						null,
						React.createElement(
							'h1',
							{ className: 'media_feature_title planet_name' },
							this.props.feature.title
						)
					),
					React.createElement(
						'div',
						{ className: 'description planet_description' },
						this.props.feature.description
					),
					React.createElement(
						'footer',
						null,
						React.createElement(
							'a',
							{ className: 'view_more overlay_link', onClick: this.onExploreClick },
							'More',
							React.createElement(
								'div',
								{ className: 'icon' },
								React.createElement('div', { className: 'plus_icon' })
							)
						)
					)
				);
			} else if (this.props.view == 'system') {
				return React.createElement(
					'div',
					{ className: 'viewer_text_area ' + (this.state.minimized ? "minimized" : "") },
					React.createElement('div', { className: 'expander', onClick: this.toggleMinimized }),
					React.createElement(
						'header',
						null,
						React.createElement(
							'h1',
							{ className: 'media_feature_title planet_name' },
							this.props.feature.title
						)
					),
					React.createElement(
						'div',
						{ className: 'description planet_description' },
						this.props.feature.subtitle
					)
				);
			} else {
				return null;
			}
		} else {
			return null;
		}
	}
});
var RangerToolbar = createReactClass({
	getInitialState: function () {
		return {
			compare_system: false,
			compare_earth: false,
			compare_jupiter: false,
			compare_sun: false,
			compare_sun_jupiter: false,
			mobile_open: false,
			mobile_info: false,
			mobile_options: false,
			planet_compare: '',
			system_compare: ''
		};
	},

	componentDidMount: function () {
		$(document).on('reset_compares', this.resetCompares);
	},

	componentWillUnmount: function () {
		$(document).off('reset_compares');
	},

	resetCompares: function () {
		console.log("resetCompares");
		this.setState({ compare_system: false, compare_earth: false, compare_jupiter: false, compare_sun: false, compare_sun_jupiter: false });
	},

	returnToGrid: function () {
		$('.planet_navigator').removeClass('visible');
		$('.grid_menu').show();
		// $('.ranger_feature_toolbar').show();
	},

	onClickPlanet: function () {
		console.log("click planet");
		var status = this.checkAndRemoveCompare();
		this.setState(status, function () {
			this.props.view_changed('planet');
		});
	},

	onClickSystem: function () {
		console.log("click system");
		var status = this.checkAndRemoveCompare();
		this.setState(status, function () {
			this.props.view_changed('system');
		});
	},

	checkAndRemoveCompare: function () {
		var status = {};
		if (this.props.view == 'planet' && (this.state.compare_earth || this.state.compare_jupiter)) {
			status["compare_earth"] = false;
			status["compare_jupiter"] = false;
			this.props.ranger_update({ removeCompare: null }, null, function (ack) {});
		} else if (this.props.view == 'system' && this.state.compare_system) {
			status["compare_system"] = false;
			var val = this.props.feature.ranger_system_id;
			this.props.ranger_update({ showSystemCompare: { name: val, show: false } }, null, function (ack) {
				console.log(ack);
			});
		} else if (this.props.view == 'star' && (this.state.compare_sun || this.state.compare_sun_jupiter)) {
			status["compare_sun"] = false;
			status["compare_sun_jupiter"] = false;
			var val = this.props.target.toUpperCase();
			this.props.comparing_sun(false);
			this.props.ranger_update({ removeCompare: null }, null, function (ack) {
				console.log(ack);
			});
		}

		return status;
	},

	handleSystemCompare: function (compare) {
		var val = this.props.feature['ranger_system_id'];
		console.log("handleSystemCompare");
		this.setState({ compare_system: compare, system_compare: compare ? 'system' : '' }, function () {
			this.props.ranger_update({ showSystemCompare: { name: val, show: compare } }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	toggleSystemCompare: function () {
		this.handleSystemCompare(!this.state.compare_system);
	},
	toggleEarthCompare: function () {
		if (this.state.compare_earth) {
			this.removeCompare();
		} else {
			this.enableEarthCompare();
		}
	},
	toggleJupiterCompare: function () {
		if (this.state.compare_jupiter) {
			this.removeCompare();
		} else {
			this.enableJupiterCompare();
		}
	},

	enableSunCompare: function () {
		this.setState({ compare_sun_jupiter: false, compare_sun: true }, function () {
			this.props.comparing_sun(true);
			this.props.ranger_update({ showCompareObject: "Compare_Sun" }, null, function (ack) {
				console.log(ack);
			});
		});
	},
	enableSunJupiterCompare: function () {
		this.setState({ compare_sun_jupiter: true, compare_sun: false }, function () {
			this.props.comparing_sun(true);
			this.props.ranger_update({ showCompareObject: "Compare_Jupiter" }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	removeCompare: function () {
		this.setState({ compare_jupiter: false, compare_earth: false }, function () {
			this.props.ranger_update({ removeCompare: null }, null, function (ack) {});
		});
	},

	enableJupiterCompare: function () {
		var val = this.props.target;
		console.log("enableJupiterCompare");

		this.setState({ compare_jupiter: true, compare_earth: false }, function () {
			this.props.ranger_update({ showCompareObject: "Compare_Jupiter" }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	enableEarthCompare: function () {
		var val = this.props.target;
		console.log("enableEarthCompare");

		this.setState({ compare_jupiter: false, compare_earth: true, planet_compare: 'earth' }, function () {
			this.props.ranger_update({ showCompareObject: "Compare_Earth" }, null, function (ack) {
				console.log(ack);
			});
		});
	},

	comparePlanetOptions: function () {
		if (this.canComparePlanet()) {
			return React.createElement(
				'div',
				{ className: 'secondary_selectors ' },
				React.createElement(
					'span',
					{ className: 'selector_label' },
					'Compare'
				),
				React.createElement(
					'ul',
					{ className: 'planet_compare' },
					React.createElement(
						'li',
						{ className: this.state.compare_earth ? 'current' : '' },
						React.createElement(
							'a',
							{ className: 'planet_earth', onClick: this.toggleEarthCompare },
							'Earth'
						)
					),
					React.createElement(
						'li',
						{ className: this.state.compare_jupiter ? 'current' : '' },
						React.createElement(
							'a',
							{ className: 'planet_jupiter', onClick: this.toggleJupiterCompare },
							'Jupiter'
						)
					)
				)
			);
		} else {
			return null;
		}
	},

	canComparePlanet: function () {
		return typeof this.props.feature['pl_radj'] != "undefined" && parseFloat(this.props.feature['pl_radj']) > 0;
	},

	getCompareOptions: function () {
		if (this.props.view == 'planet') {
			return this.comparePlanetOptions();
		} else {
			return React.createElement(
				'div',
				{ className: 'secondary_selectors ' },
				React.createElement(
					'ul',
					{ className: 'system_compare' },
					React.createElement(
						'li',
						{ className: this.state.compare_system ? 'current' : '' },
						React.createElement(
							'a',
							{ className: 'solar_system_compare', onClick: this.toggleSystemCompare },
							'Compare to our solar system'
						)
					)
				)
			);
		}
	},

	getToolbarClasses: function () {
		var klasses = ['webgl_toolbar'];
		if (!this.state.mobile_open) {
			klasses.push('minimized');
		}
		if (this.state.mobile_info) {
			klasses.push('info_mode');
		} else if (this.state.mobile_options) {
			klasses.push('options_mode');
		}
		return klasses.join(' ');
	},

	onMobileInfo: function () {
		this.setState({ mobile_open: true, mobile_info: true, mobile_options: false });
	},

	onMobileOptions: function () {
		this.setState({ mobile_open: true, mobile_info: false, mobile_options: true });
	},

	mobileClose: function () {
		this.setState({ mobile_open: false });
	},

	onChangeView: function (e) {
		if (e.currentTarget.value == 'planet') {
			this.onClickPlanet();
		} else {
			this.onClickSystem();
		}
	},

	onChangePlanetCompare: function (e) {
		var val = e.currentTarget.value;
		if (val == 'earth') {
			this.enableEarthCompare();
		} else if (val == 'jupiter') {
			this.enableJupiterCompare();
		} else {
			this.removeCompare();
		}
	},

	onChangeSystemCompare: function (e) {
		var val = e.currentTarget.value;
		this.toggleSystemCompare(val == 'system');
	},

	getPlanetCompareSelect: function () {
		if (this.props.view == 'planet' && this.canComparePlanet()) {
			return React.createElement(
				'select',
				{ value: this.props.planet_compare, onChange: this.onChangePlanetCompare },
				React.createElement(
					'option',
					{ value: '' },
					'Single planet'
				),
				React.createElement(
					'option',
					{ value: 'earth' },
					'Compare to Earth'
				),
				React.createElement(
					'option',
					{ value: 'jupiter' },
					'Compare to Jupiter'
				)
			);
		} else {
			return null;
		}
	},

	getSystemCompareSelect: function () {
		if (this.props.view == 'system') {
			return React.createElement(
				'select',
				{ value: this.props.system_compare, onChange: this.onChangeSystemCompare },
				React.createElement(
					'option',
					{ value: '' },
					'Single system'
				),
				React.createElement(
					'option',
					{ value: 'system' },
					'Compare to our solar system'
				)
			);
		} else {
			return null;
		}
	},

	render: function () {
		if (this.props.compact) {
			return React.createElement(
				'div',
				{ className: 'ranger_feature_toolbar' },
				React.createElement(
					'div',
					{ className: 'webgl_nav_container' },
					React.createElement(
						'nav',
						{ className: 'select_menus' },
						React.createElement(
							'select',
							{ value: this.props.view, onChange: this.onChangeView },
							React.createElement(
								'option',
								{ value: 'planet' },
								'Planet view'
							),
							React.createElement(
								'option',
								{ value: 'system' },
								'System view'
							)
						),
						this.getPlanetCompareSelect(),
						this.getSystemCompareSelect()
					)
				),
				React.createElement(
					'div',
					{ className: 'fullscreen_options' },
					React.createElement(Fullscreen, { is_webgl_enabled: this.props.is_webgl_enabled, app_selector: '#eox_app' })
				)
			);
		} else if (this.props.mission_module) {
			return React.createElement(
				'div',
				{ className: 'webgl_toolbar_container' },
				React.createElement(
					'div',
					{ className: 'fullscreen_options' },
					React.createElement(Fullscreen, { is_webgl_enabled: this.props.is_webgl_enabled, app_selector: '#eox_app' })
				)
			);
		} else {
			return React.createElement(
				'div',
				{ className: 'webgl_toolbar_container' },
				React.createElement(
					'div',
					{ className: this.getToolbarClasses() },
					React.createElement('div', { className: 'mobile_expander', onClick: this.mobileClose }),
					React.createElement(
						'div',
						{ className: 'menu_selector' },
						React.createElement('div', { className: 'back_to_menu_icon', onClick: this.returnToGrid })
					),
					React.createElement(
						'div',
						{ className: 'primary_selectors' },
						React.createElement(
							'ul',
							null,
							React.createElement(
								'li',
								{ className: this.props.view == 'planet' ? 'current' : '' },
								React.createElement(
									'a',
									{ className: 'planet', onClick: this.onClickPlanet },
									'Planet'
								)
							),
							React.createElement(
								'li',
								{ className: this.props.view == 'system' ? 'current' : '' },
								React.createElement(
									'a',
									{ className: 'solar_system', onClick: this.onClickSystem },
									'System'
								)
							)
						)
					),
					this.getCompareOptions(),
					React.createElement(
						'div',
						{ className: 'mobile_info_container' },
						React.createElement(
							'div',
							{ className: 'viewer_text_area' },
							React.createElement('div', { className: 'expander' }),
							React.createElement(
								'header',
								null,
								React.createElement(
									'h1',
									{ className: 'media_feature_title planet_name' },
									this.props.feature ? this.props.feature.title : ''
								)
							),
							React.createElement(
								'div',
								{ className: 'description planet_description' },
								this.props.feature ? this.props.feature.description : ''
							),
							React.createElement(
								'footer',
								null,
								React.createElement(
									'a',
									{ className: 'view_more overlay_link', href: 'javascript:void(0)' },
									'More',
									React.createElement(
										'div',
										{ className: 'icon' },
										React.createElement('div', { className: 'plus_icon' })
									)
								)
							)
						)
					)
				),
				React.createElement(
					'div',
					{ className: 'tertiary_selectors' },
					React.createElement(
						'div',
						{ className: 'mobile_menu_selector ' + (this.state.mobile_open ? 'open' : '') },
						React.createElement(
							'div',
							{ className: 'menu_item back_to_menu_btn', onClick: this.returnToGrid },
							React.createElement('span', { className: 'back_to_menu_icon icon' })
						),
						React.createElement(
							'div',
							{ className: 'menu_item info_btn', onClick: this.onMobileInfo },
							React.createElement('span', { className: 'icon' })
						),
						React.createElement(
							'div',
							{ className: 'menu_item options_btn', onClick: this.onMobileOptions },
							React.createElement('span', { className: 'icon' })
						)
					)
				),
				React.createElement(
					'div',
					{ className: 'fullscreen_options' },
					React.createElement(Fullscreen, { is_webgl_enabled: this.props.is_webgl_enabled, app_selector: '#eox_app' })
				)
			);
		}
	}
});
var SlideshowBrandArea = createReactClass({
  render: function () {
    return React.createElement(
      "div",
      { className: "view_all_brand_area", style: this.props.view_all ? { maxWidth: "344px" } : { maxWidth: "262px" } },
      React.createElement(
        "div",
        { className: "brand_1" },
        React.createElement("a", { className: "nasa_logo", href: "https://www.nasa.gov", target: "blank", title: "visit nasa.gov" })
      ),
      React.createElement(
        "div",
        { className: "brand_2" },
        React.createElement(
          "div",
          { className: "site_logo", style: { height: "100%" } },
          React.createElement(
            "a",
            { id: "site_logo", href: "/", title: "Exoplanet Exploration Home" },
            "Exoplanet Exploration"
          )
        )
      ),
      React.createElement("img", { className: "print_only print_logo", src: "/assets/logo_nasa_trio_white@2x.png", alt: "" })
    );
  }
});
var StellarDistance = createReactClass({
	miles_per_parsec: 1.917e+13,
	getInitialState: function () {
		return {
			speed: 60,
			time: 0,
			time_units: 'Billion Years',
			current_selection: 'auto',
			value_string: ""
		};
	},

	componentDidMount: function () {
		this.changeSpeed(this.state.speed, this.state.current_selection);
	},

	changeRate: function (e) {
		var speed = parseInt(e.currentTarget.value);
		this.changeSpeed(speed, this.state.current_selection);
	},

	clickQuickSelect: function (e) {
		var speed = e.currentTarget.getAttribute('data-speed');
		var selection = e.currentTarget.getAttribute('data-selection');
		this.changeSpeed(speed, selection);
	},
	getTimeAndUnits: function (hours) {
		var time_arr = undefined;
		var year = 8766;
		if (hours < 24) {
			time_arr = [hours, 'Hours'];
		} else if (hours < 24 * 7) {
			time_arr = [hours / 24, 'Days'];
		} else if (hours < year) {
			time_arr = [hours / 168, 'Weeks'];
		} else if (hours < year * 1000) {
			time_arr = [hours / year, 'Years'];
		} else if (hours < year * 1e6) {
			time_arr = [hours / (year * 1000), 'Thousand years'];
		} else if (hours < year * 1e9) {
			time_arr = [hours / (year * 1e6), 'Million years'];
		} else if (hours < year * 1e12) {
			time_arr = [hours / (year * 1e9), 'Billion years'];
		} else {
			time_arr = [hours / (year * 1e12), 'Trillion years'];
		}
		return time_arr;
	},

	getNumberUnits: function () {
		if (this.state.speed >= 1000000) {
			return "Million miles per hour";
		} else if (this.state.speed >= 1000) {
			return "Thousand miles per hour";
		} else {
			return "Miles per hour";
		}
	},

	changeSpeed: function (speed, selection) {
		var num_miles = parseFloat(this.props.parsecs) * this.miles_per_parsec;
		var hours = num_miles / speed;
		var time_arr = this.getTimeAndUnits(hours);
		this.setState({ speed: speed, time_units: time_arr[1], time: Math.round(time_arr[0]), current_selection: selection });
	},

	render: function () {
		var num = "";
		var val_str = "";
		if (this.state.speed >= 1000000) {
			num = (this.state.speed / 1000000).toString().slice(0, 3);
			val_str = "million";
		} else if (this.state.speed >= 1000) {
			num = (this.state.speed / 1000).toString().slice(0, 3);
			val_str = "thousand";
		} else {
			num = this.state.speed.toString().slice(0, 3);
		}

		return React.createElement(
			'div',
			{ className: 'stellar_distance' },
			React.createElement(
				'header',
				null,
				React.createElement(
					'div',
					{ className: 'module_title' },
					'How long to Travel Here from Earth?'
				)
			),
			React.createElement(
				'article',
				null,
				React.createElement(
					'div',
					{ className: 'col' },
					React.createElement(
						'div',
						{ className: 'title' },
						'TRAVEL SPEED'
					),
					React.createElement(
						'div',
						{ className: 'datum' },
						React.createElement(AnimatedNumber, { value: parseInt(num), speed: 1000, useLocaleString: true, initialValue: 60 })
					),
					React.createElement(
						'div',
						{ className: 'units' },
						this.getNumberUnits()
					)
				),
				React.createElement(
					'div',
					{ className: 'col' },
					React.createElement(
						'div',
						{ className: 'title' },
						'TRAVEL TIME'
					),
					React.createElement(
						'div',
						{ className: 'datum' },
						React.createElement(AnimatedNumber, { value: this.state.time, speed: 1000 })
					),
					React.createElement(
						'div',
						{ className: 'units' },
						this.state.time_units
					)
				),
				React.createElement('input', { style: { "display": "none" }, className: 'speed', type: 'number', value: this.state.speed, min: '0', max: '670616629', step: '100', onChange: this.changeRate }),
				React.createElement(
					'div',
					{ className: 'quick_selections' },
					React.createElement(
						'div',
						{ className: 'selection auto ' + (this.state.current_selection == 'auto' ? 'current' : '') + ' ', onClick: this.clickQuickSelect, 'data-speed': '60', 'data-selection': 'auto' },
						React.createElement('div', { className: 'icon' }),
						React.createElement(
							'span',
							{ className: 'icon_label' },
							'AUTO'
						)
					),
					React.createElement(
						'div',
						{ className: 'selection train ' + (this.state.current_selection == 'train' ? 'current' : '') + ' ', onClick: this.clickQuickSelect, 'data-speed': '120', 'data-selection': 'train' },
						React.createElement('div', { className: 'icon' }),
						React.createElement(
							'span',
							{ className: 'icon_label' },
							'BULLET TRAIN'
						)
					),
					React.createElement(
						'div',
						{ className: 'selection jet ' + (this.state.current_selection == 'jet' ? 'current' : '') + ' ', onClick: this.clickQuickSelect, 'data-speed': '600', 'data-selection': 'jet' },
						React.createElement('div', { className: 'icon' }),
						React.createElement(
							'span',
							{ className: 'icon_label' },
							'Jet'
						)
					),
					React.createElement(
						'div',
						{ className: 'selection juno ' + (this.state.current_selection == 'voyager' ? 'current' : '') + ' ', onClick: this.clickQuickSelect, 'data-speed': '38000', 'data-selection': 'voyager' },
						React.createElement('div', { className: 'icon' }),
						React.createElement(
							'span',
							{ className: 'icon_label' },
							'Voyager'
						)
					),
					React.createElement(
						'div',
						{ className: 'selection light ' + (this.state.current_selection == 'light' ? 'current' : '') + ' ', onClick: this.clickQuickSelect, 'data-speed': '670616629', 'data-selection': 'light' },
						React.createElement('div', { className: 'icon' }),
						React.createElement(
							'span',
							{ className: 'icon_label' },
							'Light Speed'
						)
					)
				)
			)
		);
	}
});
var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SvgIcon = (function (_React$Component) {
	_inherits(SvgIcon, _React$Component);

	function SvgIcon(props) {
		_classCallCheck(this, SvgIcon);

		_get(Object.getPrototypeOf(SvgIcon.prototype), "constructor", this).call(this, props);
		this.state = {
			unique_id: "svg-icon-label-" + this.getUniqueID()
		};
	}

	// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random

	_createClass(SvgIcon, [{
		key: "getRandomInt",
		value: function getRandomInt(min, max) {
			min = Math.ceil(min);
			max = Math.floor(max);
			return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
		}
	}, {
		key: "getUniqueID",
		value: function getUniqueID() {
			// https://stackoverflow.com/questions/1117584/generating-guids-in-ruby#answer-1126031
			// https://gist.github.com/emacip/b28ba7e9203a38d440e23c38586c303d
			// >> rand(36**8).to_s(36)
			// => "uur0cj2h"
			return this.getRandomInt(0, Math.pow(36, 8)).toString(36);
		}
	}, {
		key: "render",
		value: function render() {
			if (this.props.label) {
				// The <foreignObject/> element is useful to software like
				// screen readers, and browsers that dont understand SVG:
				// http://davidensinger.com/2013/04/inline-svg-with-png-fallback/
				return React.createElement(
					"svg",
					{ width: "21", height: "21", className: "svg_icon", "aria-labelledby": this.state.unique_id },
					React.createElement(
						"switch",
						null,
						React.createElement("use", { xlinkHref: "#icon_" + this.props.symbol }),
						React.createElement(
							"foreignObject",
							{ id: this.state.unique_id },
							this.props.label
						)
					)
				);
			} else {
				// If the icon is purely decorative, its okay to leave out
				// the <foreignObject/> element.
				return React.createElement(
					"svg",
					{ width: "24", height: "24", className: "svg_icon" },
					React.createElement("use", { xlinkHref: "#icon_" + this.props.symbol })
				);
			}
		}
	}]);

	return SvgIcon;
})(React.Component);






































